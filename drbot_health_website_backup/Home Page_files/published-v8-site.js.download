/*! For license information please see published-v8-site.js.LICENSE.txt */
(()=>{var e={51047:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r={_showNames:false,setShowNames:function e(t){this._showNames=t},getShowNames:function e(){return this._showNames}};var n=t["default"]=r},78110:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=a;var n=i(r(82754));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){e.factory("addRowServices",(function(e){return{injectAddRowButtons:function t(r){var i=Object.assign({templateRenderer:e.TemplateRenderer},r);return(0,n.default)(i)}}}));return e}},82754:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e){return o(e)||a(e)||i(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function o(e){if(Array.isArray(e))return s(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e){var t=window.frames.siteFrame.document;var n=r(t.querySelectorAll("#page-zones__main > .js-widget"));var i=e.templateRenderer;if(0===n.length){d(t.getElementById("page-zones__main"),i);return}n.forEach((function(e,t){if(0===t){u(e,i);c(e,i);return}c(e,i)}))}function u(e,t){var r=t.render("row_add_button",{sibling:e.getAttribute("data-uniqueid"),position:"above"});e.insertAdjacentHTML("beforebegin",r)}function c(e,t){var r=t.render("row_add_button",{sibling:e.getAttribute("data-uniqueid"),position:"below"});e.insertAdjacentHTML("afterend",r)}function d(e,t){var r=t.render("row_add_button",{parent:e.getAttribute("data-uniqueid")});e.insertAdjacentHTML("afterbegin",r)}var f=t["default"]=l},63938:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.model=t}i(e,[{key:"storeCurrentState",value:function e(){this.initialState=this.model.toJSON()}},{key:"restoreInitialState",value:function e(){this.model.set(this.initialState)}}]);return e}();var o=t["default"]=a},83541:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(69464));var i=r(24300);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function l(e,t,r){t&&s(e.prototype,t);r&&s(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.envData,s=r.siteData,l=r.userData;o(this,e);this._base=t.App.brand;this._featureConfigBase=t.App.frontEndBucket.featureConfig;this._frontEndBucket=t.App.frontEndBucket;this._mainWindow=t;this._trans=t.App.i18n.preboarding;var u="1"===this._base.capabilities.publishUpgradeToTemplatePicker;var f={tracking:"0"!==this._base.capabilities.mixPanelTracking,publishUpgradeToTemplatePicker:u,googleServices:1!==parseInt(this._base.capabilities.disableGoogleServices,10),fileUpload:1===parseInt(this._base.capabilities.enableFileUpload,10),enableIntercom:1===parseInt(this._base.capabilities.enableIntercom,10),enableAppcues:1===parseInt(this._base.capabilities.enableAppcues,10),enableFilestack:1===parseInt(this._base.capabilities.enableFilestack,10),enableFilestackClouddrive:1===parseInt(this._base.capabilities.enableFilestackClouddrive,10),enableFilestackFacebook:1===parseInt(this._base.capabilities.enableFilestackFacebook,10),enableFilestackInstagram:1===parseInt(this._base.capabilities.enableFilestackInstagram,10),enableFilestackOnedrive:1===parseInt(this._base.capabilities.enableFilestackOnedrive,10),enableFilestackPexels:"pexels"===this._frontEndBucket.stockImageProvider,enableFilestackPicasa:1===parseInt(this._base.capabilities.enableFilestackPicasa,10),enableFilestackUnsplash:1===parseInt(this._base.capabilities.enableFilestackUnsplash,10),enableSitePolicyPages:1===parseInt(this._base.capabilities.enableSitePolicyPages,10),hideUpgradeInUnableToPublish:1===parseInt(this._base.capabilities.hideUpgradeInUnableToPublish,10),blockPublishForUnverifiedEmail:1===parseInt(this._base.capabilities.blockPublishForUnverifiedEmail,10)};var p=t.App.user.owner.externalSubscriptionURL;var g=this._base.externalSubscriptionLink||"";var h={brandName:this._base.name,brandDomain:this._base.domain,brandRef:this._base.ref,displayName:this._base.displayName,logoImageURL:this._base.logoImageURL,publishDomain:this._base.publishDomain,externalUpgradeUrl:g,resellerUpgradeUrl:p,brandType:t.App.user.owner.type,googleMapsEmbedKey:this._base.googleMapsEmbedKey,preboardingSettings:this._base.preboardingSettings||{},loginUrl:this._base.loginURL,supportEmail:c(this._base.supportEmail,this._mainWindow.App.user.owner.resellerSupportEmail),upgradeUrl:d(a,s,l,p,g,u),capabilities:f,cookieWarningSetting:this._base.cookieWarningSetting,cookieWarningUrl:this._base.cookieWarningUrl,featureConfig:this._featureConfigBase,skipChooseContentSet:this._frontEndBucket.skipChooseContentSet};n.default.dispatch((0,i.setBrand)(h))}l(e,[{key:"get",value:function e(t){var r=this["get".concat(t[0].toUpperCase()).concat(t.substring(1))];if(r)return r();return n.default.getState().brand[t]}},{key:"has",value:function e(t){return n.default.getState().brand.capabilities[t]}},{key:"getTranslation",value:function e(t){var r="".concat(n.default.getState().brand.brandRef,"-").concat(t);if(this._trans[r])return this._trans[r];return null}}]);return e}();function c(e,t){if(void 0!==t&&null!==t&&t.length)return t;return e}function d(e,t,r,n,i,a){var o=f(e);var s=p(n,i,t,r);if(a||!s)return o;return s}function f(e){return"".concat(e.get("protocol"),"://account.").concat(e.get("domain"),"/subscription")}function p(e,t,r,n){var i=null;var a=e;a&&0!==a.length||(a=t);a&&a.length>0&&(i=g(a,r,n));return i}function g(e,t,r){var n=-1!==e.indexOf("?")?"&":"?";return"".concat(e).concat(n,"accountHolderRef=").concat(r.get("ref"),"&siteRef=").concat(t.get("ref"))}var h=t["default"]=u},2771:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(69464));var i=r(18687);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function l(e,t,r){t&&s(e.prototype,t);r&&s(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;o(this,e);var r=t.App.frontEndBucket.siteContentSet;n.default.dispatch((0,i.setContentSetData)(r))}l(e,[{key:"all",value:function e(){return n.default.getState().contentSet}},{key:"get",value:function e(t){return n.default.getState().contentSet[t]}}]);return e}();var c=t["default"]=u},61166:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=l(r(69464));var a=r(31002);var o=r(32686);var s=l(r(55862));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function d(e,t,r){t&&c(e.prototype,t);r&&c(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}function g(e){var t=m();return function r(){var n=y(e),i;if(t){var a=y(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return h(this,i)}}function h(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return y(e)}var b=function(e){f(r,e);var t=g(r);function r(){u(this,r);return t.apply(this,arguments)}d(r,[{key:"getDefaultLanguage",value:function e(){return i.default.getState().language.defaultLanguage.language}},{key:"getSiteLanguages",value:function e(){return i.default.getState().language.siteLanguages}},{key:"getSiteRef",value:function e(){return i.default.getState().site.ref}},{key:"getSiteDefaultLanguage",value:function e(){return i.default.getState().language.defaultLanguage}},{key:"extendProperties",value:function e(){var t=this.mainWindow.Editor.Site.Dom.window;var r=this.mainWindow.App.session.get("siteRef");var n=this.mainWindow.App.sites.get(r);Object.assign(this._properties,{templateData:w(t.Server.templateData),templateStylePreprocessorVariableWidgets:w(t.Server.templateStylePreprocessorVariableWidgets),templateName:t.Server.templateData.name,ref:r,app:t.Server.app,blog:t.Server.plugins.blog,ecommerce:t.Server.plugins.ecommerce,connectBookings:t.Server.connect.bookings,pageTree:this.mainWindow.App.pageTree,siteLanguagesPageTree:App.siteLanguagesPageTree,globalValues:App.frontEndBucket.siteGlobalValues,policyPageData:this.getEnabledPolicyPagesDate()});i.default.dispatch((0,a.setSiteRef)(r));i.default.dispatch((0,a.setPrimaryDomain)(this.mainWindow.Editor.Site.primaryDomain));i.default.dispatch((0,a.setEnableRows)(n.get("enableRows")));i.default.dispatch((0,a.setEditorVersion)(n.get("editorVersion")));i.default.dispatch((0,a.setEmailVerification)(n.get("emailVerification")));i.default.dispatch((0,a.setGlobalValues)(App.frontEndBucket.siteGlobalValues));n.get("siteDefaultLanguage")&&i.default.dispatch((0,o.setDefaultLanguage)(n.get("siteDefaultLanguage")));i.default.dispatch((0,o.setSiteLanguages)(n.get("siteLanguages")))}},{key:"getWidgetData",value:function e(){return Editor.Site.Dom.window.Server.widgetsOnPage}},{key:"getEnableRows",value:function e(){return"ten"===i.default.getState().site.editorVersion}},{key:"getEnabledPolicyPagesDate",value:function e(){var t=this.mainWindow.App.frontEndBucket.siteGlobalValues;var r=this.mainWindow.App.frontEndBucket.sitePolicyPageData;var n=[];var i=t.find((function(e){return"enablePolicyPages"===e.name}));var a=t.find((function(e){return"enableCookiePolicyPage"===e.name}));var o=t.find((function(e){return"enableLegalPolicyPage"===e.name}));var s=t.find((function(e){return"enableAccessibilityPolicyPage"===e.name}));var l="undefined"!==typeof i&&i.value;var u="undefined"!==typeof a&&a.value;var c="undefined"!==typeof o&&o.value;var d="undefined"!==typeof s&&s.value;r.forEach((function(e){"privacy"===e.policyType&&l&&n.push(e);"cookie"===e.policyType&&u&&n.push(e);"legal"===e.policyType&&c&&n.push(e);"accessibility"===e.policyType&&d&&n.push(e)}));return n}}]);return r}(s.default);function w(e){return JSON.parse(JSON.stringify(e))}var _=t["default"]=b},27121:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;var n=arguments.length>1?arguments[1]:void 0;r(this,e);this.mainWindow=t;this.siteRef=t.App.session.get("siteRef");this.SiteGlobalValuesHelper=n;this._properties={siteLanguageMenuSettings:App.frontEndBucket.siteLanguageMenuSettings}}i(e,[{key:"get",value:function e(t){switch(t){case"siteLanguages":case"siteDefaultLanguage":return this.mainWindow.App.sites.get(this.siteRef).get(t);case"siteLanguageMenuSettings":return this.SiteGlobalValuesHelper.getValue(t,this._properties[t]);case"siteCurrentLanguage":return this.mainWindow.siteFrame.Server.siteCurrentLanguage;default:return this._properties[t]}}}]);return e}();var o=t["default"]=a},54949:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(69464));var i=r(43276);var a=r(32686);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function u(e,t,r){t&&l(e.prototype,t);r&&l(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;s(this,e);var r=t.App;var o=r.frontEndBucket;var l={codeVersion:o.codeVersion,mixpanelEnv:o.mixpanelEnv,mixpanelToken:r.mixpanelToken,stockImageProvider:o.stockImageProvider,customWidgetsDomain:o.customWidgetsDomain,errors:o.errors,allGoogleFonts:o.allGoogleFonts,googleMapsEmbedKey:o.googleMapsEmbedKey,protocol:p(t),domain:g(t),apiProxyBaseUrl:d(t),csrfToken:f(t),siteSubdomain:h(t),siteRef:v(t),languageCode:o.languageCode,languages:o.languages,localisedLanguages:o.localisedLanguages,flags:o.flags,rows:o.rows,rowLayouts:o.rowLayouts,siteColorSet:o.siteColorSet,intercomAppId:o.intercomAppId||"",intercomUserHash:y(t),manageDomain:m(t),maxFileUploadBytes:o.maxFileUploadBytes,V10CompatibilityMode:o.V10CompatibilityMode};n.default.dispatch((0,a.setLocalisedLanguages)(o.localisedLanguages));n.default.dispatch((0,i.setEnvData)(l))}u(e,[{key:"get",value:function e(t){return n.default.getState().env[t]}}]);return e}();function d(e){if(e.App.session)return e.App.session.get("apiProxyBaseUrl");return e.App.frontEndBucket.apiProxyBaseUrl}function f(e){if(e.App.session)return e.App.session.get("csrfToken");return e.App.frontEndBucket.csrfToken}function p(e){if(e.App.brand&&"inherit"!==e.App.brand.protocol)return e.App.brand.protocol;if(e.App.session)return e.App.session.get("protocol");return e.App.frontEndBucket.protocol}function g(e){if(e.App.session)return e.App.session.get("domain");return e.App.frontEndBucket.domain}function h(e){if(e.App.session)return e.App.session.get("siteSubdomain");return e.App.frontEndBucket.siteSubdomain}function v(e){if(e.App.session)return e.App.session.get("siteRef");return e.App.frontEndBucket.siteRef||e.App.site.ref}function m(e){return e.App.manageDomain||"manage"}function y(e){return e.App.frontEndBucket.intercomUserHash}var b=t["default"]=c},1979:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;var n=arguments.length>1?arguments[1]:void 0;var i=arguments.length>2?arguments[2]:void 0;r(this,e);var a=i.has("enableRows")||n.getEnableRows();this._properties={enableRows:a,multiLanguageEditor:i.has("multiLanguageEditor"),enableDesignMode:i.has("enableDesignMode"),formEmailVerification:i.has("formEmailVerification")}}i(e,[{key:"get",value:function e(t){return this._properties[t]}}]);return e}();var o=t["default"]=a},53798:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;r(this,e);this._properties=t.App.frontEndBucket.languages}i(e,[{key:"all",value:function e(){return this._properties}},{key:"get",value:function e(t){return this._properties[t]}},{key:"has",value:function e(t){return this._properties[t]}}]);return e}();var o=t["default"]=a},58918:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=o(r(69464));var a=o(r(55862));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function u(e,t,r){t&&l(e.prototype,t);r&&l(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}function f(e){var t=h();return function r(){var n=v(e),i;if(t){var a=v(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return p(this,i)}}function p(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return v(e)}var m=function(e){c(r,e);var t=f(r);function r(){s(this,r);return t.apply(this,arguments)}u(r,[{key:"getSiteRef",value:function e(){return this._properties.ref}},{key:"getDefaultLanguage",value:function e(){return i.default.getState().language.defaultLanguage.language}},{key:"extendProperties",value:function e(){var t=this.mainWindow.App.controllerData||{};var r=t.cookiePolicyLocation||{};if("undefined"===typeof this.mainWindow.App.site)return;Object.assign(this._properties,{ref:this.mainWindow.App.site.ref,primaryDomain:this.mainWindow.App.site.primaryDomain.domainName,protocol:this.mainWindow.App.site.protocol,profileRef:this.mainWindow.App.site.profileRef,cookieWarning:this.mainWindow.App.site.cookieWarning,cookieWarningUrl:r.externalLink,activePolicyType:t.activePolicyType,useBrandPolicyContent:t.useBrandPolicyContent,policyPageEnabled:t.policyPageEnabled,policyPageData:t.policyPage,cookiePolicyLocation:r.type})}}]);return r}(a.default);var y=t["default"]=m},56768:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=o(r(69464));var a=o(r(55862));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function u(e,t,r){t&&l(e.prototype,t);r&&l(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}function f(e){var t=h();return function r(){var n=v(e),i;if(t){var a=v(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return p(this,i)}}function p(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return v(e)}var m=function(e){c(r,e);var t=f(r);function r(){s(this,r);return t.apply(this,arguments)}u(r,[{key:"getSiteRef",value:function e(){return this._properties.ref}},{key:"getDefaultLanguage",value:function e(){return i.default.getState().language.defaultLanguage.language}},{key:"extendProperties",value:function e(){Object.assign(this._properties,{ref:this.mainWindow.App.session.get("siteRef")})}}]);return r}(a.default);var y=t["default"]=m},33494:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;r(this,e);this._properties={plugins:t.App.plugins}}i(e,[{key:"has",value:function e(t){return-1!==this._properties.plugins.indexOf(t)}}]);return e}();var o=t["default"]=a},69423:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a="ecwid";var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;var n=arguments.length>1?arguments[1]:void 0;r(this,e);this.mainWindow=t;this.userDataProvider=n.userDataProvider;this.featureFlagDataProvider=n.featureFlagDataProvider;this.pluginsDataProvider=n.pluginsDataProvider}i(e,[{key:"getRowGroups",value:function e(){var t=this.mainWindow.App.frontEndBucket.rowGroups;return this._normaliseGroupAndRow(t)}},{key:"_normaliseGroupAndRow",value:function e(t){this._normaliseStoreGroupAndRow(t);this._normaliseBookingsGroupAndRow(t);return t}},{key:"_normaliseStoreGroupAndRow",value:function e(t){this._shouldRemoveStoreWidgets()?this._removeStoreWidgets(t):this._removeEcwidWidget(t)}},{key:"_normaliseBookingsGroupAndRow",value:function e(t){this._shouldRemoveBookingsGroup()&&this._removeBookingsGroup(t)}},{key:"_shouldRemoveStoreWidgets",value:function e(){if(!this._isInV10())return false;return this._isEcwidEnabled()}},{key:"_shouldRemoveBookingsGroup",value:function e(){if(!this._isInV10())return false;return!this._isConnectBookingsEnabled()}},{key:"_isInV10",value:function e(){return"ten"===this.userDataProvider.get("productVersion")}},{key:"_isEcwidEnabled",value:function e(){return this.userDataProvider.has("enableEcwid")}},{key:"_isConnectBookingsEnabled",value:function e(){return this.pluginsDataProvider.has("connect-bookings")}},{key:"_removeStoreWidgets",value:function e(t){"store"in t&&(t.store.rows=t.store.rows.filter((function(e){return e.includes(a)})))}},{key:"_removeBookingsGroup",value:function e(t){"bookings"in t&&delete t.bookings}},{key:"_removeEcwidWidget",value:function e(t){"store"in t&&(t.store.rows=t.store.rows.filter((function(e){return!e.includes(a)})))}}]);return e}();var s=t["default"]=o},55862:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;r(this,e);this.mainWindow=t;this._properties={};this.extendProperties()}i(e,[{key:"get",value:function e(t){return this._properties[t]}},{key:"extendProperties",value:function e(){}}]);return e}();var o=t["default"]=a},95558:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(69464));var i=r(98850);var a=o(r(37977));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function f(e,t,r){t&&d(e.prototype,t);r&&d(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;c(this,e);var r=t.App.user;var o={ref:r.ref,email:r.email,emailVerified:r.emailVerified,subscriptionPackageRef:r.subscriptionPackageRef,productVersion:r.productVersion,languageCode:r.languageCode,subscriptionPackageName:"",dateCreated:r.created&&r.created.date?r.created.date:"",sites:t.App.sites?(0,a.default)(t.App.sites):[],accountHolderMetadata:r.metadata};t.App.package&&t.App.package.name&&(o.subscriptionPackageName=t.App.package.name);var s={multiLanguageEditor:t.App.frontEndBucket&&t.App.frontEndBucket.multiLanguageEditor,disableV8SiteAndPageScripts:0!==parseInt(r.capabilities.disableV8SiteAndPageScripts,10),seoAndRedirects:0!==parseInt(r.capabilities.seoAndRedirects,10),multiLanguageLimit:parseInt(r.capabilities.multiLanguageLimit,10),enableDragAndDropWidgets:parseInt(r.capabilities.enableDragAndDropWidgets,10),formEmailVerification:r.enabledFeatureFlags&&r.enabledFeatureFlags.form_email_verification,imageEditing:0!==parseInt(r.capabilities.imageEditing,10),enableEcwid:0!==parseInt(r.capabilities.enableEcwid,10),enableStandaloneMode:0!==parseInt(r.capabilities.enableStandaloneMode,10)};var u=l(l({},o),{},{capabilities:s});n.default.dispatch((0,i.setUserData)(u))}f(e,[{key:"all",value:function e(){return n.default.getState().user}},{key:"get",value:function e(t){return n.default.getState().user[t]}},{key:"has",value:function e(t){return n.default.getState().user.capabilities[t]}}]);return e}();var g=t["default"]=p},89479:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=m;var n=v(r(83541));var i=v(r(61166));var a=v(r(58918));var o=v(r(56768));var s=v(r(95558));var l=v(r(54949));var u=v(r(4831));var c=v(r(53798));var d=v(r(27121));var f=v(r(1979));var p=v(r(2771));var g=v(r(69423));var h=v(r(33494));function v(e){return e&&e.__esModule?e:{default:e}}function m(e){var t=(0,u.default)();e.factory("BrandDataProvider",(function(e){return new n.default(t,{envData:e.EnvDataProvider,siteData:e.SiteDataProvider,userData:e.UserDataProvider})}));e.factory("SiteDataProvider",(function(){var e;e=t.Editor&&t.Editor.Site?i.default:t.App.session?o.default:a.default;return new e(t)}));e.factory("UserDataProvider",(function(){return new s.default(t)}));e.factory("ContentSetDataProvider",(function(){return new p.default(t)}));e.factory("EnvDataProvider",(function(){return new l.default(t)}));e.factory("LanguageDataProvider",(function(){return new c.default(t)}));e.factory("editorSiteLanguageDataProvider",(function(e){return new d.default(t,e.SiteGlobalValuesHelper)}));e.factory("featureFlagDataProvider",(function(e){return new f.default(t,e.SiteDataProvider,e.UserDataProvider)}));e.factory("PluginsDataProvider",(function(){return new h.default(t)}));e.factory("RowGroupProvider",(function(e){return new g.default(t,{userDataProvider:e.UserDataProvider,featureFlagDataProvider:e.featureFlagDataProvider,pluginsDataProvider:e.PluginsDataProvider})}));return e}},5558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=r;function r(){return BaseKit.Static.fonts}},4831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=r;function r(){var e=window;try{var t=document.getElementById("siteFrame");t&&t.classList.contains("js-site-frame")&&(e=window.parent)}catch(e){console.log(e)}return e}},78281:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=l;var n=o(r(69464));var i=o(r(524));var a=r(7794);function o(e){return e&&e.__esModule?e:{default:e}}var s=function e(t){return function(e){var r=e.ref;return"".concat(r)==="".concat(t)}};function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r=t?t.getState():n.default.getState();var o=r.language.current;var l=r.language.defaultLanguage.language;var u=""===o||o===l?r.page.pages:r.page.languages[o].pages;return new i.default((0,a.formatPages)(u).find(s(e)))}},11869:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=r;function r(){return BaseKit.Globals.profile}},57789:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=r;function r(){return App.session}},31170:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=y(r(41351));var i=y(r(89479));var a=y(r(85349));var o=y(r(12655));var s=y(r(66796));var l=y(r(6388));var u=y(r(37754));var c=y(r(11530));var d=y(r(54310));var f=y(r(96209));var p=y(r(97115));var g=y(r(54285));var h=y(r(34110));var v=y(r(78110));var m=y(r(30196));function y(e){return e&&e.__esModule?e:{default:e}}var b=[i.default,a.default,o.default,f.default,g.default,s.default,c.default,d.default,l.default,u.default,p.default,h.default,v.default,m.default];var w=b.reduce((function(e,t){return t(e)}),new n.default);var _=t["default"]=w},11843:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(55372);var i=r(1904);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=function(){function e(t){a(this,e);this.dropAreaTimeout=null;this.draggable=t.draggable;this.iframe=t.iframe;this.$iframe=$(this.iframe);this.iFrameOffset={};this.highlighter=t.highlighter;this.context=t.context;this.userOnDragStart=t.onDragStart||function(){return false};this.userOnDragMove=t.onDragMove||function(){return false};this.userOnDragEnd=t.onDragEnd||function(){return false};this.iframeWindow=this.iframe.contentWindow?this.iframe.contentWindow:this.iframe.contentDocument.defaultView;this.iframeBody=$(this.iframeWindow.document.body)[0];this.highlightWidthString="15px";this.highlightWidth=15;this.maximumColumnLimit=4}s(e,[{key:"load",value:function e(){return{draggableObject:this.draggable,helper:void 0===this.draggable.helper||this.draggable.helper,scroll:true,frameEl:this.iframe,context:this.context||"frame",scrollable:this.iframe,scrollSensitivity:100,draggabilly:this.draggable.handle?{handle:this.draggable.handle}:{},onStart:this.onStart.bind(this),onDrag:this.onDrag.bind(this),onEnd:this.onEnd.bind(this),onDragEndAnimation:this.onDragEndAnimation.bind(this),droppableLeaningAllowed:this.droppableLeaningAllowed.bind(this)}}},{key:"onStart",value:function e(t){var r=this;var n;this.$iframe.css("pointer-events","none");this.iFrameOffset=this.$iframe.offset();if((0,i.isIE)()||(0,i.isEdge)()){n=document.createElement("div");$(n).addClass("drag-layer").css({top:"".concat(this.iFrameOffset.top,"px"),position:"absolute",left:"".concat(this.iFrameOffset.left,"px"),width:"".concat(this.$iframe.width(),"px"),height:"".concat(this.$iframe.height(),"px"),"z-index":1});this.$iframe.parent().append(n);$(this.iframe).css("z-index",-1)}if((0,i.iOSFixRequired)()){var a=document.querySelector(".js-site-preview");var o=a.scrollTop;setTimeout((function(){r.iframe.style.position="absolute";r.iframe.style.top=0;r.iframe.style.left=0;window.scrollTo(0,o)}),200)}this.iframeBody.classList.add("drag-active");document.body.classList.add("drag-active");setTimeout((function(){document.body.classList.remove("show-sidebar");t.draggable=r.draggable;r.userOnDragStart(t)}),100)}},{key:"onDrag",value:function e(t){var r=null;var n;var i;var a;var o;var s;if(null!==t)switch(t.leaning){case"top":i=this.isColumnEmptySpace(t)||this.isMainZone(t)?"".concat(t.height,"px"):this.highlightWidthString;this.setDropIndicatorPosition(this.highlighter,t.x+t.scrollX,t.y+t.scrollY,"".concat(t.width,"px"),i);break;case"bottom":a=t.y+t.scrollY;if(this.isColumnEmptySpace(t)||this.isMainZone(t))i="".concat(t.height,"px");else{i=this.highlightWidthString;a+=t.height-this.highlightWidth}this.setDropIndicatorPosition(this.highlighter,t.x+t.scrollX,a,"".concat(t.width,"px"),i);break;case"left":if(this.isDroppableObjInColumn(t)&&!this.isInMainZone(t)){r=this.getElementBoundaries(t.el.parentNode);s=this.getElementBoundaries(t.el.parentNode.parentNode);this.setDropIndicatorPosition(this.highlighter,r.left+t.scrollX,s.top+t.scrollY,this.highlightWidthString,"".concat(s.height,"px"))}else{n=this.isMainZone(t)?"".concat(t.width,"px"):this.highlightWidthString;this.setDropIndicatorPosition(this.highlighter,t.x+t.scrollX,t.y+t.scrollY,n,"".concat(t.height,"px"))}break;case"right":if(this.isDroppableObjInColumn(t)&&!this.isInMainZone(t)){r=this.getElementBoundaries(t.el.parentNode);s=this.getElementBoundaries(t.el.parentNode.parentNode);this.setDropIndicatorPosition(this.highlighter,r.left+t.scrollX+r.width-this.highlightWidth,s.top+t.scrollY,this.highlightWidthString,"".concat(s.height,"px"))}else{o=t.x+t.scrollX;if(this.isMainZone(t))n="".concat(t.width,"px");else{n=this.highlightWidthString;o+=t.width-this.highlightWidth}this.setDropIndicatorPosition(this.highlighter,o,t.y+t.scrollY,n,"".concat(t.height,"px"))}break}else this.setDropIndicatorPosition(this.highlighter,0,0,0,0);this.userOnDragMove(this.draggable)}},{key:"onEnd",value:function e(t){var r=this;var a=t.dropped;this.draggable.el.style.display="none";if(a&&this.draggable.wasMoved){clearTimeout(this.dropAreaTimeout);this.dropAreaTimeout=setTimeout((function(){r.iframeBody.classList.remove("drag-active");document.body.classList.remove("drag-active")}),500)}else{this.iframeBody.classList.remove("drag-active");document.body.classList.remove("drag-active")}this.$iframe.css("pointer-events","");if((0,i.isIE)()||(0,i.isEdge)()){$(".drag-layer").remove();$(this.iframe).css("z-index",0)}if((0,i.iOSFixRequired)()){this.$iframe.css({position:"",top:"",left:""});(0,i.isiOSTablet)()&&(0,n.hasOrientation)("landscape")&&$("body").css({height:""})}this.setDropIndicatorPosition(this.highlighter,0,0,0,0);t.draggable=this.draggable;this.userOnDragEnd(t)}},{key:"onDragEndAnimation",value:function e(){var t=document.querySelector(".js-move-drag");t&&(t.style.display="none");this.iframeWindow.document.querySelectorAll(".js-column-drop").forEach((function(e){e.classList.remove("highlight")}))}},{key:"droppableLeaningAllowed",value:function e(t){var r=t.getDroppableObject();if(this.isDroppableObjInColumn(r)&&this.isLeaningTopOrBottom(t))return true;return!this.isMaxColumnExceeded(r)}},{key:"isLeaningTopOrBottom",value:function e(t){return"top"===t.leaning||"bottom"===t.leaning}},{key:"isMaxColumnExceeded",value:function e(t){if(this.isDroppableObjInColumn(t)){var r=t.el.parentNode;var n=r.parentNode;if(n&&n.childElementCount===this.maximumColumnLimit)return true}return false}},{key:"isDroppableObjInColumn",value:function e(t){var r=t.el.parentNode;return r&&r.classList.contains("column")}},{key:"isColumnEmptySpace",value:function e(t){return t.el.classList.contains("js-column-drop")}},{key:"setDropIndicatorPosition",value:function e(t,r,n,i,a){0===i&&0===a?Object.assign(t.style,{top:0,left:0,width:0,height:0,display:"none"}):Object.assign(t.style,{top:"".concat(n,"px"),left:"".concat(r,"px"),width:i,height:a,display:"block"})}},{key:"getElementBoundaries",value:function e(t){return t.getBoundingClientRect()}},{key:"isInMainZone",value:function e(t){return"page-zones__main"===t.el.parentNode.id}},{key:"isMainZone",value:function e(t){return"page-zones__main"===t.el.id}}]);return e}();var u=t["default"]=l},55806:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(11843));var i=a(r(37265));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function l(e,t,r){t&&s(e.prototype,t);r&&s(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var u=function(){function e(t){o(this,e);this.featureFlagDataProvider=t.featureFlagDataProvider;this.userDataProvider=t.userDataProvider}l(e,[{key:"build",value:function e(t){var r=this.featureFlagDataProvider.get("enableRows");var a=this.userDataProvider.has("enableDragAndDropWidgets");var o=r&&a?new i.default(t):new n.default(t);return o.load()}}]);return e}();var c=t["default"]=u},10653:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.featureFlagDataProvider=t.featureFlagDataProvider;this.userDataProvider=t.userDataProvider}i(e,[{key:"isEligible",value:function e(t){var r=this.featureFlagDataProvider.get("enableRows");var n=this.userDataProvider.has("enableDragAndDropWidgets");if(r&&n)return this.isEligibleInCustomRowModel(t);if(this.featureFlagDataProvider.get("enableRows"))return this.isEligibleInRowModel(t);if(t.properties.fixed||t.properties.isZone)return false;return true}},{key:"isEligibleInRowModel",value:function e(t){var r="widget.row"===t.properties.type;var n="preheader"===t.properties.parentZone;var i="header"===t.properties.parentZone;var a="footer"===t.properties.parentZone;var o=true===t.properties.fixed;var s=i||a||n||o;if(!r)return false;if(r&&s)return false;return true}},{key:"isEligibleInCustomRowModel",value:function e(t){var r=this.isPreheader(t);var n=this.isHeader(t);var i=this.isFooter(t);var a=this.isMainZone(t);var o=true===t.properties.fixed;var s=n||i||r||o;if(s||a)return false;return true}},{key:"isMainZone",value:function e(t){return"main"===t.properties.name}},{key:"isPreheader",value:function e(t){return"preheader"===t.properties.parentZone||"preheader"===t.properties.name}},{key:"isHeader",value:function e(t){var r="header"===t.properties.parentZone;var e="header"===t.properties.name;return r||e}},{key:"isFooter",value:function e(t){var r="footer"===t.properties.parentZone;var e="footer"===t.properties.name;return r||e}}]);return e}();var o=t["default"]=a},37265:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=s(r(69464));var a=r(1904);var o=s(r(11843));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function c(e,t,r){t&&u(e.prototype,t);r&&u(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function d(){d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function e(t,r,n){var i=f(t,r);if(!i)return;var a=Object.getOwnPropertyDescriptor(i,r);if(a.get)return a.get.call(arguments.length<3?t:n);return a.value};return d.apply(this,arguments)}function f(e,t){while(!Object.prototype.hasOwnProperty.call(e,t)){e=b(e);if(null===e)break}return e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&g(e,t)}function g(e,t){g=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return g(e,t)}function h(e){var t=y();return function r(){var n=b(e),i;if(t){var a=b(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return v(this,i)}}function v(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function b(e){b=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return b(e)}var w=function(e){p(r,e);var t=h(r);function r(e){var n;l(this,r);n=t.call(this,e);n.changeHighlightWidth(16);n.isIE=(0,a.isIE)();n.scale=1;n.defaultOverlayPadding=6;n.draggableWidget=null;n.clonedDraggableWidget=null;return n}c(r,[{key:"load",value:function e(){return Object.assign(d(b(r.prototype),"load",this).call(this),{onStart:this.onStart.bind(this),onDrag:this.onDrag.bind(this),onEnd:this.onEnd.bind(this),dropIsAllowed:this.dropIsAllowed.bind(this),droppableLeaningAllowed:this.droppableLeaningAllowed.bind(this),normaliseTargetDroppable:this.normaliseTargetDroppable.bind(this)})}},{key:"onStart",value:function e(t){var n=this;if(this.isWidgetInRow()){document.querySelector("body").classList.add("widget-in-row-dragging");this.enableDraggableWidget();this.updateDraggableWidgetPosition(t.event)}else t.instance.element.classList.add("version-ten");d(b(r.prototype),"onStart",this).call(this,t);(0,a.iOSFixRequired)()&&setTimeout((function(){n.iframe.style.top="40px"}),200)}},{key:"onDrag",value:function e(t,n){this.isWidgetInRow()&&this.updateDraggableWidgetPosition(n);d(b(r.prototype),"onDrag",this).call(this,t)}},{key:"onEnd",value:function e(t){d(b(r.prototype),"onEnd",this).call(this,t);if(this.isWidgetInRow()){this.disableDraggableWidget(t.dropped);document.querySelector("body").classList.remove("widget-in-row-dragging")}else t.instance.element.classList.remove("version-ten")}},{key:"normaliseTargetDroppable",value:function e(t){this.hasReverseLayout(t)?"right"===t.leaning?t.leaning="left":"left"===t.leaning&&(t.leaning="right"):this.hasFlexColumnLayout(t)&&!this.isResponsiveColumns(t.getDroppableObject())&&("top"===t.leaning?t.leaning="left":"bottom"===t.leaning&&(t.leaning="right"));return t}},{key:"dropIsAllowed",value:function e(t){if(this.isWidgetInRow())return!this.isRowWidget(t);if(this.isRowMoveMode())return this.isRowWidget(t);return true}},{key:"droppableLeaningAllowed",value:function e(t){if(!t.leaning||!d(b(r.prototype),"droppableLeaningAllowed",this).call(this,t))return false;var n=t.getDroppableObject();if(this.isResponsiveColumns(n)&&this.isLeaningLeftOrRight(t))return false;if(this.hasFlexColumnLayout(t)&&(this.isLeaningLeftOrRight(t)||this.isRestrictedFlexColumnLeaning(t)))return false;if(this.isWidgetInRow())return true;return!(this.isRowWidget(n)&&this.isLeaningLeftOrRight(t))}},{key:"hasReverseLayout",value:function e(t){var r=t.el.closest(".js-row");return r&&r.classList.contains("row--layout-reverse")}},{key:"hasFlexColumnLayout",value:function e(t){var r=t.el.closest(".js-row");return r&&(r.classList.contains("row--layout-image-text-1c")||r.classList.contains("row--layout-image-text-2b"))}},{key:"isRestrictedFlexColumnLeaning",value:function e(t){var n=t.getDroppableObject();if(d(b(r.prototype),"isDroppableObjInColumn",this).call(this,n)&&d(b(r.prototype),"isMaxColumnExceeded",this).call(this,n))return true;if(!this.isResponsiveColumns(n)||!this.isWidgetInRow())return false;var i=this.draggableWidget.parentNode;var a=i.parentNode;if(a&&a.childElementCount===this.maximumColumnLimit&&d(b(r.prototype),"isLeaningTopOrBottom",this).call(this,t))return false;var o=i.classList.contains("column");if(a&&o&&d(b(r.prototype),"isLeaningTopOrBottom",this).call(this,t))return true;return false}},{key:"isRowWidget",value:function e(t){return t.model&&"widget.row"===t.model.widgetType||t.properties&&"widget.row"===t.properties.type}},{key:"isResponsiveColumns",value:function e(t){return t.isResponsiveColumns}},{key:"isLeaningLeftOrRight",value:function e(t){return"left"===t.leaning||"right"===t.leaning}},{key:"isWidgetInRow",value:function e(){return this.draggable.proxied&&this.draggable.proxied.el}},{key:"isRowMoveMode",value:function e(){return i.default.getState().site.isRowMoveMode}},{key:"changeHighlightWidth",value:function e(t){this.highlightWidthString="".concat(t,"px");this.highlightWidth=t}},{key:"enableDraggableWidget",value:function e(){this.isContentGroupWidget(this.draggable.proxied)&&(this.defaultOverlayPadding=20);this.draggableWidget=this.draggable.proxied.el;this.draggableWidget.style.width="".concat(this.draggableWidget.offsetWidth,"px");this.clonedDraggableWidget=this.draggableWidget.cloneNode(true);this.clonedDraggableWidget.classList.add("is-invisible-widget");this.draggableWidget.parentNode.insertBefore(this.clonedDraggableWidget,this.draggableWidget);this.draggableWidget.classList.add("drag-active-widget");if(this.isIE){this.draggableWidget.style.transformOrigin="0 0";this.draggableWidget.style.transform="scale(".concat(this.scale,")")}}},{key:"disableDraggableWidget",value:function e(t){var r=this;this.defaultOverlayPadding=6;if(t){this.draggableWidget.classList.add("is-invisible-widget");setTimeout((function(){r.draggableWidget.classList.remove("is-invisible-widget")}),500)}this.draggableWidget.removeAttribute("style");this.draggableWidget.classList.remove("drag-active-widget");this.clonedDraggableWidget.parentNode.removeChild(this.clonedDraggableWidget);this.clonedDraggableWidget=null}},{key:"updateDraggableWidgetPosition",value:function e(t){var r=this.getDragOffset(t);this.draggableWidget.style.top="".concat(r.top,"px");this.draggableWidget.style.left="".concat(r.left,"px")}},{key:"getDragOffset",value:function e(t){var r=Math.floor(this.defaultOverlayPadding*this.scale);var n=this.draggableWidget.getBoundingClientRect();var i=this.iframe.getBoundingClientRect();var a=t.pageX-n.width/2-i.left;var o=t.pageY+r-i.top;return{left:a,top:o}}},{key:"isContentGroupWidget",value:function e(t){return"widget.contentgroup"===t.properties.type}}]);return r}(o.default);var _=t["default"]=w},1724:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r={init:function e(){},addObservation:function e(){},showProxy:function e(){},addToInitQueue:function e(){}};var n=t["default"]=r},55796:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.globals=t.getGlobals=t["default"]=void 0;var n=i(r(63938));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=t["default"]=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.templateStylePreprocessorVariablesTree,n=void 0===r?{}:r;a(this,e);this.templateStylePreprocessorVariablesTree=n}s(e,[{key:"formattedImages",value:function e(t){var r=[];for(var n in t)t[n]&&r.push(t[n]);return r}},{key:"filterUnusedPresetAttributes",value:function e(){var t=["@color--light","@color--dark","@color--accent","@siteBackgroundColor","@siteBackgroundGradientType","@siteBackgroundGradientFrom","@siteBackgroundGradientTo","@siteBackgroundImageScale","@siteBackgroundImage","@siteBackgroundPositionX","@siteBackgroundPositionY","@siteBackgroundRepeat"];var r=App.frontEndBucket.sitePresetAttributes;var n=r.filter((function(e){return-1!==t.indexOf(e.name)}));return n}},{key:"initializeGlobalAssets",value:function e(){var t=document.querySelector("#siteFrame").contentWindow.Server.plugins.assets;BaseKit.Globals.ImageAssets&&void 0===BaseKit.Globals.imageAssets&&(BaseKit.Globals.imageAssets=new BaseKit.Globals.ImageAssets(this.formattedImages(t.images)));BaseKit.Globals.FileAssets&&void 0===BaseKit.Globals.fileAssets&&(BaseKit.Globals.fileAssets=new BaseKit.Globals.FileAssets(t.files))}},{key:"initializeGlobalValues",value:function e(){var t=App.frontEndBucket.siteGlobalValues;if(BaseKit.Globals.SiteGlobalValuesCollection&&void 0===BaseKit.Globals.globalValues){BaseKit.Globals.globalValues=new BaseKit.Globals.SiteGlobalValuesCollection(t);BaseKit.Globals.globalValues.siteRef=App.session.get("siteRef")}}},{key:"initializeGlobalProfile",value:function e(){var t=document.querySelector("#siteFrame").contentWindow.Profile;var r=Object.assign({ref:t.ref},t.profile);if(BaseKit.Globals.Profile&&void 0===BaseKit.Globals.profile){BaseKit.Globals.profile=new BaseKit.Globals.Profile(r);BaseKit.Globals.profile.stateManager=new n.default(BaseKit.Globals.profile);BaseKit.Globals.profile.stateManager.storeCurrentState()}else if(BaseKit.Globals.profile){BaseKit.Globals.profile.off();BaseKit.Globals.profile.clear({silent:true});BaseKit.Globals.profile.set(r);BaseKit.Globals.profile.stateManager.storeCurrentState()}}},{key:"initializePresetAttributes",value:function e(){if(BaseKit.Globals.PresetAttributes&&void 0===BaseKit.Globals.presetAttributes){var t=BaseKit.Globals.PresetAttributes;BaseKit.Globals.presetAttributes=new t(this.filterUnusedPresetAttributes())}}},{key:"handleStylesVariables",value:function e(t,r){var n=[];var i={};t.forEach((function(e){if(e.fontType){i[e.fontType]||(i[e.fontType]=[]);i[e.fontType].push(e)}else n.push(e)}));for(var a in i)if(i[a]){var o=i[a];var s={type:"font",name:a,translation:o[0].translation,siteRef:o[0].siteRef,widget:o[0].widget,section:o[0].section,variables:this.getFontVariables(o)};n.push(s)}this.allStylePreprocessorVariables=this.allStylePreprocessorVariables.concat(n);BaseKit.Globals.templateStylePreprocessorVariableSections[r]=new BaseKit.Globals.TemplateStylePreprocessorVariables(n)}},{key:"getFontVariables",value:function e(t){var r=[];t.forEach((function(e){r.push(e)}));return r}},{key:"initializeTemplateStylePreprocessorVariables",value:function e(t){if(BaseKit.Globals.TemplateStylePreprocessorVariables&&void 0===BaseKit.Globals.templateStylePreprocessorVariableSections){BaseKit.Globals.templateStylePreprocessorVariableSections=[];this.allStylePreprocessorVariables=[];for(var r in t)if(t[r]){var n=t[r];var i=n.variables;this.handleStylesVariables(i,r)}BaseKit.Globals.templateStylePreprocessorVariables=new BaseKit.Globals.TemplateStylePreprocessorVariables(this.allStylePreprocessorVariables)}}},{key:"init",value:function e(){this.initializeGlobalAssets();this.initializeGlobalValues();this.initializeGlobalProfile();this.initializePresetAttributes();this.initializeTemplateStylePreprocessorVariables(this.templateStylePreprocessorVariablesTree)}}]);return e}();var u=t.globals=BaseKit.Globals;var c=t.getGlobals=function e(){return BaseKit.Globals||window.BaseKit.Globals}},2568:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(69464));var i=o(r(32637));var a=r(38869);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return d(e)||c(e)||u(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}function c(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function h(e,t,r){t&&g(e.prototype,t);r&&g(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var v=function(){function e(){p(this,e);this.iframe=document.getElementById("siteFrame");this.window=this.iframe.contentWindow||this.iframe.contentDocument.defaultView}h(e,[{key:"replaceCss",value:function e(t){this.window.document.querySelector(".js-compiled-styles").textContent=t}},{key:"cleanUpStyles",value:function e(){var t=this.window.document.querySelector(".js-initial-styles");null!==t&&t.remove()}},{key:"hideZoneOverlays",value:function e(){var t=this.window.document.querySelectorAll(".bk-zone-overlay");s(t).forEach((function(e){e.style.display="none"}))}},{key:"showZoneOverlays",value:function e(){var t=this.window.document.querySelectorAll(".bk-zone-overlay");s(t).forEach((function(e){e.style.display="block"}))}}]);return e}();var m={Site:null,Events:new Backbone.Wreqr.EventAggregator,Models:{},Collections:{},load:function e(){var t=this;var r=document.getElementById("siteFrame");var o=r.contentWindow||r.window;o.addEventListener("unload",(function(){return t.unloadCleanUp()}));m.Site=o.Site;m.Profile=o.Profile;m.getGlobals();m.Site.Dom=new v;App.session=m.Site.Dom.window.App.session;if(BaseKit.Globals.Pages&&void 0===BaseKit.Globals.pages){var s=App.pageTree;BaseKit.Globals.pages=new i.default(s);n.default.dispatch((0,a.addPages)(s));n.default.dispatch((0,a.setCurrentPage)(App.session.get("pageRef")));this.addSiteLanguagePagesToCollection(App.siteLanguagesPageTree);n.default.dispatch((0,a.addLanguagesPageTree)(App.siteLanguagesPageTree))}var l=m.Site.Dom.window;n.default.dispatch((0,a.setCurrentPage)(App.session.get("pageRef")));n.default.dispatch((0,a.setCurrentPageTextEntryMetadata)(l.Server.page.isRTLLanguage))},unloadCleanUp:function e(){BaseKit.Globals.pages&&BaseKit.Globals.pages.off()},getGlobals:function e(){var t=App.frontEndBucket.siteGlobalValues;null!==m.Site&&t.length>0&&t.forEach((function(e){m.Site.Globals[e.name]=e.value}))},showZoneOverlays:function e(){m.Site.Dom.showZoneOverlays()},hideZoneOverlays:function e(){m.Site.Dom.hideZoneOverlays()},addSiteLanguagePagesToCollection:function e(t){Object.keys(t).forEach((function(e){BaseKit.Globals.pages.addFromPageTree(t[e].pages)}))}};window.Editor=m;var y=t["default"]=m},2289:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);this._envDataProvider=t.envDataProvider;this._parseQueryString=t.parseQueryString;this._notification=t.notification}i(e,[{key:"display",value:function e(){var t=this._parseQueryString();var r=this._envDataProvider.get("errors");t.error&&r[t.error]&&this._notification(void 0,r[t.error],"error")}}]);return e}();var o=t["default"]=a},21119:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){var n=t.brandDataProvider,i=t.DialogPanelView,a=t.SessionTimeoutDialogView;r(this,e);this.brandDataProvider=n;this.DialogPanelView=i;this.SessionTimeoutDialogView=a}i(e,[{key:"display",value:function e(){var t=this.brandDataProvider.get("loginUrl");return new this.DialogPanelView({contentClassname:"dialog__content--center",title:App.t("editor.dialog.title.session-timeout","Session Timeout"),content:new this.SessionTimeoutDialogView({brandLoginUrl:t})})}}]);return e}();var o=t["default"]=a},12655:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=c;var n=u(r(8086));var i=u(r(9838));var a=u(r(86985));var o=u(r(18306));var s=u(r(21119));var l=u(r(2289));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){e.factory("SessionErrorMessage",(function(e){return new l.default({parseQueryString:n.default,notification:i.default,envDataProvider:e.EnvDataProvider})}));e.factory("SessionTimeoutDialog",(function(e){return new s.default({brandDataProvider:e.BrandDataProvider,DialogPanelView:a.default,SessionTimeoutDialogView:o.default})}));return e}},3181:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.siteDataProvider,n=void 0===r?{}:r,i=t.envDataProvider,o=void 0===i?{}:i,s=t.siteGlobalValuesCollection,l=void 0===s?{}:s;a(this,e);this.siteDataProvider=n;this.envDataProvider=o;this.siteGlobalValuesCollection=l}s(e,[{key:"getValue",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var n=this.siteGlobalValuesCollection.get(t);if("undefined"!==typeof n)return n.get("value");return r}},{key:"saveValue",value:function e(t,r){var n=this.siteDataProvider.getSiteRef();var i=this.siteGlobalValuesCollection.get(t);var a={siteRef:n,name:t,value:r};if("undefined"!==typeof i)return this.updateModel(t,a,i);return this.addModel(a)}},{key:"updateModel",value:function e(t,r,i){i.set(n({},r));return this.putToServer(t,r)}},{key:"addModel",value:function e(t){this.siteGlobalValuesCollection.add(t);return this.postToServer(t)}},{key:"putToServer",value:function e(t,r){var n=this.siteDataProvider.getSiteRef();var i="".concat(this.envDataProvider.get("apiProxyBaseUrl"),"/sites/").concat(n,"/global-values/").concat(t);var a=this.envDataProvider.get("csrfToken");return new Promise((function(e,t){window.fetch(i,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":a},method:"PUT",body:JSON.stringify(r)}).then(e(r)).catch(t)}))}},{key:"postToServer",value:function e(t){var r=this.siteDataProvider.getSiteRef();var n="".concat(this.envDataProvider.get("apiProxyBaseUrl"),"/sites/").concat(r,"/global-values");var i=this.envDataProvider.get("csrfToken");return new Promise((function(e,r){window.fetch(n,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":i},method:"POST",body:JSON.stringify(t)}).then(e(t)).catch(r)}))}}]);return e}();var u=t["default"]=l},83748:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.openIntercom=t.closeIntercom=void 0;var r=window.matchMedia("(max-width: 930px)").matches;var n=t.openIntercom=function e(){window.Intercom&&!r&&window.Intercom("update",{hide_default_launcher:false})};var i=t.closeIntercom=function e(){window.Intercom&&!r&&window.Intercom("update",{hide_default_launcher:true})}},81385:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(32637);var i=Marionette.ItemView.extend({events:{"click .js-dialog-backstop":"closePanel","click .js-save":"saveClicked","change .js-link-action":"linkActionChanged","click .js-close-dialog":"closePanel","change .js-external-link":"externalLinkChange","keyup .js-external-link":"externalLinkChange","keyup .js-email":"emailChanged","keyup .js-phone-number":"phoneNumberChanged","keypress .js-external-link":"updateExternalLinkTriggered","change .js-external-target":"externalLinkTargetChange","click .js-internal-link":"internalLinkClicked","click .js-remove-link":"removeLinkClicked"},initialize:function e(t){this.currentUrl=t.url||"";this.currentTarget=t.target||"";this.originalUrl=this.currentUrl;this.originalTarget=this.currentTarget;this.linkAction=this._getLinkAction();this.initialLinkAction=this.linkAction;this.listenTo(this,"close:panel",this.closePanel);return this},renderHTML:function e(){var t=this._getContext();this.$el.empty().append(Twig.render(Twig.templates.view_link_editor_dialog,t))},render:function e(){this.renderHTML();this.moveToBody();this.afterRender();return this},afterRender:function e(){this.isLinkEditorOpen=true;"internal"===this.linkAction&&this._scrollToShowSelectedInternalLinkItem();this._setViewElementFocused()},moveToBody:function e(){var t=this.$el.appendTo("body");this.setElement(t)},closePanel:function e(){this.destroy()},saveClicked:function e(){this.notify()},removeLinkClicked:function e(){this.trigger("link:remove");this.destroy()},notify:function e(){this.trigger("link:change",{target:this.currentTarget,url:this.currentUrl});this.destroy()},destroy:function e(){this.isLinkEditorOpen=false;this.trigger("linkEditor:close");this.remove()},linkActionChanged:function e(t){this.linkAction=t.currentTarget.value;if(this.initialLinkAction===this.linkAction){this.currentUrl=this.originalUrl;this.currentTarget=this.originalTarget}else{this.currentUrl="";this.currentTarget="_self"}this.renderHTML();this.afterRender()},internalLinkClicked:function e(t){var r=t.currentTarget;var n=this._getSelectedInternalPageElement();n&&n.classList.remove("selected");r.classList.add("selected");this.currentUrl=t.currentTarget.dataset.itemValue;this._setDoneButtonEnabled(true)},externalLinkChange:function e(){var t=this.$(".js-external-link").val().trim();var r=/^((http|ftp|ftps|https):\/\/)?[\u00C0-\u1FFE\u2C00-\uD7FB\w\-_]+(\.[\u00C0-\u1FFE\u2C00-\uD7FB\w\-_]+)+([\u00C0-\u1FFE\u2C00-\uD7FB\w\-\.,@?\^=%&amp;:\/~\+#!]*[\u00C0-\u1FFE\u2C00-\uD7FB\w\-\@?\^=%&amp;\/~\+#])?$/i;var n=/^(http|ftp|ftps|https)$/i;var i=t.match(r);var a=""!==t;if(a){r.test(t)&&!n.test(i[2])&&(t="http://".concat(t));this.currentUrl=t}this._setDoneButtonEnabled(a)},updateExternalLinkTriggered:function e(t){var r=t.keyCode||t.which;if(13===r){this.externalLinkChange();this.notify()}},externalLinkTargetChange:function e(t){var r=t.currentTarget;this.currentTarget=r.checked?"_blank":"_self";this._setDoneButtonEnabled(this._isLinkAvailable())},emailChanged:function e(t){var r=t.currentTarget.value;var n=this.el.querySelector(".js-email-address-container");var i=/.+@.+/;if(i.test(r)){n.classList.remove("cl-form-fields__container--errored");this.currentUrl="mailto:".concat(r);this._setDoneButtonEnabled(true)}else{n.classList.add("cl-form-fields__container--errored");this._setDoneButtonEnabled(false)}},phoneNumberChanged:function e(t){var r=t.currentTarget.value.trim();if(""!==r){this.currentUrl="tel:".concat(r);this._setDoneButtonEnabled(true)}else this._setDoneButtonEnabled(false)},isOpen:function e(){return this.isLinkEditorOpen},_getContext:function e(){return{action:this.linkAction,target:this._getTarget(),url:this._getUrl(),pages:(0,n.getActiveLanguageInternalPages)(),hasRemoveLink:this._hasRemoveLink(),initialLinkAction:this.initialLinkAction}},_getLinkAction:function e(){if(!this._isInEditor()||!this.currentUrl)return"external";var t=/^https?:\/\//.test(this.currentUrl);var r=/@/.test(this.currentUrl);var n=/tel:/.test(this.currentUrl);if(t)return"external";if(r)return"mail";if(n)return"phone";return"internal"},_getTarget:function e(){return this.currentTarget||"_self"},_getUrl:function e(){return this.currentUrl.replace(/^(mailto:|tel:)/gi,"")},_hasRemoveLink:function e(){return""!==this.originalUrl&&void 0!==this.originalUrl},_isInEditor:function e(){var t=false;"undefined"!==typeof Editor&&Editor&&Editor.Site&&(t=true);return t},_isLinkAvailable:function e(){return""!==this.currentUrl},_getSelectedInternalPageElement:function e(){return this.el.querySelector(".js-internal-link.selected")},_setDoneButtonEnabled:function e(t){var r=this.el.querySelector(".js-save");r.disabled=!t;t?r.classList.remove("cl-button--disabled"):r.classList.add("cl-button--disabled")},_scrollToShowSelectedInternalLinkItem:function e(){var t=this._getSelectedInternalPageElement();if(!t)return;var r=this.el.querySelector(".js-page-select-list-content");var n=r.getBoundingClientRect();var i=t.getBoundingClientRect();var a=i.bottom-n.bottom;a>0&&(r.scrollTop+=a)},_setViewElementFocused:function e(){var t=document.querySelector(".js-close-dialog");setTimeout((function(){t.focus()}),500)}});var a=t["default"]=i},36177:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(13745));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return l(e)||s(e)||d(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function l(e){if(Array.isArray(e))return f(e)}function u(e,t){return g(e)||p(e,t)||d(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n=[];var i=true;var a=false;var o,s;try{for(r=r.call(e);!(i=(o=r.next()).done);i=true){n.push(o.value);if(t&&n.length===t)break}}catch(e){a=true;s=e}finally{try{i||null==r["return"]||r["return"]()}finally{if(a)throw s}}return n}function g(e){if(Array.isArray(e))return e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function m(e,t,r){t&&v(e.prototype,t);r&&v(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var y=function(){function e(t){h(this,e);this.templateRenderer=t.templateRenderer;this.rowPanelPreferences=t.rowPanelPreferences;this.envDataProvider=t.envDataProvider;this.rowGroupProvider=t.rowGroupProvider;this.rowGroupData=this.rowGroupProvider.getRowGroups();this.rowPreviewTemplates=[];this.maxWidthForFullScreenMode=875;this.resizeHandler=null}m(e,[{key:"init",value:function e(){this._bindEvents();this._renderRowGroupMenu();this._renderRowGroupList();this._show()}},{key:"remove",value:function e(){this._hide();this._unbindEvents();this._removeRowGroupList();this._removeRowGroupMenu()}},{key:"_bindEvents",value:function e(){Editor.Events.on("category:change",this._categoryChanged.bind(this));this.resizeHandler=this._resize.bind(this);window.addEventListener("resize",this.resizeHandler,false);this._loadingElementShow()}},{key:"_unbindEvents",value:function e(){Editor.Events.off("category:change");window.removeEventListener("resize",this.resizeHandler,false)}},{key:"_siteDocument",value:function e(){return window.frames.siteFrame.document}},{key:"_liveRowPreviewContainer",value:function e(){return this._siteDocument().getElementById("liveRowPreviewContainer")}},{key:"_rowTemplateGroupMenu",value:function e(){return this._siteDocument().querySelector(".js-row-template-groups-menu")}},{key:"_rowTemplateGroupList",value:function e(){return this._siteDocument().querySelector(".js-row-template-groups-list")}},{key:"_loadingElement",value:function e(){return this._siteDocument().querySelector(".js-loading")}},{key:"_loadingElementShow",value:function e(){this._loadingElement().removeAttribute("hidden")}},{key:"_loadingElementHide",value:function e(){this._loadingElement().setAttribute("hidden","hidden")}},{key:"_show",value:function e(){this._liveRowPreviewContainer().classList.add("show")}},{key:"_hide",value:function e(){this._liveRowPreviewContainer().classList.remove("show")}},{key:"_renderRowGroupMenu",value:function e(){var t=this;var r=this._rowTemplateGroupMenu();Object.entries(this.rowGroupData).forEach((function(e){var i=u(e,2),a=i[0],o=i[1];var s=t.templateRenderer.render("row_preview_group_menu_item",{groupTitle:(0,n.default)("editor.row_panel.row_group_".concat(a),o.displayName),id:a});r.insertAdjacentHTML("beforeend",s)}))}},{key:"_renderRowGroupList",value:function e(){var t=this;var r=this._rowTemplateGroupList();var i="";Object.entries(this.rowGroupData).forEach((function(e){var r=u(e,2),a=r[0],o=r[1];i+=t.templateRenderer.render("row_preview_group",{isSelected:"image_text"===a,isHighlighted:"image_text"===a,groupTitle:(0,n.default)("editor.row_panel.row_group_".concat(a),o.displayName),rows:o.rows,id:a,showNames:t.rowPanelPreferences.getShowNames()})}));r.insertAdjacentHTML("beforeend",i)}},{key:"_removeRowGroupList",value:function e(){a(this._rowTemplateGroupList().childNodes).forEach((function(e){e.parentNode.removeChild(e)}))}},{key:"_removeRowGroupMenu",value:function e(){a(this._rowTemplateGroupMenu().childNodes).forEach((function(e){e.parentNode.removeChild(e)}))}},{key:"_fetchLiveRows",value:function e(t){return fetch("/_/row-previews",{headers:{"X-CSRF-Token":this.envDataProvider.get("csrfToken")},credentials:"include"}).then((function(e){return e.json()})).then((function(e){t.callback(e)}))}},{key:"_fetchLiveRowTemplates",value:function e(t){var r=this;return new Promise((function(e){if(r._isGroupTemplateLoaded(t)){e(r.rowPreviewTemplates[t]);return}r._fetchLiveRows({callback:function n(i){r._processLiveRowTemplates(i);e(r.rowPreviewTemplates[t])}})}))}},{key:"_processLiveRowTemplates",value:function e(t){var r=this;Object.entries(this.rowGroupData).forEach((function(e){var n=u(e,2),i=n[0],a=n[1];r.rowPreviewTemplates[i]=t.filter((function(e){return a.rows.includes(e.id)}))}))}},{key:"_isGroupTemplateLoaded",value:function e(t){return void 0!==this.rowPreviewTemplates[t]}},{key:"_categoryChanged",value:function e(){this._isFullScreenMode()?this._renderAllRowPreviews():this._renderSelectedRowPreviews()}},{key:"_isFullScreenMode",value:function e(){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||document.body.offsetWidth;return t<=this.maxWidthForFullScreenMode}},{key:"_resize",value:function e(){this._isFullScreenMode()&&this._renderAllRowPreviews()}},{key:"_renderSelectedRowPreviews",value:function e(){var t=this._siteDocument().querySelector(".js-row-template-group.is-selected");this._renderRowGroupPreviews(t.getAttribute("data-id"))}},{key:"_renderAllRowPreviews",value:function e(){var t=this;var r='.js-row-template-group:not([data-rendered="true"])';var n=this._siteDocument().querySelectorAll(r);n.forEach((function(e){t._renderRowGroupPreviews(e.getAttribute("data-id"))}))}},{key:"_renderLiveRows",value:function e(t){var r=this;var n=this._liveRowPreviewContainer();var i=".js-row-template-group";"groupId"in t&&(i='.js-row-template-group[data-id="'.concat(t.groupId,'"]'));t.rowJSON.forEach((function(e){var t="".concat(i,' .js-row-template-preview-markup[data-row-template-id="').concat(e.id,'"]');a(n.querySelectorAll(t)).forEach((function(t){t.insertAdjacentHTML("beforeend",e.html)}));a(n.querySelectorAll(".js-row-template-preview-markup img")).forEach((function(e){e.addEventListener("load",(function(){r._isFullScreenMode()?r._fixRowPreviewHeight():r._fixSelectedRowPreviewHeight()}))}))}));this._isFullScreenMode()||this._fixSelectedRowPreviewHeight();this._loadingElementHide()}},{key:"_renderRowGroupPreviews",value:function e(t){var r=this;var n=this._siteDocument().querySelector('.js-row-template-group[data-id="'.concat(t,'"]'));var i=null!==n.getAttribute("data-rendered");i||this._fetchLiveRowTemplates(t).then((function(e){r._renderLiveRows({rowJSON:e,groupId:t});n.setAttribute("data-rendered",true)}));this._isFullScreenMode()?this._fixRowPreviewHeight():this._fixSelectedRowPreviewHeight();window.frames.siteFrame.addEventListener("resize",this._fixRowPreviewHeight.bind(this),false)}},{key:"_fixRowPreviewHeight",value:function e(){a(this._siteDocument().querySelectorAll(".js-row-template-preview-markup")).forEach((function(e){e.parentElement.style.height="".concat(e.getBoundingClientRect().height,"px")}))}},{key:"_fixSelectedRowPreviewHeight",value:function e(){var t=this._siteDocument().querySelector(".js-row-template-group.is-selected");a(t.querySelectorAll(".js-row-template-preview-markup")).forEach((function(e){e.parentElement.style.height="".concat(e.getBoundingClientRect().height,"px")}))}}]);return e}();var b=t["default"]=y},34110:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=o;var n=a(r(51047));var i=a(r(36177));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){e.factory("RowPanelPreferences",(function(){return n.default}));e.factory("LiveRowPreviewService",(function(e){return new i.default({templateRenderer:e.TemplateRenderer,rowPanelPreferences:e.RowPanelPreferences,envDataProvider:e.EnvDataProvider,rowGroupProvider:e.RowGroupProvider,userDataProvider:e.UserDataProvider})}));return e}},78600:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(9878);var i=Marionette.ItemView.extend({template:"animation_panel",events:{"click .js-animation-cancel":"cancelChanges","click .js-animation-done":"closePanel","click .js-animation-bg":"cancelChanges","click .js-animation-item":"onAnimationEffectClicked"},initialize:function e(t){this.dialogStyle=t.dialogStyle;this.currentAnimationEffect=t.currentAnimationEffect||"none";this.prevEffect=this.currentAnimationEffect;this.animations=t.animations},render:function e(){var t=Twig.render(Twig.templates[this.template],{dialogStyle:this.dialogStyle,currentAnimationEffect:this.currentAnimationEffect,animations:this.animations});(0,n.emptyElement)(this.el);(0,n.append)(this.el,t);document.querySelector("body").insertAdjacentElement("beforeend",this.el);this.setElement(this.el);this.onRender();return this},onAnimationEffectClicked:function e(t){this._clearActiveEffectClass();this._addActiveEffectClass(t.currentTarget);this.changeAnimationEffect(t.currentTarget.dataset.name)},changeAnimationEffect:function e(t){if(t===this.currentAnimationEffect)return;this.trigger("animationEffect:change",t);this.currentAnimationEffect=t},closePanel:function e(){this.trigger("panel:close");this.destroy()},onRender:function e(){Editor.Events.on("screenMode:change",this.closePanel.bind(this))},cancelChanges:function e(){this.changeAnimationEffect(this.prevEffect);this.closePanel()},_clearActiveEffectClass:function e(){this.el.querySelector(".is-current").classList.remove("is-current")},_addActiveEffectClass:function e(t){t.classList.add("is-current")}});var a=t["default"]=i},66796:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(58910));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){e.factory("ImportPanelFactory",(function(){return new n.default}));return e}var o=t["default"]=a},7948:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(9878);var i=s(r(61061));var a=s(r(69464));var o=r(90031);function s(e){return e&&e.__esModule?e:{default:e}}var l="is-active";function u(e){return e.ui.colourPanel.activePanel}function c(e){return e.ui.colourPanel.addButtonDisabled}function d(e){return e.ui.colourPanel.selectedColour}function f(e){return e.ui.colourPanel.savedColours}var p=/^(#[0-9a-f]{3}|#[0-9a-f]{6})$/;var g=/^(rgb)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\)$/;var h=/^(hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\)$/;function v(e){var t="".concat(e);if(t.match(p)||t.match(g)||t.match(h))return true;return false}var m=Marionette.ItemView.extend({template:"colour_picker_panel",customColourButtonTemplate:"colour_picker_panel_custom_colour_button",colourPicker:null,events:{"click .js-colour-set-item":"colourSetItemClicked","click .js-palette-colour-item":"paletteColourClicked","click .js-complimentary-palette":"complimentaryColourClicked","click .js-custom-colour-item":"customColourClicked","click .js-colour-set-tab-button":"colourSetTabBtnClicked","click .js-palette-tab-button":"paletteTabBtnClicked","click .js-wheel-tab-button":"wheelTabBtnClicked","change .js-custom-input":"customInputChanged","keyup .js-custom-input":"customInputChanged","paste .js-custom-input":"customInputChanged","click .js-add-custom-colour":"addCustomColourButtonClicked","click .js-remove-custom-colour":"removeCustomColour"},beforeRender:function e(t){return null},afterRender:function e(t){return null},initialize:function e(t){this.model=t.model||null;var r=BaseKit.siteLibraryProvider().BaseKit.Globals;this.globalValues=r.globalValues;this.savedColoursModel=this.globalValues.findWhere({name:"savedColours"})||new r.SiteGlobalValueModel({name:"savedColours",value:[]});this.savedColoursModel.siteRef=a.default.getState().site.ref;this.colourChosen=t.colourChosen||function(){console.warn("colour chosen callback not set")};this.beforeRender=t.beforeRender||function(){};this.afterRender=t.afterRender||function(){};this.showColourSet=t.showColourSet||false;this.colourSet=t.colourSet||[];a.default.dispatch((0,o.changeSavedColours)(this.savedColoursModel.get("value")));this.unsubscribe=a.default.subscribe(this.handleStateChange.bind(this));return this},handleStateChange:function e(){if(!this.el){this.unsubscribe();return}var t=a.default.getState();switch(u(t)){case"colourSet":this.renderColourSet();break;case"palette":this.renderPalette();break;case"wheel":this.renderWheel();break}c(t)?this.disableButton():this.enableButton();var r=this.el.querySelector(".js-custom-input").value;var n=d(t);r!==n&&this.setInputValue(n)},enableButton:function e(){this.el.querySelector(".js-add-custom-colour").disabled=false},disableButton:function e(){this.el.querySelector(".js-add-custom-colour").disabled=true},setInputValue:function e(t){this.el.querySelector(".js-custom-input").value=t},colourSelected:function e(t){this.colourChosen(this.model.id,t)},updateColourInput:function e(t,r){var n=(0,i.default)(t);var s=n.toHexString();1!==n.getAlpha()&&(s=n.toRgbString());if(1===n.getAlpha()&&r){n.setAlpha(r);s=n.toRgbString()}a.default.dispatch((0,o.changeColour)(s));a.default.dispatch((0,o.enableAddButton)())},customInputChanged:function e(){var t=this.el.querySelector(".js-custom-input").value;t=t.replace(/#{2,}/,"#");a.default.dispatch((0,o.changeColour)(t));if((0,i.default)(t).isValid()&&v(t)){a.default.dispatch((0,o.enableAddButton)());this.colourSelected(t)}else a.default.dispatch((0,o.disableAddButton)())},addCustomColourButtonClicked:function e(){var t=d(a.default.getState());if(!(0,i.default)(t).isValid()){a.default.dispatch((0,o.disableAddButton)());return}var r=f(a.default.getState());if(!r.includes(t)){r.push(t);this.addColourToCustomPalette(t);this.saveCustomColours(r)}},removeCustomColour:function e(t){t.preventDefault();var r=t.currentTarget.parentElement;var i=r.dataset.colourValue;var a=this.savedColoursModel.get("value");if(a.includes(i)){a.splice(a.indexOf(i),1);this.saveCustomColours(a)}(0,n.remove)(r)},saveCustomColours:function e(t){a.default.dispatch((0,o.changeSavedColours)(t));this.savedColoursModel.set("value",t);this.savedColoursModel.save()},colourSetTabBtnClicked:function e(t){t.preventDefault();if("colourSet"===u(a.default.getState()))return;a.default.dispatch((0,o.changePanel)("colourSet"))},paletteTabBtnClicked:function e(t){t.preventDefault();if("palette"===u(a.default.getState()))return;a.default.dispatch((0,o.changePanel)("palette"))},wheelTabBtnClicked:function e(t){t.preventDefault();if("wheel"===u(a.default.getState()))return;a.default.dispatch((0,o.changePanel)("wheel"))},renderColourSet:function e(){this._removeActiveTabClass();this._addActiveTabClass(".js-colour-set-tab-button");this.el.querySelector(".js-palette-container").setAttribute("hidden","hidden");this.el.querySelector(".js-wheel-container").setAttribute("hidden","hidden");this.el.querySelector(".js-custom-palette").setAttribute("hidden","hidden");this.el.querySelector(".js-colour-set-container").removeAttribute("hidden")},renderPalette:function e(){this._removeActiveTabClass();this._addActiveTabClass(".js-palette-tab-button");this.showColourSet&&this.el.querySelector(".js-colour-set-container").setAttribute("hidden","hidden");this.el.querySelector(".js-wheel-container").setAttribute("hidden","hidden");this.el.querySelector(".js-custom-palette").removeAttribute("hidden");this.el.querySelector(".js-palette-container").removeAttribute("hidden")},renderWheel:function e(){this._removeActiveTabClass();this._addActiveTabClass(".js-wheel-tab-button");this.showColourSet&&this.el.querySelector(".js-colour-set-container").setAttribute("hidden","hidden");this.el.querySelector(".js-palette-container").setAttribute("hidden","hidden");this.el.querySelector(".js-custom-palette").removeAttribute("hidden");this.el.querySelector(".js-wheel-container").removeAttribute("hidden")},_addActiveTabClass:function e(t){this.el.querySelector(t).classList.add(l)},_removeActiveTabClass:function e(){this.el.querySelector(".js-colourpicker-tabs .is-active").classList.remove(l)},setModel:function e(t){this.model=t},setDefaultColour:function e(t){this.defaultColour=t},render:function e(){if(null===this.model&&null===this.defaultColour)return null;this.beforeRender(this.$el);this.renderColourPickerAndWheel();this.afterRender(this.$el);return this},addColourToCustomPalette:function e(t){var r={colour:t};var i=Twig.render(Twig.templates[this.customColourButtonTemplate],r);(0,n.append)(this.el.querySelector(".js-custom-palette-container"),i)},renderColourPickerAndWheel:function e(){var t={title:this.title,savedColours:f(a.default.getState()),showColourSet:this.showColourSet,colourSet:this.colourSet};var r=Twig.render(Twig.templates[this.template],t);(0,n.emptyElement)(this.el);(0,n.append)(this.el,r);this.showColourSet?a.default.dispatch((0,o.changePanel)("colourSet")):a.default.dispatch((0,o.changePanel)("palette"));this.renderColourWheel()},renderColourWheel:function e(){var t=this;this.colourPicker=this.$el.find(".js-colour-wheel").minicolors({inline:true,control:"wheel",defaultValue:"",theme:"default",format:"rgb",changeDelay:200,opacity:true,change:function e(r,n){return t.colourWheelChanged(r,n)}})},colourWheelChanged:function e(t,r){var n=(0,i.default)(t);var a=n.toHexString();1!==n.getAlpha()&&(a=n.toRgbString());if(1===n.getAlpha()&&r){n.setAlpha(r);a=n.toRgbString()}this.updateColourInput(t,r);this.colourSelected(a)},colourSetItemClicked:function e(t){t.preventDefault();var r=t.currentTarget.getAttribute("data-name");this.colourSelected(r)},complimentaryColourClicked:function e(t){t.preventDefault();var r=t.currentTarget.style.backgroundColor;var n=(0,i.default)(r).toHexString();this.updateColourInput(r);this.colourSelected(n)},customColourClicked:function e(t){t.preventDefault();if(t.target.classList.contains("js-remove-custom-colour"))return;var r=t.currentTarget.parentElement.dataset.colourValue;this.updateColourInput(r);this.colourSelected(r);this.updateComplimentaryColours(r)},paletteColourClicked:function e(t){t.preventDefault();var r=getComputedStyle(t.currentTarget).backgroundColor;var n=(0,i.default)(r).toHexString();this.updateColourInput(r);this.colourSelected(n);this.updateComplimentaryColours(r)},updateComplimentaryColours:function e(t){if((0,i.default)(t).isValid())for(var r=1;r<13;r++){var n=".js-colour-tone".concat(r);var a=r<=6?"darken":"lighten";var o=r<=6?5*r:5*(r-6);this.el.querySelector(n).style.backgroundColor=(0,i.default)(t)[a](o).toString()}},onDestroy:function e(){this.unsubscribe()}});var y=t["default"]=m},9752:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(79467);var i=c(r(13745));var a=r(58469);var o=r(12295);var s=c(r(93725));var l=r(9878);var u=r(33835);function c(e){return e&&e.__esModule?e:{default:e}}var d=Backbone.View.extend({defaultViewportPadding:8,template:"custom_color_picker",events:{"click .js-custom-color-picker-save":"close","click .js-custom-color-backdrop":"close","input .js-custom-color-input":"onInput","mouseup .js-custom-color-input":"onInputMouseUp"},initialize:function e(t){this.fill=t.fill;this.colorType=t.colorType;this.colorNode=t.colorNode},render:function e(){var t=Twig.render(Twig.templates[this.template],{hexColor:this.fill,rgbColor:(0,n.hexToRgb)(this.fill),title:(0,i.default)("shared_components.custom_color_picker.header.".concat(this.colorType,"_color_title"),"".concat((0,a.toTitleCase)(this.colorType)," colour"))});(0,l.emptyElement)(this.el);(0,l.append)(this.el,t);document.body.insertAdjacentElement("beforeend",this.el);this.setElement(this.el);this._initializePickerComponent();this.onRender()},onRender:function e(){this._cacheElements();this._addEventListeners();this._reposition()},onInput:function e(t){var r=t.currentTarget;var i=r.value.trim();if(!this._isValidColor(i)){this._showValidationError(r,true);return}var a=r.classList.contains("js-custom-hex-color-input");var o=i;if(!a){var s=i.split(",");o=(0,n.rgbToHex)(s[0],s[1],s[2])}this.pickr.setColor(o);this.setColor(o)},onInputMouseUp:function e(t){var r=this;var n=t.currentTarget;if(""===n.value)return;setTimeout((function(){if(""!==n.value)return;r.onInput(t)}),1)},setColor:function e(t){var r=this;this.fill=t;this.colorBox.style.backgroundColor=t;this.hexColorInput.value=t.toUpperCase();this.rgbColorInput.value=(0,n.hexToRgb)(t);this._showValidationError(this.hexColorInput,false);this._showValidationError(this.rgbColorInput,false);this.trigger("change",t);(0,u.debounce)((function(){r.trigger("save",t)}),200)()},close:function e(){this._removeEventListeners();this._destroyPickerComponent();this.trigger("close");this.remove()},_initializePickerComponent:function e(){this.pickr=s.default.create({el:".js-color-inputs",appClass:"custom-color-picker__pickr",useAsButton:true,appendToBody:false,inline:true,position:"left",default:this.fill,components:{preview:false,palette:false,hue:true}});this.pickr.show()},_cacheElements:function e(){this.colorPicker=this.el.querySelector(".js-custom-color-picker");this.colorArrow=this.el.querySelector(".js-custom-color-arrow");this.colorBox=this.el.querySelector(".js-color-box");this.hexColorInput=this.el.querySelector(".js-custom-hex-color-input");this.rgbColorInput=this.el.querySelector(".js-custom-rgb-color-input");this.doneButton=this.el.querySelector(".js-custom-color-picker-save")},_reposition:function e(){(0,o.isDesktopScreenMode)()?this._repositionOnDesktopScreen():this._repositionOnMobileScreen()},_addEventListeners:function e(){this.resizeHandler=this._resize.bind(this);window.addEventListener("resize",this.resizeHandler,false);this.pickr.on("change",this._onColorPickerChange.bind(this))},_showValidationError:function e(t,r){var n="custom-color-picker__field-error";r?t.parentNode.classList.add(n):t.parentNode.classList.remove(n);this.doneButton.disabled=r},_onColorPickerChange:function e(){this.setColor(this.pickr.getColor().toHEXA().toString())},_repositionOnDesktopScreen:function e(){var t=this._calculatePosition();var r=this._calculateArrowPosition();this._setPosition("".concat(t.left,"px"),"".concat(t.top,"px"));this._setArrowPosition("".concat(r.left,"px"),"".concat(r.top,"px"))},_repositionOnMobileScreen:function e(){this._setPosition("0","auto")},_calculatePosition:function e(){var t=this.colorNode.getBoundingClientRect();var r=this.colorPicker.getBoundingClientRect();var n=this._getElementViewportConstraints(this.colorPicker);var i=t.left+t.width/2-r.width/2;i<n.minLeft&&(i=n.minLeft);i>n.maxLeft&&(i=n.maxLeft);return{left:i,top:t.bottom}},_getElementViewportConstraints:function e(t){return{minLeft:this.defaultViewportPadding,maxLeft:(0,o.getWindowWidth)()-this.defaultViewportPadding-t.getBoundingClientRect().width}},_calculateArrowPosition:function e(){var t=this.colorNode.getBoundingClientRect();var r=this.colorArrow.getBoundingClientRect();return{left:t.left+t.width/2-r.width/2,top:t.bottom-r.height}},_setPosition:function e(t,r){this.colorPicker.style.left=t;this.colorPicker.style.top=r},_setArrowPosition:function e(t,r){this.colorArrow.style.left=t;this.colorArrow.style.top=r},_removeEventListeners:function e(){this.pickr.off("change");window.removeEventListener("resize",this.resizeHandler)},_destroyPickerComponent:function e(){this.pickr.destroy()},_resize:function e(){this._reposition()},_isValidColor:function e(t){return(0,n.isValidHexColour)(t)||(0,n.isValidRgbColour)(t)}});var f=t["default"]=d},72868:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Backbone.Model.extend({idAttribute:"cRef"});var n=t["default"]=r},88180:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(72868));function i(e){return e&&e.__esModule?e:{default:e}}var a=Backbone.Collection.extend({model:n.default});var o=t["default"]=a},21741:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(88180));function i(e){return e&&e.__esModule?e:{default:e}}var a=Marionette.ItemView.extend({template:"custome_display_panel",itemTemplate:"custome_display_results_list",events:{"click .js-close":"closeClicked","click .js-bg":"closePanel","click .js-search":"onSearch","click .js-item":"onSelect"},initialize:function e(){return this},render:function e(){var t=Object.assign({},this.model.toJSON());var r=Twig.render(Twig.templates[this.template],t);this.$el.empty().append(r);this.moveToBody();return this},rerender:function e(){this.currentView&&"function"===typeof this.currentView.destroy&&this.currentView.destroy();this.render()},onSearch:function e(t){var r=this;t.preventDefault();var n=this.model.get("onSearch");var i=this.el.querySelector(".js-search-value").value;if(0===i.trim().length)return;if("function"===typeof n){this.showSearchLoadingUi();n.apply(this,[i]).done((function(e){r.handleResults(e)})).fail((function(e){r.handleResults();console.log("Error: ",e)}))}},handleResults:function e(t){this.hideSearchLoadingUi();this.displayResults(t)},moveToBody:function e(){var t=this.$el.appendTo("body");this.setElement(t)},itemSelected:function e(t){this.trigger("item:selected",t);this.closePanel()},closeClicked:function e(){this.closePanel()},closePanel:function e(){this.currentView&&"function"===typeof this.currentView.destroy&&this.currentView.destroy();this.destroy();this.trigger("panel:close")},onSelect:function e(t){var r=t.currentTarget.getAttribute("data-ref").replace("item-ref-","");this.notify(r);this.closePanel()},notify:function e(t){var r=this.getModel(t);this.trigger("item:selected",r.toJSON())},getModel:function e(t){return this.collection.get(t)},showSearchLoadingUi:function e(){this.el.querySelector(".js-results-list").setAttribute("hidden",true);this.el.querySelector(".js-landing-message").setAttribute("hidden",true);this.el.querySelector(".js-loading").removeAttribute("hidden")},hideSearchLoadingUi:function e(){this.el.querySelector(".js-loading").setAttribute("hidden",true)},displayResults:function e(t){var r=this.formattedResults(t);var n=Twig.render(Twig.templates[this.itemTemplate],{items:r,noSearchResults:this.model.get("noSearchResults")});this.createCollection(r);this.el.querySelector(".js-results-list").innerHTML=n;this.el.querySelector(".js-results-list").removeAttribute("hidden")},createCollection:function e(t){this.collection?this.collection.reset(t):this.collection=new n.default(t)},formattedResults:function e(t){var r=this;var n=[];t&&t.length>0&&t.forEach((function(e){var t=Object.assign(e,{cUrl:e[r.model.get("imageProperty")],cMainTitle:e[r.model.get("mainTitleProperty")],cSecondTitle:e[r.model.get("secondTitleProperty")],cThirdTitle:e[r.model.get("thirdTitleProperty")],cSubTitle:e[r.model.get("subTitleProperty")],cRef:e[r.model.get("idProperty")]});n.push(t)}));return n}});var o=t["default"]=a},52516:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Backbone.View.extend({template:"delete_row_dialog",events:{"click .js-cancel":"cancel","click .js-delete":"delete"},initialize:function e(t){this.templateRenderer=t.templateRenderer;return this},cancel:function e(){this.trigger("dialog:resolve","cancel");this.trigger("dialog:close")},delete:function e(){this.trigger("dialog:resolve","delete")},render:function e(){var t=this.templateRenderer;var r=t.render(this.template);var n=document.querySelectorAll(".js-dialog-contents");var i=n.item(n.length-1);i.insertAdjacentHTML("beforeend",r)}});var n=t["default"]=r},12979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(13745));var i=o(r(86985));var a=o(r(52516));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function u(e,t,r){t&&l(e.prototype,t);r&&l(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var c=(0,n.default)("editor_v8.delete_row_dialog.title","Delete content");var d=function(){function e(t){s(this,e);this.templateRenderer=t.templateRenderer}u(e,[{key:"build",value:function e(){var t=this.templateRenderer;return new i.default({title:c,render:false,content:new a.default({templateRenderer:t})})}}]);return e}();var f=t["default"]=d},86985:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(69464));var i=r(24531);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var u=Backbone.View.extend({el:"body",events:{"click .js-close-dialog":"handleCancel","click .js-dialog-cancel":"handleCancel","click .js-dialog-save":"handleSave","click .js-dialog-done":"handleDone","click .js-dialog-next":"handleNext","click .js-dialog-delete":"handleDelete","click .js-dialog-backstop":"handleCancel","change input,select":"onChange","input input,textarea":"onChange"},defaults:{title:"Untitled",content:null,contentClassname:null,dialogClassname:null,actionClassname:null,fullPage:false,showCancel:false,showSaveCancel:false,showSaveDone:false,showNext:false,showDelete:false,useComponentLibraryDialog:false,render:true,showSaveButtonTextAsDone:false,customSaveButtonText:""},initialize:function e(t){t&&(this.options=s(s({},this.defaults),t));this.bodyElement=document.querySelector("body");this.bodyElement.classList.contains("site-iframe")&&(this.bodyElement=window.parent.document.querySelector("body"));this.options.render&&this.render()},onChange:function e(t){if(this._changeIsIgnored(t))return;if(this.saveBtnIsEnabled)return;this.enableSave()},_changeIsIgnored:function e(t){if(this.ignoredClasses){var r=t.currentTarget.classList;for(var n=0;n<this.ignoredClasses.length;n++)if(r.contains(this.ignoredClasses[n]))return true}return false},disableChangeListener:function e(t){this.ignoredClasses=t},enableSave:function e(){var t=this.el.querySelector(".js-dialog-save");this.enableActionButton(t);this.saveBtnIsEnabled=true},disableSave:function e(){var t=this.el.querySelector(".js-dialog-save");if(t){t.setAttribute("disabled",true);this.options.useComponentLibraryDialog&&false===t.classList.contains("cl-button--disabled")&&t.classList.add("cl-button--disabled")}this.saveBtnIsEnabled=false},enableNext:function e(){var t=this.el.querySelector(".js-dialog-next");this.enableActionButton(t)},enableDelete:function e(){var t=this.el.querySelector(".js-dialog-delete");this.enableActionButton(t)},enableActionButton:function e(t){if(!t)return;t.removeAttribute("disabled");this.options.useComponentLibraryDialog&&t.classList.contains("cl-button--disabled")&&t.classList.remove("cl-button--disabled")},render:function e(){var t=window.parent.Twig.templates.view_dialog||Twig.templates.view_dialog;this.options.useComponentLibraryDialog&&(t=window.parent.Twig.templates.view_cl_dialog||Twig.templates.view_cl_dialog);var r=Twig.render(t,this.options);this.bodyElement.insertAdjacentHTML("beforeend",r);this.setElement(this.bodyElement.querySelector(".js-dialog"));return this.renderModalContent()},setBusy:function e(){if(!this.el.classList.contains("busy")){this.el.classList.add("busy");this.options.useComponentLibraryDialog&&this.setSaveBtnLoading(true)}},clearBusy:function e(){if(this.el.classList.contains("busy")){this.el.classList.remove("busy");this.options.useComponentLibraryDialog&&this.setSaveBtnLoading(false)}},handleCancel:function e(){this.trigger("dialog:cancel");this.destroy()},handleSave:function e(){this.trigger("dialog:save")},handleDone:function e(){this.trigger("dialog:done")},handleNext:function e(){this.trigger("dialog:next")},handleDelete:function e(){this.trigger("dialog:delete")},renderModalContent:function e(){var t=this;return new Promise((function(e,r){t.options.content.modal={modal:t};t.options.content.setElement(t.bodyElement.querySelector(".js-dialog-contents"));t.options.content.render();t.listenTo(t.options.content,"view:remove",(function(){return t.hide()}));t.listenTo(t.options.content,"dialog:resolve",(function(r){return e({dialog:t,result:r})}));t.listenTo(t.options.content,"dialog:reject",(function(e){return r({dialog:t,result:e})}))}))},hide:function e(){this.destroy()},destroy:function e(){this.trigger("panel:close");n.default.dispatch((0,i.closeModal)());this.remove()},setSaveBtnLoading:function e(t){if(!this.options.useComponentLibraryDialog)return;var r=this.el.querySelector(".js-dialog-save-label");var n=this.el.querySelector(".js-dialog-save-loader");if(t){r.setAttribute("hidden",true);n.removeAttribute("hidden")}else{n.setAttribute("hidden",true);r.removeAttribute("hidden")}}});BaseKit.Panels.Dialog=u;var c=t["default"]=u},84190:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(13745));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,l,"next",e)}function l(e){a(o,n,i,s,l,"throw",e)}s(void 0)}))}}var s=Backbone.View.extend({className:"qa-warning",events:{"click .js-send-email":"sendVerificationEmail"},initialize:function e(t){this.emailToVerify=t.email;this.csrfToken=t.csrfToken;return this},sendVerificationEmail:function e(){var t=this;return o(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:t.addLoading();r="/_/resend-form-email-verification/".concat(t.emailToVerify);i.next=4;return window.parent.fetch(r,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":t.csrfToken},method:"POST"});case 4:n=i.sent;t.removeLoading();n.ok&&t.updateUI();case 7:case"end":return i.stop()}}),e)})))()},updateUI:function e(){var t=this;this.el.querySelector(".js-text").textContent=(0,n.default)("widgets.email.sent","Email has been sent");this.el.querySelector(".js-send-email").disabled=true;var r=setTimeout((function(){t.el.querySelector(".js-text").textContent=(0,n.default)("widgets.email.send_link","Resend the email");t.el.querySelector(".js-send-email").disabled=false;clearTimeout(r)}),5e3)},addLoading:function e(){this.el.querySelector(".js-send-email").classList.add("loading")},removeLoading:function e(){this.el.querySelector(".js-send-email").classList.remove("loading")},render:function e(){var t=Twig.render(Twig.templates.view_email_verification);this.$el.empty().append(t);return this}});var l=t["default"]=s},60879:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({events:{click:"onFileClick","click .js-delete":"onFileDelete"},initialize:function e(){return this},onFileClick:function e(){this.trigger("select")},onFileDelete:function e(t){t.stopPropagation();this.trigger("delete",this.model)}});var n=t["default"]=r},64789:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(31170));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return/pdf$/.test(e.type)}function o(e){var t=true;Array.prototype.forEach.call(e,(function(e){e&&a(e)||(t=false)}));return t}function s(){return n.default.container.EnvDataProvider.get("apiProxyBaseUrl")}function l(){return n.default.container.EnvDataProvider.get("csrfToken")}function u(){return c(App.user.capabilities.storageLimit)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;var r=["B","KB","MB","GB","TB"];var n=1024;var i=0;var a=e;while(a/n>=1){a/=n;i+=1}return a.toFixed(t)+r[i]}var d=Marionette.ItemView.extend({events:{"change .js-upload-input":"handleFileSelection","click .js-upload":"openFileUpload","dragenter .js-upload-area":"handleDragEnter","dragover .js-upload-area":"handleDragOver","dragend .js-upload-area":"handleDragEnd","dragexit .js-upload-area":"handleDragEnd","drop .js-upload-area":"handleDrop","click .js-upload-error-back-btn":"errorBackBtnClicked"},initialize:function e(t){var r=this;this.collection=t.collection;this.siteRef=t.siteRef;this.listenTo(this,"upload:file",this.openFileUpload);var n=new Backbone.Wreqr.EventAggregator;this.chunkedUploader=new BaseKit.chunkedUpload.ChunkedUploader({apiProxyBaseUrl:s(),csrfToken:l(),eventDispatcher:n,type:"file",progressCalculator:new BaseKit.chunkedUpload.ProgressCalculator});n.on("file.progress",(function(e){return r.showProgress(e)}));n.on("file.uploaded",(function(e){r.collection.add(e);r.trigger("file:upload",e)}));n.on("file.uploaderror",(function(e,t){return r.handleErrorUpload(e,t)}));return this},openFileUpload:function e(){this.el.querySelector(".js-upload-input").click()},handleDragEnter:function e(t){t.preventDefault();this.el.querySelector(".js-upload-dropzone").classList.add("is-drop-target")},handleDragEnd:function e(t){t.preventDefault();this.el.querySelector(".js-upload-dropzone").classList.remove("is-drop-target")},handleDragOver:function e(t){t.preventDefault()},handleDrop:function e(t){var r=t.originalEvent.dataTransfer.files;t.stopPropagation();t.preventDefault();r.length&&this.filesSelected(r)},handleFileSelection:function e(){var t=document.getElementById("js-upload-input");this.filesSelected(t.files)},handleFilesUpload:function e(t){if(o(t)){this.model.set("filesNum",t.length);this.showUploadingUi();this.uploaded=0;this.progressObj={};this.uploadedAssets=[];this.trigger("file:upload:start");this.chunkedUploader.upload(t)}},filesSelected:function e(t){this.handleFilesUpload(t)},showProgress:function e(t){this.el.querySelector(".js-progress-indicator").setAttribute("value",t);this.el.querySelector(".js-progress-indicator-value").style.width=t},showUploadingUi:function e(){var t=App.t("shared_components.filesspanel.uploading_file","Hold tight, we’re uploading your file now…");this.el.querySelector(".js-upload-area").setAttribute("hidden","hidden");this.el.querySelector(".js-progress-ui").removeAttribute("hidden");this.el.querySelector(".js-progress-message").textContent=t},handleErrorUpload:function e(t,r){var n=this;this.showErrorUI(t,r);setTimeout((function(){n.trigger("file:upload:error")}),5e3)},showErrorUI:function e(t,r){var i=u();var a=10;this.el.querySelector(".js-upload-panel-content").setAttribute("hidden","hidden");this.el.querySelector(".js-upload-panel-error-content").removeAttribute("hidden");r&&"cannotUploadAccountHolderExceededStorageLimit"===r&&(this.el.querySelector(".js-upload-error-msg").textContent=App.t("shared_components.filesspanel.uploading_error_exceeded_limit","- you have exceeded the storage limit of %1.",i));r&&"maxUploadSizeExceeded"===r&&(this.el.querySelector(".js-upload-error-msg").textContent=App.t("shared_components.filesspanel.uploading_error_file_too_big","- the size of your uploaded file must be under %1MB.",a));400!==t&&(this.el.querySelector(".js-upload-error-msg").textContent=App.t("shared_components.filesspanel.uploading_error_general","- We’re really sorry about this. Please email %1 so our support team can look into this for you",n.default.container.BrandDataProvider.get("supportEmail")))},errorBackBtnClicked:function e(){if(this.model.errorTimeout){clearTimeout(this.model.errorTimeout);this.model.errorTimeout=null}this.trigger("file:upload:error")}});var f=t["default"]=d},27695:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Backbone.Model.extend({defaults:{panel:"upload",title:App.t("shared_components.filespanel.source_title","File source")},initialize:function e(){return this}});BaseKit.Panels.FilesPanelModel=r;var n=t["default"]=r},63002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(64789));var i=o(r(56502));var a=r(55372);function o(e){return e&&e.__esModule?e:{default:e}}var s=616;function l(){var e=(0,a.isTouchDevice)();var t=window.innerWidth<=s;return e&&t}var u=Marionette.ItemView.extend({events:{"click .js-upload":"uploadClicked","click .js-close":"closeClicked","click .js-bg":"closePanel","click .js-recent":"openRecentFilesPanel"},initialize:function e(){this.listenTo(this.model,"change:panel",this.rerender);return this},getGlobalFileAssets:function e(){return BaseKit.Globals.fileAssets},render:function e(){var t=Object.assign({},this.model.toJSON(),{isSmallResTouchDevice:l()});var r=Twig.render(Twig.templates.files_panel,t);this.$el.empty().append(r);this.moveToBody();this.attachPanelEvents();return this},rerender:function e(){this.currentView&&"function"===typeof this.currentView.destroy&&this.currentView.destroy();this.render()},moveToBody:function e(){var t=this.$el.appendTo("body");this.setElement(t)},attachPanelEvents:function e(){switch(this.model.get("panel")){case"upload":this.attachUploadViewEvents();break;case"recentFiles":this.attachRecentFilesViewEvents();break}},attachUploadViewEvents:function e(){this.filesUploadPanelView=new n.default({el:".js-upload-panel",siteRef:this.siteRef,collection:this.getGlobalFileAssets(),model:new Backbone.Model});this.listenTo(this.filesUploadPanelView,"file:upload",this.uploadFinished);this.listenTo(this.filesUploadPanelView,"file:upload:start",this.uploadStarted);this.listenTo(this.filesUploadPanelView,"file:upload:error",this.rerender);this.currentView=this.filesUploadPanelView},attachRecentFilesViewEvents:function e(){var t=this;this.recentFilesPanelView=new i.default({el:".js-recent-files",collection:this.getGlobalFileAssets()});this.listenTo(this.recentFilesPanelView,"file:select",this.fileSelected);this.listenTo(this.recentFilesPanelView,"file:delete",this.fileDeleted);this.listenTo(this.recentFilesPanelView,"files:loaded",(function(){t.el.querySelector(".js-content").removeAttribute("hidden");t.el.querySelector(".js-menu").setAttribute("hidden",true)}));this.currentView=this.recentFilesPanelView},uploadClicked:function e(){l()?this.openFileUpload():this.openUploadPanel()},openFileUpload:function e(){this.filesUploadPanelView.trigger("upload:file")},fileSelected:function e(t){this.trigger("file:selected",t);this.closePanel()},fileDeleted:function e(t){this.trigger("file:deleted",t)},uploadFinished:function e(t){this.el.querySelector(".js-menu-overlay").setAttribute("hidden","hidden");this.fileSelected(t)},uploadStarted:function e(){this.hideMenuUI();this.el.querySelector(".js-menu-overlay").removeAttribute("hidden")},hideMenuUI:function e(){this.el.querySelector(".js-menu").setAttribute("hidden","hidden")},closeClicked:function e(){"upload"!==this.model.get("panel")&&l()?this.model.set({panel:"upload",title:App.t("shared_components.filespanel.source_title","File source")}):this.closePanel()},closePanel:function e(){this.currentView&&"function"===typeof this.currentView.destroy&&this.currentView.destroy();this.destroy();this.trigger("panel:close")},openUploadPanel:function e(){this.model.set({panel:"upload",title:App.t("shared_components.filespanel.source_title","File source")})},openRecentFilesPanel:function e(){this.model.set({panel:"recentFiles",title:App.t("shared_components.filespanel.recent_title","Recent")});this.el.querySelector(".js-recent-icon").setAttribute("hidden",true);this.el.querySelector(".js-recent-loading").removeAttribute("hidden");this.el.querySelector(".js-content").setAttribute("hidden",true)}});BaseKit.Panels.FilesPanelView=u;var c=t["default"]=u},56502:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(60879));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;var i=function e(){};return{s:i,n:function t(){if(n>=e.length)return{done:true};return{done:false,value:e[n++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=true,s=false,l;return{s:function t(){r=r.call(e)},n:function e(){var t=r.next();a=t.done;return t},e:function e(t){s=true;l=t},f:function e(){try{a||null==r.return||r.return()}finally{if(s)throw l}}}}function o(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=Marionette.CompositeView.extend({ChildView:n.default,childEvents:function e(){var t=this;return{select:function e(r){t.trigger("file:select",r.model.toJSON())},delete:function e(r){t.collection.remove(r.model);while(t.el.firstChild)t.el.removeChild(t.el.firstChild);t.displayFiles(t.formattedFiles(t.collection.toJSON()));r.model.destroy();t.trigger("file:delete",r.model.toJSON())}}},initialize:function e(){var t=this;this.collection.fetch({success:function e(r){t.displayFiles(t.formattedFiles(r.toJSON()));t.trigger("files:loaded")}});return this},formattedFiles:function e(t){var r=t;var n=a(r),i;try{for(n.s();!(i=n.n()).done;){var o=i.value;o.size=this.humanReadableFileSize(o.fileSize)}}catch(e){n.e(e)}finally{n.f()}return r},humanReadableFileSize:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;var n=["B","KB","MB","GB","TB"];var i=1024;var a=0;var o=t;while(o/i>=1){o/=i;a+=1}return o.toFixed(r)+n[a]},displayFiles:function e(t){var r=Twig.render(Twig.templates.files_panel_file,{files:t});this.$el.append(r);this.attachChildrenEvents();this.el.classList.remove("loading-spinner")},attachChildrenEvents:function e(){this.collection.each((function(e){this.attachFileFunction(e)}),this);this.delegateEvents()},attachFileFunction:function e(t){var r=new this.ChildView({el:"[data-file-ref='".concat(t.get("ref"),"']"),model:t});this.proxyChildEvents(r);this.children.add(r)}});var u=t["default"]=l},17074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(13745));var i=o(r(27695));var a=o(r(63002));function o(e){return e&&e.__esModule?e:{default:e}}var s={build:function e(){return new a.default({model:new i.default({panel:"upload",title:(0,n.default)("shared_components.filespanel.source_title","File source")})})}};var l=t["default"]=s},46345:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(55796);var i=r(9878);function a(){return App.frontEndBucket.sitePresetAttributes}var o=Marionette.ItemView.extend({template:"font_picker_panel",events:{"click .js-toggle-font-family-list":"toggleFontFamilyList","click .js-font-family-button":"fontFamilyChosen","change .js-font-size-select":"fontSizeChosen","change .js-font-weight-select":"fontWeightChosen","change .js-line-height-select":"lineHeightChosen","change .js-letter-spacing-select":"letterSpacingChosen"},beforeRender:function e(t){},afterRender:function e(t){},fontChosen:function e(){},initialize:function e(t){this.model=t.model||null;this.globalValues=n.globals.globalValues;this.fontChosen=t.fontChosen||function(){};this.beforeRender=t.beforeRender||function(){};this.afterRender=t.afterRender||function(){};this.fontListContents=t.fontListContents||[];this.allGoogleFonts=t.allGoogleFonts||{};this.templateStylePreprocessorVariablesEnabled=t.templateStylePreprocessorVariablesEnabled;this.rowsEnabled=t.rowsEnabled;window.setTimeout(this.loadFonts.bind(this),300);return this},fontFamilyChosen:function e(t){var r=this.el.querySelector(".js-font-family-list");var n=t.currentTarget.dataset.fontFamilyValue;var i=this.el.querySelector(".js-toggle-font-family-list");var a=t.currentTarget.innerHTML;$(r).attr("hidden","hidden");$(i).html(a);this.setModelValue("font-family",n);this.fontChosen(this.model)},fontSizeChosen:function e(t){var r=t.target.value;this.setModelValue("font-size",r);this.fontChosen(this.model)},fontWeightChosen:function e(t){var r=t.target.value;this.setModelValue("font-weight",r);this.fontChosen(this.model)},lineHeightChosen:function e(t){var r=t.target.value;this.setModelValue("line-height",r);this.fontChosen(this.model)},letterSpacingChosen:function e(t){var r=t.target.value;this.setModelValue("letter-spacing",r);this.fontChosen(this.model)},setModelValue:function e(t,r){var n="".concat(this.model.get("name"),"-").concat(t);this.templateStylePreprocessorVariablesEnabled&&(n="".concat(this.model.get("name"),"--").concat(t));this.model.variables.findWhere({name:n}).set("value",r)},getModelValue:function e(t){var r="".concat(this.model.get("name"),"-").concat(t);this.templateStylePreprocessorVariablesEnabled&&(r="".concat(this.model.get("name"),"--").concat(t));return this.model.variables.findWhere({name:r}).get("value")},loadFonts:function e(){var t=window.frames.siteFrame;window.WebFont&&window.WebFont.load({google:{families:this.allGoogleFonts}});t&&t.WebFont&&t.WebFont.load({google:{families:this.allGoogleFonts}})},toggleFontFamilyList:function e(t){var r=$(t.currentTarget).next(".js-font-family-list");$(t.currentTarget).toggleClass("is-open");"hidden"===r.attr("hidden")?r.attr("hidden",false):r.attr("hidden","hidden")},setModel:function e(t){this.model=t},setFontChosen:function e(t){this.fontChosen=t},getFontValueString:function e(){var t=this.getModelValue("font-family");var r=window._.findWhere(this.fontListContents,{value:t});var n;var i;if(r)n=r.text;else{var o=a();i=window._.findWhere(o,{name:t});i&&(r=window._.findWhere(this.fontListContents,{value:i.value}));n=r?r.text:null}return n},render:function e(){if(null===this.model)return null;this.beforeRender(this.$el);var t={fontFamily:this.getFontValueString(),fontWeight:this.getModelValue("font-weight"),fontSize:this.getModelValue("font-size"),lineHeight:this.getModelValue("line-height"),letterSpacing:this.getModelValue("letter-spacing"),fontListContents:this.fontListContents,rowsEnabled:this.rowsEnabled};var r=Twig.render(Twig.templates[this.template],t);(0,i.emptyElement)(this.el);(0,i.append)(this.el,r);this.afterRender(this.$el);return this}});var s=t["default"]=o},38309:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.Behavior.extend({onMouseEnter:function e(){this.view.highlighter.highlightWidget({container:this.view.containerEl,el:this.view.widgetEl})},onMouseLeave:function e(){this.view.highlighter.removeHighlightFromWidget({container:this.view.containerEl,el:this.view.widgetEl})}});var n=t["default"]=r},55677:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({template:"hidden_widgets_panel_item",tag:"div",className:"full-page-panel__field",events:{"change .js-input":"onWidgetVisibilityChange"},triggers:{mouseenter:"MouseEnter",mouseleave:"MouseLeave"},behaviors:function e(){return this.options.behaviors},initialize:function e(t){this.highlighter=t.highlighter;this.globalEventsHandler=t.globalEventsHandler;this.containerEl=t.containerEl;this.siteContainerEl=t.siteContainerEl;this.widgetEl=n(this.siteContainerEl,this.model.get("uniqueHTMLId"))},onWidgetVisibilityChange:function e(){this.setVisibilityDataAttribute()},setVisibilityDataAttribute:function e(){var t="hidden";if(this.isVisible()){this.widgetEl.classList.remove("bk-tpl-hidden-mask");t="visible"}else this.widgetEl.classList.add("bk-tpl-hidden-mask");this.globalEventsHandler.trigger("widget:visibility:".concat(this.model.get("uniqueHTMLId")),t)},isVisible:function e(){return this.widgetEl.classList.contains("bk-tpl-hidden-mask")}});function n(e,t){return e.getElementById(t)}var i=t["default"]=r},75095:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(83748);var i=s(r(55677));var a=s(r(13468));var o=s(r(98158));function s(e){return e&&e.__esModule?e:{default:e}}var l=Marionette.CompositeView.extend({childViewContainer:".js-hidden-widgets-panel-contents",template:"hidden_widgets_panel_content",childView:i.default,initialize:function e(t){this.widgetRegister=t.widgetRegister;this.toolbarButtonElement=document.querySelector(".js-reveal");this.globalEventsHandler=t.globalEventsHandler;this.highlighter=t.highlighter;this.childBehavior=t.childBehavior;this.siteContainerEl=u();this.containerEl=document.querySelector(".js-primary-container");this.envDataProvider=t.envDataProvider;this.setCollection();this.attachEvents()},events:{"click .js-cancel":"closePanelClicked"},collectionEvents:{"change:data":"templateWidgetUpdated",reset:"render"},setCollection:function e(){this.collection=this.widgetRegister.getTemplateWidgetCollection()},attachEvents:function e(){this.envDataProvider.get("V10CompatibilityMode")&&Editor.Events.on("sidebarPanel:changed pageSwitch:click dragdrop:dragStart",this.closePanel.bind(this))},childViewOptions:function e(){return{highlighter:this.highlighter,globalEventsHandler:this.globalEventsHandler,siteContainerEl:this.siteContainerEl,containerEl:this.containerEl,behaviors:{Highlight:{behaviorClass:this.childBehavior}}}},refresh:function e(t){this.siteContainerEl=u();this.collection.reset(t);return this},templateWidgetUpdated:function e(){this.render()},closePanelClicked:function e(){this.closePanel();(0,n.openIntercom)()},_toggleTemplateWidgetsMask:function e(){this.panelIsOpen?(0,a.default)():(0,o.default)()},_togglePanelOpenClass:function e(){this.panelIsOpen?this.el.classList.add("is-open"):this.el.classList.remove("is-open")},openPanel:function e(){(0,n.closeIntercom)();this.panelIsOpen=true;this._togglePanelOpenClass();this._toggleTemplateWidgetsMask();this.toolbarButtonElement.setAttribute("data-attr","unreveal")},closePanel:function e(){this.panelIsOpen=false;this._togglePanelOpenClass();this._toggleTemplateWidgetsMask();this.highlighter.removeAllHighlights({container:this.containerEl,siteContainer:this.siteContainerEl});this.toolbarButtonElement.setAttribute("data-attr","reveal")},isOpen:function e(){return this.panelIsOpen}});function u(){return document.getElementById("siteFrame").contentDocument}var c=t["default"]=l},54329:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.Behavior.extend({onMouseEnter:function e(){this.view.highlighter.removeAllHighlights({siteContainer:this.view.siteContainerEl,container:this.view.containerEl});this.view.highlighter.highlightWidget({container:this.view.containerEl,el:this.view.widgetEl})}});var n=t["default"]=r},98158:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=a;var n=i(r(31170));function i(e){return e&&e.__esModule?e:{default:e}}function a(){var e=n.default.container.WidgetRegister.getTemplateWidgetCollection();e.forEach((function(e){var t=e.get("data");if(0===parseInt(t.showTplWidget,10)){var r=Editor.Site.Dom.window.document.querySelector("#".concat(e.get("uniqueHTMLId")));r.classList.add("bk-tpl-hidden");r.classList.remove("bk-tpl-hidden-mask")}}))}},13468:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=a;var n=i(r(31170));function i(e){return e&&e.__esModule?e:{default:e}}function a(){var e=n.default.container.WidgetRegister.getTemplateWidgetCollection();e.forEach((function(e){var t=e.get("data");if(0===parseInt(t.showTplWidget,10)){var r=Editor.Site.Dom.window.document.querySelector("#".concat(e.get("uniqueHTMLId")));r.classList.remove("bk-tpl-hidden");r.classList.add("bk-tpl-hidden-mask")}}))}},49646:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r={highlightWidget:function e(t){var r=i(t.el);t.el.classList.add("highlight");"inView"!==r&&t.container.classList.add("blink-".concat(r))},removeHighlightFromWidget:function e(t){t.el.classList.remove("highlight");n(t.container)},removeAllHighlights:function e(t){var r=t.siteContainer.querySelectorAll(".widget.highlight");Array.prototype.forEach.call(r,(function(e){e.classList.remove("highlight")}));n(t.container)}};function n(e){["top","bottom"].forEach((function(t){e.classList.remove("blink-".concat(t))}))}function i(e){var t=e.getBoundingClientRect();if(t.top<=0)return"top";if(t.bottom>=(window.innerHeight||document.documentElement.clientHeight))return"bottom";return"inView"}var a=t["default"]=r},23778:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(9878);var i=o(r(1904));var a=r(12295);function o(e){return e&&e.__esModule?e:{default:e}}var s=i.default.isiOS;var l=Marionette.ItemView.extend({template:"image_focus_panel",events:{"click .js-image-focus-cancel":"cancelChanges","click .js-image-focus-done":"closePanel","click .js-image-focus-bg":"cancelChanges","click .js-image-overlay":"focalPointClicked"},initialize:function e(t){this.dialogStyle=t.dialogStyle;this.backgroundImage=t.backgroundImage;this.backgroundPosition=t.backgroundPosition;this.currentBackgroundPosition=t.backgroundPosition;this.bindEvents()},bindEvents:function e(){this.resizeHandler=this.resizeImage.bind(this);window.addEventListener("resize",this.resizeHandler,false)},render:function e(){var t=Twig.render(Twig.templates[this.template],{dialogStyle:this.dialogStyle,backgroundImage:this.backgroundImage,backgroundPosition:this.backgroundPosition});(0,n.emptyElement)(this.el);(0,n.append)(this.el,t);document.querySelector("body").insertAdjacentElement("beforeend",this.el);this.setElement(this.el);this.onRender();return this},onRender:function e(){var t=this;Editor.Events.on("screenMode:change",this.closePanel.bind(this));this._loadVirtualImage(this.backgroundImage).then((function(e){var r=t.el.querySelector(".js-image");e.width>e.height?r.style.width="100%":r.style.height="100%";r.removeAttribute("hidden");var n=s()?500:0;setTimeout((function(){var e=t.el.querySelector(".js-image-wrapper");e.style.width="".concat(r.width,"px");e.style.height="".concat(r.height,"px")}),n);(0,a.isMobileScreenMode)()&&t.resizeImage();e.remove()}))},resizeImage:function e(){var t=this.el.querySelector(".js-image-wrapper");var r=this.el.querySelector(".js-image");if((0,a.isMobileScreenMode)()){t.setAttribute("hidden","true");var n=this.el.querySelector(".js-image-container");var i=n.clientWidth/r.width;var o=n.clientHeight/r.height;var s=i>o?o:i;var l=r.width*s;var u=r.height*s;r.style.width="".concat(l,"px");r.style.height="".concat(u,"px");t.style.width="".concat(l,"px");t.style.height="".concat(u,"px");t.removeAttribute("hidden")}else{if(r.width>r.height){r.style.width="100%";r.style.height=""}else{r.style.height="100%";r.style.width=""}t.style.width="".concat(r.width,"px");t.style.height="".concat(r.height,"px")}},closePanel:function e(){window.removeEventListener("resize",this.resizeHandler,false);this.trigger("panel:close");this.destroy()},cancelChanges:function e(){this.changeFocalPoint(this.backgroundPosition);this.closePanel()},focalPointClicked:function e(t){var r=this.el.querySelector(".js-image-overlay");var n="".concat(Math.floor(t.offsetX/r.clientWidth*100),"%");var i="".concat(Math.floor(t.offsetY/r.clientHeight*100),"%");var a=this.el.querySelector(".js-focal-point");a.style.left=n;a.style.top=i;this.changeFocalPoint({left:n,top:i})},changeFocalPoint:function e(t){if(t===this.currentBackgroundPosition)return;this.trigger("focus:change",t);this.currentBackgroundPosition=t},_loadVirtualImage:function e(t){return new Promise((function(e){var r=document.createElement("img");r.src=t;r.addEventListener("load",(function(){e(r)}))}))}});var u=t["default"]=l},53995:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(9878);var i=o(r(9752));var a=r(33835);function o(e){return e&&e.__esModule?e:{default:e}}var s=Marionette.ItemView.extend({defaultOverlayOpacity:.65,defaultStyleSets:{black:{background:"#000"},grey:{background:"#999"},white:{background:"#fff"}},excludedColours:["#000","#000000","#999","#999999","#fff","#ffffff"],customColourPickerView:null,template:"overlay_settings_panel",events:{"click .js-overlay-settings-cancel":"cancelChanges","click .js-overlay-settings-done":"saveChanges","click .js-overlay-settings-backstop":"cancelChanges","click .js-presets-tab":"showPresets","click .js-custom-tab":"showCustom","click .js-colour-button":"colourClicked","click .js-edit-colour-button":"editColourClicked","click .js-colour-node":"editColourClicked","change .js-slider-input":"onOpacityChanged","input .js-slider-input":"onOpacityChanged"},initialize:function e(t){this.dialogStyle=t.dialogStyle;this.styleSets=this.reorderStyleSets(t.styleSets);this.overlayColour=t.overlayColour;this.currentOverlayColour=this.overlayColour;this.overlayColourType=t.overlayColourType||this.findOverlayColourType(this.overlayColour);this.currentOverlayColourType=this.overlayColourType;this.overlayOpacity=t.overlayOpacity||this.defaultOverlayOpacity;this.currentOverlayOpacity=this.overlayOpacity},render:function e(){var t=Twig.render(Twig.templates[this.template],{dialogStyle:this.dialogStyle,styleSets:this.styleSets,overlayColour:this.overlayColour,overlayColourType:this.overlayColourType,minValue:0,maxValue:100,overlayOpacity:this.normaliseOpacitySliderValue(this.overlayOpacity)});(0,n.emptyElement)(this.el);(0,n.append)(this.el,t);document.querySelector("body").insertAdjacentElement("beforeend",this.el);this.setElement(this.el);this.onRender();return this},onRender:function e(){this.cacheElements();this.addEventListeners()},cacheElements:function e(){this.presetsTab=this.el.querySelector(".js-presets-tab");this.customTab=this.el.querySelector(".js-custom-tab");this.presetsColourView=this.el.querySelector(".js-colour-list");this.customColourView=this.el.querySelector(".js-custom-colour");this.colourNode=this.el.querySelector(".js-colour-node");this.opacitySlider=this.el.querySelector(".js-slider-input");this.opacityValueLabel=this.el.querySelector(".js-opacity-value-label")},addEventListeners:function e(){Editor.Events.on("screenMode:change",this.closePanel.bind(this))},closePanel:function e(){this.destroyCustomColourPicker();this.trigger("panel:close");this.destroy()},saveChanges:function e(){this.closePanel()},cancelChanges:function e(){this.changeOverlaySettings({overlayColour:this.overlayColour,overlayColourType:this.overlayColourType,overlayOpacity:this.overlayOpacity});this.closePanel()},colourClicked:function e(t){var r=t.currentTarget;var n=r.getAttribute("data-colour");this.removeActiveColourButtonClass();r.classList.add("is-selected");this.changeCustomColourNodeBackground(n);this.changeOverlaySettings({overlayColour:n,overlayColourType:"presets",overlayOpacity:this.currentOverlayOpacity})},editColourClicked:function e(){this.customColourPickerView=new i.default({colorType:"overlay",fill:this.currentOverlayColour,colorNode:this.colourNode});this.customColourPickerView.render();this.customColourPickerView.on("save",this.onColourPickerColourSaved.bind(this));this.customColourPickerView.on("change",this.onColourPickerColourChanged.bind(this))},showPresets:function e(){this.customColourView.setAttribute("hidden",true);this.presetsColourView.removeAttribute("hidden");this.removeActiveTabClass();this.presetsTab.classList.add("is-selected")},showCustom:function e(){this.presetsColourView.setAttribute("hidden",true);this.customColourView.removeAttribute("hidden");this.removeActiveTabClass();this.customTab.classList.add("is-selected")},onOpacityChanged:function e(){var t=this.opacitySlider.value.trim();this.changeOpacityLabelValue(t);this.changeOverlayOpacity(Number(t/100).toFixed(2))},reorderStyleSets:function e(t){var r=this;var n=Object.keys(t).reduce((function(e,n){r.excludedColours.includes(t[n].background)||(e[n]=t[n]);return e}),{});return Object.assign(n,this.defaultStyleSets)},findOverlayColourType:function e(t){return this.hasSelectedPresetsColour(t)?"presets":"custom"},normaliseOpacitySliderValue:function e(t){return Math.floor(100*t)},destroyCustomColourPicker:function e(){if(!this.customColourPickerView)return;this.customColourPickerView.close();this.customColourPickerView=null},removeActiveTabClass:function e(){this.el.querySelector(".js-tab-button.is-selected").classList.remove("is-selected")},removeActiveColourButtonClass:function e(){var t=this.el.querySelector(".js-colour-button.is-selected");t&&t.classList.remove("is-selected")},hasSelectedPresetsColour:function e(t){var r=this;return Object.keys(this.styleSets).filter((function(e){return r.styleSets[e].background===t})).length>0},isOverlaySettingChanged:function e(t){return t.overlayColour!==this.currentOverlayColour||t.overlayColourType!==this.currentOverlayColourType||t.overlayOpacity!==this.currentOverlayOpacity},changeOverlaySettings:function e(t){if(!this.isOverlaySettingChanged(t))return;this.trigger("overlay:change",{overlayColour:t.overlayColour,overlayColourType:t.overlayColourType,overlayOpacity:t.overlayOpacity});this.currentOverlayColourType=t.overlayColourType;this.currentOverlayColour=t.overlayColour;this.currentOverlayOpacity=t.overlayOpacity},changeOverlayOpacity:function e(t){var r=this;this.trigger("opacity:drag",t);(0,a.debounce)((function(){r.changeOverlaySettings({overlayColour:r.currentOverlayColour,overlayColourType:r.currentOverlayColourType,overlayOpacity:t})}),200)()},onColourPickerColourSaved:function e(t){this.changeOverlaySettings({overlayColour:t,overlayColourType:"custom",overlayOpacity:this.currentOverlayOpacity})},onColourPickerColourChanged:function e(t){this.changeCustomColourNodeBackground(t)},changeCustomColourNodeBackground:function e(t){this.colourNode.style.backgroundColor=t},changeOpacityLabelValue:function e(t){this.opacityValueLabel.innerText="".concat(t,"%")}});var l=t["default"]=s},33609:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Backbone.Model.extend({initialize:function e(t){t.picture&&t.picture.data&&this.set("picture",t.picture.data.url)}});var n=t["default"]=r},92239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(33609));function i(e){return e&&e.__esModule?e:{default:e}}var a=Backbone.Collection.extend({model:n.default},{fromFacebookAlbumData:function e(t){return new a(t)}});var o=t["default"]=a},35391:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=t.ImagesFacebookAlbumView=void 0;var n=r(9878);function i(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){i(o,n,a,s,l,"next",e)}function l(e){i(o,n,a,s,l,"throw",e)}s(void 0)}))}}var o="loading-spinner";var s=t.ImagesFacebookAlbumView=Backbone.View.extend({tagName:"li",className:"facebook-album-list__wrapper",events:{"click .js-facebook-album":"onClickAlbum"},render:function e(){(0,n.append)(this.el,Twig.render(Twig.templates.images_panel_facebook_album,this.model.toJSON()))},onClickAlbum:function e(){this.trigger("album:click",this.model.get("id"))}});var l=Marionette.CollectionView.extend({childView:s,childEvents:{"album:click":"onClickAlbum"},events:{"click .js-fb-login":"onClickFbLogin"},initialize:function e(t){this.facebookImageRetriever=t.facebookImageRetriever;this.getAlbums()},renderAlbums:function e(t){this.collection=t;this.render();this.hideSpinner()},onClickFbLogin:function e(){var t=this;var r={appId:App.frontEndBucket.facebookAppId,baseUrl:App.frontEndBucket.domain,protocol:App.frontEndBucket.protocol};var n=JSON.stringify({type:"facebook",data:r});if(window.WebViewBridge){window.WebViewBridge.send(n);return}if(window.isReactNative&&"android"===window.reactNativePlatform){postMessage(n);return}this.facebookImageRetriever.login().then((function(){t.hideLogin();t.getAlbums()}))},hideLogin:function e(){this.el.classList.add(o);var t=document.querySelector(".js-fb-login-wrapper");t&&(t.hidden=true)},showLogin:function e(){this.hideSpinner();(0,n.append)(this.el,Twig.render(Twig.templates.images_panel_facebook_login));var t=document.querySelector(".js-fb-login-wrapper");t&&(t.hidden=false)},getAlbums:function e(){var t=this;return a(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function e(n){while(1)switch(n.prev=n.next){case 0:n.prev=0;n.next=3;return t.facebookImageRetriever.getAlbums();case 3:r=n.sent;t.renderAlbums(r);n.next=10;break;case 7:n.prev=7;n.t0=n["catch"](0);t.showLogin();case 10:case"end":return n.stop()}}),e,null,[[0,7]])})))()},hideSpinner:function e(){this.trigger("album:loaded");this.el.classList.remove(o)},onClickAlbum:function e(t,r){this.trigger("album:click",r,this.facebookImageRetriever)}});var u=t["default"]=l},52578:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Backbone.Model.extend({getImage:function e(){return this.get("images")[0].source}});var n=t["default"]=r},98853:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(92239));var i=a(r(8117));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function s(e){o(a,n,i,s,l,"next",e)}function l(e){o(a,n,i,s,l,"throw",e)}s(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function c(e,t,r){t&&u(e.prototype,t);r&&u(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var d=false;var f="/me?fields=albums{name,count,picture}&limit=25";var p="/photos?fields=id,height,width,picture,images&limit=25";function g(e){return e.authResponse.accessToken}function h(e,t){var r=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&#]".concat(r,"=([^&#]*)"));var i=n.exec(t);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}var v=function(){function e(t){l(this,e);this._injectFacebookRootElement();this._injectFacebookScript(t.locale);this._initializeFacebookSDK()}c(e,[{key:"getAlbums",value:function(){var e=s(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return this._initializeFacebookSDK();case 2:i.prev=2;i.next=5;return this._getAccessToken();case 5:t=i.sent;this._accessToken=t;i.next=9;return this._getAlbumData();case 9:r=i.sent;return i.abrupt("return",n.default.fromFacebookAlbumData(r));case 13:i.prev=13;i.t0=i["catch"](2);throw new Error(i.t0);case 16:case"end":return i.stop()}}),e,this,[[2,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getImages",value:function(){var e=s(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return this._getImagesData(t);case 2:r=n.sent;return n.abrupt("return",i.default.fromFacebookImagesData(r));case 4:case"end":return n.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"login",value:function e(){return new Promise((function(e,t){FB.login((function(r){"connected"===r.status?e(g(r)):t()}),{scope:"user_photos"})}))}},{key:"_initializeFacebookSDK",value:function(){var e=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(e){d?e(d):window.fbAsyncInit=function(){FB.init({appId:App.frontEndBucket.facebookAppId,cookie:true,xfbml:false,status:true,version:"v2.8"});d=true;e(true)}})));case 1:case"end":return t.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_injectFacebookRootElement",value:function e(){if(!document.getElementById("fb-root")){var t=document.createElement("div");t.setAttribute("id","fb-root");document.body.appendChild(t)}}},{key:"_injectFacebookScript",value:function e(t){var r=document.createElement("script");r.src="".concat(document.location.protocol,"//connect.facebook.net/").concat(t,"/sdk.js");document.getElementById("fb-root").appendChild(r)}},{key:"_getImagesData",value:function e(t){var r=this;this._imagesData=[];return new Promise((function(e){FB.api(t+p,"get",{access_token:r._accessToken},r._processImagesResponse.bind(r,e))}))}},{key:"_processImagesResponse",value:function e(t,r){this._imagesData=this._imagesData.concat(r.data);r.paging&&r.paging.next?FB.api(r.paging.next,"get",{access_token:this._accessToken},this._processImagesResponse.bind(this,t)):t(this._imagesData)}},{key:"_getAlbumData",value:function(){var e=s(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function e(r){while(1)switch(r.prev=r.next){case 0:this._albumsData=[];return r.abrupt("return",new Promise((function(e){FB.api(f,"get",{access_token:t._accessToken},t._processAlbumResponse.bind(t,e))})));case 2:case"end":return r.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_processAlbumResponse",value:function e(t,r){var n=r.albums?r.albums:r;this._albumsData=this._albumsData.concat(n.data);n.paging&&n.paging.next?FB.api(n.paging.next,"get",{access_token:this._accessToken},this._processAlbumResponse.bind(this,t)):t(this._albumsData)}},{key:"_getAccessToken",value:function(){var e=s(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function e(r){while(1)switch(r.prev=r.next){case 0:if(!App.frontEndBucket.facebookAccessToken){r.next=2;break}return r.abrupt("return",Promise.resolve(App.frontEndBucket.facebookAccessToken));case 2:if(!window.location.hash){r.next=7;break}t=h("access_token",window.location.hash);if(!t){r.next=7;break}App.frontEndBucket.facebookAccessToken=t;return r.abrupt("return",Promise.resolve(t));case 7:return r.abrupt("return",new Promise((function(e,t){FB.getLoginStatus((function(r){if("connected"===r.status){var n=g(r);App.frontEndBucket.facebookAccessToken=n;e(n)}else t()}))})));case 8:case"end":return r.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]);return e}();var m=t["default"]=v},8117:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(52578));function i(e){return e&&e.__esModule?e:{default:e}}var a=Backbone.Collection.extend({model:n.default},{fromFacebookImagesData:function e(t){return new a(t)}});var o=t["default"]=a},61155:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=t.ImagesFacebookImagesCollectionView=t.ImagesFacebookImageView=void 0;var n=i(r(8117));function i(e){return e&&e.__esModule?e:{default:e}}var a=t.ImagesFacebookImageView=Backbone.View.extend({tagName:"li",className:"images-panel-recent__image-wrapper image-list__wrapper",events:{"click .js-facebook-image":"onClickImage"},render:function e(){this.$el.append(Twig.render(Twig.templates.images_panel_facebook_image,this.model.toJSON()))},onClickImage:function e(){this.trigger("image:click",this.model.getImage())}});var o=Backbone.View.extend({tagName:"li",className:"images-panel-recent__image-wrapper image-list__wrapper has-checkbox",events:{"click .js-facebook-image":"onClickImage"},onClickImage:function e(){this.$(".js-image-checkbox").click();this.$el.toggleClass("is-selected",this.$(".js-image-checkbox").is(":checked"));this.trigger("galleryImage:click",this.model,this.$(".js-image-checkbox").is(":checked"))},render:function e(){this.$el.append(Twig.render(Twig.templates.images_panel_facebook_image_for_gallery,this.model.toJSON()))}});var s=t.ImagesFacebookImagesCollectionView=Marionette.CollectionView.extend({childEvents:{"image:click":"onClickImage","galleryImage:click":"onClickGalleryImage"},initialize:function e(){this.selectedImages=new n.default},onClickGalleryImage:function e(t,r,n){n?this.selectedImages.add(r):this.selectedImages.remove(r);this.trigger("images:change",this.selectedImages)},onClickImage:function e(t,r){this.trigger("click:image",r)}});var l=t["default"]=Backbone.View.extend({initialize:function e(t){var r=this;this.siteRef=t.siteRef||void 0;t.fbImageRetriever.getImages(t.albumId).then((function(e){r.initializeCollectionView(e,t.widgetType);"image"!==t.widgetType&&r.renderGalleryButtons(t.widgetType);r.hideSpinner()}));this.galleryAssets=t.galleryAssets;this.globalAssets=t.globalAssets;this.listenTo(this,"selection:confirm",this.onSelectionConfirm)},destroy:function e(){this.remove()},hideSpinner:function e(){this.trigger("fbImages:loaded");this.$el.removeClass("loading-spinner")},initializeCollectionView:function e(t,r){this.collectionView=new s({collection:t,el:".js-facebook-collection-view",childView:this.collectionChildView(r)});this.listenTo(this.collectionView,"click:image",this.onClickImage);this.listenTo(this.collectionView,"images:change",this.onChangeImages);this.collectionView.render()},onSelectionConfirm:function e(){var t=this,r;var n=[];this.showSpinner();this.selectedImages.forEach((function(e){var r=e.getImage();var i=$.Deferred();t.uploadFacebookImage(r).done((function(e){t.galleryAssets.push(e);i.resolve()})).fail(i.reject);n.push(i.promise())}));(r=$).when.apply(r,n).done((function(){t.trigger("images:select:complete",{assets:t.galleryAssets,enableSave:true})})).fail(this.showErrorUI.bind(this))},onChangeImages:function e(t){this.selectedImages=t;this.$(".js-selected-images-count").text(t.length);this.trigger("images:change")},renderGalleryButtons:function e(){this.selectedImagesCount=0;this.$el.append(Twig.render(Twig.templates.images_panel_facebook_gallery_buttons,{selectedImagesCount:this.selectedImagesCount}))},collectionChildView:function e(t){if("image"===t)return a;return o},showSpinner:function e(){this.collectionView.collection=null;this.collectionView.render();this.$(".js-gallery").prop("hidden",true);this.$el.addClass("loading-spinner")},onClickImage:function e(t){var r=this;this.showSpinner();this.uploadFacebookImage(t).done((function(e){r.trigger("image:click",e)})).fail(this.showErrorUI.bind(this))},showErrorUI:function e(t){var r=Math.round(parseInt(App.user.capabilities.storageLimit,10)/1048576*100)/100;this.$(".js-upload-panel-error-content").removeAttr("hidden");this.hideSpinner();t&&"cannotUploadAccountHolderExceededStorageLimit"===t?this.$(".js-upload-error-msg").text(App.t("shared_components.imagespanel.uploading_error_exceeded_limit","- you have exceeded the storage limit of %1MB.",r)):this.$(".js-upload-error-msg").text(App.t("shared_components.imagespanel.uploading_error_general","- We’re really sorry about this. Please email %1 so our support team can look into this for you",App.brand.supportEmail))},uploadFacebookImage:function e(t){var r=this;var n=$.Deferred();this.getUploadToken().done((function(e){var i={token:e,url:t,type:"image",siteRef:App.session.get("siteRef")||r.siteRef};$.ajax({type:"POST",url:"".concat(App.session.get("apiProxyBaseUrl"),"/users/").concat(App.session.get("userRef"),"/assets"),async:true,data:i,xhrFields:{withCredentials:true},headers:{"X-CSRF-TOKEN":App.session.get("csrfToken")}}).done((function(e){var t=JSON.parse(e).result;r.globalAssets.add(new BaseKit.Globals.Asset(t));n.resolve(t)})).fail((function(e){var t=JSON.parse(e.responseText).errorKey;n.reject(t)}))}));return n.promise()},getUploadToken:function e(){var t=$.Deferred();$.ajax({type:"POST",url:"".concat(App.session.get("apiProxyBaseUrl"),"/users/").concat(App.session.get("userRef"),"/upload-tokens"),async:true,xhrFields:{withCredentials:true},headers:{"X-CSRF-TOKEN":App.session.get("csrfToken")}}).done((function(e){t.resolve(e.token)}));return t.promise()}})},5097:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(81385));var i=r(55372);function a(e){return e&&e.__esModule?e:{default:e}}var o=616;function s(){var e=(0,i.isTouchDevice)();var t=window.innerWidth<o;return e&&t}var l=Marionette.ItemView.extend({events:{"click .js-modify-collection":"modifyImagesCollectionClicked","click .js-reset-order":"resetOrderClicked","click .js-delete":"deleteImageClicked","click .js-reorder":"reorderClicked","click .js-image-list-item":"imageListItemClicked","click .js-navigate-prev":"navigatePrevItemClicked","click .js-navigate-next":"navigateNextItemClicked","input .js-title":"titleChanged","input .js-description":"descriptionChanged","click .js-image-link":"imageLinkClicked"},initialize:function e(t){this.isReorderMode=false;this.previousAssets=t.collection.toJSON();this.currentAssets=t.collection.toJSON();this.selectedAsset=this._getFirstAsset(this.currentAssets);s()||this.addSortableEvents();return this},render:function e(t){var r=t||this.previousAssets;this.selectedAsset||(this.selectedAsset=this._getFirstAsset(r));this.$el.empty().append(Twig.render(Twig.templates.images_panel_gallery,{galleryAssets:r,selectedAsset:this.selectedAsset,widgetType:this.model.get("widgetType")}));this.addSortableEvents();return this},renderSettings:function e(){var t=this._getImageSettingsContainer();t.innerHTML=Twig.render(Twig.templates.images_panel_gallery_settings,{galleryAssets:this.currentAssets,selectedAsset:this.selectedAsset,widgetType:this.model.get("widgetType")})},reorderClicked:function e(){this.switchToReorderMode()},switchToReorderMode:function e(){this.trigger("order:edit");this.model.set("mode","mobile-sortable");this.addSortableEvents()},deleteImageClicked:function e(t){t.stopPropagation();var r=t.currentTarget;var n=r.getAttribute("data-ref");var i="asset";if(r.hasAttribute("data-tpl-asset-ref")){n=r.getAttribute("data-tpl-asset-ref");i="tpl"}this.trigger("asset:delete");this.handleAssetDeletion({ref:n,type:i})},handleAssetDeletion:function e(t){var r=t.ref;var n=this.collection.get(r);var i=[];var a=[];if("tpl"===t.type){n=this.collection.findWhere({tplAssetRef:r});_.each(this.currentAssets,(function(e){e.tplAssetRef!==r&&i.push(e)}));_.each(this.previousAssets,(function(e){e.tplAssetRef!==r&&a.push(e)}))}else{_.each(this.currentAssets,(function(e){parseInt(e.ref,10)!==parseInt(r,10)&&i.push(e)}));_.each(this.previousAssets,(function(e){parseInt(e.ref,10)!==parseInt(r,10)&&a.push(e)}))}this.selectedAsset=null;this.render(i);this.currentAssets=i;this.previousAssets=a;this.collection.remove(n);this.trigger("order:change",i)},onDestroy:function e(){this.removeScrollObserver()},removeScrollObserver:function e(){if(!s())return;$(document).off("touchmove.sortable");$("body").off("touchstart.sortable")},modifyImagesCollectionClicked:function e(){this.trigger("open:upload")},addSortableEvents:function e(){var t=this;if(!this.collection||0===this.collection.length)return;var r={scrollSensitivity:100,scroll:true,sort:true,ghostClass:"sortable-ghost",animation:150,dataIdAttr:"data-ref",onMove:function e(t){var r=-1===t.related.className.indexOf("is-not-sortable");var n=-1===t.dragged.className.indexOf("is-not-sortable");return r&&n},onEnd:function e(){t.updateDisplayOrder()}};if(s()){r.handle=".js-drag-handle";r.draggable=".js-image-list-item"}this.$(".js-image-list").length>0&&Sortable.create(this.$(".js-image-list")[0],r)},updateDisplayOrder:function e(){var t=this;var r=[];this.$(".js-image-list-item").each((function(e,n){var i=void 0!==$(n).data("tpl-asset-ref");var a=t.currentAssets.find((function(e){var t=e.ref,r=e.tplAssetRef;if(i)return r===$(n).data("tpl-asset-ref").toString();return t===$(n).data("ref")}));r.push(a)}));this.trigger("order:change",r);this.currentAssets=r;this.renderSettings()},resetOrderClicked:function e(){this.render();this.trigger("order:change",this.previousAssets)},imageListItemClicked:function e(t){if(this.isReorderMode)return;this._setActiveImageListItem(t.currentTarget)},navigatePrevItemClicked:function e(){var t=this._getActiveImageItem();t.previousElementSibling&&this._setActiveImageListItem(t.previousElementSibling)},navigateNextItemClicked:function e(){var t=this._getActiveImageItem();t.nextElementSibling&&this._setActiveImageListItem(t.nextElementSibling)},titleChanged:function e(t){this.selectedAsset.title=t.currentTarget.value.trim();this.trigger("settings:change",this.currentAssets)},descriptionChanged:function e(t){this.selectedAsset.description=t.currentTarget.value.trim();this.trigger("settings:change",this.currentAssets)},imageLinkClicked:function e(){this.linkEditorView=new n.default({url:this.selectedAsset.linkUrl,target:this.selectedAsset.linkTarget}).render();this.listenTo(this.linkEditorView,"link:change",this._insertLink);this.listenTo(this.linkEditorView,"link:remove",this._removeLink);this.listenTo(this.linkEditorView,"linkEditor:close",this._linkEditorClosed)},setImageSettingsVisible:function e(t){this._setImageListControlsVisible(!t);this._setImageListContainerVisible(!t);this._setImageSettingsContainerVisible(t)},setReorderModeActive:function e(t){this.isReorderMode=t},_setActiveImageListItem:function e(t){this._removeActiveImageItemState();t.classList.add("is-active");var r=t.dataset.ref?parseInt(t.dataset.ref,10):t.dataset.tplAssetRef;this.selectedAsset=this.currentAssets.filter((function(e){return e.ref===r||e.tplAssetRef===r}))[0];this.renderSettings();this.trigger("settings:open")},_insertLink:function e(t){t.url&&this._updateSelectedAssetLink(t.url,t.target)},_removeLink:function e(){this._updateSelectedAssetLink("","")},_updateSelectedAssetLink:function e(t,r){this.selectedAsset.linkUrl=t;this.selectedAsset.linkTarget=r;this.renderSettings();this.trigger("settings:change",this.currentAssets)},_linkEditorClosed:function e(){if(!this.linkEditorView)return;this.stopListening(this.linkEditorView,"link:change");this.stopListening(this.linkEditorView,"link:remove");this.stopListening(this.linkEditorView,"linkEditor:close");this.linkEditorView=null},_getActiveImageItem:function e(){return this.el.querySelector(".js-image-list-item.is-active")},_getFirstAsset:function e(t){return t.length>0?t[0]:null},_removeActiveImageItemState:function e(){var t=this._getActiveImageItem();t.classList.remove("is-active")},_getImageSettingsContainer:function e(){return this.el.querySelector(".js-image-settings-container")},_setImageSettingsContainerVisible:function e(t){var r=this._getImageSettingsContainer();t?r.classList.add("is-active"):r.classList.remove("is-active")},_getImageListContainer:function e(){return this.el.querySelector(".js-image-list-container")},_setImageListContainerVisible:function e(t){var r=this._getImageListContainer();t?r.classList.remove("is-inactive"):r.classList.add("is-inactive")},_getImageListControls:function e(){return this.el.querySelector(".js-controls")},_setImageListControlsVisible:function e(t){var r=this._getImageListControls();t?r.removeAttribute("hidden"):r.setAttribute("hidden","hidden")}});var u=t["default"]=l},90442:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(76021);var i=Marionette.ItemView.extend({events:{"change .js-title":"titleChanged","change .js-description":"descriptionChanged","click .js-edit":"openImageEditor","click .js-preview":"openImagePreview","click .js-delete":"deleteClicked",submit:"onSubmit"},initialize:function e(t){this.imageEditor=t.imageEditor;return this},render:function e(){var t=_.extend(this.model.toJSON());this.$el.empty().append(Twig.render(Twig.templates.images_panel_image_edit,{asset:t,editable:App.user.capabilities.imageEditing&&!(0,n.isAssetSvg)(!!this.model&&this.model)}));return this},openImagePreview:function e(){var t=Twig.render(Twig.templates.images_panel_image_preview,_.extend({asset:this.model.toJSON()},this.getImageDimensions(this.model.toJSON())));$("body").append(t);$(".js-close-preview").on("click",(function(){$(".js-image-preview").remove()}));this.addESCKeyEvent()},addESCKeyEvent:function e(){$(document).keyup((function(e){27===e.keyCode&&$(".js-image-preview").remove()}))},getImageDimensions:function e(t){var r=window.innerWidth;var n=window.innerHeight;var i=r-160;var a=n-220;var o=t.imageHeight;var s=t.imageWidth;var l=o;var u=s;if(null===l&&null===u)return{width:i,height:a};if(s>i||o>a)if(s/i>o/a){u=i;l=parseInt(o/(s/u),10)}else{l=a;u=parseInt(s/(o/l),10)}return{width:u,height:l}},titleChanged:function e(){var t=this.$(".js-title").val().trim();this.model.set("title",t)},descriptionChanged:function e(){var t=this.$(".js-description").val().trim();this.model.set("description",t)},onSubmit:function e(t){var r=this;t.preventDefault();this.model.save(void 0,{patch:true,wait:true,success:function e(){r.trigger("asset:saved");r.model.trigger("asset:saved")}})},deleteClicked:function e(t){var r=this;t.preventDefault();this.model.destroy({success:function e(){r.trigger("asset:deleted",r.model)}})},openImageEditor:function e(){this.el.querySelector(".js-image-wrap").classList.add("is-loading");this.imageEditor.open({image:this.el.querySelector(".js-image"),url:this.model.get("url"),onLoad:this.onImageEditorLoad.bind(this),onSave:this.saveEditedImg.bind(this),onError:this.onImageEditorError.bind(this)})},onImageEditorLoad:function e(){this.el.querySelector(".js-image-wrap").classList.remove("is-loading")},onImageEditorError:function e(t){console.error(t)},saveEditedImg:function e(t){var r=this.model.get("title");var n=this.model.get("description");var i=this.model.get("ref");this.model.clear().set(_.extend(t,{title:r,description:n}));this.collection.add(this.model);this.render();this.trigger("asset:edited",this.model.toJSON(),i)}});var a=t["default"]=i},32229:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({events:{"click .js-image":"onImageClick","change .js-image-checkbox":"onImageSelected","click .js-setting":"onSettingClick"},initialize:function e(t){this.widgetType=t.widgetType},onImageClick:function e(t){t.stopPropagation();"image"===this.widgetType?this.trigger("select"):this.selectImage()},onSettingClick:function e(t){t.stopPropagation();this.trigger("edit")},selectImage:function e(){this.$(".js-image-checkbox").click()},onImageSelected:function e(t){t.stopPropagation();this.$el.toggleClass("is-selected",this.$(".js-image-checkbox").is(":checked"));this.trigger("pick",this.$(".js-image-checkbox").is(":checked"))}});var n=t["default"]=r},81960:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Backbone.Model.extend({defaults:{widgetType:"image",panel:"upload",parentPanel:void 0,isSubPanel:false,asset:void 0,title:App.t("shared_components.imagespanel.source_title","Image source"),forceHidden:false,showSaveBtn:false,galleryAssets:void 0,errorTimeout:null},initialize:function e(){return this}});BaseKit.Panels.Model=r;var n=t["default"]=r},35306:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=m(r(31170));var i=m(r(98853));var a=m(r(35391));var o=m(r(56526));var s=m(r(48749));var l=m(r(61155));var u=m(r(5097));var c=m(r(4956));var d=m(r(90442));var f=m(r(53738));var p=m(r(61978));var g=m(r(58041));var h=r(55372);var v=r(76021);function m(e){return e&&e.__esModule?e:{default:e}}var y=616;function b(){return(0,h.isTouchDevice)()&&w()}function w(){return window.innerWidth<y}function S(){if(!App.frontEndBucket)return{};return{facebookAppId:App.frontEndBucket.facebookAppId}}function P(){if(App.user.capabilities.hideFacebookImageImport&&1===parseInt(App.user.capabilities.hideFacebookImageImport,10))return true;return false}function E(){var e=false;if(P())return false;S().facebookAppId&&(e=true);return e}function k(){if(App.user.capabilities.stockImages&&1===parseInt(App.user.capabilities.stockImages,10))return true;return false}function C(){return n.default.container.BrandDataProvider.has("enableFilestack")}function O(){return n.default.container.EnvDataProvider.get("stockImageProvider")}var A=Marionette.ItemView.extend({events:{"click .js-upload":"uploadClicked","click .js-close":"closeClicked","click .js-save":"saveClicked","click .js-image-bg":"closePanel","click .js-recent":"openRecentImagesPanel","click .js-stock":"openStockImagesPanel","click .js-facebook":"openFacebookAlbumsPanel","click .js-selection-confirm":"notifySelection","click .images-panel__source":"sourceSelected","click .js-back":"backClicked"},initialize:function e(t){this.currentView=null;this.siteRef=t.siteRef;this.listenTo(this.model,"change:panel",this.rerender);this.listenTo(this,"close:panel",this.closePanel);return this},notifySelection:function e(){this.currentView.trigger("selection:confirm")},getGlobalAssets:function e(){return BaseKit.Globals.imageAssets},isInEditor:function e(){var t=false;"undefined"!==typeof Editor&&Editor.Site&&(t=true);return t},render:function e(){var t=_.extend(this.model.toJSON(),{isFacebookAvailable:E(),isStockImageAvailable:k(),isSmallResTouchDevice:b(),isFilestackEnabled:C(),stockImageProvider:O()});"gallery"===t.panel&&(t.selectedAsset=this._getFirstGalleryAsset(t.galleryAssets));this.$el.empty().append(Twig.render(Twig.templates.images_panel,t));this.moveToBody();this.attachPanelEvents();this.isInEditor()&&Editor.Events.trigger("imagesPanel:rendered");return this},rerender:function e(){this.currentView&&this.currentView.destroy();var t=!!this.model.get("asset")&&this.model.get("asset");var r=_.extend(this.model.toJSON(),{isFacebookAvailable:E(),isSmallResTouchDevice:b(),isStockImageAvailable:k(),isFilestackEnabled:C(),stockImageProvider:O(),asset:this.model.get("asset")?this.model.get("asset").toJSON():void 0,editable:App.user.capabilities.imageEditing&&!(0,v.isAssetSvg)(t)});"gallery"===r.panel&&(r.selectedAsset=this._getFirstGalleryAsset(r.galleryAssets));var n=Twig.templates.images_panel;this.$el.empty().append(Twig.render(n,r));this.attachPanelEvents();return this},moveToBody:function e(){var t=this.$el.appendTo("body");this.setElement(t)},attachPanelEvents:function e(){switch(this.model.get("panel")){case"upload":this.attachUploadViewEvents();break;case"recentImages":this.attachRecentImagesViewEvents();break;case"stock":this.attachStockImageViewEvents();break;case"unsplashStock":this.attachUnsplashStockViewEvents();break;case"editImage":this.attachEditImageViewEvents();break;case"landing":this.attachLandingViewEvents();break;case"gallery":this.attachGalleryViewEvents();break;case"facebookAlbums":this.attachFacebookAlbumsViewEvents();break;case"facebookImages":this.attachFacebookImagesViewEvents();break}Editor.Events.on("screenMode:change",this.closePanel.bind(this))},attachFacebookAlbumsViewEvents:function e(){var t=this;this.facebookAlbumsView=new a.default({el:".js-facebook-albums",facebookImageRetriever:new i.default({locale:this._getDeducedLocale()})});this.currentView=this.facebookAlbumsView;this.listenTo(this.facebookAlbumsView,"album:click",this.openFacebookImagesPanel);this.listenTo(this.facebookAlbumsView,"album:loaded",(function(){t.$(".js-content").attr("hidden",false)}))},_getDeducedLocale:function e(){if(this.isInEditor()&&Editor.Site&&Editor.Site.Dom&&Editor.Site.Dom.window)return Editor.Site.Dom.window.Server.app.deducedLocale;return null},attachFacebookImagesViewEvents:function e(){var t=this;this.facebookImagesView=new l.default({el:".js-facebook-images",siteRef:this.siteRef,albumId:this.fbSelectedAlbumRef,fbImageRetriever:this.fbImageRetriever,widgetType:this.model.get("widgetType"),galleryAssets:this.model.get("galleryAssets"),globalAssets:this.getGlobalAssets()});this.currentView=this.facebookImagesView;this.listenTo(this.facebookImagesView,"image:click",this.selectFacebookImage);this.listenTo(this.facebookImagesView,"images:change",this._enableAddImages);this.listenTo(this.facebookImagesView,"images:select:complete",this.openGalleryPanel);this.listenTo(this.facebookImagesView,"fbImages:loaded",(function(){t.$(".js-content").attr("hidden",false)}))},selectFacebookImage:function e(t){this.trigger("asset:change",t);this.closePanel()},attachUploadViewEvents:function e(){this.imagesUploadPanelView=new p.default({el:".js-upload-panel",siteRef:this.siteRef,collection:this.getGlobalAssets(),model:new Backbone.Model,userDataProvider:n.default.container.UserDataProvider});this.listenTo(this.imagesUploadPanelView,"image:upload",this.uploadFinished);this.listenTo(this.imagesUploadPanelView,"images:upload:finished",this.multipleUploadFinished);this.listenTo(this.imagesUploadPanelView,"image:upload:start",this.uploadStarted);this.listenTo(this.imagesUploadPanelView,"image:upload:error",this.rerender);this.currentView=this.imagesUploadPanelView},openFileUpload:function e(){this.imagesUploadPanelView.trigger("upload:image")},multipleUploadFinished:function e(t){var r=this.model.get("galleryAssets");this.$(".js-menu-overlay").attr("hidden","hidden");this.model.set("galleryAssets",t.concat(r));this.openRecentImagesPanel({enableSave:true});this.sourceSelected()},uploadFinished:function e(t){this.$(".js-menu-overlay").attr("hidden","hidden");this.imageSelected(t)},uploadStarted:function e(){this.hideMenuUI();this.$(".js-menu-overlay").removeAttr("hidden")},hideMenuUI:function e(){this.$(".js-menu").attr("hidden","hidden")},closeClicked:function e(){if(this.model.get("closeAction")&&"function"===typeof this.model.get("closeAction")){this.model.get("closeAction").call();return}"upload"!==this.model.get("panel")&&b()&&"landing"!==this.model.get("panel")&&b()&&"gallery"!==this.model.get("panel")&&b()?this.model.set({panel:"upload",title:App.t("shared_components.imagespanel.source_title","Image source")}):this.model.get("isSubPanel")?this.openParentPanel(this.model.get("parentPanel")):"mobile-sortable"===this.model.get("mode")?this._restoreDefaultGalleryView():"gallery"===this.model.get("panel")||"landing"===this.model.get("panel")||"gallery"!==this.model.get("widgetType")&&"slideshow"!==this.model.get("widgetType")?this.closePanel():this.openGalleryPanel({assets:this.model.get("galleryAssets"),enableSave:void 0!==this.galleryAssetsUpdated&&this.galleryAssetsUpdated})},saveClicked:function e(){if("mobile-sortable"===this.model.get("mode")){this.model.set("mode",void 0);this.model.set("enableSave",true);this.rerender();return}if("image-settings"===this.model.get("mode")){this._restoreDefaultGalleryView();return}if("gallery"===this.model.get("widgetType")||"slideshow"===this.model.get("widgetType")){this.trigger("save:".concat(this.model.get("widgetType")),this.model.get("galleryAssets"));this.closePanel()}},openParentPanel:function e(t){switch(t){case"upload":this.openUploadPanel();break;case"recentImages":this.openRecentImagesPanel();break;case"stock":this.openStockImagesPanel();break;case"gallery":this.openGalleryPanel();break}},closePanel:function e(){"gallery"===this.model.get("panel")&&void 0!==this.galleryAssetsUpdated&&(this.galleryAssetsUpdated=false);this.currentView&&"function"===typeof this.currentView.destroy&&this.currentView.destroy();this.destroy();this.trigger("close:images-panel");var t=document.querySelector(".js-menu--open");t&&t.classList.remove("images-panel__menu--open","js-menu--open")},sourceSelected:function e(){var t=document.querySelector(".js-upload.is-selected");if(!t){var r=document.querySelector(".js-menu");r&&r.classList.add("images-panel__menu--open","js-menu--open")}},uploadClicked:function e(){b()&&window.innerWidth<=y?this.openFileUpload():this.openUploadPanel()},openUploadPanel:function e(){this.model.set({panel:"upload",parentPanel:void 0,isSubPanel:false,asset:void 0,showSaveBtn:false,title:App.t("shared_components.imagespanel.source_title","Image source")})},openRecentImagesPanel:function e(t){var r=this._isMultipleImagesWidget();var n=t||{};this.model.set({panel:"recentImages",forceHidden:false,parentPanel:void 0,isSubPanel:false,asset:void 0,showSaveBtn:r,enableSave:n.enableSave,title:App.t("shared_components.imagespanel.recent_title","Recent")});this.$(".js-recent-icon").attr("hidden",true);this.$(".js-recent-loading").attr("hidden",false);this.$(".js-content").attr("hidden",true)},openFacebookAlbumsPanel:function e(){this.model.set({panel:"facebookAlbums",forceHidden:false,parentPanel:void 0,isSubPanel:false,asset:void 0,showSaveBtn:false,title:App.t("shared_components.imagespanel.facebook_title","Facebook images")});this.$(".js-facebook-icon").attr("hidden",true);this.$(".js-facebook-loading").attr("hidden",false);this.$(".js-content").attr("hidden",true)},openFacebookImagesPanel:function e(t,r){var n=this._isMultipleImagesWidget();this.fbSelectedAlbumRef=t;this.fbImageRetriever=r;this.model.set({panel:"facebookImages",forceHidden:false,parentPanel:void 0,isSubPanel:false,asset:void 0,showSaveBtn:n,title:App.t("shared_components.imagespanel.facebook_title","Facebook images")})},attachRecentImagesViewEvents:function e(){var t=this;this.recentImagesPanelView=new f.default({widgetType:this.model.get("widgetType"),el:".js-recent-images",galleryAssets:this.model.get("galleryAssets")||void 0,collection:new BaseKit.Globals.ImageAssets,userDataProvider:n.default.container.UserDataProvider,serverVars:n.default.container.ServerVars});this.listenTo(this.recentImagesPanelView,"image:select",this.imageSelected);this.listenTo(this.recentImagesPanelView,"images:select",this._enableAddImages);this.listenTo(this.recentImagesPanelView,"image:edit",this.openImageEditPanel);this.listenTo(this.recentImagesPanelView,"image:loaded",(function(){t.$(".js-content").attr("hidden",false)}));this.listenTo(this.recentImagesPanelView,"images:select:complete",this.openGalleryPanel);this.currentView=this.recentImagesPanelView},openGalleryPanel:function e(t){var r=App.t("shared_components.imagespanel.gallery","Gallery");var n=t||{};"slideshow"===this.model.get("widgetType")&&(r=App.t("shared_components.imagespanel.slideshow","Slideshow"));this.model.set({panel:0===n.assets.length?"landing":"gallery",parentPanel:void 0,isSubPanel:false,asset:void 0,showSaveBtn:true,enableSave:n.enableSave,galleryAssets:n.assets,title:r})},openStockImagesPanel:function e(){if("unsplash"===O()){this.openUnsplashPanel();return}this.openGenericStockPanel()},openUnsplashPanel:function e(){this.model.set({panel:"unsplashStock",parentPanel:void 0,isSubPanel:false,asset:void 0,showSaveBtn:false,title:App.t("shared_components.imagespanel.stock_title","Stock images")})},openGenericStockPanel:function e(){this.model.set({panel:"stock",parentPanel:void 0,isSubPanel:false,asset:void 0,showSaveBtn:false,title:App.t("shared_components.imagespanel.stock_title","Stock images")})},attachStockImageViewEvents:function e(){this.stockImagesPanelView=new o.default({el:".js-stock-images",widgetType:this.model.get("widgetType"),model:this.model,siteRef:this.siteRef,globalAssets:this.getGlobalAssets()});this.currentView=this.stockImagesPanelView;this.listenTo(this.stockImagesPanelView,"image:select",this.imageSelected);this.listenTo(this.stockImagesPanelView,"image:reset",this.imageReset)},attachUnsplashStockViewEvents:function e(){this.stockImagesPanelView=new s.default({el:".js-stock-images",widgetType:this.model.get("widgetType"),model:this.model,siteRef:this.siteRef,globalAssets:this.getGlobalAssets()});this.currentView=this.stockImagesPanelView;this.listenTo(this.stockImagesPanelView,"image:select",this.imageSelected);this.listenTo(this.stockImagesPanelView,"image:reset",this.imageReset)},imageSelected:function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("image"===this.model.get("widgetType")){this.trigger("asset:change",t);r&&this.closePanel()}else{this.model.get("galleryAssets").unshift(t);this.openRecentImagesPanel({enableSave:true});this.sourceSelected()}},imageReset:function e(){this.trigger("asset:reset")},openImageEditPanel:function e(t){this.model.set({panel:"editImage",parentPanel:"recentImages",isSubPanel:true,asset:t,showSaveBtn:false,title:App.t("shared_components.imagespanel.edit_image","Image Settings")})},attachEditImageViewEvents:function e(){this.editImageView=new d.default({model:this.model.get("asset"),el:".js-edit-image",collection:this.getGlobalAssets(),imageEditor:c.default});this.currentView=this.editImageView;this.listenTo(this.editImageView,"asset:saved",this.openRecentImagesPanel);this.listenTo(this.editImageView,"asset:deleted",this.handleDeletion);this.listenTo(this.editImageView,"asset:edited",this.hendleEditedAsset)},handleDeletion:function e(t){this.trigger("asset:delete",t);this.openRecentImagesPanel()},hendleEditedAsset:function e(t,r){if("gallery"===this.model.get("widgetType")||"slideshow"===this.model.get("widgetType")){var n=this.model.get("galleryAssets");var i=null;n.unshift(t);_.each(n,(function(e,t){e.ref===r&&(i=t)}));i&&n.splice(i,1)}},attachLandingViewEvents:function e(){this.landingView=new g.default({el:".js-landing"});this.currentView=this.landingView;this.listenTo(this.landingView,"open:main-imagespanel",this.openUploadPanel)},attachGalleryViewEvents:function e(){this.galleryView=new u.default({el:".js-gallery",model:this.model,collection:new BaseKit.Globals.ImageAssets(this.model.get("galleryAssets"))});this.currentView=this.galleryView;this.listenTo(this.galleryView,"open:upload",this.openUploadPanel);this.listenTo(this.galleryView,"order:change",this.updateAssets);this.listenTo(this.galleryView,"order:edit",this.editAssetsOrder);this.listenTo(this.galleryView,"settings:change",this.updateAssets);this.listenTo(this.galleryView,"settings:open",this.openGallerySettings);this.listenTo(this.galleryView,"asset:delete",this.galleryAssetDelete)},updateAssets:function e(t){this.model.set("galleryAssets",t);this.galleryAssetsUpdated=true;t.length<1?this.openGalleryPanel({assets:this.model.get("galleryAssets"),enableSave:true}):this._enableSave()},editAssetsOrder:function e(){this._setGalleryViewInReorderMode(true)},galleryAssetDelete:function e(){this._restoreDefaultGalleryView()},openGallerySettings:function e(){w()&&this.model.set("mode","image-settings");this._setGallerySettingsVisible(true)},backClicked:function e(){this._restoreDefaultGalleryView()},_getFirstGalleryAsset:function e(t){return t.length>0?t[0]:null},_restoreDefaultGalleryView:function e(){"mobile-sortable"!==this.model.get("mode")&&"image-settings"!==this.model.get("mode")||this.model.set("mode",void 0);this._setGalleryViewInReorderMode(false);this._setGallerySettingsVisible(false)},_setGalleryViewInReorderMode:function e(t){var r=this.el.querySelector(".js-images-panel");t?r.classList.add("is-sortable"):r.classList.remove("is-sortable");this.currentView.setReorderModeActive(t)},_setGallerySettingsVisible:function e(t){var r=this.el.querySelector(".js-dialog-header");t?r.classList.add("is-gallery-settings-active"):r.classList.remove("is-gallery-settings-active");this.currentView.setImageSettingsVisible(t)},_isMultipleImagesWidget:function e(){var t=this.model.get("widgetType");return"gallery"===t||"slideshow"===t},_enableAddImages:function e(){this.$(".js-selection-confirm").removeAttr("disabled")},_enableSave:function e(){var t=this.el.querySelector(".js-save");t.removeAttribute("disabled");t.classList.contains("cl-button--disabled")&&t.classList.remove("cl-button--disabled")}});BaseKit.Panels.ImagesPanelView=A;var T=t["default"]=A},53738:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(32229));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return c(e)||u(e,t)||s(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n=[];var i=true;var a=false;var o,s;try{for(r=r.call(e);!(i=(o=r.next()).done);i=true){n.push(o.value);if(t&&n.length===t)break}}catch(e){a=true;s=e}finally{try{i||null==r["return"]||r["return"]()}finally{if(a)throw s}}return n}function c(e){if(Array.isArray(e))return e}var d=Marionette.CompositeView.extend({childView:n.default,childEvents:{},infiniteScroll:{controller:new AbortController,limit:20,offset:0,total:null},galleryCollection:null,unselectedGalleryAssetsCollection:null,initialize:function e(t){var r=this;this.widgetType=t.widgetType||"image";this.galleryAssets=t.galleryAssets||[];this.userDataProvider=t.userDataProvider;this.serverVars=t.serverVars;this.infiniteScroll.controller=new AbortController;this.infiniteScroll.limit=20;this.infiniteScroll.offset=0;var n=Backbone.Collection.extend({model:BaseKit.Globals.Asset});this.galleryCollection=new n(this.galleryAssets);this.unselectedGalleryAssetsCollection=new Backbone.Collection;this.childEvents={select:function e(t){r.trigger("image:select",t.model.toJSON())},edit:function e(t){r.trigger("image:edit",t.model)},pick:function e(t,n){r.handleSelectedImageCollection(t.model,n)}};this.collection.fetch({data:{offset:this.infiniteScroll.offset,limit:this.infiniteScroll.limit},error:function e(t,r){401===r.status&&Editor.Responsive.displaySessionTimeoutDialog()},success:function e(t,n){r.infiniteScroll.total=n.count;r.infiniteScroll.offset+=r.infiniteScroll.limit;r.addAdditionalAssetsToCollection();"gallery"!==r.widgetType&&"slideshow"!==r.widgetType||r.handleGalleryImages(t);r.render();r.trigger("image:loaded")}});this.listenTo(this,"selection:confirm",this.onSelectionConfirm);return this},handleGalleryImages:function e(t){var r=this;_.each(this.galleryAssets,(function(e,n){if(t.get(e.ref)){r.collection.get(e.ref).set("isSelected",true,{silent:true});r.galleryCollection.add(e,{merge:true})}else e.isTplAsset&&e.tplAssetRef&&r.handleWidgetTplAssets(e,n)}))},handleInfiniteScroll:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var n=r?document.querySelector(".js-image-panel-content"):document.querySelector(".js-image-panel-wrapper");var i=100;var a=Math.abs(n.scrollHeight-n.clientHeight-n.scrollTop);var o=this.infiniteScroll.offset<this.infiniteScroll.total;var s=a<i&&o;if(!s)return;this.collection.fetch({add:true,remove:false,merge:false,reset:true,data:{offset:this.infiniteScroll.offset,limit:this.infiniteScroll.limit},error:function e(t,r){401===r.status&&Editor.Responsive.displaySessionTimeoutDialog()},success:function e(r,n,i){var a=r.clone();t.collection.unshift(i.previousModels);t.infiniteScroll.offset+=t.infiniteScroll.limit;t.hideLoadingSkeleton();"gallery"!==t.widgetType&&"slideshow"!==t.widgetType||t.handleGalleryImages(a);t.renderAppend(a)}})},handleWidgetTplAssets:function e(t,r){var n=t.tplAssetRef;var i=this.collection.findWhere({tplAssetRef:n});var a=this.galleryCollection.findWhere({tplAssetRef:n});if(i)i.set("isSelected",true,{silent:true});else{t.isSelected=true;this.collection.add(t)}this.galleryCollection.remove(a);this.galleryCollection.add(t,{at:r})},render:function e(){var t=Twig.render(Twig.templates.images_panel_image,{resizerDomain:"".concat(App.session.get("protocol"),"://").concat(App.session.get("resizerDomain")),assets:this.collection.toJSON(),widgetType:this.widgetType,selectedImageNumber:this.galleryAssets.length,selectedImageUnit:1===this.galleryAssets.length?App.t("shared_components.imagespanel.image_selected","image selected"):App.t("shared_components.imagespanel.images_selected","images selected"),hasMoreToLoad:this.infiniteScroll.offset<this.infiniteScroll.total,skeletons:this.getSkeletonsNumber()});this.el.innerHTML=t;this.attachChildrenEvents(this.collection);this.attachInfiniteScrollEvents();0===this.collection.toJSON().length&&this.$el.addClass("is-empty");this.$el.removeClass("loading-spinner")},renderAppend:function e(t){var r=Twig.render(Twig.templates.images_panel_image_items,{resizerDomain:"".concat(App.session.get("protocol"),"://").concat(App.session.get("resizerDomain")),assets:t.toJSON(),widgetType:this.widgetType,hasMoreToLoad:this.infiniteScroll.offset<this.infiniteScroll.total,skeletons:this.getSkeletonsNumber()});this.$el.find("ol").append(r);this.attachChildrenEvents(t)},hideLoadingSkeleton:function e(){this.$el.find(".js-image-skeleton").remove()},addAdditionalAssetsToCollection:function e(){var t=[];t="ten"===this.userDataProvider.get("productVersion")?this.getContentSetImages():this.getTemplateAssets();this.collection.add(t)},getTemplateAssets:function e(){var t=[];if(this.isInEditor()){var r=Editor.Site.Theme.current.images;var n=null;var i=Editor.Site.Theme.current.ref;var a=Editor.Site.Theme.current.templateAssetDomain;r.forEach((function(e,r){n={isTplAsset:true,fileName:e,tplAssetRef:"".concat(i,"-").concat(r),path:"".concat(a,"/").concat(e),url:"".concat(a,"/").concat(e)};t.push(n)}))}return t},getContentSetImages:function e(){var t=[];if(this.isInEditor()){var r=null;Object.entries(this.serverVars.getBundle("siteContentSet").get("images")).forEach((function(e){var n=a(e,2),i=n[0],o=n[1];var s=o.url.split("/").pop();r={isTplAsset:true,fileName:s,tplAssetRef:i,dominantColor:o.dominantColor,path:o.url,thumbPath:o.thumb,imageHeight:o.height,imageWidth:o.width,url:o.url};t.push(r)}))}return t},getSkeletonsNumber:function e(){var t=document.querySelector(".js-image img")?document.querySelector(".js-image img").clientWidth:116;var r=document.querySelector(".js-recent-images").clientWidth;var n=Math.floor(r/t);var i=this.collection.length%n;var a=n-i||n;return a},isInEditor:function e(){var t=false;"undefined"!==typeof Editor&&Editor.Site&&(t=true);return t},attachChildrenEvents:function e(t){var r=this;t.each((function(e){r.attachImageFunction(e)}));this.delegateEvents()},attachInfiniteScrollEvents:function e(){var t=this;this.infiniteScroll.controller.abort();this.infiniteScroll.controller=new AbortController;document.querySelector(".js-image-panel-content").addEventListener("scroll",_.debounce((function(){return t.handleInfiniteScroll(true)}),200),{signal:this.infiniteScroll.controller.signal});document.querySelector(".js-image-panel-wrapper").addEventListener("scroll",_.debounce((function(){return t.handleInfiniteScroll(false)}),200),{signal:this.infiniteScroll.controller.signal})},attachImageFunction:function e(t){var r=this.getImageViewSelect(t);var n=new this.childView({el:r,model:t,widgetType:this.widgetType});this.proxyChildEvents(n);this.children.add(n)},getImageViewSelect:function e(t){var r="#image-ref-".concat(t.get("ref"));t.get("isTplAsset")&&(r='[data-tpl-asset-ref="'.concat(t.get("tplAssetRef"),'"]'));return r},handleSelectedImageCollection:function e(t,r){if(r){var n=this._getGalleryAssetToBeAdded(t);this.galleryCollection.add(n,{at:0})}else{var i=this._getGalleryAssetToBeRemoved(t);this.galleryCollection.remove(i)}this.trigger("images:select");this.updateCountUi()},updateCountUi:function e(){this.$(".js-selected-images-count").text(this.galleryCollection.size());1===this.galleryCollection.size()?this.$(".js-selected-images-count-unit").text(App.t("shared_components.imagespanel.image_selected","image selected")):this.$(".js-selected-images-count-unit").text(App.t("shared_components.imagespanel.images_selected","images selected"))},onSelectionConfirm:function e(){this.trigger("images:select:complete",{assets:this.galleryCollection.toJSON(),enableSave:true})},onDestroy:function e(){this.cleanUpAssetsProperty()},cleanUpAssetsProperty:function e(){_.each(this.collection.where({isSelected:true}),(function(e){e.unset("isSelected",{silent:true})}))},_getGalleryAssetToBeAdded:function e(t){var r=this._findAssetFromCollection(this.unselectedGalleryAssetsCollection,t);r?this.unselectedGalleryAssetsCollection.remove(r):r=t;return r},_getGalleryAssetToBeRemoved:function e(t){var r=this._findAssetFromCollection(this.galleryCollection,t);this.unselectedGalleryAssetsCollection.add(r);return r},_findAssetFromCollection:function e(t,r){var n;n=r.get("ref")?t.findWhere({ref:r.get("ref")}):t.findWhere({tplAssetRef:r.get("tplAssetRef")});return n}});var f=t["default"]=d},56526:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(69464));var i=r(83489);var a=o(r(13745));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){s(a,n,i,o,l,"next",e)}function l(e){s(a,n,i,o,l,"throw",e)}o(void 0)}))}}var u=12;var c=616;var d=1;var f=1;function p(){var e;var t=null!==(e=App.brand.capabilities.enforceCreditsForStockImages)&&void 0!==e?e:"0";return"1"===t}function g(){if(p()){var e=parseInt(App.user.capabilities.imageCredits,10);var t=parseInt(App.user.usedImageCredits,10);var r=e-t;var n=r<0?0:r;return n}return Infinity}function h(){return App.user.languageCode}function v(){return App.user.ref}function m(){return n.default.getState().site.ref}function y(){return App.session.get("brand").domain}function b(){return App.session.get("protocol")}function w(){return"".concat(b(),"://account.").concat(y(),"/subscription")}function _(){return App.brand.capabilities.enableBuyCredits}function S(){var e=null;var t=App.user.owner.externalSubscriptionURL;var r=App.brand.externalSubscriptionLink;if(1!==parseInt(_(),10))return null;e=t&&t.length>0?t:r&&r.length>0?r:w();return e}function P(){if(p()){var e=parseInt(App.user.usedImageCredits,10);App.user.usedImageCredits=e+1}}function E(){return Math.round(parseInt(App.user.capabilities.storageLimit,10)/1048576*100)/100}function k(){return App.brand.supportEmail}function C(){return App.frontEndBucket.apiProxyBaseUrl}function O(){App.mixpanelTrack("Editor buy more credits button","")}function A(e){return T.apply(this,arguments)}function T(){T=l(regeneratorRuntime.mark((function e(t){var r,n,i,a,o=arguments;return regeneratorRuntime.wrap((function e(s){while(1)switch(s.prev=s.next){case 0:r=o.length>1&&void 0!==o[1]?o[1]:"GET";n=o.length>2&&void 0!==o[2]?o[2]:null;i=new Headers;i.append("X-CSRF-TOKEN",App.frontEndBucket.csrfToken);a=new Request(t,{method:r,headers:i,credentials:"include",body:n});return s.abrupt("return",window.fetch(a));case 6:case"end":return s.stop()}}),e)})));return T.apply(this,arguments)}var j=Marionette.ItemView.extend({events:{"click .js-image":"onImageClick","click .js-previous":"onPreviousClick","click .js-next":"onNextClick","click .js-confirm":"onConfirm","click .js-buy-credits":"buyCreditClicked","click .js-search":"onSearchSubmit"},initialize:function e(t){this.searchTerm="";this.globalAssets=t.globalAssets;this.siteRef=t.siteRef;this.currentOffset=d;this.selectedImg="";this.inFilestack=!!t.inFilestack;this.collection=new Backbone.Collection;this.unsubscribe=n.default.subscribe(this.handleStateChange.bind(this));return this},handleStateChange:function e(){if(!this.el){this.unsubscribe();return}var t=n.default.getState();t.ui.panel.cancelActive?this.enableCancel():this.disableCancel()},disableCancel:function e(){var t=document.querySelector(".js-cancel-settings");t&&!t.disabled&&t.setAttribute("disabled","disabled")},enableCancel:function e(){var t=document.querySelector(".js-cancel-settings");t&&t.disabled&&t.removeAttribute("disabled")},onSearchSubmit:function e(t){t.preventDefault();var r=this.el.querySelector(".js-search-value").value;r&&this.doSearch(r,1)},updateImagesCollection:function e(t){this.collection.set(t)},searchError:function e(){this.hideSearchLoadingUi();this.renderHTMLWithResult();this.updateImagesCollection([])},doSearch:function e(t,r){var n=this;return l(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function e(o){while(1)switch(o.prev=o.next){case 0:n.searchTerm=t;n.showSearchLoadingUi();o.prev=2;o.next=5;return A("".concat(C(),"/stock-images?search=").concat(t,"&offset=").concat(r,"&count=").concat(u,"&language=").concat(h()));case 5:i=o.sent;if(!i.ok){o.next=16;break}o.next=9;return i.json();case 9:a=o.sent;n.hideSearchLoadingUi();n.renderHTMLWithResult(a.result,r);n.updateImagesCollection(a.result.images);n.currentOffset=r+u;o.next=17;break;case 16:n.searchError();case 17:o.next=22;break;case 19:o.prev=19;o.t0=o["catch"](2);n.searchError();case 22:case"end":return o.stop()}}),e,null,[[2,19]])})))()},addImageAuthorCredit:function e(t){var r=t.name,n=t.photoUrl,i=t.authorUrl;var o=document.createElement("span");var s='<a href="%1">Photo</a> by: <a href="%2">%3</a>';var l=(0,a.default)("shared_components.stockimage.pexels.photo_by",s,n,i,r);o.id="author-credit";this.el.querySelector("#images-panel__author-credit").appendChild(o);this.el.querySelector("#author-credit").innerHTML=l;this.el.querySelectorAll("#author-credit a").forEach((function(e){return e.setAttribute("target","_blank")}))},renderHTMLWithResult:function e(t,r){var n=t?t.images:[];var i=t?t.result_count:void 0;var o=(0,a.default)("shared_components.stockimage.single_credit_remaining","Credit remaining");var s=(0,a.default)("shared_components.stockimage.credits_remaining","Credits remaining");var l=Twig.render(Twig.templates.images_panel_stock_image_list,{images:n,currentOffset:r,searchTotalCount:i,imageUnit:1===g()?o:s,buyCreditUrl:S(),remainingCredits:g()});this.el.querySelector(".js-image-list").innerHTML=l;this.el.querySelector(".js-image-list").removeAttribute("hidden")},onImageClick:function e(t){t.stopPropagation();var r=t.currentTarget.getAttribute("data-ref").replace("image-ref-","");var n=this.collection.find((function(e){return e.get("id").toString()===r}));this.openSelectedImagePreview(n)},onPreviousClick:function e(){var t=this.el.querySelector(".js-search-value").value;var r=this.currentOffset-2*u;t&&r>0&&this.doSearch(t,r)},onNextClick:function e(){var t=this.el.querySelector(".js-search-value").value;t&&this.doSearch(t,this.currentOffset)},showSearchLoadingUi:function e(){try{this.el.querySelector(".js-image-list").setAttribute("hidden",true);this.el.querySelector(".js-landing-message").setAttribute("hidden",true);this.el.querySelector(".js-images-loading").removeAttribute("hidden")}catch(e){console.error(e)}},hideSearchLoadingUi:function e(){this.el.querySelector(".js-images-loading").setAttribute("hidden",true)},addCloseAction:function e(){var t=this;this.model.set("closeAction",(function(){t.closePreview();t.model.unset("closeAction")}))},closePreview:function e(){var t=(0,a.default)("shared_components.stockimage.stock_images","Stock images");this.el.querySelector(".js-stock-image-preview").setAttribute("hidden",true);this.el.querySelector("#images-panel__author-credit").removeChild(this.el.querySelector("#author-credit"));this.el.querySelector(".js-image-wrap").parentNode.removeChild(this.el.querySelector(".js-image-wrap"));this.el.querySelector(".js-stock-images").removeAttribute("hidden");this.el.querySelector(".js-search-wrap").removeAttribute("hidden");this.el.querySelector(".js-selection-confirm").setAttribute("hidden",true);this.el.querySelector(".js-controls").classList.remove("images-panel__callout--compact");document.querySelector(".js-images-panel-header-title").textContent=t;document.querySelector(".js-close").classList.remove("images-panel__button--back")},openSelectedImagePreview:function e(t){var r=Twig.render(Twig.templates.images_panel_stock_image_preview,{asset:t.toJSON(),useFullUrl:window.outerWidth>c});var n=(0,a.default)("shared_components.stockimage.image_preview","Image preview");this.selectedImg=t;this.trigger("image:preview");document.querySelector(".js-confirm").setAttribute("disabled",true);this.preloadImageData(t).then((function(e){if(e.image&&g()>0){document.querySelector(".js-image-wrap").setAttribute("data-stock-image-provider-image-uri",e.image.uri);document.querySelector(".js-confirm").removeAttribute("disabled")}}));this.$(".js-stock-image-preview").append(r).removeAttr("hidden");this.el.querySelector(".js-stock-images").setAttribute("hidden",true);this.el.querySelector(".js-search-wrap").setAttribute("hidden",true);this.el.querySelector(".js-selection-confirm").removeAttribute("hidden");this.el.querySelector(".js-controls").classList.add("images-panel__callout--compact");document.querySelector(".js-images-panel-header-title").textContent=n;document.querySelector(".js-close").classList.add("images-panel__button--back");t.get("author")&&this.addImageAuthorCredit({name:t.get("author"),photoUrl:t.get("photo_url"),authorUrl:t.get("author_url")});this.addCloseAction()},onConfirm:function e(){var t=this;return l(regeneratorRuntime.mark((function e(){var r,a,o;return regeneratorRuntime.wrap((function e(s){while(1)switch(s.prev=s.next){case 0:r=document.querySelector(".settings-imagedetail__image");r&&(r.src=t.selectedImg.get("preview"));n.default.dispatch((0,i.disableSave)());n.default.dispatch((0,i.disableCancel)());a=t.el.querySelector(".js-image-wrap").getAttribute("data-stock-image-provider-image-uri");o=t.el.querySelector(".js-image-wrap").getAttribute("data-stock-image-provider-image-filename");t.setMixpanelSearchTerm();t.showImageLoadingUi();if(!t.inFilestack){s.next=12;break}t.filestackHandoff(a,o);s.next=14;break;case 12:s.next=14;return t.uploadImage(a,o);case 14:t.model.unset("closeAction");case 15:case"end":return s.stop()}}),e)})))()},showImageLoadingUi:function e(){var t=(0,a.default)("shared_components.imagespanel.saving_stock_image","Retrieving stock image...");document.querySelector(".js-images-panel-header-title").textContent=t;this.el.querySelector(".js-stock-image-img-loading").removeAttribute("hidden");this.el.querySelector(".js-image-wrap").classList.add("stock-image-wrap--loading");this.el.querySelector(".js-stock-image-img").classList.add("stock-image__image--loading");this.el.querySelector(".js-selection-confirm").setAttribute("hidden","hidden");document.querySelector(".js-images-panel .js-close").setAttribute("hidden","hidden")},preloadImageData:function e(t){return l(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function e(n){while(1)switch(n.prev=n.next){case 0:n.prev=0;n.next=3;return A("".concat(C(),"/stock-images/").concat(t.id));case 3:r=n.sent;if(!r.ok){n.next=6;break}return n.abrupt("return",r.json());case 6:return n.abrupt("return",null);case 9:n.prev=9;n.t0=n["catch"](0);console.error(n.t0);return n.abrupt("return",null);case 13:case"end":return n.stop()}}),e,null,[[0,9]])})))()},filestackHandoff:function e(t,r){try{this.trigger("image:select",{stockImageUri:t,stockImageFilename:r})}catch(e){this.handleErrorUpload(e);this.reset()}},uploadImage:function e(t,r){var a=this;return l(regeneratorRuntime.mark((function e(){var o,s,l,u,c,d;return regeneratorRuntime.wrap((function e(p){while(1)switch(p.prev=p.next){case 0:p.next=2;return a.getUploadToken();case 2:o=p.sent;s=new FormData;s.append("token",o);s.append("type","image");s.append("stockImageProviderRef",f);s.append("stockImageUri",t);s.append("stockImageFilename",r);s.append("siteRef",m()||a.siteRef);p.prev=10;p.next=13;return A("".concat(C(),"/users/").concat(v(),"/assets"),"POST",s);case 13:l=p.sent;p.next=16;return l.json();case 16:u=p.sent;n.default.dispatch((0,i.enableCancel)());if(!l.ok){p.next=28;break}c=u.result;a.globalAssets.add(c);P();p.next=24;return A("/refresh");case 24:d=p.sent;if(d.ok){a.trigger("image:select",c);n.default.dispatch((0,i.enableSave)())}p.next=30;break;case 28:a.handleErrorUpload(u.errorKey);a.reset();case 30:p.next=37;break;case 32:p.prev=32;p.t0=p["catch"](10);console.log(p.t0);a.handleErrorUpload(p.t0);a.reset();case 37:case"end":return p.stop()}}),e,null,[[10,32]])})))()},reset:function e(){this.trigger("image:reset");this.hideNotification();document.querySelector(".images-panel__overlay").style.display="none";document.querySelector(".js-images-panel").style.display="inherit";n.default.dispatch((0,i.disableSave)());n.default.dispatch((0,i.enableCancel)())},hideNotification:function e(){var t=document.querySelector(".action-notification.action-notification--retrieving");t&&t.classList.remove("is-visible")},handleErrorUpload:function e(t){var r=(0,a.default)("shared_components.stockimage.stock_images","Stock images");var n=(0,a.default)("shared_components.stockimage.uploading_error_general","We’re really sorry about this. Please email %1 so our support team can look into this for you",k());t&&"cannotUploadAccountHolderExceededStorageLimit"===t&&(n=(0,a.default)("shared_components.stockimage.uploading_error_exceeded_limit","You have exceeded the storage limit of %1MB available on your plan",E()));document.querySelector(".js-images-panel-header-title").textContent=r;this.el.querySelector(".js-loading").setAttribute("hidden","hidden");this.el.querySelector(".js-stock-image-img-loading").setAttribute("hidden","hidden");this.el.querySelector(".js-stock-image-img").setAttribute("hidden","hidden");this.el.querySelector(".js-error-message").textContent=n;this.el.querySelector(".js-error").removeAttribute("hidden");document.querySelector(".js-images-panel .js-close").removeAttribute("hidden")},getUploadToken:function e(){return l(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function e(n){while(1)switch(n.prev=n.next){case 0:n.prev=0;n.next=3;return A("".concat(C(),"/users/").concat(App.session.get("userRef"),"/upload-tokens"),"POST");case 3:t=n.sent;if(!t.ok){n.next=9;break}n.next=7;return t.json();case 7:r=n.sent;return n.abrupt("return",r.token);case 9:n.next=14;break;case 11:n.prev=11;n.t0=n["catch"](0);return n.abrupt("return",null);case 14:return n.abrupt("return",null);case 15:case"end":return n.stop()}}),e,null,[[0,11]])})))()},setMixpanelSearchTerm:function e(){var t={provider:"Getty",searchTerm:this.searchTerm};App.mixpanelTrack("Editor stock image save button",t)},buyCreditClicked:function e(){O()}});var D=t["default"]=j},61978:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=c(r(30802));var i=c(r(77943));var a=r(55372);var o=c(r(31170));var s=c(r(89158));var l=c(r(56526));var u=c(r(13745));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var f='<svg viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M2.375 0H35.625C36.2549 0 36.859 0.250223 37.3044 0.695621C37.7498 1.14102 38 1.74511 38 2.375V35.625C38 36.2549 37.7498 36.859 37.3044 37.3044C36.859 37.7498 36.2549 38 35.625 38H2.375C1.74511 38 1.14102 37.7498 0.695621 37.3044C0.250223 36.859 0 36.2549 0 35.625V2.375C0 1.74511 0.250223 1.14102 0.695621 0.695621C1.14102 0.250223 1.74511 0 2.375 0Z" fill="#05A081"/>\n    <path d="M15.4375 24.9375H20.0248V20.482H21.4106C21.8978 20.482 22.3802 20.386 22.8303 20.1996C23.2804 20.0132 23.6893 19.7399 24.0338 19.3954C24.3783 19.051 24.6516 18.642 24.838 18.1919C25.0244 17.7418 25.1204 17.2594 25.1204 16.7722C25.1204 16.2851 25.0244 15.8027 24.838 15.3526C24.6516 14.9025 24.3783 14.4935 24.0338 14.1491C23.6893 13.8046 23.2804 13.5313 22.8303 13.3449C22.3802 13.1585 21.8978 13.0625 21.4106 13.0625H15.4375V24.9375ZM22.3998 27.3125H13.0625V10.6875H21.4106C22.9387 10.6872 24.4109 11.2619 25.5348 12.2973C26.6586 13.3327 27.3517 14.753 27.4763 16.276C27.6009 17.799 27.1479 19.3131 26.2074 20.5174C25.2669 21.7218 23.9076 22.5281 22.3998 22.7763V27.3125Z" fill="#fff"/>\n</svg>';function p(e){return/^image/.test(e.type)}function g(e){var t=true;_.each(e,(function(e){e&&p(e)||(t=false)}));return t}function h(){return o.default.container.BrandDataProvider.has("enableFilestack")}function v(){return Number(o.default.container.EnvDataProvider.get("maxFileUploadBytes"))}var m=10;var y=Marionette.ItemView.extend({events:{"change .js-upload-input":"handleFileSelection","click .js-upload":"openFileUpload","dragenter .js-upload-area":"handleDragEnter","dragover .js-upload-area":"handleDragOver","dragend .js-upload-area":"handleDragEnd","dragexit .js-upload-area":"handleDragEnd","drop .js-upload-area":"handleDrop","click .js-upload-error-back-btn":"errorBackBtnClicked"},initialize:function e(t){var r=this;this.collection=t.collection;this.siteRef=t.siteRef;this.listenTo(this,"upload:image",this.openFileUpload);this.userDataProvider=t.userDataProvider;var a=new Backbone.Wreqr.EventAggregator;this.chunkedUploader=new n.default({apiProxyBaseUrl:App.session.get("apiProxyBaseUrl"),csrfToken:App.session.get("csrfToken"),eventDispatcher:a,type:"image",progressCalculator:new i.default});a.on("file.uploaded",(function(e){r.collection.add(e);if(r.model.get("filesNum")>1){r.uploaded=r.uploaded+1;r.uploadedAssets.push(e);r.uploaded===r.model.get("filesNum")&&r.trigger("images:upload:finished",r.uploadedAssets)}else r.trigger("image:upload",e)}));a.on("file.progress",(function(e){r.showProgress(e)}));a.on("file.uploaderror",(function(e,t){r.handleErrorUpload(e,t)}));this.eventDispatcher=a;return this},getFilestackImageSources:function e(){var t=this;var r={label:"Pexels",name:"pexels",icon:f,mounted:function e(r,n){var i=Twig.render(Twig.templates.images_panel_stock_filestack);r.innerHTML=i;var a=new l.default({el:".js-stock-images",widgetType:t.model.get("widgetType"),model:t.model,siteRef:t.siteRef,globalAssets:BaseKit.Globals.imageAssets,inFilestack:true});t.listenTo(a,"image:preview",(function(){var e=document.querySelector(".images-panel__content--filestack .js-close");e.removeAttribute("hidden");e.addEventListener("click",(function(){a.closePreview();e.setAttribute("hidden",true)}))}));t.listenTo(a,"image:select",(function(e){n.addCustomUrl({url:e.stockImageUri,type:"image/jpeg",filename:e.stockImageFilename})}))}};return["clouddrive",r,"facebook","instagram","onedrive","picasa","unsplash"].filter((function(e){var t=e.name||e;return o.default.container.BrandDataProvider.has("enableFilestack".concat(t.replace(/^\w/,(function(e){return e.toUpperCase()}))))}))},openFileUpload:function e(){var t=this;if(h()&&void 0!==window.fsClient){var r=void 0!==this.$("#js-upload-input").attr("multiple");var n=r?m:1;window.fsClient.picker({fromSources:["local_file_system"].concat(this.getFilestackImageSources()),accept:["image/*"],maxFiles:n,maxSize:v(),onUploadDone:function e(r){return t.handleFileStackUpload(r)},lang:this._getDefaultFilestackLanguageCode()}).open()}else this.$("#js-upload-input").click()},handleDragEnter:function e(t){t.preventDefault();this.$(".js-upload-dropzone").addClass("is-drop-target")},handleDragEnd:function e(t){t.preventDefault();this.$(".js-upload-dropzone").removeClass("is-drop-target")},handleDragOver:function e(t){t.preventDefault()},handleDrop:function e(t){var r=t.originalEvent.dataTransfer.files;t.stopPropagation();t.preventDefault();r.length&&this.filesSelected(r)},handleFileStackUpload:function e(t){var r=this;var n=t.filesUploaded.length;if(n<1)return;this.model.set("filesNum",n);a.deviceFeaturesHelper.isMobileDevice()||this.$(".js-progress-indicator").attr("hidden","hidden");this.showUploadingUi();this.uploaded=0;this.uploadedAssets=[];this.trigger("image:upload:start");t.filesUploaded.forEach((function(e){var t={filestackImageHandle:e.handle,filestackImageFilename:e.filename};s.default.upload(null,t).then((function(e){r.eventDispatcher.trigger("file.uploaded",e);r.eventDispatcher.trigger("file.progress",Math.floor(r.uploaded/n*1e3)/10)})).catch((function(e){null!==e&&"object"===d(e)&&"status"in e&&r.eventDispatcher.trigger("file.uploaderror",e.status,e.errorKey)}))}))},handleFileSelection:function e(){var t=document.getElementById("js-upload-input");this.filesSelected(t.files)},handleFilesUpload:function e(t){if(g(t)){this.model.set("filesNum",t.length);this.showUploadingUi();this.uploaded=0;this.progressObj={};this.uploadedAssets=[];this.trigger("image:upload:start");this.chunkedUploader.upload(t)}else this.handleErrorUpload(400,"invalidFileFormat")},filesSelected:function e(t){this.handleFilesUpload(t)},showProgress:function e(t){this.$(".js-progress-indicator").attr("value",t);this.$(".js-progress-indicator-value").css("width","".concat(t,"%"))},showUploadingUi:function e(){var t=App.t("shared_components.imagespanel.uploading_image","Hold tight, we’re uploading your image now…");this.model.get("filesNum")>1&&(t=App.t("shared_components.imagespanel.uploading_images","Hold tight, we’re uploading your images now…"));this.$(".js-upload-title").text(App.t("shared_components.imagedetail.uploading","Uploading image"));this.$(".js-close-popup").attr("disabled","disabled");this.$(".js-upload-area").attr("hidden","hidden");this.$(".js-progress-ui").removeAttr("hidden");this.$(".js-progress-message").text(t)},handleErrorUpload:function e(t,r){var n=this;this.showErrorUI(t,r);this.model.errorTimeout=setTimeout((function(){n.trigger("image:upload:error")}),5e3)},replaceJsUploadErrorMsg:function e(t){this.$(".js-upload-error-msg").text(t)},showErrorUI:function e(t,r){var n=Math.round(parseInt(App.user.capabilities.storageLimit,10)/1048576*100)/100;var i=10;this.$(".js-upload-panel-content").attr("hidden","hidden");this.$(".js-upload-panel-error-content").removeAttr("hidden");if(r)switch(r){case"cannotUploadAccountHolderExceededStorageLimit":this.replaceJsUploadErrorMsg(App.t("shared_components.imagespanel.uploading_error_exceeded_limit","- you have exceeded the storage limit of %1MB.",n));break;case"maxUploadSizeExceeded":this.replaceJsUploadErrorMsg(App.t("shared_components.filesspanel.uploading_error_file_too_big","- the size of your uploaded file must be under %1MB.",i));break;case"invalidFileFormat":this.replaceJsUploadErrorMsg(App.t("shared_components.imagespanel.uploading_error_unsupported_file","Sorry, this file format is not supported."));break}400!==t&&this.$(".js-upload-error-msg").text(App.t("shared_components.imagespanel.uploading_error_general","- We’re really sorry about this. Please email %1 so our support team can look into this for you",App.brand.supportEmail))},errorBackBtnClicked:function e(){if(this.model.errorTimeout){clearTimeout(this.model.errorTimeout);this.model.errorTimeout=null}this.trigger("image:upload:error")},_getDefaultFilestackLanguageCode:function e(){var t=["ca","da","de","en","es","fr","he","it","ja","ko","nl","no","pl","pt","sv","ru","vi","zh","tr","ar"];var r=this.userDataProvider.get("languageCode");-1!==r.indexOf("_")&&(r=r.split("_")[0]);if(-1!==t.indexOf(r))return r;return"en"}});var b=t["default"]=y},58041:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({events:{"click .js-add-images":"addImagesClicked"},initialize:function e(){return this},addImagesClicked:function e(){this.trigger("open:main-imagespanel")}});var n=t["default"]=r},48749:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(69464));var i=r(83489);var a=o(r(13745));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){s(a,n,i,o,l,"next",e)}function l(e){s(a,n,i,o,l,"throw",e)}o(void 0)}))}}var u=12;var c=616;var d=1;var f="https://unsplash.com/@USERNAME?utm_source=BaseKit&utm_medium=referral";function p(){return App.user.languageCode}function g(){return Math.round(parseInt(App.user.capabilities.storageLimit,10)/1048576*100)/100}function h(){return App.brand.supportEmail}function v(){return App.frontEndBucket.apiProxyBaseUrl}function m(){App.mixpanelTrack("Editor buy more credits button","")}function y(e){return b.apply(this,arguments)}function b(){b=l(regeneratorRuntime.mark((function e(t){var r,n,i,a,o=arguments;return regeneratorRuntime.wrap((function e(s){while(1)switch(s.prev=s.next){case 0:r=o.length>1&&void 0!==o[1]?o[1]:"GET";n=o.length>2&&void 0!==o[2]?o[2]:null;i=new Headers;i.append("X-CSRF-TOKEN",App.frontEndBucket.csrfToken);a=new Request(t,{method:r,headers:i,credentials:"include",body:n});return s.abrupt("return",window.fetch(a));case 6:case"end":return s.stop()}}),e)})));return b.apply(this,arguments)}var w=Marionette.ItemView.extend({events:{"click .js-image":"onImageClick","click .js-previous":"onPreviousClick","click .js-next":"onNextClick","click .js-confirm":"onConfirm","click .js-buy-credits":"buyCreditClicked","click .js-search":"onSearchSubmit"},initialize:function e(t){this.searchTerm="";this.globalAssets=t.globalAssets;this.siteRef=t.siteRef;this.currentOffset=d;this.selectedImg="";this.collection=new Backbone.Collection;this.unsubscribe=n.default.subscribe(this.handleStateChange.bind(this));return this},handleStateChange:function e(){if(!this.el){this.unsubscribe();return}var t=n.default.getState();t.ui.panel.cancelActive?this.enableCancel():this.disableCancel()},disableCancel:function e(){var t=document.querySelector(".js-cancel-settings");t&&!t.disabled&&t.setAttribute("disabled","disabled")},enableCancel:function e(){var t=document.querySelector(".js-cancel-settings");t&&t.disabled&&t.removeAttribute("disabled")},onSearchSubmit:function e(t){t.preventDefault();var r=this.el.querySelector(".js-search-value").value;r&&this.doSearch(r,1)},updateImagesCollection:function e(t){this.collection.set(t)},searchError:function e(){this.hideSearchLoadingUi();this.renderHTMLWithResult();this.updateImagesCollection([])},doSearch:function e(t,r){var n=this;return l(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function e(o){while(1)switch(o.prev=o.next){case 0:n.searchTerm=t;n.showSearchLoadingUi();o.prev=2;o.next=5;return y("".concat(v(),"/stock-images?search=").concat(t,"&offset=").concat(r,"&count=").concat(u,"&language=").concat(p()));case 5:i=o.sent;if(!i.ok){o.next=16;break}o.next=9;return i.json();case 9:a=o.sent;n.hideSearchLoadingUi();n.renderHTMLWithResult(a.result,r);n.updateImagesCollection(a.result.images);n.currentOffset=r+u;o.next=17;break;case 16:n.searchError();case 17:o.next=22;break;case 19:o.prev=19;o.t0=o["catch"](2);n.searchError();case 22:case"end":return o.stop()}}),e,null,[[2,19]])})))()},renderHTMLWithResult:function e(t,r){var n=t?t.images:[];var i=t?t.result_count:void 0;var a=Twig.render(Twig.templates.images_panel_unsplash_stock_image_list,{images:n,currentOffset:r,searchTotalCount:i});this.el.querySelector(".js-image-list").innerHTML=a;this.el.querySelector(".js-image-list").removeAttribute("hidden")},onImageClick:function e(t){t.stopPropagation();var r=t.currentTarget.getAttribute("data-ref").replace("image-ref-","");var n=this.collection.find((function(e){return e.get("id")===r}));this.openSelectedImagePreview(n)},onPreviousClick:function e(){var t=this.el.querySelector(".js-search-value").value;var r=this.currentOffset-2*u;t&&r>0&&this.doSearch(t,r)},onNextClick:function e(){var t=this.el.querySelector(".js-search-value").value;t&&this.doSearch(t,this.currentOffset)},showSearchLoadingUi:function e(){try{this.el.querySelector(".js-image-list").setAttribute("hidden",true);this.el.querySelector(".js-landing-message").setAttribute("hidden",true);this.el.querySelector(".js-images-loading").removeAttribute("hidden")}catch(e){console.error(e)}},hideSearchLoadingUi:function e(){this.el.querySelector(".js-images-loading").setAttribute("hidden",true)},addCloseAction:function e(){var t=this;this.model.set("closeAction",(function(){t.closePreview();t.model.unset("closeAction")}))},closePreview:function e(){var t=(0,a.default)("shared_components.stockimage.stock_images","Stock images");this.el.querySelector(".js-stock-image-preview").setAttribute("hidden",true);this.el.querySelector(".js-image-wrap").parentNode.removeChild(this.el.querySelector(".js-image-wrap"));this.el.querySelector(".js-stock-images").removeAttribute("hidden");this.el.querySelector(".js-search-wrap").removeAttribute("hidden");this.el.querySelector(".js-selection-confirm").setAttribute("hidden",true);this.el.querySelector(".js-controls").classList.remove("images-panel__callout--compact");this.el.querySelector(".js-attribution-display").setAttribute("hidden",true);document.querySelector(".js-images-panel-header-title").textContent=t;document.querySelector(".js-close").classList.remove("images-panel__button--back")},openSelectedImagePreview:function e(t){var r=Twig.render(Twig.templates.images_panel_stock_image_preview,{asset:t.toJSON(),useFullUrl:window.outerWidth>c});var n=(0,a.default)("shared_components.stockimage.image_preview","Image preview");var i=f.replace("USERNAME",t.get("username"));this.el.querySelector(".js-attribution-link").setAttribute("href",i);this.el.querySelector(".js-attribution-link").innerText=t.get("author");this.$(".js-stock-image-preview").append(r).removeAttr("hidden");this.selectedImg=t;document.querySelector(".js-image-wrap").setAttribute("data-stock-image-provider-image-uri",t.get("filename"));document.querySelector(".js-image-wrap").setAttribute("data-stock-image-provider-download-endpoint",t.get("download"));document.querySelector(".js-image-wrap").setAttribute("data-stock-image-provider-image-width",t.get("imageWidth"));document.querySelector(".js-image-wrap").setAttribute("data-stock-image-provider-image-height",t.get("imageHeight"));document.querySelector(".js-confirm").removeAttribute("disabled");this.el.querySelector(".js-stock-images").setAttribute("hidden",true);this.el.querySelector(".js-search-wrap").setAttribute("hidden",true);this.el.querySelector(".js-selection-confirm").removeAttribute("hidden");this.el.querySelector(".js-controls").classList.add("images-panel__callout--compact");this.el.querySelector(".js-attribution-display").removeAttribute("hidden");document.querySelector(".js-images-panel-header-title").textContent=n;document.querySelector(".js-close").classList.add("images-panel__button--back");this.addCloseAction()},triggerUnsplashDownloadEvent:function e(t){y("".concat(v(),"/stock-image?endpoint=").concat(t))},handleUnsplashClick:function e(t,r,a,o){this.triggerUnsplashDownloadEvent(r);this.trigger("image:select",{url:t,imageWidth:a,imageHeight:o,type:"jpg"});n.default.dispatch((0,i.enableSave)())},onConfirm:function e(){var t=this;return l(regeneratorRuntime.mark((function e(){var r,a,o,s,l;return regeneratorRuntime.wrap((function e(u){while(1)switch(u.prev=u.next){case 0:r=document.querySelector(".settings-imagedetail__image");r&&(r.src=t.selectedImg.get("preview"));n.default.dispatch((0,i.disableSave)());n.default.dispatch((0,i.disableCancel)());a=t.el.querySelector(".js-image-wrap").getAttribute("data-stock-image-provider-image-uri");o=t.el.querySelector(".js-image-wrap").getAttribute("data-stock-image-provider-download-endpoint");s=t.el.querySelector(".js-image-wrap").getAttribute("data-stock-image-provider-image-width");l=t.el.querySelector(".js-image-wrap").getAttribute("data-stock-image-provider-image-height");t.setMixpanelSearchTerm();t.handleUnsplashClick(a,o,s,l);t.model.unset("closeAction");case 11:case"end":return u.stop()}}),e)})))()},showImageLoadingUi:function e(){var t=(0,a.default)("shared_components.imagespanel.saving_stock_image","Retrieving stock image...");document.querySelector(".js-images-panel-header-title").textContent=t;this.el.querySelector(".js-stock-image-img-loading").removeAttribute("hidden");this.el.querySelector(".js-image-wrap").classList.add("stock-image-wrap--loading");this.el.querySelector(".js-stock-image-img").classList.add("stock-image__image--loading");this.el.querySelector(".js-selection-confirm").setAttribute("hidden","hidden");document.querySelector(".js-images-panel .js-close").setAttribute("hidden","hidden")},reset:function e(){this.trigger("image:reset");this.hideNotification();document.querySelector(".images-panel__overlay").style.display="none";document.querySelector(".js-images-panel").style.display="inherit";n.default.dispatch((0,i.disableSave)());n.default.dispatch((0,i.enableCancel)())},hideNotification:function e(){var t=document.querySelector(".action-notification.action-notification--retrieving");t&&t.classList.remove("is-visible")},handleErrorUpload:function e(t){var r=(0,a.default)("shared_components.stockimage.stock_images","Stock images");var n=(0,a.default)("shared_components.stockimage.uploading_error_general","We’re really sorry about this. Please email %1 so our support team can look into this for you",h());t&&"cannotUploadAccountHolderExceededStorageLimit"===t&&(n=(0,a.default)("shared_components.stockimage.uploading_error_exceeded_limit","You have exceeded the storage limit of %1MB available on your plan",g()));document.querySelector(".js-images-panel-header-title").textContent=r;this.el.querySelector(".js-loading").setAttribute("hidden","hidden");this.el.querySelector(".js-stock-image-img-loading").setAttribute("hidden","hidden");this.el.querySelector(".js-stock-image-img").setAttribute("hidden","hidden");this.el.querySelector(".js-error-message").textContent=n;this.el.querySelector(".js-error").removeAttribute("hidden");document.querySelector(".js-images-panel .js-close").removeAttribute("hidden")},getUploadToken:function e(){return l(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function e(n){while(1)switch(n.prev=n.next){case 0:n.prev=0;n.next=3;return y("".concat(v(),"/users/").concat(App.session.get("userRef"),"/upload-tokens"),"POST");case 3:t=n.sent;if(!t.ok){n.next=9;break}n.next=7;return t.json();case 7:r=n.sent;return n.abrupt("return",r.token);case 9:n.next=14;break;case 11:n.prev=11;n.t0=n["catch"](0);return n.abrupt("return",null);case 14:return n.abrupt("return",null);case 15:case"end":return n.stop()}}),e,null,[[0,11]])})))()},setMixpanelSearchTerm:function e(){var t={provider:"Unsplash",searchTerm:this.searchTerm};App.mixpanelTrack("Editor stock image save button",t)},buyCreditClicked:function e(){m()}});var _=t["default"]=w},4956:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(89158));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,l,"next",e)}function l(e){a(o,n,i,s,l,"throw",e)}s(void 0)}))}}function s(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var l=null;var u={open:function e(t){l?c(t):f().then(c.bind(null,t))}};function c(e){if(e.image.src.includes("data:image/"))return;var t=document.querySelector(".image-editor");var r=document.querySelector(".js-image-editor-overlay");t.classList.add("open");var i=new Image;var a=Math.round((new Date).getTime()/1e3);i.crossOrigin="anonymous";var o=e.image.src.split(".").pop().toLowerCase();var s="png"===o?o:"jpeg";var u="image/".concat(s);i.src="".concat(e.image.src,"?=").concat(a);l=new PhotoEditorSDK.UI.DesktopUI({container:t,language:v(),displayWelcomeMessage:false,responsive:true,license:h(),editor:{image:i,displayCloseButton:true,enableExport:true,maxMegaPixels:{desktop:2,mobile:2},export:{download:false,type:"data-url",format:u}},assets:{baseUrl:"".concat(App.assetBaseUrl(),"/libs/photoeditorsdk/assets")},extensions:{languages:d()}});l.on("export",(function(t){r.classList.add("active");var i=e.image.dataset.filename;i||(i=e.image.src.split("/").pop().split("?")[0]);var a={data:t,filename:i};n.default.upload(null,{photoEditorImage:a}).then((function(t){e.onSave(t);l.emit("close")})).catch((function(t){e.onError(t);l.emit("close")}))}));l.on("close",(function(){t.classList.remove("open");r.classList.remove("active");l.dispose()}))}function d(){return s({},v(),{pesdk:{common:{title:{error:App.t("shared_components.image_editor.common.title","Error")},text:{loading:App.t("shared_components.image_editor.common.text","Loading...")},button:{cancel:App.t("shared_components.image_editor.common.button","Cancel")}},editor:{button:{export:App.t("shared_components.image_editor.editor.button.export","Done"),close:App.t("shared_components.image_editor.editor.button.close","Close"),newImageChangesLostWarningYes:App.t("shared_components.image_editor.editor.button.newImageChangesLostWarningYes","Yes"),newImageChangesLostWarningNo:App.t("shared_components.image_editor.editor.button.newImageChangesLostWarningNo","No"),discardChangesWarningKeep:App.t("shared_components.image_editor.editor.button.discardChangesWarningKeep","Keep changes"),discardChangesWarningDiscard:App.t("shared_components.image_editor.editor.button.discardChangesWarningDiscard","Discard changes")},title:{newImageChangesLostWarning:App.t("shared_components.image_editor.editor.title.newImageChangesLostWarning","New Image"),imageResizedWarning_maxMegaPixels:App.t("shared_components.image_editor.editor.title.imageResizedWarning_maxMegaPixels","Image resized"),imageResizedWarning_maxDimensions:App.t("shared_components.image_editor.editor.title.imageResizedWarning_maxDimensions","Image resized"),fontLoadingError:App.t("shared_components.image_editor.editor.title.fontLoadingError","Failed to load font"),discardChangesWarning:App.t("shared_components.image_editor.editor.title.discardChangesWarning","Discard changes?")},text:{newImageChangesLostWarning:App.t("shared_components.image_editor.editor.text.newImageChangesLostWarning","Any unsaved changes will be lost. Continue?"),imageResizedWarning_maxMegaPixels:App.t("shared_components.image_editor.editor.text.imageResizedWarning_maxMegaPixels","Your image exceeds the maximum size of ${maxMegaPixels} megapixels and has therefore been resized to ${width}x${height} pixels."),imageResizedWarning_maxDimensions:App.t("shared_components.image_editor.editor.text.imageResizedWarning_maxDimensions","Due to hardware limitations your image has been resized to ${width}x${height} pixels."),renderingError:App.t("shared_components.image_editor.editor.text.renderingError","An error has occurred while rendering the image."),exporting:App.t("shared_components.image_editor.editor.text.exporting","Exporting..."),resizing:App.t("shared_components.image_editor.editor.text.resizing","Resizing..."),loadingFonts:App.t("shared_components.image_editor.editor.text.loadingFonts","Loading fonts..."),fontLoadingError:App.t("shared_components.image_editor.editor.text.fontLoadingError","The following fonts could not be loaded: ${fonts}."),webcamUnavailableError:App.t("shared_components.image_editor.editor.text.webcamUnavailableError","Unable to display webcam image (Error: ${error})"),invalidFileTypeError:App.t("shared_components.image_editor.editor.text.invalidFileTypeError","The file type ${fileType} is not supported."),imageLoadingError:App.t("shared_components.image_editor.editor.text.imageLoadingError","Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported."),discardChangesWarning:App.t("shared_components.image_editor.editor.text.discardChangesWarning","You have unsaved changes. Are you sure you want to discard the changes?")}},library:{title:{name:App.t("shared_components.image_editor.library.title.name","Library")},button:{fileDropZone:App.t("shared_components.image_editor.library.button.fileDropZone","Drag image here or click to browse for one."),fileDropZoneHovered:App.t("shared_components.image_editor.library.button.fileDropZoneHovered","Drop to upload.")},placeholder:{search:App.t("shared_components.image_editor.library.placeholder.search","Search Library")},text:{noResults:App.t("shared_components.image_editor.library.text.noResults","No results")}},transform:{title:{name:App.t("shared_components.image_editor.transform.title.name","Transform")},button:{reset:App.t("shared_components.image_editor.transform.button.reset","Reset Default")},asset:{imgly_transforms_common:{name:App.t("shared_components.image_editor.transform.asset.imgly_transforms_common.name","Common Crops"),asset:{imgly_transform_common_custom:App.t("shared_components.image_editor.transform.asset.imgly_transforms_common.asset.imgly_transform_common_custom","Custom"),imgly_transform_common_square:App.t("shared_components.image_editor.transform.asset.imgly_transforms_common.asset.imgly_transform_common_square","Square"),"imgly_transform_common_4-3":App.t("shared_components.image_editor.transform.asset.imgly_transforms_common.asset.imgly_transform_common_4-3","4:3"),"imgly_transform_common_16-9":App.t("shared_components.image_editor.transform.asset.imgly_transforms_common.asset.imgly_transform_common_16-9","16:9")}},imgly_transforms_facebook:{name:App.t("shared_components.image_editor.transform.asset.imgly_transforms_facebook.name","Facebook"),asset:{imgly_transform_facebook_ad:App.t("shared_components.image_editor.transform.asset.imgly_transforms_facebook.asset.imgly_transform_facebook_ad","Ad"),imgly_transform_facebook_post:App.t("shared_components.image_editor.transform.asset.imgly_transforms_facebook.asset.imgly_transform_facebook_post","Post"),imgly_transform_facebook_cover:App.t("shared_components.image_editor.transform.asset.imgly_transforms_facebook.asset.imgly_transform_facebook_cover","Cover"),imgly_transform_facebook_profile:App.t("shared_components.image_editor.transform.asset.imgly_transforms_facebook.asset.imgly_transform_facebook_profile","Profile Pic")}}},placeholder:{width:App.t("shared_components.image_editor.transform.placeholder.width","w"),height:App.t("shared_components.image_editor.transform.placeholder.height","h")}},filter:{asset:{identity:App.t("shared_components.image_editor.transform.filter.asset.identity","None"),imgly_lut_celsius:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_celsius","Celsius"),imgly_lut_chest:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_chest","Chest"),imgly_lut_fixie:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_fixie","Fixie"),imgly_lut_fridge:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_fridge","Fridge"),imgly_lut_front:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_front","Front"),imgly_lut_k2:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_k2","K2"),imgly_lut_mellow:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_mellow","Mellow"),imgly_lut_sin:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_sin","Sin"),imgly_lut_texas:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_texas","Texas"),imgly_lut_ad1920:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_ad1920","A.D."),imgly_lut_ancient:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_ancient","Ancient"),imgly_lut_bleached:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_bleached","Bleached"),imgly_lut_bleachedblue:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_bleachedblue","Bleached Blue"),imgly_lut_blues:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_blues","Blues"),imgly_lut_blueshadows:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_blueshadows","Blue Shadows"),imgly_lut_breeze:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_breeze","Breeze"),imgly_lut_bw:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_bw","B & W"),imgly_lut_classic:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_classic","Classic"),imgly_lut_colorful:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_colorful","Colorful"),imgly_lut_cool:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_cool","Cool"),imgly_lut_cottoncandy:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_cottoncandy","Cotton Candy"),imgly_lut_creamy:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_creamy","Creamy"),imgly_lut_eighties:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_eighties","Eighties"),imgly_lut_elder:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_elder","Elder"),imgly_lut_evening:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_evening","Evening"),imgly_lut_fall:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_fall","Fall"),imgly_lut_food:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_food","Food"),imgly_lut_glam:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_glam","Glam"),imgly_lut_gobblin:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_gobblin","Gobblin"),imgly_lut_highcarb:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_highcarb","High Carb"),imgly_lut_highcontrast:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_highcontrast","High Contrast"),imgly_lut_k1:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_k1","K1"),imgly_lut_k6:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_k6","K6"),imgly_lut_kdynamic:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_kdynamic","KDynamic"),imgly_lut_keen:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_keen","Keen"),imgly_lut_lenin:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_lenin","Lenin"),imgly_lut_litho:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_litho","Litho"),imgly_lut_lomo100:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_lomo100","Lomo 100"),imgly_lut_lucid:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_lucid","Lucid"),imgly_lut_neat:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_neat","Neat"),imgly_lut_nogreen:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_nogreen","No Green"),imgly_lut_orchid:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_orchid","Orchid"),imgly_lut_pale:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_pale","Pale"),imgly_lut_pitched:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_pitched","Pitched"),imgly_lut_plate:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_plate","Plate"),imgly_lut_pola669:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_plateimgly_lut_pola669","Pola 669"),imgly_lut_polasx:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_plateimgly_lut_polasx","Pola SX"),imgly_lut_pro400:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_plateimgly_lut_pro400","Pro 400"),imgly_lut_quozi:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_quozi","Quozi"),imgly_lut_sepiahigh:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_plateimgly_lut_sepiahigh","Sepia High"),imgly_lut_settled:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_settled","Settled"),imgly_lut_seventies:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_seventies","Seventies"),imgly_lut_soft:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_soft","Soft"),imgly_lut_steel:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_steel","Steel"),imgly_lut_summer:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_summer","Summer"),imgly_lut_sunset:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_sunset","Sunset"),imgly_lut_tender:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_tender","Tender"),imgly_lut_twilight:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_twilight","Twilight"),imgly_lut_winter:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_winter","Winter"),imgly_lut_x400:App.t("shared_components.image_editor.transform.filter.asset.imgly_lut_x400","X400")},title:{name:App.t("shared_components.image_editor.transform.filter.title.name","Filters")}},adjustments:{button:{reset:App.t("shared_components.image_editor.transform.adjustments.button.reset","Reset Default")},title:{name:App.t("shared_components.image_editor.transform.adjustments.title.name","Adjust"),basics:App.t("shared_components.image_editor.transform.adjustments.title.basics","Basics"),refinements:App.t("shared_components.image_editor.transform.adjustments.title.refinements","Refinements")},text:{brightness:App.t("shared_components.image_editor.transform.adjustments.text.brightness","Brightness"),saturation:App.t("shared_components.image_editor.transform.adjustments.text.saturation","Saturation"),contrast:App.t("shared_components.image_editor.transform.adjustments.text.contrast","Contrast"),gamma:App.t("shared_components.image_editor.transform.adjustments.text.gamma","Gamma"),clarity:App.t("shared_components.image_editor.transform.adjustments.text.clarity","Clarity"),exposure:App.t("shared_components.image_editor.transform.adjustments.text.exposure","Exposure"),shadows:App.t("shared_components.image_editor.transform.adjustments.text.shadows","Shadows"),highlights:App.t("shared_components.image_editor.transform.adjustments.text.highlights","Highlights"),whites:App.t("shared_components.image_editor.transform.adjustments.text.whites","Whites"),blacks:App.t("shared_components.image_editor.transform.adjustments.text.blacks","Blacks"),temperature:App.t("shared_components.image_editor.transform.adjustments.text.temperature","Temperature"),sharpness:App.t("shared_components.image_editor.transform.adjustments.text.sharpness","Sharpness")}},focus:{title:{name:App.t("shared_components.image_editor.transform.focus.title.name","Focus")},button:{none:App.t("shared_components.image_editor.transform.focus.button.none","None"),radial:App.t("shared_components.image_editor.transform.focus.button.radial","Radial"),mirrored:App.t("shared_components.image_editor.transform.focus.button.mirrored","Mirrored"),linear:App.t("shared_components.image_editor.transform.focus.button.linear","Linear"),gaussian:App.t("shared_components.image_editor.transform.focus.button.gaussian","Gaussian")}},text:{title:{name:App.t("shared_components.image_editor.transform.text.title.name","Text"),font:App.t("shared_components.image_editor.transform.text.title.font","Font"),size:App.t("shared_components.image_editor.transform.text.title.size","Size"),spacing:App.t("shared_components.image_editor.transform.text.title.spacing","Spacing"),line:App.t("shared_components.image_editor.transform.text.title.line","Line"),background:App.t("shared_components.image_editor.transform.text.title.background","Background")},placeholder:{defaultText:App.t("shared_components.image_editor.transform.text.placeholder.defaultText","Double-click to edit!")},button:{new:App.t("shared_components.image_editor.transform.text.button.new","New Text")}},textdesign:{title:{name:App.t("shared_components.image_editor.transform.textdesign.title.name","Text Design"),input:App.t("shared_components.image_editor.transform.textdesign.title.input","Text")},button:{invert:App.t("shared_components.image_editor.transform.textdesign.button.invert","Text as mask")}},sticker:{title:{name:App.t("shared_components.image_editor.transform.sticker.title.name","Stickers"),opacity:App.t("shared_components.image_editor.transform.sticker.title.opacity","Opacity")},text:{stickerLoadingError:App.t("shared_components.image_editor.transform.sticker.text.stickerLoadingError","Failed to load sticker ${path}.")},button:{replace:App.t("shared_components.image_editor.transform.sticker.button.replace","Replace"),new:App.t("shared_components.image_editor.transform.sticker.button.new","New Sticker"),fill:App.t("shared_components.image_editor.transform.sticker.button.fill","Fill")},asset:{imgly_sticker_emoticons:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons","Emoticons"),imgly_sticker_emoticons_alien:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_alien","Alien"),imgly_sticker_emoticons_angel:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_angel","Angel"),imgly_sticker_emoticons_angry:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_angry","Angry"),imgly_sticker_emoticons_anxious:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_anxious","Anxious"),imgly_sticker_emoticons_asleep:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_asleep","Asleep"),imgly_sticker_emoticons_attention:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_attention","Attention"),imgly_sticker_emoticons_baby_chicken:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_baby_chicken","Baby Chicken"),imgly_sticker_emoticons_batman:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_batman","Batman"),imgly_sticker_emoticons_beer:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_beer","Beer"),imgly_sticker_emoticons_black:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_black","Black"),imgly_sticker_emoticons_blue:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_blue","Blue"),imgly_sticker_emoticons_blush:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_blush","Blush"),imgly_sticker_emoticons_boxer:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_boxer","Boxer"),imgly_sticker_emoticons_business:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_business","Business"),imgly_sticker_emoticons_chicken:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_chicken","Chicken"),imgly_sticker_emoticons_cool:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_cool","Cool"),imgly_sticker_emoticons_cry:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_cry","Cry"),imgly_sticker_emoticons_deceased:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_deceased","Deceased"),imgly_sticker_emoticons_devil:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_devil","Devil"),imgly_sticker_emoticons_duckface:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_duckface","Duckface"),imgly_sticker_emoticons_furious:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_furious","Furious"),imgly_sticker_emoticons_grin:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_grin","Grin"),imgly_sticker_emoticons_guitar:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_guitar","Guitar"),imgly_sticker_emoticons_harry_potter:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_harry_potter","Harry Potter"),imgly_sticker_emoticons_hippie:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_hippie","Hippie"),imgly_sticker_emoticons_hitman:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_hitman","Hitman"),imgly_sticker_emoticons_humourous:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_humourous","Humourous"),imgly_sticker_emoticons_idea:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_idea","Idea"),imgly_sticker_emoticons_impatient:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_impatient","Impatient"),imgly_sticker_emoticons_kiss:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_kiss","Kiss"),imgly_sticker_emoticons_kisses:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_kisses","Kisses"),imgly_sticker_emoticons_laugh:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_laugh","Laugh"),imgly_sticker_emoticons_loud_cry:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_loud_cry","Loud Cry"),imgly_sticker_emoticons_loving:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_loving","Loving"),imgly_sticker_emoticons_masked:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_masked","Masked"),imgly_sticker_emoticons_music:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_music","Music"),imgly_sticker_emoticons_nerd:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_nerd","Nerd"),imgly_sticker_emoticons_ninja:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_ninja","Ninja"),imgly_sticker_emoticons_not_speaking_to_you:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_not_speaking_to_you","Not speaking to you"),imgly_sticker_emoticons_pig:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_pig","Pig"),imgly_sticker_emoticons_pumpkin:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_pumpkin","Pumpkin"),imgly_sticker_emoticons_question:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_question","Question"),imgly_sticker_emoticons_rabbit:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_rabbit","Rabbit"),imgly_sticker_emoticons_sad:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_sad","Sad"),imgly_sticker_emoticons_sick:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_sick","Sick"),imgly_sticker_emoticons_skateboard:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_skateboard","Skateboard"),imgly_sticker_emoticons_skull:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_skull","Skull"),imgly_sticker_emoticons_sleepy:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_sleepy","Sleepy"),imgly_sticker_emoticons_smile:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_smile","Smile"),imgly_sticker_emoticons_smoking:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_smoking","Smoking"),imgly_sticker_emoticons_sobbing:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_sobbing","Sobbing"),imgly_sticker_emoticons_star:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_star","Star"),imgly_sticker_emoticons_steaming_furious:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_steaming_furious","Steaming Furious"),imgly_sticker_emoticons_sunbathing:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_sunbathing","Sunbathing"),imgly_sticker_emoticons_tired:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_tired","Tired"),imgly_sticker_emoticons_tongue_out_wink:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_tongue_out_wink","Tongue out wink"),imgly_sticker_emoticons_wave:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_wave","Wave"),imgly_sticker_emoticons_wide_grin:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_wide_grin","Wide Grin"),imgly_sticker_emoticons_wink:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_wink","Wink"),imgly_sticker_emoticons_wrestler:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_emoticons_wrestler","Wrestler"),imgly_sticker_shapes:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes","Shapes"),imgly_sticker_shapes_arrow_02:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_arrow_02","Arrow 1"),imgly_sticker_shapes_arrow_03:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_arrow_03","Arrow 2"),imgly_sticker_shapes_badge_01:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_badge_01","Badge 1"),imgly_sticker_shapes_badge_11:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_badge_11","Badge 5"),imgly_sticker_shapes_badge_12:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_badge_12","Badge 6"),imgly_sticker_shapes_badge_13:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_badge_13","Badge 7"),imgly_sticker_shapes_badge_15:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_badge_15","Badge 8"),imgly_sticker_shapes_badge_18:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_badge_18","Badge 9"),imgly_sticker_shapes_badge_19:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_badge_19","Badge 10"),imgly_sticker_shapes_badge_20:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_badge_20","Badge 11"),imgly_sticker_shapes_badge_28:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_badge_28","Badge 12"),imgly_sticker_shapes_badge_32:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_badge_32","Badge 13"),imgly_sticker_shapes_badge_35:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_badge_35","Badge 14"),imgly_sticker_shapes_badge_36:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_badge_36","Badge 15"),imgly_sticker_shapes_badge_04:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_badge_04","Badge 2"),imgly_sticker_shapes_badge_06:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_badge_06","Badge 3"),imgly_sticker_shapes_badge_08:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_badge_08","Badge 4"),imgly_sticker_shapes_spray_01:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_spray_01","Spray 1"),imgly_sticker_shapes_spray_03:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_spray_03","Spray 2"),imgly_sticker_shapes_spray_04:App.t("shared_components.image_editor.transform.sticker.asset.imgly_sticker_shapes_spray_04","Spray 3")}},brush:{title:{name:App.t("shared_components.image_editor.transform.brush.title.name","Brush"),width:App.t("shared_components.image_editor.transform.brush.title.width","Width"),hardness:App.t("shared_components.image_editor.transform.brush.title.hardness","Hardness"),settings:App.t("shared_components.image_editor.transform.brush.title.settings","Brush Settings")}},frame:{title:{name:App.t("shared_components.image_editor.transform.frame.title.name","Frames"),opacity:App.t("shared_components.image_editor.transform.frame.title.opacity","Opacity"),width:App.t("shared_components.image_editor.transform.frame.title.width","Width")},button:{fill:App.t("shared_components.image_editor.transform.frame.button.fill","Fill"),replace:App.t("shared_components.image_editor.transform.frame.button.replace","Replace"),none:App.t("shared_components.image_editor.transform.frame.button.none","None")},asset:{imgly_frame_dia:App.t("shared_components.image_editor.transform.frame.asset.imgly_frame_dia","Dia"),imgly_frame_art_decor:App.t("shared_components.image_editor.transform.frame.asset.imgly_frame_art_decor","Art Decor"),imgly_frame_black_passepartout:App.t("shared_components.image_editor.transform.frame.asset.imgly_frame_black_passepartout","Black Passepartout"),imgly_frame_lowpoly_shadow:App.t("shared_components.image_editor.transform.frame.asset.imgly_frame_lowpoly_shadow","Low Poly"),imgly_frame_wood_passepartout:App.t("shared_components.image_editor.transform.frame.asset.imgly_frame_wood_passepartout","Wood Passepartout")}},overlay:{title:{name:App.t("shared_components.image_editor.transform.overlay.title.name","Overlays"),blending:App.t("shared_components.image_editor.transform.overlay.title.blending","Blending"),none:App.t("shared_components.image_editor.transform.overlay.title.none","None"),normal:App.t("shared_components.image_editor.transform.overlay.title.normal","Normal"),overlay:App.t("shared_components.image_editor.transform.overlay.title.overlay","Overlay"),hardLight:App.t("shared_components.image_editor.transform.overlay.title.hardLight","Hard Light"),softLight:App.t("shared_components.image_editor.transform.overlay.title.softLight","Soft Light"),multiply:App.t("shared_components.image_editor.transform.overlay.title.multiply","Multiply"),darken:App.t("shared_components.image_editor.transform.overlay.title.darken","Darken"),lighten:App.t("shared_components.image_editor.transform.overlay.title.lighten","Lighten"),screen:App.t("shared_components.image_editor.transform.overlay.title.screen","Screen"),colorBurn:App.t("shared_components.image_editor.transform.overlay.title.colorBurn","Color Burn")},button:{none:App.t("shared_components.image_editor.transform.overlay.button.none","None")},asset:{imgly_overlay_bokeh:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_bokeh","Bokeh"),imgly_overlay_chop:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_chop","Chop"),imgly_overlay_clouds:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_clouds","Clouds"),imgly_overlay_golden:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_golden","Golden"),imgly_overlay_grain:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_grain","Grain"),imgly_overlay_hearts:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_hearts","Hearts"),imgly_overlay_lightleak1:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_lightleak1","Light Leak 1"),imgly_overlay_lightleak2:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_lightleak2","Light Leak 2"),imgly_overlay_metal:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_metal","Metal"),imgly_overlay_mosaic:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_mosaic","Mosaic"),imgly_overlay_painting:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_painting","Painting"),imgly_overlay_paper:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_paper","Paper"),imgly_overlay_rain:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_rain","Rain"),imgly_overlay_vintage:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_vintage","Vintage"),imgly_overlay_wall1:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_wall1","Wall"),imgly_overlay_wall2:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_wall2","Wall 2"),imgly_overlay_wood:App.t("shared_components.image_editor.transform.overlay.asset.imgly_overlay_wood","Wood")}}}})}function f(){var e=["".concat(App.assetBaseUrl(),"/libs/photoeditorsdk/css/PhotoEditorSDK.UI.DesktopUI.min.css"),"".concat(App.assetBaseUrl(),"/libs/photoeditorsdk/js/lib/react.production.min.js"),"".concat(App.assetBaseUrl(),"/libs/photoeditorsdk/js/lib/react-dom.production.min.js"),"".concat(App.assetBaseUrl(),"/libs/photoeditorsdk/js/PhotoEditorSDK.min.js"),"".concat(App.assetBaseUrl(),"/libs/photoeditorsdk/js/PhotoEditorSDK.UI.DesktopUI.min.js")];return new Promise(function(){var t=o(regeneratorRuntime.mark((function t(r){var n,i,a;return regeneratorRuntime.wrap((function t(o){while(1)switch(o.prev=o.next){case 0:n=0,i=e;case 1:if(!(n<i.length)){o.next=8;break}a=i[n];o.next=5;return p(a);case 5:n++;o.next=1;break;case 8:r();case 9:case"end":return o.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}function p(e){return g.apply(this,arguments)}function g(){g=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function e(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(e){var r=t.split(".").pop();var n=null;if("js"===r){n=document.createElement("script");n.type="text/javascript";n.src=t}else{n=document.createElement("link");n.href=t;n.type="text/css";n.rel="stylesheet"}n.onload=function(){e()};document.head.appendChild(n)})));case 1:case"end":return r.stop()}}),e)})));return g.apply(this,arguments)}function h(){return App.session.get("photoEditorApiKey")}function v(){return App.session.get("languageCode")}var m=t["default"]=u},89158:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r={upload:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=new Promise((function(e,a){n().then((function(n){i(t,n,r).then((function(t){e(t)})).catch((function(e){a(e)}))})).catch((function(e){a(e)}))}));return a}};function n(){var e="".concat(o(),"/users/").concat(s(),"/upload-tokens");var t=new Promise((function(t,r){window.fetch(e,a()).then((function(e){200!==e.status?r(e):e.json().then((function(e){t(e.token)}))}))}));return t}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t=arguments.length>1?arguments[1]:void 0;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=new Promise((function(n,i){var l=Object.assign({token:t,siteRef:u(),url:e,type:"image"},r);var c={body:JSON.stringify(l)};var d="".concat(o(),"/users/").concat(s(),"/assets");window.fetch(d,_.extend(a(),c)).then((function(e){200!==e.status?e.json().then((function(e){i(e)})):e.json().then((function(e){n(e.result)}))}))}));return n}function a(){return{credentials:"include",method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":l()}}}function o(){return App.frontEndBucket.apiProxyBaseUrl}function s(){return App.session.get("userRef")}function l(){return App.frontEndBucket.csrfToken}function u(){return App.session.get("siteRef")}var c=t["default"]=r},58910:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(97286));var i=a(r(60989));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function l(e,t,r){t&&s(e.prototype,t);r&&s(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var u=function(){function e(){o(this,e)}l(e,[{key:"build",value:function e(){Cocktail.mixin(n.default,i.default);return new n.default}}]);return e}();var c=t["default"]=u},97286:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=f(r(13745));var i=f(r(9838));var a=f(r(69464));var o=r(83489);var s=r(50909);var l=r(7794);var u=r(62333);var c=f(r(62201));var d=f(r(62951));function f(e){return e&&e.__esModule?e:{default:e}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter((function(e){return"folder"!==e.type}))}function g(e,t){var r=[];var i=a.default.getState().user.sites;i.forEach((function(i){var a=[];var o=i.ref;var s=i.primaryDomain;var l="desktop"===i.siteType;var u=i.reverseParentRef;if(null!==s&&l)r.push({value:o,selected:false,title:s.domainName,text:s.domainName});else if(null===s&&l){i.domains.forEach((function(e){a.push(parseInt(e,10))}));var c=Math.max.apply(null,a);void 0!==i.domains[c]&&r.push({value:o,selected:false,title:i.domains[c],text:i.domains[c]})}e===u&&t&&r.push({value:u,selected:false,title:(0,n.default)("shared_views.importpanel.previous_site","Previous site"),text:(0,n.default)("shared_views.importpanel.previous_site","Previous site")})}));return r}function h(e){var t=document.createElement("div");t.innerHTML=e;return t.textContent||t.innerText}var v=Marionette.ItemView.extend({template:"import_panel",events:{"click .js-next":"onImportClick","click .js-back":"closePanel","change .js-import-page-from":"onImportSourcePageChange","change .js-import-content-from":"onImportSourceSiteChange","change .js-import-page-destination":"onImportDestinationPageChange","change .import__checkbox":"onContentToggle","change .js-import-text-filter":"onTextFilterChange","change .js-import-image-filter":"onImgFilterChange","change .js-select-all-text":"onTextToggle","change .js-select-all-images":"onImgToggle"},state:{selectedSourceSite:0,selectedSourcePage:0,selectedDestinationPage:0,sourceSitePages:{},domains:[],siteRef:0,selectedWidgets:[],saveEnabled:false},initialize:function e(){return this},toggle:function e(){this.slice=new d.default({store:a.default,stateId:"importPanel"});this.props=this.slice.get();this.slice.subscribe(this.handleStateChange.bind(this));var t=a.default.getState();var r=t.site.ref;var n=t.user.sites.find((function(e){return e.ref===r}));n.isReversible?this.state.selectedSourceSite=n.reverseParentRef:this.state.selectedSourceSite=App.desktopSite.ref;this.state.domains=g(this.state.selectedSourceSite,n.isReversible);this.state.selectedDestinationPage=t.page.activePage;this.state.selectedSourceSite=this.state.domains[0].value;var i=t.env.csrfToken;var l=t.env.apiProxyBaseUrl;var u="".concat(l,"/sites/").concat(this.state.selectedSourceSite,"/pages?type=page");a.default.dispatch((0,s.getSitePages)(u,i,this.state.selectedSourceSite));a.default.dispatch((0,o.openPanel)("import"));this.render()},handleStateChange:function e(t){if((0,c.default)(this.props,t))return;var r=this.props;this.props=t;if(r.pagesLoading&&!this.props.pagesLoading){if(!this.state.selectedSourcePage||0===this.state.selectedSourcePage){this.state.selectedSourcePage=this.props.sites[this.state.selectedSourceSite].pages[0].ref;a.default.dispatch((0,s.changeSourcePage)(this.state.selectedSourcePage))}var n=a.default.getState().env;var i=n.csrfToken;var o=n.apiProxyBaseUrl;var l=this.state.selectedSourceSite;var u=this.state.selectedSourcePage;var d="".concat(o,"/sites/").concat(l,"/pages/").concat(u,"/widgets/extractable");a.default.dispatch((0,s.getWidgets)(d,i,l,u))}!r.importLoading||this.props.importLoading||this.props.importError||this.onImportSuccess();r.importLoading&&!this.props.importLoading&&this.props.importError&&this.onImportError();if(this.props.importLoading||this.props.widgetsLoading||this.props.pagesLoading)this.state.saveEnabled=false;else{var f=this.props,p=f.textFilter,g=f.imgFilter,h=f.includeText,v=f.includeImg;var m=this.props.widgets[this.state.selectedSourceSite];var y=this.filterWidgets(m,p,g,h,v);y.length?this.state.saveEnabled=true:this.state.saveEnabled=false}a.default.getState().ui.panel.panelOpen&&this.render()},onImportClick:function e(){var t=this.$(".import__content--selected [checked]");var r=[];t.each((function(e,t){r.push(parseInt(t.value,10))}));var n=a.default.getState().site.ref;var i=this.state.selectedDestinationPage;var o=this.state.selectedSourceSite;var l=this.state.selectedSourcePage;var u=a.default.getState().env.csrfToken;var c=a.default.getState().env.apiProxyBaseUrl;var d="".concat(c,"/sites/").concat(n,"/pages/").concat(i,"/import");var f={siteRef:n,pageRef:i,sourceSiteRef:o,sourcePageRef:l,widgetRefs:r};a.default.dispatch((0,s.importContent)(d,u,f))},render:function e(){var t=a.default.getState();var r=p((0,l.formatPages)(t.page.pages));var n=t.importPanel,i=n.textFilter,o=n.imgFilter,s=n.includeText,u=n.includeImg;var c=t.importPanel.widgets[this.state.selectedSourceSite];var d=this.filterWidgets(c,i,o,s,u);var f=t.importPanel.sites[this.state.selectedSourceSite];var g=this.filterWidgets(c,i,o,false,u);var h=this.filterWidgets(c,i,o,s,false);this.tplData={lightBackground:true,pages:r,sourceSite:this.state.selectedSourceSite,sourceSitePages:f?p(f.pages):[],sourcePageRef:this.state.selectedSourcePage,destPageRef:this.state.selectedDestinationPage,widgets:d,selectedImageWidgets:g,selectedTextWidgets:h,domains:this.state.domains,textFilter:i,imgFilter:o,includeImg:u,includeText:s,widgetsLoading:t.importPanel.widgetsLoading,pagesLoading:t.importPanel.pagesLoading,importLoading:t.importPanel.importLoading,importError:t.importPanel.importError,saveEnabled:this.state.saveEnabled};"function"===typeof this.mixinRenderTpl&&this.mixinRenderTpl()},onImportSourcePageChange:function e(t){this.state.selectedSourcePage=parseInt(t.target.value,10);a.default.dispatch((0,s.changeSourcePage)(this.state.selectedSourcePage));if(!a.default.getState().importPanel.widgets[this.state.selectedSourceSite][this.state.selectedSourcePage]){var r=a.default.getState().env;var n=r.csrfToken;var i=r.apiProxyBaseUrl;var o=this.state.selectedSourceSite;var l=this.state.selectedSourcePage;var u="".concat(i,"/sites/").concat(o,"/pages/").concat(l,"/widgets/extractable");a.default.dispatch((0,s.getWidgets)(u,n,o,l))}},onImportDestinationPageChange:function e(t){this.state.selectedDestinationPage=parseInt(t.target.value,10)},onImportSourceSiteChange:function e(t){this.state.selectedSourceSite=parseInt(t.target.value,10);this.state.selectedSourcePage=0;a.default.dispatch((0,s.changeSourcePage)(this.state.selectedSourcePage));var r=a.default.getState().env;var n=r.csrfToken;var i=r.apiProxyBaseUrl;var o=this.state.selectedSourceSite;var l="".concat(i,"/sites/").concat(o,"/pages?type=page");a.default.dispatch((0,s.getSitePages)(l,n,o))},onTextFilterChange:function e(t){a.default.dispatch((0,s.changeTextFilter)(parseInt(t.target.value,10)))},onImgFilterChange:function e(t){a.default.dispatch((0,s.changeImgFilter)(parseInt(t.target.value,10)))},onContentToggle:function e(t){var r=t.currentTarget.closest(".import__content");if(!r)return;r.classList.toggle("import__content--selected")},onTextToggle:function e(){a.default.dispatch((0,s.changeIncludeText)(!a.default.getState().importPanel.includeText))},onImgToggle:function e(){a.default.dispatch((0,s.changeIncludeImg)(!a.default.getState().importPanel.includeImg))},onImportSuccess:function e(){this.closePanel();document.querySelector("#siteFrame").contentWindow.location.reload(true);(0,i.default)((0,n.default)("shared_views.language_panel.success","Success"),(0,n.default)("blog.post_import.completed_title","Import complete"),"success")},onImportError:function e(){(0,i.default)((0,n.default)("shared_views.language_panel.error","Error"),(0,n.default)("plugin_v7.blog.wordpress-import.import_failed_title","Import failed"),"error")},closePanel:function e(){this.slice.unsubscribe();a.default.dispatch((0,o.closePanel)());this.mixinClosePanel()},filterWidgets:function e(t,r,n,i,a){if(!t||!t[this.state.selectedSourcePage])return[];var o=t[this.state.selectedSourcePage];if(i&&a&&r===u.NO_FILTER&&n===u.NO_FILTER)return o;if(!i&&!a)return[];var s=o.filter((function(e){if("widget.image"!==e.type){if(i&&h(e.data.content).split(" ").length>r)return e;return false}if(a&&e.data.height>n)return e;return false}));return s}});var m=t["default"]=v},97908:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(9878);var i=a(r(31170));function a(e){return e&&e.__esModule?e:{default:e}}var o=Marionette.ItemView.extend({template:"row_layout_panel",events:{"click .js-row-layout-cancel":"cancelChanges","click .js-row-layout-done":"saveChanges","click .js-row-layout-bg":"cancelChanges","click .js-previous-layout":"previousClicked","click .js-next-layout":"nextClicked","change .js-radio-item":"itemChanged"},initialize:function e(t){this.dialogStyle=t.dialogStyle;this.layouts=t.layouts;this.currentLayout=t.currentLayout;this.currentIndex=this.layouts.indexOf(this.currentLayout);this.prevIndex=this.currentIndex},render:function e(){var t=Twig.render(Twig.templates[this.template],{dialogStyle:this.dialogStyle,currentLayout:this.currentLayout,layouts:this.layouts});(0,n.emptyElement)(this.el);(0,n.append)(this.el,t);document.querySelector("body").insertAdjacentElement("beforeend",this.el);this.setElement(this.el);this.onRender();return this},onRender:function e(){Editor.Events.on("screenMode:change",this.closePanel.bind(this))},closePanel:function e(){this.trigger("panel:close");this.destroy()},saveChanges:function e(){this.closePanel()},cancelChanges:function e(){this.prevIndex!==this.currentIndex&&this.trigger("layout:change",{layout:this.layouts[this.prevIndex]});this.closePanel()},unsetCheckedItem:function e(){var t=this.el.querySelector(".js-radio-item:checked");t.checked=false},checkRadioItem:function e(t){var r=this.el.querySelector(".js-radio-item[value=".concat(t,"]"));r.checked=true},updateLayout:function e(){this.trigger("layout:change",{layout:this.layouts[this.currentIndex]});i.default.container.Tracker.track("Section layout updated")},itemChanged:function e(t){this.currentIndex=this.layouts.indexOf(t.currentTarget.value);this.updateLayout()},previousClicked:function e(){this.currentIndex-1<0?this.currentIndex=this.layouts.length-1:this.currentIndex--;this.unsetCheckedItem();this.checkRadioItem(this.layouts[this.currentIndex]);this.updateLayout()},nextClicked:function e(){this.currentIndex+1>this.layouts.length-1?this.currentIndex=0:this.currentIndex++;this.unsetCheckedItem();this.checkRadioItem(this.layouts[this.currentIndex]);this.updateLayout()}});var s=t["default"]=o},79081:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=h(r(79440));var a=p(r(76660));var o=p(r(13745));var s=r(54833);var l=r(32686);var u=r(37058);var c=p(r(729));var d=p(r(50110));var f=p(r(9838));function p(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(g=function e(n){return n?r:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function y(e,t,r){t&&m(e.prototype,t);r&&m(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&w(e,t)}function w(e,t){w=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return w(e,t)}function _(e){var t=E();return function r(){var n=k(e),i;if(t){var a=k(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return S(this,i)}}function S(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function k(e){k=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return k(e)}function C(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var O=function(e){b(r,e);var t=_(r);function r(e){var n;v(this,r);n=t.call(this,e);C(P(n),"onCloseClick",(function(e){e.preventDefault();n.close()}));C(P(n),"close",(function(){n.props.closeAddLanguage()}));C(P(n),"saveSiteActiveLanguage",(function(){n.props.addSiteActiveLanguage({language:n.state.selectedLanguageCode});n.openPagesSelector()}));C(P(n),"saveSiteDefaultLanguage",(function(e){n.props.updateDefaultLanguage({siteRef:n.props.env.siteRef,url:"".concat(n.props.env.apiProxyBaseUrl,"/sites/").concat(n.props.env.siteRef),token:n.props.env.csrfToken,language:e,oldLanguageCode:""})}));C(P(n),"onAddLanguageClick",(function(e){e.preventDefault();n.saveSiteActiveLanguage()}));C(P(n),"trackEvent",(function(e){n.props.tracker.track("DEFAULT LANGUAGE ADDED",{defaultLanguage:e})}));C(P(n),"componentDidUpdate",(function(e){var t=e.language.defaultLanguage.language;var r=n.props.language.defaultLanguage.language;r&&t!==r&&n.trackEvent(r);!e.language.languageError&&n.props.language.languageError&&n.nofityError()}));C(P(n),"nofityError",(function(){(0,f.default)((0,o.default)("shared_views.ml.error","Error"),(0,o.default)("shared_views.ml.error.default-language-error","Unable to save the default language."),"error")}));C(P(n),"languageSelected",(function(e){e.preventDefault();n.setState({selectedLanguageCode:e.target.value,buttonDisabled:!e.target.value})}));C(P(n),"openPagesSelector",(function(){n.props.openPagesSelector()}));C(P(n),"getFilteredLanguages",(function(){var e=n.props.env.languages;var t=n.props.language.siteLanguages;var r=n.props.language.defaultLanguage.language||n.props.env.languageCode;var i={};Object.keys(e).forEach((function(n){var a=t.find((function(e){return e.language===n}));"undefined"===typeof a&&r!==n&&(i[n]=e[n])}));return i}));C(P(n),"buildUpgradeUrl",(function(){var e=n.props.brand.brandType;if("Reseller"===e&&n.props.brand.resellerUpgradeUrl&&n.props.brand.resellerUpgradeUrl.length>0)return n.props.brand.resellerUpgradeUrl;return n.props.brand.upgradeUrl}));C(P(n),"checkLanguageLimit",(function(){var e=n.props.user.capabilities.multiLanguageLimit;var t=(0,o.default)("editor.dialog.language_limit_reached","You've used all %1 languages available for your website. Either upgrade to a higher package or remove some languages.",e);if(0!==e&&n.props.language.siteLanguages.length>=e)return i.default.createElement(d.default,{addCancel:n.close,content:t,upgradeUrl:n.buildUpgradeUrl(),hideUpgradeInUnableToPublish:n.props.brand.capabilities.hideUpgradeInUnableToPublish});return false}));C(P(n),"checkLanguageAvailabilities",(function(){var e=n.getFilteredLanguages();var t=Object.keys(e).length;var r=(0,o.default)("editor.dialog.no_available_language","You've used all languages available for your website.");if(0===t)return i.default.createElement(d.default,{addCancel:n.close,content:r,hideUpgradeInUnableToPublish:"true"});return false}));C(P(n),"addLanguageModal",(function(){var e=(0,o.default)("shared_views.ml.next","Next");var t=(0,o.default)("shared_views.ml.add_language","Add language");var r=(0,o.default)("shared_views.ml.site_lang_title","New content language");var a=(0,o.default)("shared_views.ml.site_lang_subtitle","Pick the language you would like to add to your website");return i.default.createElement(i.Fragment,null,i.default.createElement("div",{className:"ml-modal"},i.default.createElement("div",{className:"ml-modal__header"},i.default.createElement("button",{className:"ml-modal__close-button",onClick:n.onCloseClick},i.default.createElement("span",null,t)),n.props.language.languageLoading?i.default.createElement("div",{className:"loader"}):i.default.createElement("button",{className:"ml-modal__done-button",onClick:n.onAddLanguageClick,disabled:n.state.buttonDisabled||n.props.language.languageError},e)),i.default.createElement("div",{className:"ml-modal__content"},i.default.createElement("div",{className:"ml-modal__content-left"},i.default.createElement("div",{className:"ml-modal__description"},i.default.createElement("div",{className:"ml-modal__title"},r),i.default.createElement("div",{className:"ml-modal__subtitle"},a))),i.default.createElement("div",{className:"ml-modal__content-right"},i.default.createElement(c.default,{userLanguage:n.props.user.languageCode,languageSelected:n.languageSelected,activeLanguageCode:n.props.language.activeLanguage,allLanguages:n.getFilteredLanguages(),localisedLanguages:n.props.env.localisedLanguages})))),i.default.createElement("div",{className:"ml-modal__overlay"}))}));n.state={selectedLanguageCode:"",buttonDisabled:true};return n}y(r,[{key:"componentDidMount",value:function e(){this.props.language.defaultLanguage.language||this.saveSiteDefaultLanguage(this.props.env.languageCode);this.setState({buttonDisabled:!this.props.language.activeLanguage,selectedLanguageCode:this.props.language.activeLanguage})}},{key:"render",value:function e(){return i.default.createElement(i.Fragment,null,this.checkLanguageLimit()||this.checkLanguageAvailabilities()||this.addLanguageModal())}}]);return r}(i.Component);O.propTypes={updateDefaultLanguage:a.default.func.isRequired,addSiteActiveLanguage:a.default.func.isRequired,language:a.default.object.isRequired,user:a.default.object.isRequired,openPagesSelector:a.default.func.isRequired,closeAddLanguage:a.default.func.isRequired,tracker:a.default.object.isRequired,env:a.default.object.isRequired,brand:a.default.object.isRequired};var A=function e(t){var r=t.language,n=t.user,i=t.env,a=t.brand;return{language:r,user:n,env:i,brand:a}};var T=function e(t){return{updateDefaultLanguage:function e(r){return t((0,l.updateDefaultLanguage)(r))},addSiteActiveLanguage:function e(r){return t((0,l.addSiteActiveLanguage)(r))},openPagesSelector:function e(){return t((0,u.openPagesSelector)())},closeAddLanguage:function e(){return t((0,u.closeAddLanguage)())}}};var j=t["default"]=(0,s.connect)(A,T)(O)},55091:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=h(r(79440));var a=p(r(76660));var o=r(54833);var s=r(37058);var l=r(32686);var u=p(r(13745));var c=r(38869);var d=p(r(57789));var f=p(r(78281));function p(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(g=function e(n){return n?r:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function y(e,t,r){t&&m(e.prototype,t);r&&m(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&w(e,t)}function w(e,t){w=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return w(e,t)}function _(e){var t=E();return function r(){var n=k(e),i;if(t){var a=k(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return S(this,i)}}function S(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function k(e){k=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return k(e)}function C(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var O=function(e){b(r,e);var t=_(r);function r(){var e;v(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];e=t.call.apply(t,[this].concat(i));C(P(e),"onDoneClicked",(function(t){t.preventDefault();e.props.closeAddLanguageDone();e.props.removeActiveLanguage();if("ten"===e.props.user.productVersion){var r=e.props.env.csrfToken;e.props.getLanguagesPageTree(r);e.reloadSiteFrameOnFirstLanguageAdded()}else e.updateSite({siteDefaultLanguage:e.props.language.defaultLanguage,siteCurrentLanguage:e.props.language.defaultLanguage,siteLanguages:e.props.language.siteLanguages})}));C(P(e),"reloadSiteFrameOnFirstLanguageAdded",(function(){var t=document.getElementById("siteFrame");var r=t.contentWindow.document.querySelector('[data-name="languagemenu"]');if(e.props.language.siteLanguages.length>0&&!r){Editor.Events.trigger("page:change",(0,f.default)((0,d.default)().get("pageRef")));t.contentWindow.location.reload()}}));C(P(e),"updateSite",(function(e){var t=document.getElementById("siteFrame");var r=Object.assign({},e,{action:"rerender:languagemenu"});t&&t.contentWindow&&t.contentWindow.postMessage(r,"".concat(t.contentWindow.location.protocol,"//").concat(t.contentWindow.location.host))}));return e}y(r,[{key:"render",value:function e(){var t=this.props.language.activeLanguage;var r=this.props.env.languages[t];var n=(0,u.default)("shared_views.ml.add_language","Add language");var a=(0,u.default)("shared_views.ml.done","Done");var o=(0,u.default)("shared_views.ml.done_message","Language added. You can now edit the %1 version of your site from the Pages Menu",r);return i.default.createElement(i.Fragment,null,i.default.createElement("div",{className:"ml-modal"},i.default.createElement("div",{className:"ml-modal__header"},i.default.createElement("button",{className:"ml-modal__close-button",onClick:this.onDoneClicked},i.default.createElement("span",null,n))),i.default.createElement("div",{className:"ml-modal__content"},i.default.createElement("div",{className:"ml-modal__description--central"},i.default.createElement("div",{className:"ml-modal__icon"}),i.default.createElement("div",{className:"ml-modal__subtitle ml-modal__subtitle--central"},o),i.default.createElement("button",{className:"ml-modal__button--done qa-add-language-done-button",onClick:this.onDoneClicked},a)))),i.default.createElement("div",{className:"ml-modal__overlay"}))}}]);return r}(i.Component);O.propTypes={closeAddLanguageDone:a.default.func.isRequired,removeActiveLanguage:a.default.func.isRequired,getLanguagesPageTree:a.default.func.isRequired,language:a.default.object.isRequired,env:a.default.object.isRequired,user:a.default.object.isRequired};var A=function e(t){var r=t.language,n=t.env,i=t.user;return{language:r,env:n,user:i}};var T=function e(t){return{closeAddLanguageDone:function e(){return t((0,s.closeAddLanguageDone)())},removeActiveLanguage:function e(){return t((0,l.removeActiveLanguage)())},getLanguagesPageTree:function e(r){return t((0,c.getLanguagesPageTree)(r))}}};var j=t["default"]=(0,o.connect)(A,T)(O)},55495:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=g(r(79440));var a=f(r(76660));var o=r(54833);var s=r(61842);var l=f(r(8070));var u=r(37058);var c=r(32686);var d=f(r(13745));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(p=function e(n){return n?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function m(e,t,r){t&&v(e.prototype,t);r&&v(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&b(e,t)}function b(e,t){b=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return b(e,t)}function w(e){var t=P();return function r(){var n=E(e),i;if(t){var a=E(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return _(this,i)}}function _(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function E(e){E=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return E(e)}function k(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var C=function(e){y(r,e);var t=w(r);function r(){var e;h(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];e=t.call.apply(t,[this].concat(i));k(S(e),"onLanguageSelected",(function(t){var r=t.target.dataset.lang;e.props.changeLanguage(r);e.hideList()}));k(S(e),"openAddLanguageModal",(function(){e.props.openAddLanguage();e.hideList()}));k(S(e),"openManageLanguageList",(function(){e.props.showManageLanguageList();e.hideList()}));k(S(e),"hideList",(function(){e.props.hideLanguageList()}));return e}m(r,[{key:"render",value:function e(){var t=this;var r=this.props.language.current||this.props.language.defaultLanguage.language||this.props.languageCode;var n=(0,d.default)("shared_views.ml.add_language","Add language");var a=(0,d.default)("shared_views.ml.manage_languages","Manage languages");return i.default.createElement("div",{className:"ml-list"},i.default.createElement("div",{className:"ml-list__content"},i.default.createElement("ul",{className:"ml-list__languges"},i.default.createElement(l.default,{currentLanguageCode:r,language:this.props.language.defaultLanguage.language||this.props.languageCode,localisedName:this.props.language.defaultLanguage.localisedName||this.props.language.localisedLanguages[this.props.languageCode],languageFlag:this.props.language.defaultLanguage.flag||this.props.languageCodeFlag||"",languageSelected:this.onLanguageSelected}),this.props.language.siteLanguages.map((function(e){return i.default.createElement(l.default,{key:e.id,currentLanguageCode:r,language:e.language,localisedName:e.localisedName,languageFlag:e.flag||"",languageSelected:t.onLanguageSelected})}))),i.default.createElement("ul",{className:"ml-list__controls"},i.default.createElement("li",{className:"ml-list__controls-item js-add-language",onClick:this.openAddLanguageModal},n),this.props.language.siteLanguages.length>0&&i.default.createElement("li",{className:"ml-list__controls-item js-lang-manager",onClick:this.openManageLanguageList},a))),i.default.createElement("div",{className:"ml-list__overlay",onClick:this.hideList}))}}]);return r}(i.Component);C.propTypes={language:a.default.object.isRequired,hideLanguageList:a.default.func.isRequired,openAddLanguage:a.default.func.isRequired,showManageLanguageList:a.default.func.isRequired,changeLanguage:a.default.func.isRequired,languageCode:a.default.string.isRequired,languageCodeFlag:a.default.string.isRequired};var O=function e(t){var r=t.language;return{language:r}};var A=function e(t){return{hideLanguageList:function e(){return t((0,s.hideLanguageList)())},openAddLanguage:function e(){return t((0,u.openAddLanguage)())},showManageLanguageList:function e(){return t((0,s.showManageLanguageList)())},changeLanguage:function e(r){return t((0,c.changeLanguage)(r))}}};var T=t["default"]=(0,o.connect)(O,A)(C)},77380:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=y(r(79440));var a=v(r(76660));var o=r(54833);var s=v(r(16086));var l=v(r(62201));var u=v(r(9838));var c=v(r(13745));var d=v(r(21992));var f=v(r(98905));var p=r(32686);var g=r(61842);var h=v(r(729));function v(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(m=function e(n){return n?r:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}function b(e,t){return S(e)||_(e,t)||k(e,t)||w()}function w(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n=[];var i=true;var a=false;var o,s;try{for(r=r.call(e);!(i=(o=r.next()).done);i=true){n.push(o.value);if(t&&n.length===t)break}}catch(e){a=true;s=e}finally{try{i||null==r["return"]||r["return"]()}finally{if(a)throw s}}return n}function S(e){if(Array.isArray(e))return e}function P(e){return O(e)||C(e)||k(e)||E()}function E(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}function C(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function O(e){if(Array.isArray(e))return A(e)}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function D(e,t,r){t&&j(e.prototype,t);r&&j(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function L(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&R(e,t)}function R(e,t){R=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return R(e,t)}function I(e){var t=N();return function r(){var n=F(e),i;if(t){var a=F(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return M(this,i)}}function M(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function F(e){F=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return F(e)}function V(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var B=function(e){L(r,e);var t=I(r);function r(){var e;T(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];e=t.call.apply(t,[this].concat(i));V(x(e),"state",{allowBack:true,deleteLanguageCode:null,deletelocalisedName:null,openDeleteDialog:false,openOptionsFor:"",selectedLanguage:"",languageBeingChanged:""});V(x(e),"close",(function(){e.props.hideManageLanguageList()}));V(x(e),"onDelete",(function(t){t.preventDefault();e.setState({openDeleteDialog:true,deleteLanguageCode:t.target.value,deletelocalisedName:t.target.dataset.localisedname})}));V(x(e),"deleteConfirm",(function(t){t.preventDefault();var r=e.state.deleteLanguageCode;Promise.resolve(e.props.deleteLanguage({url:"".concat(e.props.env.apiProxyBaseUrl,"/sites/").concat(e.props.env.siteRef,"/languages/").concat(r),token:e.props.env.csrfToken})).then((function(){e.setState({openDeleteDialog:false,openOptionsFor:""});e.checkCurrentLang(r)}))}));V(x(e),"checkCurrentLang",(function(t){if(t===e.props.language.current){e.props.changeLanguage(e.props.language.defaultLanguage.language);e.props.language.siteLanguages.length>0&&e.setState({allowBack:false})}}));V(x(e),"deleteCancel",(function(t){t.preventDefault();e.closeDialog()}));V(x(e),"closeDialog",(function(){e.setState({openDeleteDialog:false,deleteLanguageCode:null,deletelocalisedName:null,selectedLanguage:"",languageBeingChanged:""});e.props.setShowChangeLanguage(false)}));V(x(e),"onOffline",(function(t){t.preventDefault();var r=t.target.value;var n=1===parseInt(t.target.dataset.active,10)?0:1;e.props.updateLanguageStatus({url:"".concat(e.props.env.apiProxyBaseUrl,"/sites/").concat(e.props.env.siteRef,"/languages/").concat(r),token:e.props.env.csrfToken,siteRef:e.props.env.siteRef,active:n})}));V(x(e),"onChangeLanguage",(function(t){e.setState({selectedLanguage:t||e.props.language.defaultLanguage.language,languageBeingChanged:t||""});e.props.setShowChangeLanguage(true)}));V(x(e),"onCancelChangingLanguage",(function(t){t.target.blur();e.setState((function(e){return{openOptionsFor:""}}));e.props.setShowChangeLanguage(false)}));V(x(e),"onOptionsClicked",(function(t){t.preventDefault();var r=t.target.value;e.setState((function(e){if(e.openOptionsFor===r)return{openOptionsFor:""};return{openOptionsFor:r}}))}));V(x(e),"hasUpdatedDefaultLanguage",(function(e,t){return e.language!==t.language}));V(x(e),"hasUpdatedLanguages",(function(e,t){return!(0,l.default)(e,t)}));V(x(e),"hasUpdatedShowChangeLanguage",(function(e,t){return e.showingChangeLanguage!==t.showingChangeLanguage}));V(x(e),"updatingDefaultLanguageWhistSelected",(function(e,t,r){return(e===r||!e)&&!t}));V(x(e),"hasUpdatedShowManageList",(function(e,t){return e!==t}));V(x(e),"hasLanguageError",(function(e,t){return e||t}));V(x(e),"hasNewLanguageError",(function(e,t){return!e&&t}));V(x(e),"renameFlag",(function(t,r){var n=e.props.env.flags[r.toLowerCase()];t.classList=[].concat(P(Array.from(t.classList).filter((function(e){return!e.startsWith("language-selector__icon--")}))),["language-selector__icon--".concat(n)]).join(" ");var i=t.querySelector("span");i.textContent=r}));V(x(e),"updateCurrentLanguageFlag",(function(t){var r=document.querySelector(".page-control__button--flag");r&&e.renameFlag(r,t)}));V(x(e),"updateDefaultInLanguageBar",(function(t,r){var n=e.props.env.flags[t.toLowerCase()];var i=document.getElementById("siteFrame").contentWindow.document;var a=i.querySelector(".language-selector__item---default");if(a){var o=a.querySelectorAll("span"),s=b(o,2),l=s[0],u=s[1];l.classList="language-selector__icon language-selector__icon--".concat(n);u.innerText=r}}));V(x(e),"updateActivePageText",(function(e,t){var r=document.querySelector(".page-switcher__button-page-name.js-active-page");if(r){var n=r.innerText.replace(new RegExp("^".concat(e.toUpperCase()," /")),"".concat(t.toUpperCase()," /"));r.innerText=r.title=n}}));V(x(e),"componentDidUpdate",(function(t){if(e.hasUpdatedShowManageList(t.ui.showManageList,e.props.ui.showManageList))return;if(e.hasUpdatedShowChangeLanguage(t.language.showingChangeLanguage,e.props.language.showingChangeLanguage,t.language.default))return;if(e.hasLanguageError(e.props.language.siteLanguageDeletingError,e.props.language.languageStatusUpdatingError)){e.notifyError();e.closeDialog();return}e.hasNewLanguageError(t.language.languageError,e.props.language.languageError)&&e.notifyError();var r=e.props.language.siteLanguages;var n=t.language.defaultLanguage;var i=e.props.language.defaultLanguage;if(e.hasUpdatedDefaultLanguage(n,i)){e.closeDialog();if(e.updatingDefaultLanguageWhistSelected(t.language.current,e.state.languageBeingChanged,n.language)){e.updateCurrentLanguageFlag(e.state.selectedLanguage);e.updateActivePageText(n.language,e.state.selectedLanguage)}e.updateDefaultInLanguageBar(e.state.selectedLanguage,i.localisedName);0===r.length&&e.close()}}));V(x(e),"notifyError",(function(){(0,u.default)((0,c.default)("shared_views.ml.error","Error"),(0,c.default)("shared_views.ml.error.site-language-error","Unable to save the language."),"error")}));V(x(e),"generateContentClass",(function(){var t=e.props.language.siteLanguages.length;var r=t>0&&e.props.language.siteLanguages[t-1].language;if(0===t&&e.state.openOptionsFor)return"manage-list--padded";return e.state.openOptionsFor===r&&"manage-list--padded"}));V(x(e),"isDefaultLanguageBeingChanged",(function(){return!e.state.languageBeingChanged}));V(x(e),"getFilteredLanguages",(function(){var t=e.props.env.languages;var r=e.props.language.siteLanguages;var n={};Object.keys(t).forEach((function(i){var a=function e(){return r.find((function(e){return e.language===i}))};e.isDefaultLanguageBeingChanged()&&"undefined"===typeof a()&&(n[i]=t[i])}));return n}));V(x(e),"onLanguageSelected",(function(t){t.persist();e.setState((function(){return{selectedLanguage:t.target.value}}))}));V(x(e),"onSaveNewLanguage",(function(t){t.preventDefault();var r=e.state.selectedLanguage;var n=e.state.languageBeingChanged;e.props.updateDefaultLanguage({siteRef:e.props.env.siteRef,url:"".concat(e.props.env.apiProxyBaseUrl,"/sites/").concat(e.props.env.siteRef),token:e.props.env.csrfToken,language:r,oldLanguageCode:n})}));V(x(e),"noLanguageSelected",(function(){return""===e.state.selectedLanguage}));V(x(e),"saveInProgress",(function(){return e.props.language.languageLoading}));V(x(e),"defaultLanguageIsSelected",(function(){return e.state.selectedLanguage===e.props.language.defaultLanguage.language}));V(x(e),"languageBeingChangedIsSelected",(function(){return e.state.languageBeingChanged===e.state.selectedLanguage}));V(x(e),"isSaveButtonDisabled",(function(){return[e.noLanguageSelected(),e.saveInProgress(),e.defaultLanguageIsSelected(),e.languageBeingChangedIsSelected()].some((function(e){return e}))}));V(x(e),"getTitleText",(function(){if(!e.props.language.showingChangeLanguage)return(0,c.default)("shared_views.ml.manage_languages","Manage languages");return(0,c.default)("shared_views.ml.change_default_language","Change default language")}));V(x(e),"handleBack",(function(t){e.props.language.showingChangeLanguage?e.onCancelChangingLanguage(t):e.close()}));return e}D(r,[{key:"render",value:function e(){var t=this;var r=(0,c.default)("shared_views.ml.delete_language","Delete %1",this.state.deletelocalisedName);var n=(0,c.default)("shared_views.ml.delete_confirm","Yes, delete %1",this.state.deletelocalisedName);var a=this.generateContentClass();var o=this.state.allowBack?"nav-drawer__back-button":"nav-drawer__close-button";var l=this.getTitleText();var u=this.props.language.languageLoading?(0,c.default)("shared_views.ml.saving_default_language","Saving..."):(0,c.default)("shared_views.ml.save_default_language","Save");var p=(0,c.default)("shared_views.ml.default_language","Default language");return i.default.createElement(i.Fragment,null,i.default.createElement("div",{className:"nav-drawer"},i.default.createElement("div",{className:"nav-drawer__backstop",onClick:this.handleBack}),i.default.createElement("div",{className:"pages-nav__suface"},i.default.createElement("div",{className:"pages-nav__header"},i.default.createElement("button",{className:o,type:"button",onClick:this.handleBack},i.default.createElement("span",null,l))),i.default.createElement("div",{className:"nav-drawer__content\n                            nav-drawer__content--grey-bg\n                            nav-drawer__content--full-width-large-res-only\n                            manage-list ".concat(a)},i.default.createElement("div",{className:"pages-panel manage-list__content pages-panel--no-border"},i.default.createElement("div",{className:"pages-panel__section pages-panel__section--no-border pages-tree pages-panel__section--grey-bg"},this.props.language.showingChangeLanguage?i.default.createElement(h.default,{label:p,userLanguage:this.props.env.languageCode,languageSelected:this.onLanguageSelected,activeLanguageCode:this.state.selectedLanguage,allLanguages:this.getFilteredLanguages(),localisedLanguages:this.props.env.localisedLanguages}):i.default.createElement(i.Fragment,null,i.default.createElement(f.default,{isDefaultLanguage:true,languageCode:this.props.language.defaultLanguage.language,localisedName:this.props.language.defaultLanguage.localisedName,onDelete:this.onDelete,onOffline:this.onOffline,onOptionsClicked:this.onOptionsClicked,openOptionsFor:this.state.openOptionsFor,onChangeLanguage:function e(){return t.onChangeLanguage()}}),this.props.language.siteLanguages.map((function(e){return i.default.createElement(f.default,{localisedName:e.localisedName,languageCode:e.language,onDelete:t.onDelete,onOffline:t.onOffline,onOptionsClicked:t.onOptionsClicked,openOptionsFor:t.state.openOptionsFor,active:e.active.toString(),onChangeLanguage:function r(){return t.onChangeLanguage(e.language)},key:e.id})})))))),this.props.language.showingChangeLanguage&&i.default.createElement("div",{className:"pages-nav__footer pages-nav__footer--buttons"},i.default.createElement("button",{className:"cl-button cl-button--nav-modal-cancel",onClick:this.onCancelChangingLanguage},"Cancel"),i.default.createElement("button",{className:(0,s.default)({"cl-button":true,"cl-button--disabled":this.isSaveButtonDisabled(),"cl-button--nav-modal-confirm":!this.isSaveButtonDisabled()}),onClick:this.onSaveNewLanguage,disabled:this.isSaveButtonDisabled()},u))),this.state.openDeleteDialog&&i.default.createElement(d.default,{deleteConfirm:this.deleteConfirm,deleteCancel:this.deleteCancel,dialogTitle:r,confirmButtonText:n})))}}]);return r}(i.Component);B.propTypes={updateDefaultLanguage:a.default.func.isRequired,language:a.default.object.isRequired,env:a.default.object.isRequired,ui:a.default.object.isRequired,hideManageLanguageList:a.default.func.isRequired,deleteLanguage:a.default.func.isRequired,tracker:a.default.object.isRequired,updateLanguageStatus:a.default.func.isRequired,changeLanguage:a.default.func.isRequired,setShowChangeLanguage:a.default.func.isRequired};var W=function e(t){var r=t.language,n=t.env,i=t.ui,a=t.user;return{language:r,env:n,ui:i,user:a}};var G=function e(t){return{updateDefaultLanguage:function e(r){return t((0,p.updateDefaultLanguage)(r))},hideManageLanguageList:function e(){return t((0,g.hideManageLanguageList)())},deleteLanguage:function e(r){return t((0,p.deleteLanguage)(r))},updateLanguageStatus:function e(r){return t((0,p.updateLanguageStatus)(r))},changeLanguage:function e(r){return t((0,p.changeLanguage)(r))},setShowChangeLanguage:function e(r){return t((0,p.setShowChangeLanguage)(r))}}};var q=t["default"]=(0,o.connect)(W,G)(B)},40894:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=p(r(79440));var a=d(r(76660));var o=r(54833);var s=d(r(79081));var l=d(r(44664));var u=d(r(37204));var c=d(r(55091));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(f=function e(n){return n?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function v(e,t,r){t&&h(e.prototype,t);r&&h(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&y(e,t)}function y(e,t){y=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return y(e,t)}function b(e){var t=S();return function r(){var n=P(e),i;if(t){var a=P(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return w(this,i)}}function w(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function P(e){P=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return P(e)}var E=function(e){m(r,e);var t=b(r);function r(){g(this,r);return t.apply(this,arguments)}v(r,[{key:"renderModal",value:function e(){switch(this.props.languageModal.activeModal){case"add_language":return i.default.createElement(s.default,this.props);case"select_pages":return i.default.createElement(l.default,this.props);case"page_title_edit":return i.default.createElement(u.default,this.props);case"add_language_done":return i.default.createElement(c.default,this.props);default:return null}}},{key:"render",value:function e(){return i.default.createElement("div",null,this.renderModal())}}]);return r}(i.Component);E.propTypes={languageModal:a.default.object.isRequired};var k=function e(t){var r=t.ui;return{languageModal:r.languageModal}};var C=t["default"]=(0,o.connect)(k)(E)},14414:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=f(r(79440));var a=r(55269);var o=c(r(69464));var s=r(54833);var l=c(r(40894));var u=c(r(84980));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(d=function e(n){return n?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function h(e,t,r){t&&g(e.prototype,t);r&&g(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}function y(e){var t=_();return function r(){var n=S(e),i;if(t){var a=S(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return b(this,i)}}function b(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function S(e){S=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return S(e)}var P=function(e){v(r,e);var t=y(r);function r(){p(this,r);return t.apply(this,arguments)}h(r,[{key:"init",value:function e(){var t=document.querySelector(".js-language-mount");(0,a.render)(i.default.createElement(s.Provider,{store:o.default},i.default.createElement(i.Fragment,null,i.default.createElement(l.default,this.props),i.default.createElement(u.default,this.props))),t)}}]);return r}(i.Component);var E=t["default"]=P},84980:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=d(r(79440));var a=u(r(76660));var o=r(54833);var s=u(r(55495));var l=u(r(77380));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(c=function e(n){return n?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function g(e,t,r){t&&p(e.prototype,t);r&&p(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&v(e,t)}function v(e,t){v=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return v(e,t)}function m(e){var t=w();return function r(){var n=_(e),i;if(t){var a=_(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return y(this,i)}}function y(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _(e){_=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return _(e)}var S=function(e){h(r,e);var t=m(r);function r(){f(this,r);return t.apply(this,arguments)}g(r,[{key:"render",value:function e(){return i.default.createElement(i.Fragment,null,this.props.languageList.showLanguageList&&i.default.createElement(s.default,{languageCode:this.props.languageCode,languageCodeFlag:this.props.languageCodeFlag}),this.props.languageList.showManageList&&i.default.createElement(l.default,this.props))}}]);return r}(i.Component);S.propTypes={languageList:a.default.object.isRequired,languageCode:a.default.string.isRequired,languageCodeFlag:a.default.string.isRequired};var P=function e(t){var r=t.ui;return{languageList:r.languageList}};var E=t["default"]=(0,o.connect)(P)(S)},37204:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=h(r(79440));var i=p(r(76660));var a=r(54833);var o=p(r(13745));var s=p(r(62201));var l=r(37058);var u=p(r(2299));var c=p(r(10297));var d=r(32686);var f=p(r(9838));function p(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(g=function e(n){return n?r:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==v(e)&&"function"!==typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={};var i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e;r&&r.set(e,n);return n}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){b(a,n,i,o,s,"next",e)}function s(e){b(a,n,i,o,s,"throw",e)}o(void 0)}))}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function P(e,t,r){t&&S(e.prototype,t);r&&S(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&k(e,t)}function k(e,t){k=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return k(e,t)}function C(e){var t=T();return function r(){var n=j(e),i;if(t){var a=j(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return O(this,i)}}function O(e,t){if(t&&("object"===v(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function j(e){j=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return j(e)}function D(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var L=function(e){E(r,e);var t=C(r);function r(e){var n;_(this,r);n=t.call(this,e);D(A(n),"onBackClick",(function(e){e.preventDefault();n.goBack()}));D(A(n),"goBack",(function(){n.props.removeSelectedPages();n.props.openPagesSelector()}));D(A(n),"onConfirm",(function(e){e.preventDefault();var t=n.props.language.activeLanguage;n.props.addSiteLanguagePages({url:"".concat(n.props.env.apiProxyBaseUrl,"/sites/").concat(n.props.env.siteRef,"/languages/").concat(t),token:n.props.env.csrfToken,pages:n.state.pageTitles})}));D(A(n),"onPageTitleChange",function(){var e=w(regeneratorRuntime.mark((function e(t){var r,i;return regeneratorRuntime.wrap((function e(a){while(1)switch(a.prev=a.next){case 0:r=t.target.dataset.pageid;i=t.target.value.trim();a.next=4;return n.setState((function(e){var t=y(y({},e.pageTitles),D({},r,i));return{pageTitles:t}}));case 4:n.checkAllPageTitles();case 5:case"end":return a.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());D(A(n),"checkAllPageTitles",(function(){var e=true;Object.keys(n.props.language.pages).forEach((function(t){n.state.pageTitles[t]||(e=false);"object"===v(n.props.language.pages[t])&&Object.keys(n.props.language.pages[t]).forEach((function(t){n.state.pageTitles[t]||(e=false)}))}));n.setState({buttonDisabled:!e})}));D(A(n),"openAddedModal",(function(){n.props.openAddLanguageDone()}));D(A(n),"trackEvent",(function(){n.props.tracker.track("NEW LANGUAGE ADDED",{selectedLanguage:n.props.language.activeLanguage})}));D(A(n),"componentDidUpdate",(function(e){var t=e.language.siteLanguages;var r=n.props.language.siteLanguages;if(n.props.language.siteLanguagePagesAddingError){n.notifyError();return}if(t.length===r.length||(0,s.default)(t,r))return;n.trackEvent();n.openAddedModal();n.props.removeSelectedPages()}));n.state={pageTitles:{},buttonDisabled:true};return n}P(r,[{key:"componentDidMount",value:function e(){this.setState({buttonDisabled:true})}},{key:"notifyError",value:function e(){(0,f.default)((0,o.default)("shared_views.ml.error","Error"),(0,o.default)("shared_views.ml.error.site-language-error","Unable to save the language."),"error")}},{key:"render",value:function e(){var t=this.props.language.activeLanguage;var r=this.props.env.languages[t];var i=this.props.language.defaultLanguage.name;var a=(0,o.default)("shared_views.ml.add_language","Add language");var s=(0,o.default)("shared_views.ml.next","Next");var l=(0,o.default)("shared_views.ml.page_titles_title","Name these pages in %1",r);return n.default.createElement(n.Fragment,null,n.default.createElement("div",{className:"ml-modal"},n.default.createElement("div",{className:"ml-modal__header"},n.default.createElement("button",{className:"ml-modal__back-button",onClick:this.onBackClick},n.default.createElement("span",null,a)),this.props.language.siteLanguagePagesAdding?n.default.createElement("div",{className:"loader"}):n.default.createElement("button",{className:"ml-modal__done-button",onClick:this.onConfirm,disabled:this.state.buttonDisabled},s)),n.default.createElement("div",{className:"ml-modal__description--central"},n.default.createElement("div",{className:"ml-modal__title"},l)),n.default.createElement("div",{className:"ml-modal__content is-edit-title"},n.default.createElement("div",{className:"ml-modal__table-header"},n.default.createElement("span",{className:"plain-page-tree__header"},i),n.default.createElement("span",{className:"edit-page-tree__header"},r)),n.default.createElement("div",{className:"ml-modal__table-content"},n.default.createElement("div",{className:"plain-page-tree"},n.default.createElement(u.default,{selectedPages:this.props.language.pages,pages:this.props.page.pages})),n.default.createElement("div",{className:"edit-page-tree"},n.default.createElement(c.default,{activeLanguage:r,selectedPages:this.props.language.pages,pages:this.props.page.pages,onPageTitleChange:this.onPageTitleChange}))))),n.default.createElement("div",{className:"ml-modal__overlay"}))}}]);return r}(n.Component);L.propTypes={language:i.default.object.isRequired,page:i.default.object.isRequired,openPagesSelector:i.default.func.isRequired,removeSelectedPages:i.default.func.isRequired,addSiteLanguagePages:i.default.func.isRequired,openAddLanguageDone:i.default.func.isRequired,tracker:i.default.object.isRequired,env:i.default.object.isRequired};var R=function e(t){var r=t.language,n=t.page,i=t.env;return{language:r,page:n,env:i}};var I=function e(t){return{openPagesSelector:function e(){return t((0,l.openPagesSelector)())},removeSelectedPages:function e(){return t((0,d.removeSelectedPages)())},addSiteLanguagePages:function e(r){return t((0,d.addSiteLanguagePages)(r))},openAddLanguageDone:function e(){return t((0,l.openAddLanguageDone)())}}};var M=t["default"]=(0,a.connect)(R,I)(L)},44664:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=p(r(79440));var a=d(r(76660));var o=r(54833);var s=d(r(13745));var l=d(r(28673));var u=r(37058);var c=r(32686);function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(f=function e(n){return n?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function y(e,t,r){t&&m(e.prototype,t);r&&m(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&w(e,t)}function w(e,t){w=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return w(e,t)}function _(e){var t=E();return function r(){var n=k(e),i;if(t){var a=k(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return S(this,i)}}function S(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function k(e){k=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return k(e)}function C(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var O=function(e){b(r,e);var t=_(r);function r(e){var n;v(this,r);n=t.call(this,e);C(P(n),"onBackClick",(function(e){e.preventDefault();n.goBack()}));C(P(n),"goBack",(function(){n.props.openAddLanguage()}));C(P(n),"onConfirm",(function(e){e.preventDefault();var t=n.state.selectedPages;n.state.selectAllPages&&(t=n.getAllPagesRefs());n.props.addSelectedPages({pages:t});n.openPageTitleEdit()}));C(P(n),"getAllPagesRefs",(function(){var e=n.props.page.pages;var t={};e.forEach((function(e){var r=null!==e.linkOpenNewTab&&null!==e.linkNofollow;if(["page","home","index"].includes(e.type)||r)t[e.ref]=e.ref;else if("folder"===e.type){var n={};e.subPages.forEach((function(e){n[e.ref]=e.ref}));t[e.ref]=n}}));return t}));C(P(n),"openPageTitleEdit",(function(){n.props.openPageTitleEdit()}));C(P(n),"onPageSelected",(function(e){n.updateSelectedPages(e.target.value,e.target.checked)}));C(P(n),"onFolderSelectionChange",(function(e,t){n.setState((function(r){var n=r.selectedPages;Object.keys(t).length>0?n=h(h({},r.selectedPages),C({},e,t)):delete r.selectedPages[e];return{selectedPages:n}}))}));C(P(n),"updateSelectedPages",(function(e,t){n.setState((function(r){t?r.selectedPages[e]=e:delete r.selectedPages[e];return{selectedPages:r.selectedPages}}))}));C(P(n),"onSelectionMethodChange",(function(e){n.setState({selectAllPages:"all"===e.target.value})}));n.state={selectAllPages:false,selectedPages:{}};return n}y(r,[{key:"componentDidMount",value:function e(){var t=this.props.page.pages.find((function(e){return"home"===e.type}));this.setState({selectedPages:C({},t.ref,t.ref)})}},{key:"render",value:function e(){var t=(0,s.default)("shared_views.ml.add_language","Add language");var r=(0,s.default)("shared_views.ml.next","Next");var n=this.props.env.languages[this.props.language.activeLanguage];var a=(0,s.default)("shared_views.ml.choose_page","Choose pages for %1",n);var o=(0,s.default)("shared_views.ml.choose_page_mesg","Which pages would you like to copy for later translation?");var u=(0,s.default)("shared_views.ml.choose_page_custom","Let me pick which pages");var c=(0,s.default)("shared_views.ml.choose_page_all","All pages");var d=(0,s.default)("shared_views.ml.clone","Clone");return i.default.createElement(i.Fragment,null,i.default.createElement("div",{className:"ml-modal"},i.default.createElement("div",{className:"ml-modal__header"},i.default.createElement("button",{className:"ml-modal__back-button",onClick:this.onBackClick},i.default.createElement("span",null,t)),i.default.createElement("button",{className:"ml-modal__done-button",onClick:this.onConfirm},r)),i.default.createElement("div",{className:"ml-modal__content"},i.default.createElement("div",{className:"ml-modal__content-left"},i.default.createElement("div",{className:"ml-modal__description"},i.default.createElement("div",{className:"ml-modal__title"},a),i.default.createElement("div",{className:"ml-modal__subtitle"},o))),i.default.createElement("div",{className:"ml-modal__content-right"},i.default.createElement("div",{className:"pretty-select ml-modal__control"},i.default.createElement("label",{className:"ml-modal__control-label"},d),i.default.createElement("select",{id:"pagesSelectionMethod",className:"pretty-select__select ml-modal__select",onChange:this.onSelectionMethodChange},i.default.createElement("option",{value:"custom",key:"custom"},u),i.default.createElement("option",{value:"all",key:"all"},c))),i.default.createElement("div",{className:"ml-modal__card-wrapper"},i.default.createElement("div",{className:"ml-modal__card"},i.default.createElement(l.default,{selectAllPages:this.state.selectAllPages,pages:this.props.page.pages,onFolderSelectionChange:this.onFolderSelectionChange,onPageSelected:this.onPageSelected})))))),i.default.createElement("div",{className:"ml-modal__overlay"}))}}]);return r}(i.Component);O.propTypes={language:a.default.object.isRequired,page:a.default.object.isRequired,openAddLanguage:a.default.func.isRequired,addSelectedPages:a.default.func.isRequired,openPageTitleEdit:a.default.func.isRequired,env:a.default.object.isRequired};var A=function e(t){var r=t.language,n=t.env,i=t.page;return{language:r,env:n,page:i}};var T=function e(t){return{openAddLanguage:function e(){return t((0,u.openAddLanguage)())},addSelectedPages:function e(r){return t((0,c.addSelectedPages)(r))},openPageTitleEdit:function e(){return t((0,u.openPageTitleEdit)())}}};var j=t["default"]=(0,o.connect)(A,T)(O)},21992:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(79440));var i=o(r(76660));var a=o(r(13745));function o(e){return e&&e.__esModule?e:{default:e}}var s=function e(t){var r=t.dialogTitle,i=t.confirmButtonText,o=t.deleteCancel,s=t.deleteConfirm;return n.default.createElement("div",{className:"dialog"},n.default.createElement("div",{className:"dialog__backstop"}),n.default.createElement("div",{className:"dialog__surface"},n.default.createElement("div",{className:"dialog__header"},n.default.createElement("h2",{className:"dialog__header-title"},r),n.default.createElement("button",{className:"dialog__header-close",type:"button",onClick:o},n.default.createElement("span",null,"Close"))),n.default.createElement("div",{className:"dialog__content dialog__content--center"},n.default.createElement("div",{className:"dialog__information"},n.default.createElement("p",null,(0,a.default)("editor.dialog.delete_language.message_warning","Deleting a language will remove all the pages associated with that language.")),n.default.createElement("p",null,(0,a.default)("editor.dialog.delete_language.message_warning_question","Are you sure you wish to delete this language?"))),n.default.createElement("div",{className:"dialog__controls"},n.default.createElement("button",{type:"button",className:"button--outline deletion-popup__confirm-button",onClick:s},i),n.default.createElement("button",{type:"button",className:"button--outline deletion-popup__cancel-button",onClick:o},(0,a.default)("editor.dialog.footer.cancel","Cancel"))))))};s.propTypes={dialogTitle:i.default.string.isRequired,deleteCancel:i.default.func.isRequired,deleteConfirm:i.default.func.isRequired,confirmButtonText:i.default.string.isRequired};var l=t["default"]=s},55254:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(79440));var i=a(r(76660));function a(e){return e&&e.__esModule?e:{default:e}}var o=function e(t){var r=t.page,i=t.onPageTitleChange,a=t.activeLanguage;return n.default.createElement("div",{className:"edit-page-tree__page"},n.default.createElement("div",{className:"edit-page-tree__pagetitle"},r.title),n.default.createElement("input",{autoFocus:"home"===r.type,className:"edit-page-tree__input",placeholder:r.title,key:r.ref,"data-pageid":r.ref,spellCheck:"false",autoCorrect:"off",onChange:i}),n.default.createElement("label",{className:"edit-page-tree__label"},a))};o.propTypes={page:i.default.object.isRequired,onPageTitleChange:i.default.func.isRequired,activeLanguage:i.default.string};var s=t["default"]=o},10297:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=u(r(79440));var a=s(r(76660));var o=s(r(55254));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(l=function e(n){return n?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}var c=function e(t){var r=t.selectedPages,n=t.pages,a=t.onPageTitleChange,s=t.activeLanguage;var l=n.map((function(e,t){var n=null!==e.linkOpenNewTab&&null!==e.linkNofollow;if((["page","index","home"].includes(e.type)||n)&&r[e.ref])return i.default.createElement(o.default,{key:e.ref,page:e,isFolder:null,onPageTitleChange:a,activeLanguage:s});if("folder"===e.type&&r[e.ref])return i.default.createElement(i.Fragment,{key:t},i.default.createElement(o.default,{key:e.ref,page:e,onPageTitleChange:a,activeLanguage:s}),e.subPages.map((function(t){if(r[e.ref][t.ref])return i.default.createElement(o.default,{key:t.ref,page:t,onPageTitleChange:a,activeLanguage:s});return null})));return null}));return i.default.createElement(i.Fragment,null,l)};c.propTypes={selectedPages:a.default.object.isRequired,activeLanguage:a.default.string,onPageTitleChange:a.default.func.isRequired,pages:a.default.array.isRequired};var d=t["default"]=c},50110:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(79440));var i=o(r(76660));var a=o(r(13745));function o(e){return e&&e.__esModule?e:{default:e}}var s=function e(t){var r=t.addCancel,i=t.upgradeUrl,o=t.content,s=t.hideUpgradeInUnableToPublish;return n.default.createElement("div",{className:"ml-warning"},n.default.createElement("div",{className:"ml-warning__backstop"}),n.default.createElement("div",{className:"ml-warning__surface"},n.default.createElement("div",{className:"ml-warning__header"},n.default.createElement("h2",{className:"ml-warning__header-title"},(0,a.default)("editor.dialog.language_limit_title","Language limit reached")),n.default.createElement("button",{className:"ml-warning__header-close",type:"button",onClick:r},n.default.createElement("span",null,"Close"))),n.default.createElement("div",{className:"ml-warning__content"},n.default.createElement("div",{className:"ml-warning__information"},n.default.createElement("p",null,o),n.default.createElement("div",{className:"ml-warning__actions"},!s&&n.default.createElement("a",{className:"button--primary ml-warning__actions--primary",href:i},(0,a.default)("shared_views.cannotpublish.upgrade_options","Upgrade options")),n.default.createElement("button",{className:"button--outline ml-warning__action--secondary",onClick:r,type:"button"},(0,a.default)("editor.dialog.footer.cancel","Cancel")))))))};s.propTypes={addCancel:i.default.func.isRequired,upgradeUrl:i.default.string,content:i.default.string.isRequired,hideUpgradeInUnableToPublish:i.default.bool.isRequired};var l=t["default"]=s},8070:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(79440));var i=a(r(76660));function a(e){return e&&e.__esModule?e:{default:e}}var o=function e(t){var r=t.localisedName,i=t.languageFlag,a=t.languageSelected,o=t.language,s=t.currentLanguageCode;var l="ml-list__language-item\n        language-selector__icon\n        language-selector__icon--".concat(i);s===o&&(l="".concat(l," is-current-lang"));return n.default.createElement("li",{className:l,"data-lang":o,title:r,onClick:a},n.default.createElement("span",{"data-lang":o},r))};o.propTypes={language:i.default.string.isRequired,localisedName:i.default.string.isRequired,languageFlag:i.default.string.isRequired,languageSelected:i.default.func.isRequired,currentLanguageCode:i.default.string.isRequired};var s=t["default"]=o},729:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=u(r(79440));var a=s(r(76660));var o=s(r(13745));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(l=function e(n){return n?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}var c=function e(t){var r=Object.keys(t.allLanguages).map((function(e){return i.default.createElement("option",{value:e,key:e},t.allLanguages[e]," | ",t.localisedLanguages[e])}));var n=(0,o.default)("shared_views.ml.select_a_language","Select a language");var a=(0,i.useRef)(null);(0,i.useEffect)((function(){if(a.current){var e=new Event("change",{bubbles:true});a.current.dispatchEvent(e)}}),[]);return i.default.createElement("div",{className:"pretty-select ml-modal__control ml-modal__control--central"},t.label&&i.default.createElement("label",{htmlFor:"lanuage-selector",className:"pretty-select__label"},t.label),i.default.createElement("select",{id:"lanuage-selector",ref:a,className:"pretty-select__select ml-modal__select",onChange:t.languageSelected,defaultValue:t.activeLanguageCode||t.userLanguage},i.default.createElement("option",{value:""},n),r))};c.propTypes={languageSelected:a.default.func.isRequired,activeLanguageCode:a.default.string,allLanguages:a.default.object.isRequired,localisedLanguages:a.default.object.isRequired,userLanguage:a.default.string,label:a.default.string};var d=t["default"]=c},98905:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=u(r(79440));var a=s(r(76660));var o=s(r(13745));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(l=function e(n){return n?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}var c=function e(t){var r=t.isDefaultLanguage,n=t.localisedName,a=t.languageCode,s=t.onDelete,l=t.onOffline,u=t.onOptionsClicked,c=t.onChangeLanguage,d=t.openOptionsFor,f=t.active;var p=(0,o.default)("shared_views.language_panel.default","default");var g=r?"".concat(n):n;var h=f&&"1"===f?(0,o.default)("shared_views.language_panel.take_offline","Take offline"):(0,o.default)("shared_views.language_panel.take_online","Take online");var v=(0,o.default)("shared_views.language_panel.offline","Offline");var m=(0,o.default)("shared_views.language_panel.online","Online");var y=(0,o.default)("shared_views.language_panel.delete","Delete");var b="pages-tree__title pages-tree__title--flex pages-tree__title--not-selectable";var w=(0,o.default)("shared_views.language_panel.change_default","Change default");return i.default.createElement("div",{className:"pages-tree"},i.default.createElement("div",{className:b},i.default.createElement("span",{className:"text text--flex text--bolder",title:g},g,r&&i.default.createElement("span",{className:"cl-chip capitalize ml-10"},p)),f&&"1"!==f?i.default.createElement("span",{className:"pages-tree__flex-offline"},v):i.default.createElement("span",{className:"pages-tree__flex-online"},m)),r?i.default.createElement(i.Fragment,null,i.default.createElement("button",{className:"pages-panel__options-button","aria-controls":"language-".concat(a,"-options"),value:a,type:"button",onClick:u},i.default.createElement("span",null,"Options")),d===a?i.default.createElement("ol",{className:"dropdown-menu pages-panel__options","data-ref":"language-".concat(a,"-options")},i.default.createElement("li",{className:"dropdown-menu__item"},i.default.createElement("button",{className:"dropdown-menu__control",title:w,value:a,type:"button",onClick:c},w))):null):i.default.createElement(i.Fragment,null,i.default.createElement("button",{className:"pages-panel__deletion-button","aria-controls":"language-".concat(a,"-deletion"),value:a,"data-localisedname":n,title:y,type:"button",onClick:s},i.default.createElement("span",null,y)),i.default.createElement("button",{className:"pages-panel__options-button","aria-controls":"language-".concat(a,"-options"),value:a,type:"button",onClick:u},i.default.createElement("span",null,"Options")),d===a?i.default.createElement("ol",{className:"dropdown-menu pages-panel__options","data-ref":"language-".concat(a,"-options")},i.default.createElement("li",{className:"dropdown-menu__item"},i.default.createElement("button",{className:"dropdown-menu__control",title:h,value:a,"data-active":f,type:"button",onClick:l},h))):null))};c.propTypes={localisedName:a.default.string.isRequired,isDefaultLanguage:a.default.bool,languageCode:a.default.string.isRequired,openOptionsFor:a.default.string.isRequired,onOffline:a.default.func.isRequired,onDelete:a.default.func.isRequired,onOptionsClicked:a.default.func.isRequired,active:a.default.string,onChangeLanguage:a.default.func};var d=t["default"]=c},2299:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=l(r(79440));var a=o(r(76660));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(s=function e(n){return n?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}var u=function e(t){var r=t.selectedPages,n=t.pages;var a=n.map((function(e){var t=null!==e.linkOpenNewTab&&null!==e.linkNofollow;if((["page","index","home"].includes(e.type)||t)&&r[e.ref])return i.default.createElement("div",{className:"plain-page-tree__page",value:e.ref,key:e.ref},e.title);if("folder"===e.type&&r[e.ref])return i.default.createElement("div",{value:e.ref,key:e.ref,className:"plain-page-tree__folder"},i.default.createElement("span",null,e.title),e.subPages.map((function(t){if("index"===t.type||r[e.ref][t.ref])return i.default.createElement("div",{className:"plain-page-tree__page in-folder",value:t.title,key:t.ref},t.title);return null})));return null}));return i.default.createElement(i.Fragment,null,a)};u.propTypes={selectedPages:a.default.object.isRequired,pages:a.default.array.isRequired};var c=t["default"]=u},43062:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=c(r(79440));var a=l(r(76660));var o=l(r(82379));var s=l(r(7304));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(u=function e(n){return n?r:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}function d(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){d(a,n,i,o,s,"next",e)}function s(e){d(a,n,i,o,s,"throw",e)}o(void 0)}))}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function h(e,t,r){t&&g(e.prototype,t);r&&g(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}function y(e){var t=_();return function r(){var n=S(e),i;if(t){var a=S(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return b(this,i)}}function b(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function S(e){S=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return S(e)}function P(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var E=function(e){v(r,e);var t=y(r);function r(){var e;p(this,r);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];e=t.call.apply(t,[this].concat(a));P(w(e),"state",{folderSelected:false,checkFolder:false,checkIndex:false,defaultChecked:false,subpages:[],selectedPages:{}});P(w(e),"componentDidMount",(function(){e.setState({subpages:e.props.folder.subPages})}));P(w(e),"onFolderChange",function(){var t=f(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function t(n){while(1)switch(n.prev=n.next){case 0:e.setState({folderSelected:r.target.checked});n.next=3;return e.props.folder.subPages.forEach((function(t){e.updateSelectedPages(t.ref,r.target.checked)}));case 3:e.notifyChange();case 4:case"end":return n.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());P(w(e),"onPageChange",function(){var t=f(regeneratorRuntime.mark((function t(r){var n,i,a;return regeneratorRuntime.wrap((function t(o){while(1)switch(o.prev=o.next){case 0:n=r.target.value;i=r.target.dataset.pagetype;a=e.state.subpages.find((function(e){return"index"===e.type}));"index"===i&&e.forceCheckFolder(r.target.checked);"page"===i&&r.target.checked&&e.forceCheckIndexAndFolder(a.ref,true);"page"!==i||r.target.checked||2!==Object.keys(e.state.selectedPages).length||e.forceCheckIndexAndFolder(a.ref,false);o.next=8;return e.updateSelectedPages(n,r.target.checked);case 8:e.notifyChange();case 9:case"end":return o.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());P(w(e),"forceCheckFolder",(function(t){e.setState({checkFolder:t})}));P(w(e),"forceCheckIndexAndFolder",(function(t,r){e.setState({checkIndex:r,checkFolder:r});e.updateSelectedPages(t,r)}));P(w(e),"updateSelectedPages",(function(t,r){e.setState((function(e){if(r){e.selectedPages[t]=t;return{selectedPages:e.selectedPages}}delete e.selectedPages[t];return{selectedPages:e.selectedPages}}))}));P(w(e),"notifyChange",(function(){var t=e.props.folder.ref;e.props.onFolderSelectionChange(t,e.state.selectedPages)}));P(w(e),"folderTree",(function(){var t=[];e.state.subpages.map((function(r){"page"!==r.type&&"index"!==r.type||("index"===r.type&&e.state.checkIndex||e.state.folderSelected?t.push(i.default.createElement(s.default,{page:r,key:r.ref})):t.push(i.default.createElement(o.default,{page:r,key:r.ref,onPageSelected:e.onPageChange})));return null}));return t}));return e}h(r,[{key:"render",value:function e(){var t=this.props.folder;return i.default.createElement("div",{className:"ml-modal__select-folder"},this.state.checkFolder?i.default.createElement(s.default,{page:t,key:t.ref}):i.default.createElement(o.default,{page:t,key:t.ref,onPageSelected:this.onFolderChange}),this.folderTree())}}]);return r}(i.Component);E.propTypes={folder:a.default.object,subPages:a.default.array,onFolderSelectionChange:a.default.func.isRequired};var k=t["default"]=E},82379:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(79440));var i=a(r(76660));function a(e){return e&&e.__esModule?e:{default:e}}var o=function e(t){var r=t.page,i=t.onPageSelected;return n.default.createElement("div",{className:"ml-modal__select-page"},n.default.createElement("label",{className:"page-checkbox__container",title:r.title},n.default.createElement("input",{value:r.ref,type:"checkbox","data-pagetype":r.type,className:"page-checkbox__checkbox",onChange:i}),n.default.createElement("span",{className:"page-checkbox__text"},r.title),n.default.createElement("span",{className:"page-checkbox__checkmark"})))};o.propTypes={page:i.default.object.isRequired,onPageSelected:i.default.func.isRequired};var s=t["default"]=o},28673:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=d(r(79440));var a=u(r(76660));var o=u(r(82379));var s=u(r(7304));var l=u(r(43062));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(c=function e(n){return n?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}var f=function e(t){var r=t.pages.map((function(e){var r=null!==e.linkOpenNewTab&&null!==e.linkNofollow;if("undefined"===typeof e.group&&("page"===e.type||r))return i.default.createElement(o.default,{page:e,key:e.ref,onPageSelected:t.onPageSelected});if("home"===e.type)return i.default.createElement(s.default,{page:e,key:e.ref});if("folder"===e.type)return i.default.createElement(l.default,{folder:e,key:e.ref,onFolderSelectionChange:t.onFolderSelectionChange,onPageSelected:t.onPageSelected});return null}));var n=t.pages.map((function(e){var t=null!==e.linkOpenNewTab&&null!==e.linkNofollow;if("undefined"===typeof e.group&&(["page","home"].includes(e.type)||t))return i.default.createElement(s.default,{page:e,key:e.ref});if("folder"===e.type)return i.default.createElement("div",{className:"ml-modal__select-folder",key:e.ref},i.default.createElement(s.default,{page:e,key:e.ref}),e.subPages.map((function(e){return i.default.createElement(s.default,{page:e,key:e.ref})})));return null}));return i.default.createElement(i.Fragment,null,t.selectAllPages?n:r)};f.propTypes={pages:a.default.array.isRequired,onPageSelected:a.default.func.isRequired,onFolderSelectionChange:a.default.func.isRequired,selectAllPages:a.default.bool.isRequired};var p=t["default"]=f},7304:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(79440));var i=a(r(76660));function a(e){return e&&e.__esModule?e:{default:e}}var o=function e(t){var r=t.page;return n.default.createElement("div",{className:"ml-modal__select-page"},n.default.createElement("label",{className:"page-checkbox__container is-disabled",title:r.title},n.default.createElement("input",{value:r.ref,type:"checkbox",className:"page-checkbox__checkbox",checked:true,disabled:true}),n.default.createElement("span",{className:"page-checkbox__text"},r.title),n.default.createElement("span",{className:"page-checkbox__checkmark"})))};o.propTypes={page:i.default.object.isRequired};var s=t["default"]=o},60989:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r={events:{"click .js-backstop":"mixinClosePanel","click .js-back":"mixinClosePanel"},initialize:function e(){},mixinRenderTpl:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=Twig.render(Twig.templates[this.template],this.tplData);this.$el.empty().append(r);if(t.refresh)return;this.moveToBody()},moveToBody:function e(){var t=this.$el.appendTo("body");this.setElement(t);"function"===typeof this.postRender&&this.postRender()},mixinClosePanel:function e(){var t=new Event("panel:close");document.dispatchEvent(t);this.trigger("close");this.destroy()}};var n=t["default"]=r},71831:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(60989));var i=a(r(81393));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function l(e,t,r){t&&s(e.prototype,t);r&&s(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.pageTypes,n=void 0===r?{}:r,i=t.envDataProvider,a=void 0===i?{}:i,s=t.tracker,l=void 0===s?{}:s,u=t.siteDataProvider,c=void 0===u?{}:u,d=t.featureFlagDataProvider,f=void 0===d?{}:d,p=t.serverVars,g=void 0===p?{}:p;o(this,e);this.pageTypes=n;this.envDataProvider=a;this.siteDataProvider=c;this.tracker=l;this.featureFlagDataProvider=f;this.serverVars=g;return this}l(e,[{key:"build",value:function e(t){Cocktail.mixin(i.default,n.default);return new i.default({selectedLanguage:t,pageTypes:this.pageTypes,envDataProvider:this.envDataProvider,tracker:this.tracker,siteDataProvider:this.siteDataProvider,featureFlagDataProvider:this.featureFlagDataProvider,serverVars:this.serverVars})}}]);return e}();var c=t["default"]=u},81393:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=f(r(69464));var i=r(83489);var a=r(38869);var o=r(32686);var s=f(r(9838));var l=f(r(13745));var u=f(r(57789));var c=r(83748);var d=r(32637);function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return m(e)||v(e)||h(e)||g()}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}function v(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function m(e){if(Array.isArray(e))return y(e)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){b(a,n,i,o,s,"next",e)}function s(e){b(a,n,i,o,s,"throw",e)}o(void 0)}))}}function _(){return(0,u.default)().get("pageRef")}function S(e,t,r){return P.apply(this,arguments)}function P(){P=w(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:return i.abrupt("return",window.fetch(t,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":r},method:"POST",body:JSON.stringify(n)}));case 1:case"end":return i.stop()}}),e)})));return P.apply(this,arguments)}var E=Marionette.ItemView.extend({template:"page_add_panel",events:{"click .js-type":"onTypeChange","input input":"onChange","change input,select":"onChange","click .js-done":"onDoneClicked","change .js-new-page-language":"onLanguageChanged","change .js-new-link-language":"onLanguageChanged","click .js-page-password-protect":"onPasswordProtectToggled"},initialize:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.pageTypes,i=void 0===r?{}:r,a=t.envDataProvider,o=void 0===a?{}:a,s=t.tracker,l=void 0===s?{}:s,u=t.siteDataProvider,c=void 0===u?{}:u,d=t.selectedLanguage,f=void 0===d?null:d,p=t.featureFlagDataProvider,g=void 0===p?{}:p,h=t.serverVars,v=void 0===h?{}:h;this.getPages();this.pageTypes=i;this.envDataProvider=o;this.tracker=l;this.siteDataProvider=c;this.selectedLanguage=f;this.featureFlagDataProvider=g;this.store=n.default;this.serverVars=v;this.tplData={pageTypes:this.getPageTypesData(),foldersData:this.getFoldersData(this.selectedLanguage),siteLanguages:this.siteDataProvider.getSiteLanguages(),siteDefaultLanguage:this.siteDataProvider.getDefaultLanguage(),localisedLanguages:this.envDataProvider.get("localisedLanguages"),languages:this.envDataProvider.get("languages"),lightBackground:true,selectedLanguage:this.selectedLanguage,rowsEnabled:this.featureFlagDataProvider.get("enableRows"),editorVersion:this.store.getState().site.editorVersion};this.render()},getPages:function e(){var t=BaseKit.Globals.pages;0===t.length&&(t=(0,d.fromPageTree)(App.pageTree));this.pages=t},getApiProxyBaseUrl:function e(){return this.envDataProvider.get("apiProxyBaseUrl")},getCsrfToken:function e(){return this.serverVars.getBundle("session").get("csrfToken")},getSiteRef:function e(){return this.envDataProvider.get("siteRef")},render:function e(){"function"===typeof this.mixinRenderTpl&&this.mixinRenderTpl()},postRender:function e(){this.onPasswordProtectToggled()},onLanguageChanged:function e(t){var r=t.currentTarget.value;this.filterFolders(r)},filterFolders:function e(t){var r=this.getFoldersData(t);var n=this.el.querySelector(".js-new-page-location");while(n.firstChild)n.removeChild(n.firstChild);r.forEach((function(e){var t=document.createElement("option");t.textContent=e.text;t.setAttribute("value",e.value);n.appendChild(t)}))},getPageTypesData:function e(){var t=[{name:"default",title:(0,l.default)("shared_views.addpageorfolderpanel.page-type-default","Default")},{name:"clone",title:(0,l.default)("shared_views.addpageorfolderpanel.page-type-clone","Clone current page")}];this.pageTypes.forEach((function(e){t.push({name:e.name,title:(0,l.default)("shared_views.addpageorfolderpanel.page-type-".concat(e.name),e.title)})}));return t},getFoldersData:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var r=this.siteDataProvider.getDefaultLanguage();if(!t||""===t||t===r)return this.store.getState().page.folders;return this.store.getState().page.languages[t].folders},onPasswordProtectToggled:function e(){var t=this.el.querySelector(".js-input-username");var r=this.el.querySelector(".js-input-password");if(true===this.el.querySelector(".js-page-password-protect").checked){t.parentNode.removeAttribute("hidden");r.parentNode.removeAttribute("hidden")}else{t.parentNode.setAttribute("hidden","hidden");r.parentNode.setAttribute("hidden","hidden");t.value="";r.value=""}},onChange:function e(){this.clearError();if(this.saveBtnIsEnabled)return;this.enableSave()},enableSave:function e(){this.el.querySelector(".js-done").removeAttribute("disabled");this.saveBtnIsEnabled=true},onTypeChange:function e(t){this.onChange();var r=t.currentTarget.getAttribute("data-type");var n=this.el.querySelectorAll(".js-type");var i=this.el.querySelectorAll(".js-type-card");p(n).forEach((function(e){return e.classList.remove("is-selected")}));p(i).forEach((function(e){return e.setAttribute("hidden",true)}));t.currentTarget.classList.add("is-selected");this.showSelectedCardType(r)},showSelectedCardType:function e(t){this.el.querySelector('[data-card-type="'.concat(t,'"]')).removeAttribute("hidden")},onDoneClicked:function e(t){t.preventDefault();switch(this.el.querySelector(".js-type.is-selected").getAttribute("data-type")){case"folder":this.createFolder();break;case"page":this.createPage();break;case"link":this.createLink();break}(0,c.openIntercom)()},createPage:function e(){var t=this.el.querySelector(".js-template-type:checked")?this.el.querySelector(".js-template-type:checked").value:"default";var r=this.el.querySelector(".js-new-page-location")?parseInt(this.el.querySelector(".js-new-page-location").value,10):0;var n=_();var i=this.pages.get(_());var a=this.el.querySelector(".js-new-page-title").value;var o=this.el.querySelector(".js-new-page-language");var s=this.siteDataProvider.getDefaultLanguage();var u={siteRef:this.getSiteRef(),type:"page",pageUrl:a.replace(/\s+/g,"-").toLowerCase(),title:a,status:"active",folder:r||void 0};var c=null;var d=null;o&&o.value!==s&&(u.language=o.value);if(0===u.title.trim().length){c=(0,l.default)("shared_views.addpageorfolderpanel.errors_invalid-page-title","Invalid page title");this.el.querySelector(".js-page-title-error").textContent=c;return}if("clone"===t){d="".concat(this.getApiProxyBaseUrl(),"/sites/").concat(this.getSiteRef(),"/pages/").concat(n,"/clone");u.templateType=i.get("templateType")}else{d="".concat(this.getApiProxyBaseUrl(),"/sites/").concat(this.getSiteRef(),"/pages");u.templateType=t}this.apiCall({type:"page",data:u,url:d})},areHtmlValidatorsValid:function e(t){var r=true;for(var n=0;n<t.length;n++){if(!t[n].reportValidity||!t[n].checkValidity)continue;t[n].reportValidity();t[n].checkValidity()||(r=false)}return r},setJointCheckboxRequirement:function e(t,r){true===t.checked?r.setAttribute("required","required"):r.removeAttribute("required")},createFolder:function e(){var t="".concat(this.getApiProxyBaseUrl(),"/sites/").concat(this.getSiteRef(),"/pages");var r=this.el.querySelector(".js-new-folder-title").value;var n=this.el.querySelector(".js-new-folder-language");var i=true===this.el.querySelector(".js-page-password-protect").checked?1:0;var a=this.el.querySelector(".js-input-username");var o=this.el.querySelector(".js-input-password");var s=this.el.querySelector(".js-page-password-protect");var u=a.value;var c=o.value;this.setJointCheckboxRequirement(s,o);this.setJointCheckboxRequirement(s,a);if(!this.areHtmlValidatorsValid([a,o]))return;var d={siteRef:this.getSiteRef(),type:"folder",pageUrl:r.replace(/\s+/g,"-").toLowerCase(),title:r,status:"active",passwordEnabled:i,username:u,password:c};var f=null;n&&(d.language=n.value);if(0===r.trim().length){f=(0,l.default)("shared_views.addpageorfolderpanel.errors_invalid-folder-title","Invalid folder title");this.el.querySelector(".js-folder-title-error").textContent=f;return}this.apiCall({type:"folder",data:d,title:r,url:t})},apiCall:function e(){var t=arguments,r=this;return w(regeneratorRuntime.mark((function e(){var n,i,a,o,s,l,u,c,d,f,p,g,h,v,m;return regeneratorRuntime.wrap((function e(y){while(1)switch(y.prev=y.next){case 0:n=t.length>0&&void 0!==t[0]?t[0]:{},i=n.type,a=void 0===i?"page":i,o=n.url,s=void 0===o?void 0:o,l=n.data,u=void 0===l?{}:l,c=n.title,d=void 0===c?void 0:c;f=a;p=u;g=d;h="folder"===a&&p.passwordEnabled;y.prev=5;y.next=8;return S(s,r.getCsrfToken(),p);case 8:v=y.sent;if(!(200===v.status)){y.next=16;break}y.next=12;return v.json();case 12:m=y.sent;r.handleResponse({type:f,folderTitle:g,rsp:m,isPasswordProtected:h});y.next=17;break;case 16:401===v.status?Editor.Responsive.displaySessionTimeoutDialog():r.handleFetchError(v.status);case 17:y.next=22;break;case 19:y.prev=19;y.t0=y["catch"](5);r.handleFetchError(y.t0);case 22:case"end":return y.stop()}}),e,null,[[5,19]])})))()},createLink:function e(){var t="".concat(this.getApiProxyBaseUrl(),"/sites/").concat(this.getSiteRef(),"/pages");var r=this.el.querySelector(".js-new-link-page-title").value;var n=this.el.querySelector(".js-new-page-link").value;var i="redirect";var a=this.el.querySelector(".js-new-link-language");var o=this.siteDataProvider.getDefaultLanguage();var s={type:i,externalUrl:n,title:r,request:r,linkNofollow:0,linkOpenNewTab:0};var l=window.location.search;var u=new URLSearchParams(l);if(u.get("sectionLink")){s.description="sectionLink";var c=new URL(window.location);c.search="";window.history.pushState({},"",c)}if(a&&a.value!==o){s.language=a.value;s.request="".concat(a.value,"/").concat(r)}if(!this.validateLinkInput(s))return;this.apiCall({type:i,data:s,url:t})},validateLinkInput:function e(t){var r=null;var n=null;var i=true;if(0===t.title.trim().length){r=(0,l.default)("shared_views.addpageorfolderpanel.errors_invalid-link-title","Invalid link title");this.el.querySelector(".js-link-page-title-error").textContent=r;i=false}if(0===t.externalUrl.trim().length){n=(0,l.default)("shared_views.addpageorfolderpanel.errors_invalid-link-url","Invalid link URL");this.el.querySelector(".js-page-link-error").textContent=n;i=false}return i},handleResponse:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.type,i=void 0===n?"page":n,s=r.folderTitle,l=void 0===s?void 0:s,u=r.rsp,c=void 0===u?{}:u,d=r.isPasswordProtected,f=void 0!==d&&d;var p=c.page.ref;var g=c.page.language||"";var h="Editor add page";var v=[c.page];if("folder"===i){v=[{hiddenFromNavigation:0,ref:c.page.parentId,type:"folder",status:"active",request:c.page.request.replace("index",""),title:l,parentId:0,password_enabled:f},Object.assign(c.page,{parentTitle:l})];h="Editor add folder"}this.pages.add(v);v.forEach((function(e){return t.store.dispatch((0,a.addSinglePage)(e,g))}));g!==this.store.getState().language.current&&this.store.dispatch((0,o.changeLanguage)(g));this.afterSaved(p,g);this.tracker.track(h,"")},handleFetchError:function e(t){console.error("Error creating page: ".concat(t));(0,s.default)((0,l.default)("editor_v8.delete_row.error","Error"),(0,l.default)("shared_views.pagespanel.errors_creating-page","Unable to add page."),"error");this.closePanel()},afterSaved:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var n=r;""===r&&(n=this.siteDataProvider.getDefaultLanguage());this.closePanel();this.store.dispatch((0,i.closePanel)());this.trigger("page:added",{selectedLanguage:n,currentPageRef:t})},closePanel:function e(){this.destroy()},clearError:function e(){this.el.querySelector(".js-folder-title-error").textContent="";this.el.querySelector(".js-page-title-error").textContent="";this.el.querySelector(".js-link-page-title-error").textContent="";this.el.querySelector(".js-page-link-error").textContent=""}});var k=t["default"]=E},92122:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(60989));var i=a(r(14025));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function l(e,t,r){t&&s(e.prototype,t);r&&s(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.featureFlagDataProvider,n=void 0===r?{}:r,i=t.envDataProvider,a=void 0===i?{}:i,s=t.tracker,l=void 0===s?{}:s;o(this,e);this.featureFlagDataProvider=n;this.envDataProvider=a;this.tracker=l;return this}l(e,[{key:"build",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.pageModel,a=void 0===r?{}:r,o=t.selectedLanguage;Cocktail.mixin(i.default,n.default);return new i.default({model:a,selectedLanguage:o,featureFlagDataProvider:this.featureFlagDataProvider,envDataProvider:this.envDataProvider,tracker:this.tracker})}}]);return e}();var c=t["default"]=u},14025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(69464));var i=o(r(13745));var a=r(38869);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){s(a,n,i,o,l,"next",e)}function l(e){s(a,n,i,o,l,"throw",e)}o(void 0)}))}}function u(e,t){var r=this;var n=true;var a="folder"===t?(0,i.default)("shared_views.addpageorfolderpanel.errors_invalid-folder-title","Invalid folder title"):(0,i.default)("shared_views.addpageorfolderpanel.errors_invalid-page-title","Invalid page title");var o={title:{selector:".js-page-title-error",message:a},pageUrl:{selector:".js-page-url-error",message:(0,i.default)("shared_views.addpageorfolderpanel.errors_invalid-page-url","Invalid page URL")}};Object.keys(o).forEach((function(t){if("undefined"!==typeof e[t]&&0===e[t].trim().length){r.el.querySelector(o[t].selector).textContent=o[t].message;n=false}}));return n}var c=Marionette.ItemView.extend({template:"page_edit_panel",events:{"click .js-done":"onDoneClicked","change input,select":"onChange","input input,textarea":"onChange","change .js-convert-home":"onConvertToHomeChanged","click .js-page-password-protect":"onPasswordProtectToggled"},initialize:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.model,n=void 0===r?{}:r,i=t.selectedLanguage,a=void 0===i?null:i,o=t.featureFlagDataProvider,s=void 0===o?{}:o,l=t.envDataProvider,u=void 0===l?{}:l,c=t.tracker,d=void 0===c?{}:c;this.model=n;this.featureFlagDataProvider=s;this.envDataProvider=u;this.tracker=d;this.selectedLanguage=a;this.setTplData();this.render()},onPasswordProtectToggled:function e(){var t=this.el.querySelector(".js-input-username");var r=this.el.querySelector(".js-input-password");if(true===this.el.querySelector(".js-page-password-protect").checked){t.parentNode.removeAttribute("hidden");r.parentNode.removeAttribute("hidden")}else{t.parentNode.setAttribute("hidden","hidden");r.parentNode.setAttribute("hidden","hidden");t.value="";r.value=""}},setTplData:function e(){this.tplData=Object.assign(this.getModelData(),{folderData:this.getFoldersData(),lightBackground:true,rowsEnabled:this.featureFlagDataProvider.get("enableRows")})},render:function e(){"function"===typeof this.mixinRenderTpl&&this.mixinRenderTpl()},postRender:function e(){Backbone.Syphon.deserialize(this,this.getModelData());this.updateSyntheticFields()},updateSyntheticFields:function e(){var t=this.getModelData();"folder"===t.type&&(t.password_enabled?this.el.querySelector(".js-page-password-protect").checked=true:this.el.querySelector(".js-page-password-protect").checked=false)},getFoldersData:function e(){var t=n.default.getState();var r=t.language.current;if(r&&r!==t.language.defaultLanguage.language)return t.page.languages[r].folders;return t.page.folders},getModelData:function e(){var t=this.model.toJSON();if(0!==parseInt(this.model.get("parentId"),10)){var r=this.model.collection.get(this.model.get("parentId"));var n=r.get("request");t.request=t.request.replace(n,"")}this.selectedLanguage&&(t.request=t.request.replace("".concat(this.selectedLanguage,"/"),""));return t},closePanel:function e(){this.mixinClosePanel();this.destroy()},onChange:function e(){this.clearError();if(this.saveBtnIsEnabled)return;this.enableSave()},clearError:function e(){this.el.querySelector(".js-page-title-error")&&(this.el.querySelector(".js-page-title-error").textContent="");this.el.querySelector(".js-page-url-error")&&(this.el.querySelector(".js-page-url-error").textContent="")},enableSave:function e(){this.el.querySelector(".js-done").removeAttribute("disabled");this.saveBtnIsEnabled=true},areHtmlValidatorsValid:function e(t){var r=true;for(var n=0;n<t.length;n++){if(!t[n].reportValidity||!t[n].checkValidity)continue;t[n].reportValidity();t[n].checkValidity()||(r=false)}return r},setJointCheckboxRequirement:function e(t,r){true===t.checked?r.setAttribute("required","required"):r.removeAttribute("required")},onDoneClicked:function e(t){var r=this;return l(regeneratorRuntime.mark((function e(){var i,o,s,l,c,d,f,p,g,h;return regeneratorRuntime.wrap((function e(v){while(1)switch(v.prev=v.next){case 0:t.preventDefault();i=r.getUpdatedAttributes();o=r.model.get("language")||"";if(i){v.next=6;break}r.closePanel();return v.abrupt("return");case 6:if(u.call(r,i,r.model.get("type"))){v.next=8;break}return v.abrupt("return");case 8:s=r.el.querySelector(".js-input-username");l=r.el.querySelector(".js-input-password");c=r.el.querySelector(".js-page-password-protect");if(!(s&&l)){v.next=15;break}r.setJointCheckboxRequirement(c,s);if(r.areHtmlValidatorsValid([s,l])){v.next=15;break}return v.abrupt("return");case 15:d=r.envDataProvider.get("csrfToken");f=r.envDataProvider.get("apiProxyBaseUrl");p=r.envDataProvider.get("siteRef");g=r.model.get("ref");h="".concat(f,"/sites/").concat(p,"/pages/").concat(g);v.next=22;return n.default.dispatch((0,a.savePageChanges)(h,d,g,i,o));case 22:r.tracker.track([{tracker:"Mixpanel",event:"Update page SEO"},{tracker:"Intercom",event:"SEO update page"}],{id:r.model.id,keywords:r.model.get("keywords"),seo_title:r.model.get("seo_title"),description:r.model.get("description")});r.closePanel();r.trigger("page:updated",{selectedLanguage:o});case 25:case"end":return v.stop()}}),e)})))()},onConvertToHomeChanged:function e(){var t=this.el.querySelector(".js-convert-home").checked;var r=this.el.querySelector(".js-page-status");var n=this.el.querySelector(".js-folder");if(t){r.setAttribute("hidden",true);n.setAttribute("hidden",true)}else{r.removeAttribute("hidden");n.removeAttribute("hidden")}},getUpdatedAttributes:function e(){var t=null;var r=this.model.clone();r.set(Backbone.Syphon.serialize(this),{silent:true});t=r.changedAttributes();t.parentId&&parseInt(this.model.get("parentId"),10)!==parseInt(t.parentId,10)&&(t.folder=t.parentId);t.request&&(t.pageUrl=t.request);if(t.convertToHome&&1===parseInt(t.convertToHome,10)){t.type="home";t=_.omit(t,"convertToHome");t.status="active";t.folder=0;this.homePageChanged=true}if("redirect"===r.get("type")){t.externalUrl=t.redirection||r.get("redirection");t.request=t.title;"sectionLink"===r.get("description")&&(t.description=r.get("description"))}t.language=r.attributes.language;return t}});var d=t["default"]=c},94003:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(69464));var i=r(24531);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function d(e,t,r){t&&c(e.prototype,t);r&&c(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var f=new WeakMap;var p=t["default"]=function(){function e(t){u(this,e);f.set(this,s({},t));this.selectedLanguage=null}d(e,[{key:"setSelectedLanguage",value:function e(t){this.selectedLanguage=t}},{key:"clone",value:function e(t){return this.displayDialog(t).then(this.clonePage.bind(this))}},{key:"clonePage",value:function e(t){var r=t.result,n=r.page,i=r.pageLanguage,a=r.pageTitle;var o=f.get(this).envDataProvider;var s=o.get("apiProxyBaseUrl");var l=o.get("siteRef");var u=o.get("csrfToken");var c="".concat(s,"/sites/").concat(l,"/pages/").concat(n.ref,"/clone");var d={title:a,pageUrl:a.replace(/\s+/g,"-").toLowerCase(),status:"active",language:i};t.dialog.hide();return new Promise((function(e,t){window.fetch(c,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":u},method:"POST",body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(t){return e(t.page)})).catch(t)}))}},{key:"displayDialog",value:function e(t){n.default.dispatch((0,i.openModal)("clonePage"));var r=f.get(this).siteDataProvider;var a=f.get(this).envDataProvider;var o=r.getSiteLanguages();var s=r.getDefaultLanguage();var l=f.get(this).PageClonerDialogViewFactory;var u=a.get("languages");var c=a.get("localisedLanguages");var d=f.get(this).multiLanguageEditor;var p=this.selectedLanguage;var g=t.toJSON();var h=new l({multiLanguageEditor:d,siteLanguages:o,siteDefaultLanguage:s,languages:u,localisedLanguages:c,selectedLanguage:p,pageData:g});return h.build()}}]);return e}()},44195:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var a=new WeakMap;var o=Backbone.View.extend({template:"page_clone_dialog",events:{"click .js-cancel":"cancel","click .js-clone":"clone","change .js-page-title":"enableButton","keyup .js-page-title":"checkForReturn"},initialize:function e(t){a.set(this,n({},t))},checkForReturn:function e(t){var r=t.keyCode;var n=this.el.querySelector(".js-clone");this.enableButton();false===n.hasAttribute("disabled")&&13===r&&this.clone()},enableButton:function e(){var t=this.el.querySelector(".js-page-title");var r=this.el.querySelector(".js-clone");""!==t.value?r.removeAttribute("disabled"):r.setAttribute("disabled","disabled")},clone:function e(){var t=this.el.querySelector(".js-page-title");var r=this.el.querySelector(".js-page-language");var n=t.value;var i=a.get(this).context.pageData;var o=null;r&&(o=r.value);this.trigger("dialog:resolve",{page:i,pageTitle:n,pageLanguage:o})},cancel:function e(){this.trigger("dialog:close")},render:function e(){var t=Twig.render(Twig.templates[this.template],a.get(this).context);var r=document.querySelectorAll(".js-dialog-contents");var n=r.item(r.length-1);n.insertAdjacentHTML("beforeend",t);this.el.querySelector(".js-page-title").focus()}});var s=t["default"]=o},90237:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(86985));var i=a(r(44195));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function d(e,t,r){t&&c(e.prototype,t);r&&c(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var f=new WeakMap;var p=function(){function e(t){u(this,e);f.set(this,s({},t))}d(e,[{key:"build",value:function e(){var t=f.get(this);var r=f.get(this).pageData;var a=new n.default({title:App.t("shared_components.addpageorfolderpanel.page_clone_dialog_title","Clone page '%1'",r.title),showSaveCancel:false,content:new i.default({context:t}),render:false});return a.render()}}]);return e}();var g=t["default"]=p},42338:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Backbone.Model.extend({idAttribute:"ref",urlRoot:function e(){return"".concat(App.session.get("apiProxyBaseUrl"),"/sites/").concat(this.getSiteRef(),"/pages/")},getSiteRef:function e(){return App.session.get("siteRef")},parse:function e(t){return t.page}});var n=t["default"]=r},23078:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(73908));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=function(){function e(t){var r=t.envDataProvider,n=void 0===r?{}:r;a(this,e);this.envDataProvider=n}s(e,[{key:"build",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.pageModel,i=void 0===r?{}:r;return new n.default({pageRef:i.get("ref"),title:i.get("title"),envDataProvider:this.envDataProvider})}}]);return e}();var u=t["default"]=l},30605:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=u(r(36354));var i=u(r(69464));var a=u(r(9838));var o=u(r(13745));var s=r(83489);var l=r(38869);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return JSON.stringify(e)===JSON.stringify(t)}var d=Marionette.ItemView.extend({template:"pages_advanced_reorder_panel",events:{"click .js-done":"onSaveClicked"},initialize:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.language,n=void 0===r?null:r,a=t.pageTree,o=void 0===a?{}:a,l=t.pages,u=void 0===l?{}:l;this.language=n;this.pageTree=o;this.pages=u;this.setTplData();this.render();i.default.dispatch((0,s.openPanel)("reorder"));this.state=i.default.getState().page;this.unsubscribe=i.default.subscribe(this.handleStateChange.bind(this))},handleStateChange:function e(){if(!this.el){this.unsubscribe();return}var t=i.default.getState();t.ui.panel.saveActive?this.el.querySelector(".js-done").removeAttribute("disabled"):this.el.querySelector(".js-done").disabled="disabled";var r=t.page;if(c(this.state,r))return;if(r.pagesOrdering)return;this.state=r;if(this.state.pagesError&&this.state.pagesErrorDetails)if(401===r.pagesErrorDetails.status)Editor.Responsive.displaySessionTimeoutDialog();else{(0,a.default)((0,o.default)("editor_v8.delete_row.error","Error"),(0,o.default)("shared_views.pages-reorder.error","Error reordering pages"),"error");this.mixinClosePanel();this.destroy()}else{this.updateUI();(0,a.default)((0,o.default)("editor_v8.delete_row.success","Success"),(0,o.default)("shared_views.pages-reorder.saved","Page order updated"),"success")}},onDestroy:function e(){this.unsubscribe()},setTplData:function e(){this.tplData={pages:this.pageTree,lightBackground:true}},render:function e(){"function"===typeof this.mixinRenderTpl&&this.mixinRenderTpl()},postRender:function e(){this.setupReorderEvents()},setupReorderEvents:function e(){var t=this;this.setupTopLevelReorderEvents();var r=this.el.querySelectorAll(".js-sortable-folder");Array.prototype.forEach.call(r,(function(e){t.setupFolderSubpagesReorderEvents(e)}))},setupTopLevelReorderEvents:function e(){var t=this;var r=this.el.querySelector(".js-top-level");var i={ghostClass:"is-item-ghost",group:"reorder",animation:150,draggable:".js-draggable",handle:".js-drag-handle",chosenClass:"is-drag-chosen",onMove:function e(r){var n=r.dragged;var i=r.related;n.classList.contains("is-folder-wrapper")&&t.collapseFolderNode(n);if(n.classList.contains("is-fixed-top-level")&&t.isMovingPageIntoFolder(i))return false;t.updatePagesInOrOutFolderUI(n,i);t.enableSaveBtn();return true},onEnd:function e(r){var n=r.item;n.classList.contains("is-folder-wrapper")&&t.reopenFolderNode(n)}};n.default.create(r,i)},setupFolderSubpagesReorderEvents:function e(t){var r=this;var i={ghostClass:"is-item-ghost",group:"reorder",animation:150,chosenClass:"is-drag-chosen",draggable:".js-draggable",handle:".js-drag-handle",onMove:function e(t){var n=t.dragged;var i=t.related;if(n.classList.contains("is-folder-index")){if(r.isMovingIntoTopLevel(i))return false;if(r.isMoveingIntoAnoterFolder(n,i))return false}r.updatePagesInOrOutFolderUI(n,i);r.enableSaveBtn();return true}};n.default.create(t,i)},collapseFolderNode:function e(t){t.querySelector(".js-sortable-folder").classList.add("is-collapsed")},reopenFolderNode:function e(t){t.querySelector(".js-sortable-folder").classList.remove("is-collapsed")},isMovingPageIntoFolder:function e(t){return t.parentNode.classList.contains("js-sortable-folder")},isMoveingIntoAnoterFolder:function e(t,r){return t.getAttribute("data-folder-ref")!==r.parentNode.getAttribute("data-folder-ref")},isMovingIntoTopLevel:function e(t){return!t.parentNode.classList.contains("js-sortable-folder")},updatePagesInOrOutFolderUI:function e(t,r){if(this.isMovingPageIntoFolder(r)){t.classList.remove("pages-tree");t.classList.add("pages-tree__folder-wrapper");t.classList.add("is-folder-draggable-item")}else{t.classList.remove("pages-tree__folder-wrapper");t.classList.remove("is-folder-draggable-item");t.classList.add("pages-tree")}},enableSaveBtn:function e(){i.default.dispatch((0,s.enableSave)())},onSaveClicked:function e(){var t=this.getNewOrder();this.updatePages(t)},getNewOrder:function e(){var t=[];var r=this.el.querySelector(".js-top-level").children;var n=0;Array.prototype.forEach.call(r,(function(e){var r=e.getAttribute("data-page-ref");n+=1;t.push([parseInt(r,10),n,0]);if(e.classList.contains("is-folder-wrapper")){var i=e.querySelectorAll(".js-draggable");Array.prototype.forEach.call(i,(function(e){var i=e.getAttribute("data-page-ref");n+=1;t.push([parseInt(i,10),n,parseInt(r,10)])}))}}));return t},updatePages:function e(t){var r={pagesOrder:t,language:this.language};i.default.dispatch((0,l.updateOrder)(r))},updateUI:function e(){this.notifyNewOrder();this.mixinClosePanel();this.destroy()},notifyNewOrder:function e(){this.trigger("page:order:changed",{fetch:true,selectedLanguage:this.language})}});var f=t["default"]=d},96002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=c(r(69464));var i=r(83489);var a=r(24531);var o=r(61842);var s=r(37058);var l=c(r(57789));var u=r(83748);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function p(e,t,r){t&&f(e.prototype,t);r&&f(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.PagesPanelFactory,n=void 0===r?{}:r,i=t.AddPagePanelFactory,a=void 0===i?{}:i,o=t.EditPagePanelFactory,s=void 0===o?{}:o,l=t.PagesReorderPanelFactory,u=void 0===l?{}:l,c=t.SiteStylePanelFactory,f=void 0===c?{}:c,p=t.SiteScriptsFactory,g=void 0===p?{}:p,h=t.PageScriptsFactory,v=void 0===h?{}:h,m=t.SiteLanguageFactory,y=void 0===m?{}:m,b=t.languageListUIState,w=void 0===b?{}:b;d(this,e);this.PagesPanelFactory=n;this.AddPagePanelFactory=a;this.EditPagePanelFactory=s;this.PagesReorderPanelFactory=u;this.SiteStylePanelFactory=f;this.SiteScriptsFactory=g;this.PageScriptsFactory=v;this.SiteLanguageFactory=y;this.selectedLanguage=null;this.pageRef=null;this.event=Object.assign(this,Backbone.Events);this.languageListUIState=w;return this}p(e,[{key:"openPagesPanel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selectedLanguage&&(t.selectedLanguage=this.selectedLanguage);this.pageRef&&(t.currentPageRef=this.pageRef);this.pagesPanelView=this.PagesPanelFactory.build(t);this.attachPagesPanelEvents(this.pagesPanelView);n.default.dispatch((0,i.openPanel)("pagesPanel"))}},{key:"attachPagesPanelEvents",value:function e(t){this.event.listenTo(t,"open:re-order",this.openReorderPanel);this.event.listenTo(t,"open:add-page",this.openAddPagePanel);this.event.listenTo(t,"open:edit-page",this.openEditPagePanel);this.event.listenTo(t,"open:page-script",this.openPageScriptPanel);this.event.listenTo(t,"open:site-style-panel",this.openSiteStylePanel);this.event.listenTo(t,"open:site-scripts",this.openSiteScriptsPanel);this.event.listenTo(t,"open:site-languages",this.openSiteLanguagesPanel);this.event.listenTo(t,"change:language",this.languageChanged);this.event.listenTo(t,"open:language-dropdown",this.openLanguageDropdown);this.event.listenTo(t,"open:add-language",this.openAddLanguage);document.addEventListener("panel:close",this.panelClosed);this.event.listenTo(t,"close",this.close);Editor.Events.on("page:change",this.pageChanged);this.storeSubscribe()}},{key:"storeSubscribe",value:function e(){this.state=this.languageListUIState.get();this.languageListUIState.subscribe(this.handleStateChange.bind(this))}},{key:"handleStateChange",value:function e(t){if(t.showManageList===this.state.showManageList)return;t.showManageList&&!this.state.showManageList&&this.pagesPanelView&&this.pagesPanelView.el.setAttribute("hidden","hidden");t.showManageList||this.pagesPanelView&&this.pagesPanelView.el.removeAttribute("hidden");this.state=this.languageListUIState.get()}},{key:"panelClosed",value:function e(){n.default.dispatch((0,i.closeSubpanel)())}},{key:"close",value:function e(){document.removeEventListener("panel:close",this.panelClosed);n.default.dispatch((0,i.closePanel)());(0,u.openIntercom)()}},{key:"languageChanged",value:function e(t){this.selectedLanguage=t}},{key:"pageChanged",value:function e(t){this.pageRef=t.get("ref");(0,l.default)().set("pageRef",this.pageRef)}},{key:"openReorderPanel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.language,n=void 0===r?null:r,i=t.pageTree,a=void 0===i?{}:i;var o=this.PagesReorderPanelFactory.build({pageTree:a,language:n});this.attachReorderPanelEvents(o)}},{key:"attachReorderPanelEvents",value:function e(t){this.event.listenTo(t,"page:order:changed",this.updatePagesPanel)}},{key:"openAddPagePanel",value:function e(){var t=this.AddPagePanelFactory.build(this.selectedLanguage);this.attachAddPagePanelEvents(t);n.default.dispatch((0,i.openPanel)("addPage"));return t}},{key:"attachAddPagePanelEvents",value:function e(t){this.event.listenTo(t,"page:added",this.updatePagesPanel);this.event.listenTo(t,"close",this.onOverlayPanelClosed)}},{key:"onOverlayPanelClosed",value:function e(){this.pagesPanelView.showPanel()}},{key:"openEditPagePanel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.page,a=void 0===r?{}:r;var o=a;var s=this.EditPagePanelFactory.build({pageModel:o,selectedLanguage:this.selectedLanguage});this.attachEditPagePanelEvents(s);n.default.dispatch((0,i.openPanel)("editPage"));return s}},{key:"attachEditPagePanelEvents",value:function e(t){this.event.listenTo(t,"page:updated",this.updatePagesPanel);this.event.listenTo(t,"close",this.onOverlayPanelClosed)}},{key:"updatePagesPanel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.currentPageRef,n=void 0!==r&&r,i=t.fetch,a=void 0===i||i,o=t.pageTree,s=void 0===o?{}:o,l=t.selectedLanguage,u=void 0===l?null:l;this.pagesPanelView.updatePages({currentPageRef:n,fetch:a,pageTree:s,selectedLanguage:u})}},{key:"openPageScriptPanel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.page,o=void 0===r?{}:r;var s=o;var l=this.PageScriptsFactory.build({pageModel:s});if(this.pagesPanelView){this.pagesPanelView.closePanel();n.default.dispatch((0,i.closePanel)())}n.default.dispatch((0,i.closePanel)());n.default.dispatch((0,a.openModal)("pageScript"));return l}},{key:"openSiteStylePanel",value:function e(){this.SiteStylePanelFactory.build();if(this.pagesPanelView){this.pagesPanelView.closePanel();n.default.dispatch((0,i.closePanel)())}n.default.dispatch((0,i.openPanel)("siteStyle"))}},{key:"openSiteScriptsPanel",value:function e(){var t=this.SiteScriptsFactory.build();if(this.pagesPanelView){this.pagesPanelView.closePanel();n.default.dispatch((0,i.closePanel)())}n.default.dispatch((0,i.closePanel)());n.default.dispatch((0,a.openModal)("siteScripts"));return t}},{key:"openSiteLanguagesPanel",value:function e(){var t=this;var r=this.selectedLanguage;var a=this.SiteLanguageFactory.build({selectedLanguage:r});this.event.listenToOnce(a,"panel:closed, close",(function(){t.updatePagesPanel({selectedLanguage:t.selectedLanguage})}));n.default.dispatch((0,i.openPanel)("siteLanguages"))}},{key:"openLanguageDropdown",value:function e(){this.SiteLanguageFactory.initAddLanguage();n.default.dispatch((0,o.showLanguageList)())}},{key:"openAddLanguage",value:function e(){this.SiteLanguageFactory.initAddLanguage();n.default.dispatch((0,s.openAddLanguage)())}}]);return e}();var h=t["default"]=g},32637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;t.fromPageTree=f;t.getActiveLanguageInternalPages=c;t.getInternalPages=d;var n=r(1904);var i=r(7794);var a=s(r(69464));var o=s(r(42338));function s(e){return e&&e.__esModule?e:{default:e}}var l=Backbone.Collection.extend({url:function e(){return"".concat(App.frontEndBucket.apiProxyBaseUrl,"/sites/").concat(this.getSiteRef(),"/pages")},model:o.default,initialize:function e(){},getSiteRef:function e(){return App.session.get("siteRef")},parse:function e(t){return t.pages},getPageTree:function e(){var t="/_/page-tree";var r=window.fetch(t,{credentials:"include",method:"GET"});return r},resetPageTree:function e(t){var r=(0,i.formatPages)(t);if((0,n.isEdge)()||(0,n.isIE)())return this.callResetIE(r);return this.reset(r)},callResetIE:function e(t){try{this.reset(t)}catch(e){console.log(e)}},addFromPageTree:function e(t){this.add((0,i.formatPages)(t))}});function u(e,t){var r=e.filter((function(e){return"".concat(e.ref)==="".concat(t)}));if(r.length)return r[0].title;return""}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t=e||a.default.getState();var r=t.language.current;var n=t.language.defaultLanguage.language;var i=t.page.pages;""!==r&&r!==n&&(i=t.page.languages[r].pages);return d(i)}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var t=[];var r=["order-confirmation","blogpost","singleproduct"];(0,i.formatPages)(e).forEach((function(n){var i=null;var a=null;if(0!==parseInt(n.parentId,10)){i=parseInt(n.parentId,10);a=u(e,i)}"folder"!==n.type&&"redirect"!==n.type&&"active"===n.status&&-1===r.indexOf(n.request)&&t.push({text:a?"".concat(a," -> ").concat(n.title):n.title,value:"/".concat(n.request)})}));return t}function f(e){return new l((0,i.formatPages)(e))}BaseKit.Globals.Pages=l;var p=t["default"]=l},281:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(60989));var i=a(r(72469));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function l(e,t,r){t&&s(e.prototype,t);r&&s(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.pages,n=void 0===r?{}:r,i=t.envDataProvider,a=void 0===i?{}:i,s=t.userDataProvider,l=void 0===s?{}:s,u=t.siteDataProvider,c=void 0===u?{}:u,d=t.profile,f=void 0===d?{}:d,p=t.pageCloner,g=void 0===p?{}:p,h=t.featureFlagDataProvider,v=void 0===h?{}:h,m=t.languageState,y=void 0===m?{}:m;o(this,e);this.pages=n;this.envDataProvider=a;this.userDataProvider=l;this.siteDataProvider=c;this.profile=f;this.pageCloner=g;this.featureFlagDataProvider=v;this.languageState=y;return this}l(e,[{key:"build",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.fetch,a=void 0!==r&&r,o=t.selectedLanguage,s=void 0===o?null:o,l=t.currentPageRef,u=void 0===l?null:l;Cocktail.mixin(i.default,n.default);return new i.default({pageTree:this.siteDataProvider.get("pageTree"),siteLanguagesPageTree:this.siteDataProvider.get("siteLanguagesPageTree"),collection:this.pages,updatePages:a,envDataProvider:this.envDataProvider,userDataProvider:this.userDataProvider,siteDataProvider:this.siteDataProvider,profileModel:this.profile,multiLanguageEditor:this.featureFlagDataProvider.get("multiLanguageEditor"),localisedLanguages:this.envDataProvider.get("localisedLanguages"),languages:this.envDataProvider.get("languages"),selectedLanguage:s,currentPageRef:u,pageCloner:this.pageCloner,featureFlagDataProvider:this.featureFlagDataProvider,languageState:this.languageState})}}]);return e}();var c=t["default"]=u},72469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=v(r(69464));var i=v(r(36354));var a=v(r(9838));var o=v(r(13745));var s=r(83489);var l=r(24531);var u=r(38869);var c=r(32686);var d=v(r(62201));var f=v(r(57789));var p=v(r(62951));var g=v(r(37977));var h=r(83748);function v(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return S(e)||_(e,t)||b(e,t)||y()}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n=[];var i=true;var a=false;var o,s;try{for(r=r.call(e);!(i=(o=r.next()).done);i=true){n.push(o.value);if(t&&n.length===t)break}}catch(e){a=true;s=e}finally{try{i||null==r["return"]||r["return"]()}finally{if(a)throw s}}return n}function S(e){if(Array.isArray(e))return e}function P(){return(0,f.default)().get("pageRef")}function E(e){n.default.dispatch((0,u.getPageTree)(e))}function k(e,t,r){var n="".concat(e,"/sites/").concat(t,"/languages");return new Promise((function(e,t){window.fetch(n,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":r},method:"GET"}).then((function(t){200===t.status&&t.json().then((function(t){e(t)}))})).catch(t)}))}function C(e){n.default.dispatch((0,u.getLanguagesPageTree)(e))}var O=Marionette.CompositeView.extend({template:"pages_panel",deleteDialogTemplate:"pages_panel_deletion_dialog",events:{"click .js-page-reorder":"onReorderClicked","click .js-add-page-folder":"onAddPageFolderClicked","click .js-option-button":"onOptionsClicked","click .js-edit-page":"onEditPageClicked","click .js-delete":"onDeletePageClicked","click .js-page-scripts":"onPageScriptClicked","click .js-page-title":"onPageClicked","click .js-site-styles":"openSiteStylePanel","click .js-site-scripts":"openSiteScriptsPanel","click .js-site-languages":"onSiteLanguagesClicked","click .js-v10-site-languages":"onV10SiteLanguageClicked","click .js-v10-add-site-languages":"onV10AddSiteLanguageClicked","change .js-language":"onSiteLanguageChange","click .js-clone":"onCloneClicked"},initialize:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.pageTree,i=void 0===r?{}:r,a=t.siteLanguagesPageTree,o=void 0===a?{}:a,s=t.collection,l=void 0===s?{}:s,u=t.envDataProvider,c=void 0===u?{}:u,d=t.userDataProvider,f=void 0===d?{}:d,g=t.siteDataProvider,v=void 0===g?{}:g,m=t.updatePages,y=void 0!==m&&m,b=t.profileModel,w=void 0===b?{}:b,_=t.multiLanguageEditor,S=void 0!==_&&_,P=t.localisedLanguages,E=void 0===P?{}:P,k=t.languages,C=void 0===k?{}:k,O=t.selectedLanguage,A=void 0===O?null:O,T=t.pageRef,j=void 0===T?null:T,D=t.pageCloner,L=void 0===D?{}:D,R=t.featureFlagDataProvider,I=void 0===R?{}:R,M=t.languageState,x=void 0===M?{}:M;this.pageTree=i;this.siteLanguagesPageTree=o;this.collection=l;this.envDataProvider=c;this.userDataProvider=f;this.siteDataProvider=v;this.profileModel=w;this.multiLanguageEditor=S;this.languages=C;this.localisedLanguages=E;this.selectedLanguage=A;this.pageRef=j;this.pageCloner=L;this.featureFlagDataProvider=I;this.pageChanging=false;this.languageState=x;var N=n.default.getState().language.current;var F=n.default.getState().language.defaultLanguage.language;var V=N&&N!==F?"page.languages.".concat(N):"page";this.slice=new p.default({store:n.default,stateId:V});this.state=this.slice.get();this.slice.subscribe(this.handleStateChange.bind(this));y?this.updatePages({currentPageRef:j,selectedLanguage:A}):this.render();if(this.multiLanguageEditor){Editor.Events.off("siteframe:load").on("siteframe:load",this.updateToolbarPageTitle.bind(this));Editor.Events.off("language:deleted").on("language:deleted",this.checkDeletedLanguage.bind(this))}this.addProfileEvent(w);this.featureFlagDataProvider.get("enableRows")&&this.addLanguageSlice();(0,h.closeIntercom)()},addLanguageSlice:function e(){this.language=this.languageState.get();this.languageState.subscribe(this.handleLanguageChange.bind(this))},handleLanguageChange:function e(t){if((0,d.default)(this.language,t))return;if(this.language.current!==t.current){var r=t.current;this.changeSiteLanguage(r)}var n=this.language.siteLanguages.length;var i=t.siteLanguages.length;if(n!==i&&(0===i||0===n)){this.render();this.updateToolbarPageTitle();this.language=this.languageState.get()}},handleStateChange:function e(t){if((0,d.default)(this.state,t))return;var r=this.state;this.state=(0,g.default)(t);if(!(0,d.default)(this.state.pages,r.pages)){if(this.state.pagesError&&this.state.pagesErrorDetails)if(401===t.pagesErrorDetails.status)Editor.Responsive.displaySessionTimeoutDialog();else{(0,a.default)((0,o.default)("editor_v8.delete_row.error","Error"),(0,o.default)("shared_views.pages-reorder.error","Error reordering pages"),"error");this.mixinClosePanel();this.destroy()}else if(this.featureFlagDataProvider.get("enableRows")&&!this.state.pagesOrdering&&r.pagesOrdering){this.updatePagesCollection();(0,a.default)((0,o.default)("editor_v8.delete_row.success","Success"),(0,o.default)("shared_views.pages-reorder.saved","Page order updated"),"success")}else this.multiLanguageEditor||this.updatePagesCollection();this.render()}},buildTplData:function e(){var t=this.siteDataProvider.getDefaultLanguage();var r=n.default.getState().language.current||n.default.getState().language.defaultLanguage.language||this.userDataProvider.get("languageCode");var i=n.default.getState().language.siteLanguages;var a=this.selectedLanguage||t||"";var o=P();var s=this.getCurrentFolderRef();var l=n.default.getState().user.capabilities.enableStandaloneMode;this.tplData={pages:this.getPageTreeByLangCode(a),siteName:this.profileModel.get("business"),currentPageRef:o,currentFolderRef:s,currentPageTemplateType:this.getCurrentPageTemplateType(),disableV8SiteAndPageScripts:this.userDataProvider.has("disableV8SiteAndPageScripts"),rowsEnabled:this.featureFlagDataProvider.get("enableRows"),multiLanguageEditor:this.multiLanguageEditor,enableStandaloneMode:l,localisedLanguages:this.localisedLanguages,languages:this.languages,currentLanguageFlag:r?this.getFlags()[r.toLowerCase()]:null,currentLanguageCode:r,siteLanguages:i,defaultLanguage:t,selectedLanguage:a}},getPageTreeByLangCode:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===t||t===n.default.getState().language.defaultLanguage.language||0===n.default.getState().language.siteLanguages.filter((function(e){return e.language===t})).length)return n.default.getState().page.pages;return n.default.getState().page.languages[t].pages},getCurrentPageTemplateType:function e(){return this.getPageModel(P()).get("templateType")},getCurrentFolderRef:function e(){var t=this.getPageModel(P());if(t)return t.get("parentId");return 0},updatePages:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.currentPageRef,a=void 0!==i&&i,o=r.fetch,s=void 0===o||o,l=r.pageTree,u=void 0===l?{}:l,c=r.selectedLanguage,d=void 0===c?null:c;if(this.selectedLanguage&&this.selectedLanguage!==d){this.changeLanguage(d,a);return}this.selectedLanguage=d||n.default.getState().language.defaultLanguage.language;if(s){this.currentPageRef=a;this.updatePageTrees().then((function(){t.render();t.updateToolbarPageTitle()})).catch((function(e){return console.error(e)}))}else{this.pageTree=u;this.render();this.updateToolbarPageTitle()}},updatePageTrees:function e(){var t=this;return new Promise((function(e,r){var n=[];n.push(E(t.getCsrfToken()));if(t.multiLanguageEditor){n.push(C(t.getCsrfToken()));n.push(k(t.getApiProxyBaseUrl(),t.getSiteRef(),t.getCsrfToken()))}Promise.all(n).then((function(r){var n=m(r,2),i=n[0],a=n[1];"undefined"!==typeof i&&t.updateMultiLanguagePageTree(i);"undefined"!==typeof a&&t.updateSiteLanguages(a);e()})).catch(r)}))},updateMultiLanguagePageTree:function e(t){var r=this;try{this.siteLanguagesPageTree=t;Object.keys(this.siteLanguagesPageTree).forEach((function(e){BaseKit.Globals.pages.addFromPageTree(r.siteLanguagesPageTree[e].pages)}))}catch(e){console.error(e)}},updateSiteLanguages:function e(t){this.siteLanguages=t.siteLanguages},getCsrfToken:function e(){return this.envDataProvider.get("csrfToken")},getApiProxyBaseUrl:function e(){return this.envDataProvider.get("apiProxyBaseUrl")},getSiteRef:function e(){return this.envDataProvider.get("siteRef")},getFlags:function e(){return this.envDataProvider.get("flags")},render:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.pageChanging)return;this.buildTplData();"function"===typeof this.mixinRenderTpl&&this.mixinRenderTpl({refresh:t.refresh});this.deleteDialogIsOpen=false;Editor.Events.trigger("pagespanel:rendered")},postRender:function e(){this.trigger("change:language",this.selectedLanguage);if(this.currentPageRef){var t=this.el.querySelector('.js-page-title[data-ref="'.concat(this.currentPageRef,'"]'));t&&t.click()}this.attachFolderEvents();this.featureFlagDataProvider.get("enableRows")&&this.setupReorderEvents()},closePanel:function e(){n.default.dispatch((0,s.closePanel)());this.destroy()},onDestroy:function e(){this.slice.unsubscribe();this.featureFlagDataProvider.get("enableRows")&&this.languageState.unsubscribe()},checkDeletedLanguage:function e(t){var r=this.siteDataProvider.getDefaultLanguage();if(t!==this.selectedLanguage){this.render({refresh:true});return}this.changeLanguage(r)},onOptionsClicked:function e(t){var r=t.currentTarget.getAttribute("data-ref");var n=this.el.querySelector(".js-options[data-ref=".concat(r,"]"));if(n.classList.contains("is-open"))this.hideOptionDropdown(n);else{this.closeAllOptionsDropdown();this.showOptionDropdown(n)}},closeAllOptionsDropdown:function e(){var t=this;var r=this.el.querySelectorAll(".js-options");Array.prototype.forEach.call(r,(function(e){t.hideOptionDropdown(e)}))},showOptionDropdown:function e(t){t.removeAttribute("hidden");t.classList.add("is-open");this.positionOptionDropdown(t)},hideOptionDropdown:function e(t){t.setAttribute("hidden",true);t.classList.remove("is-open");if(this.featureFlagDataProvider.get("enableRows")){t.hasAttribute("style")&&t.removeAttribute("style");var r=this.el.querySelector(".js-nav-drawer__content");r.hasAttribute("style")&&r.removeAttribute("style")}},positionOptionDropdown:function e(t){if(!this.featureFlagDataProvider.get("enableRows"))return;var r=t.parentNode.getAttribute("data-ref");var n='.js-is-folder-draggable-item[data-page-ref="'.concat(r,'"]');var i=this.el.querySelector(n);var a=i&&i.hasAttribute("data-folder-ref")?i.getAttribute("data-folder-ref"):r;var o='.js-is-draggable-page[data-page-ref="'.concat(a,'"]');var s=this.el.querySelector(o);var l=0;i?l=s.offsetTop:i=s;var u=this.el.querySelector(".js-nav-drawer__inner");var c=u.offsetTop+l+i.offsetTop;var d=c+t.offsetTop+t.clientHeight;var f=this.el.querySelector(".js-nav-drawer__content");if(d>f.clientHeight+f.scrollTop){var p=t.parentNode.clientHeight-t.offsetTop-t.clientHeight;var g=c+p;if(g<0){var h=4;f.style.height="".concat(f.scrollHeight+h,"px")}else t.style.top="".concat(p,"px")}},onEditPageClicked:function e(t){this.hidePanel();var r=t.currentTarget.getAttribute("data-ref");var n=this.getPageModel(r);this.trigger("open:edit-page",{page:n});this.closeAllOptionsDropdown()},onReorderClicked:function e(){var t=this.selectedLanguage||this.defaultLanguage;var r=this.getPageTreeByLangCode(t);this.trigger("open:re-order",{language:t,pageTree:r})},onSiteLanguagesClicked:function e(){this.trigger("open:site-languages")},onAddPageFolderClicked:function e(){this.hidePanel();this.trigger("open:add-page")},hidePanel:function e(){if(this.featureFlagDataProvider.get("enableRows")){var t=this.el.querySelector(".js-pages-nav__surface");void 0!==t&&t.setAttribute("hidden",true)}},showPanel:function e(){if(this.featureFlagDataProvider.get("enableRows")){var t=this.el.querySelector(".js-pages-nav__surface");void 0!==t&&t.removeAttribute("hidden")}},onDeletePageClicked:function e(t){var r=t.currentTarget.getAttribute("data-ref");var i=this.getPageModel(r);var a=i.get("type");if(!this.deleteDialogIsOpen){this.openPageDeletionDialog({pageModel:i,pageType:a});this.deleteDialogIsOpen=true;n.default.dispatch((0,l.openModal)("deletePage"))}},deleteConfirmedBtnClicked:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.pageModel;this.hidePopup();if(this.isCurrentPage(r)||this.isCurrentFolder(r)){this.redirectToHome(r);(0,h.openIntercom)()}this.removePageFromDB(r)},removePageFromDB:function e(t){var r=n.default.getState().language.current;r&&r!==n.default.getState().language.defaultLanguage.language?n.default.dispatch((0,u.deleteLangPage)(t.get("ref"),r)):n.default.dispatch((0,u.deletePage)(t.get("ref")));t.destroy()},isCurrentPage:function e(t){var r=false;parseInt(P(),10)===parseInt(t.get("ref"),10)&&(r=true);return r},isCurrentFolder:function e(t){var r=false;var n=this.getPageModel(P());parseInt(n.get("parentId"),10)===parseInt(t.get("ref"),10)&&(r=true);return r},redirectToHome:function e(t){var r=t.get("language");var n=r?this.getLanguageHomePage(r):this.collection.findWhere({type:"home"});var i=r?n.ref:n.get("ref");var a=this.el.querySelector('.js-page-title[data-ref="'.concat(i,'"]'));a.click()},openPageDeletionDialog:function e(t){var r=this;var i=t.pageModel,a=t.pageType;n.default.dispatch((0,l.openModal)("deleteModal"));var o=Twig.render(Twig.templates[this.deleteDialogTemplate],{pageTitle:i.get("title"),deleteFolder:"folder"===a,deleteLink:"redirect"===a});$("body").append(o);var s=document.querySelectorAll(".js-close-popup");Array.prototype.forEach.call(s,(function(e){e.addEventListener("click",(function(){r.hidePopup()}))}));document.querySelector(".js-popup-bg").addEventListener("click",(function(){r.hidePopup()}));var u=document.querySelector(".js-delete-confirmed");u.addEventListener("click",(function(e){e.stopPropagation();r.deleteConfirmedBtnClicked({pageModel:i,pageType:a})}));u.classList.add("js-delete-confirmed-event-attached")},hidePopup:function e(){var t=document.querySelector(".js-deletion-popup");t.parentNode.removeChild(t);this.deleteDialogIsOpen=false;n.default.dispatch((0,l.closeModal)())},onPageScriptClicked:function e(t){var r=t.currentTarget.getAttribute("data-ref");var n=this.getPageModel(r);this.trigger("open:page-script",{page:n})},onPageClicked:function e(t){var r=t.currentTarget.getAttribute("data-ref");var n=this.getPageModel(r);var i=n.get("type");if("redirect"===i)return;this.updateToolbarPageTitle(r);this.changePage(r);this.closePanel();(0,h.openIntercom)()},changePage:function e(t){var r=this.getPageModel(t);Editor.Events.trigger("page:change",r);this.changeIframeUrl(r)},updateToolbarPageTitle:function e(t){var r=t||P();var n=this.getPageModel(r);if(!n)return;var i=n.get("title");n.get("plugin")&&(i=(0,o.default)(n.get("plugin").displayTitle.key,n.get("plugin").displayTitle.default));this.featureFlagDataProvider.get("enableRows")&&(i=this.prefixedCurrentPageTitle(i));document.querySelector(".js-active-page").textContent=i;document.querySelector(".js-active-page").setAttribute("title",i)},prefixedCurrentPageTitle:function e(t){var r=t;var i=this.selectedLanguage||n.default.getState().language.defaultLanguage.language;n.default.getState().language.siteLanguages.length>0&&i&&(r="".concat(i.toUpperCase()," / ").concat(t));return r},changeIframeUrl:function e(t){this.pageChanging=true;var r=encodeURIComponent(t.get("request"));r=r.replace(/%2F/g,"/");var n=[this.envDataProvider.get("protocol"),"://editor.",this.envDataProvider.get("domain"),""===App.getPort()?"":":".concat(App.getPort()),"/",r,"?",App.frontEndBucket.serveSiteFromEditorSubdomainQueryParam,"=",App.frontEndBucket.serveSiteFromEditorSubdomainQueryValue].join("");var i=document.querySelector("#siteFrame");var a=i.contentWindow?i.contentWindow:i.contentDocument.defaultView;a.location.href=n},getPageModel:function e(t){return this.collection.get(t)},openSiteStylePanel:function e(){this.trigger("open:site-style-panel")},openSiteScriptsPanel:function e(){this.trigger("open:site-scripts");this.featureFlagDataProvider.get("enableRows")&&this.slice.unsubscribe()},addProfileEvent:function e(t){t&&"function"===typeof t.listenTo&&this.listenTo(t,"change:business",this.updateSiteName)},updateSiteName:function e(t){this.$(".js-site-name").text(t.get("business"))},attachFolderEvents:function e(){var t=this;var r=this.el.querySelectorAll(".js-folder-title");Array.prototype.forEach.call(r,(function(e){e.addEventListener("click",(function(e){t.onFolderClicked(e)}))}))},onFolderClicked:function e(t){var r=t.currentTarget.parentNode.parentNode.parentNode;t.currentTarget.parentNode.parentNode.classList.toggle("is-collapsed");r.classList.toggle("is-collapsed-folder");r.classList.contains("is-dragging-item")&&r.classList.remove("is-dragging-item")},onSiteLanguageChange:function e(t){var r=this.el.querySelector(".js-site-languages");if("manage"===t.currentTarget.value){this.selectedLanguage?this.el.querySelector(".js-language option[value=".concat(this.selectedLanguage,"]")).selected=true:this.el.querySelectorAll(".js-language option")[0].selected=true;this.trigger("open:site-languages")}else{r.setAttribute("disabled","disabled");Editor.Events.once("siteframe:load",(function(){return r.removeAttribute("disabled")}));this.changeLanguage(t.currentTarget.value)}},changeLanguage:function e(t,r){var i=t||this.siteDataProvider.getDefaultLanguage();n.default.dispatch((0,c.changeLanguage)(i));this.changeSiteLanguage(i,r)},changeSiteLanguage:function e(t,r){this.selectedLanguage=t;this.trigger("change:language",this.selectedLanguage);this.collection.resetPageTree(this.getPageTreeByLangCode(this.selectedLanguage));this.closePanel();if(r){this.changePage(r);return}var n=this.getLanguageHomePage(this.selectedLanguage);this.changePage(n.ref)},getLanguageHomePage:function e(t){var r=this.getPageTreeByLangCode(t);var n=r.filter((function(e){return"home"===e.templateType})).shift();return n},onCloneClicked:function e(t){var r=this;var n=t.currentTarget.getAttribute("data-ref");var i=this.getPageModel(n);this.closeAllOptionsDropdown();this.pageCloner.setSelectedLanguage(this.selectedLanguage);this.pageCloner.clone(i).then((function(e){r.updatePages({currentPageRef:e.ref,selectedLanguage:e.language})}))},setupReorderEvents:function e(){var t=this;n.default.dispatch((0,u.orderPages)());this.setupTopLevelReorderEvents();var r=this.el.querySelectorAll(".js-sortable-folder");Array.prototype.forEach.call(r,(function(e){t.setupFolderSubpagesReorderEvents(e)}))},setupTopLevelReorderEvents:function e(){var t=this;var r=this.el.querySelector(".js-top-level");var n={ghostClass:"is-item-ghost-new",group:"reorder",animation:150,draggable:".js-draggable",handle:".js-drag-handle",dragClass:"is-dragging-item",onChoose:function e(){t.el.querySelector(".js-options.is-open")&&t.hideOptionDropdown(t.el.querySelector(".js-options.is-open"))},onMove:function e(r){var n=r.dragged;var i=r.related;var a=r.to;n.classList.contains("is-fixed-top-level")||i.classList.contains("is-folder-wrapper")&&t.openSortableFolderNode(i);if(t.isHomeMovingIntoFolder(n,a))return false;t.updatePagesInOrOutFolderUI(n,i);return true},onEnd:function e(){var r=t.getNewOrder();t.updatePagesWithOrder(r)}};i.default.create(r,n)},setupFolderSubpagesReorderEvents:function e(t){var r=this;var n={ghostClass:"is-item-ghost-new",group:"reorder",animation:150,draggable:".js-draggable",handle:".js-drag-handle",dragClass:"is-dragging-item",onChoose:function e(){r.el.querySelector(".js-options.is-open")&&r.hideOptionDropdown(r.el.querySelector(".js-options.is-open"))},onMove:function e(t){var n=t.dragged;var i=t.related;if(r.isFolderIndexPage(n)){if(r.isMovingIntoTopLevel(i))return false;if(r.isMovingIntoAnotherFolder(n,i))return false}else i.classList.contains("is-folder-wrapper")&&r.openSortableFolderNode(i);r.updatePagesInOrOutFolderUI(n,i);return true},onEnd:function e(){var t=r.getNewOrder();r.updatePagesWithOrder(t)}};i.default.create(t,n)},updatePagesInOrOutFolderUI:function e(t,r){if(this.isMovingPageIntoFolder(r)){t.classList.remove("pages-tree");t.classList.add("pages-tree__folder-wrapper");t.classList.add("pages-tree__folder-wrapper--no-icon");t.classList.add("is-folder-draggable-item")}else{t.classList.remove("pages-tree__folder-wrapper");t.classList.remove("pages-tree__folder-wrapper--no-icon");t.classList.remove("is-folder-draggable-item");t.classList.add("pages-tree")}},updatePagesWithOrder:function e(t){var r={pagesOrder:t,language:this.language};n.default.dispatch((0,u.updateOrder)(r))},updatePagesCollection:function e(){this.pageTree=n.default.getState().page.pages;this.collection.resetPageTree(this.pageTree)},openSortableFolderNode:function e(t){t.querySelector(".js-sortable-folder")&&t.querySelector(".js-sortable-folder").classList.remove("is-collapsed")},isFolderIndexPage:function e(t){return t.classList.contains("is-folder-index")},isMovingPageIntoFolder:function e(t){return t.parentNode.classList.contains("js-sortable-folder")},isHomeMovingIntoFolder:function e(t,r){return t.classList.contains("is-fixed-top-level")&&r.classList.contains("js-sortable-folder")},isMovingIntoAnotherFolder:function e(t,r){return t.getAttribute("data-folder-ref")!==r.parentNode.getAttribute("data-folder-ref")},isMovingIntoTopLevel:function e(t){return!t.parentNode.classList.contains("js-sortable-folder")},getNewOrder:function e(){var t=[];var r=this.el.querySelector(".js-top-level").children;var n=0;Array.prototype.forEach.call(r,(function(e){var r=e.getAttribute("data-page-ref");n+=1;t.push([parseInt(r,10),n,0]);if(e.classList.contains("is-folder-wrapper")){var i=e.querySelectorAll(".js-draggable");Array.prototype.forEach.call(i,(function(e){var i=e.getAttribute("data-page-ref");n+=1;t.push([parseInt(i,10),n,parseInt(r,10)])}))}}));return t},onV10SiteLanguageClicked:function e(){this.trigger("open:language-dropdown")},onV10AddSiteLanguageClicked:function e(){this.trigger("open:add-language")}});var A=t["default"]=O},15737:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(60989));var i=a(r(30605));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function l(e,t,r){t&&s(e.prototype,t);r&&s(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.pages,n=void 0===r?{}:r;o(this,e);this.pages=n;return this}l(e,[{key:"build",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.language,a=void 0===r?null:r,o=t.pageTree,s=void 0===o?{}:o;var l=i.default;Cocktail.mixin(l,n.default);return new l({pageTree:s,language:a,pages:this.pages})}}]);return e}();var c=t["default"]=u},71126:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(66573));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function c(e,t,r){t&&u(e.prototype,t);r&&u(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var d=new WeakMap;var f=function(){function e(t){l(this,e);d.set(this,o({},t))}c(e,[{key:"build",value:function e(){var t=d.get(this),r=t.envDataProvider;return new n.default({envDataProvider:r})}}]);return e}();var p=t["default"]=f},8110:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=s(r(57093));var i=s(r(7948));var a=s(r(46345));var o=s(r(35306));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function c(e,t,r){t&&u(e.prototype,t);r&&u(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.globalValuesCollection,n=void 0===r?{}:r,i=t.presetAttributesCollection,a=void 0===i?{}:i,o=t.contentStylesCollection,s=void 0===o?{}:o,u=t.fontListContents,c=void 0===u?{}:u,d=t.templateStylePreprocessorVariables,f=void 0===d?{}:d,p=t.allGoogleFonts,g=void 0===p?{}:p,h=t.siteDataProvider,v=void 0===h?{}:h,m=t.envDataProvider,y=void 0===m?{}:m,b=t.brandDataProvider,w=void 0===b?{}:b;l(this,e);this.globalValuesCollection=n;this.presetAttributesCollection=a;this.contentStylesCollection=s;this.fontListContents=c;this.templateStylePreprocessorVariables=f;this.allGoogleFonts=g;this.siteDataProvider=v;this.envDataProvider=y;this.brandDataProvider=w}c(e,[{key:"build",value:function e(){var t=this.siteDataProvider.get("templateData");var r=false;t.templateStylePreprocessorVariablesEnabled&&1===t.templateStylePreprocessorVariablesEnabled&&(r=true);return new n.default({globalValuesCollection:this.globalValuesCollection,presetAttributesCollection:this.presetAttributesCollection,contentStylesCollection:this.contentStylesCollection,templateStylePreprocessorVariables:this.templateStylePreprocessorVariables,fontListContents:this.fontListContents,allGoogleFonts:this.allGoogleFonts,themeRef:t.templateRef,siteRef:this.envDataProvider.get("siteRef"),protocol:this.envDataProvider.get("protocol"),v10CompatibilityMode:this.envDataProvider.get("V10CompatibilityMode"),brandDomain:this.brandDataProvider.get("brandDomain"),templateStylePreprocessorVariablesEnabled:r,ColourPickerView:i.default,FontPickerView:a.default,ImagesPanelView:o.default})}}]);return e}();var f=t["default"]=d},7794:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.formatPages=a;t.nestPages=o;var r=["subPages"];function n(e,t){if(null==e)return{};var r=i(e,t);var n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++){n=o[a];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function i(e,t){if(null==e)return{};var r={};var n=Object.keys(e);var i,a;for(a=0;a<n.length;a++){i=n[a];if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var t=[];e.forEach((function(e){if(e.subPages){var i=e.subPages,a=n(e,r);a.subPages=[];t.push(a);i.forEach((function(r){r.parentId=e.ref;t.push(r)}))}else t.push(e)}));return t}function o(e){var t=[];var r=[];e.forEach((function(e){"0"==="".concat(e.parentId)?t.push(e):r.push(e)}));r.forEach((function(e){t.forEach((function(t){if("".concat(t.ref)==="".concat(e.parentId)){t.subPages||(t.subPages=[]);t.subPages.push(e)}}))}));return t}},6388:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=h(r(50430));var i=h(r(281));var a=h(r(96002));var o=h(r(71831));var s=h(r(92122));var l=h(r(15737));var u=h(r(8110));var c=h(r(71126));var d=h(r(23078));var f=h(r(7952));var p=h(r(94003));var g=h(r(90237));function h(e){return e&&e.__esModule?e:{default:e}}function v(){var e=BaseKit.Globals.templateStylePreprocessorVariables.where({widget:"content"});var t=new BaseKit.Globals.TemplateStylePreprocessorVariables(e);return t}function m(e){e.factory("SiteStylePanelFactory",(function(e){return new u.default({globalValuesCollection:BaseKit.Globals.globalValues,presetAttributesCollection:BaseKit.Globals.presetAttributes,contentStylesCollection:v(),fontListContents:BaseKit.Static.fonts,templateStylePreprocessorVariables:BaseKit.Globals.templateStylePreprocessorVariables,allGoogleFonts:App.frontEndBucket.allGoogleFonts,siteDataProvider:e.SiteDataProvider,envDataProvider:e.EnvDataProvider,brandDataProvider:e.BrandDataProvider})}));e.factory("PagesPanelFactory",(function(e){return new i.default({pages:BaseKit.Globals.pages,profile:BaseKit.Globals.profile,envDataProvider:e.EnvDataProvider,userDataProvider:e.UserDataProvider,siteDataProvider:e.SiteDataProvider,pageCloner:e.pageCloner,featureFlagDataProvider:e.featureFlagDataProvider,languageState:e.StoreDataAdapterFactory.build({stateId:"language"})})}));e.factory("AddPagePanelFactory",(function(e){return new o.default({pageTypes:JSON.parse(JSON.stringify(Editor.Site.Theme.current.pageTypes)),envDataProvider:e.EnvDataProvider,tracker:e.Tracker,siteDataProvider:e.SiteDataProvider,featureFlagDataProvider:e.featureFlagDataProvider,serverVars:e.ServerVars})}));e.factory("EditPagePanelFactory",(function(e){return new s.default({featureFlagDataProvider:e.featureFlagDataProvider,envDataProvider:e.EnvDataProvider,tracker:e.Tracker})}));e.factory("PagesReorderPanelFactory",(function(){return new l.default({pages:BaseKit.Globals.pages})}));e.factory("SiteScriptsFactory",(function(e){return new c.default({envDataProvider:e.EnvDataProvider})}));e.factory("PageScriptsFactory",(function(e){return new d.default({envDataProvider:e.EnvDataProvider})}));e.factory("SiteLanguageFactory",(function(e){return new f.default({siteDataProvider:e.SiteDataProvider,languageDataProvider:e.LanguageDataProvider,envDataProvider:e.EnvDataProvider,userDataProvider:e.UserDataProvider,sessionTimeoutDialog:e.SessionTimeoutDialog,siteGlobalValuesHelper:e.SiteGlobalValuesHelper,tracker:e.Tracker})}));e.factory("pageCloner",(function(e){return new p.default({PageClonerDialogViewFactory:g.default,languageDataProvider:e.LanguageDataProvider,siteDataProvider:e.SiteDataProvider,envDataProvider:e.EnvDataProvider,multiLanguageEditor:e.featureFlagDataProvider.get("multiLanguageEditor")})}));e.factory("siteLanguageMenuSettingsPanel",(function(e){return new n.default({siteDataProvider:e.SiteDataProvider,languageDataProvider:e.LanguageDataProvider,envDataProvider:e.EnvDataProvider,sessionTimeoutDialog:e.SessionTimeoutDialog,siteGlobalValuesHelper:e.SiteGlobalValuesHelper})}));e.factory("PagesAndFoldersPanel",(function(e){return new a.default({PagesPanelFactory:e.PagesPanelFactory,AddPagePanelFactory:e.AddPagePanelFactory,EditPagePanelFactory:e.EditPagePanelFactory,PagesReorderPanelFactory:e.PagesReorderPanelFactory,SiteStylePanelFactory:e.SiteStylePanelFactory,SiteScriptsFactory:e.SiteScriptsFactory,PageScriptsFactory:e.PageScriptsFactory,SiteLanguageFactory:e.SiteLanguageFactory,envDataProvider:e.EnvDataProvider,siteGlobalValuesHelper:e.SiteGlobalValuesHelper,pageCloner:e.pageCloner,languageListUIState:e.StoreDataAdapterFactory.build({stateId:"ui.languageList"})})}));return e}var y=t["default"]=m},25369:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.Model=t.Model;this.Collection=t.Collection;this.RowPanelView=t.RowPanelView;this.dataTransformer=t.dataTransformer}i(e,[{key:"build",value:function e(t){var r=this.dataTransformer.transformRowData(t);var n=new this.Collection(r,{model:this.Model});this.rowPanelView=new this.RowPanelView({el:".js-widgets-overlay-panel",collection:n});return this.rowPanelView}}]);return e}();var o=t["default"]=a},5259:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({tagName:"li",events:{"click .js-widget":"hidePanel"},initialize:function e(){this.widgetType="widget.row";this.rowTemplate=this.model.get("value");this.model.on("widget:filtered",this.hideWidget.bind(this));this.model.on("widget:restored",this.showWidget.bind(this))},hideWidget:function e(){this.el.style.display="none"},showWidget:function e(){this.el.style.display=""}});var n=t["default"]=r},21217:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(55372);var i=s(r(5259));var a=s(r(15182));var o=r(9878);function s(e){return e&&e.__esModule?e:{default:e}}var l=Marionette.CompositeView.extend({childView:i.default,events:{"click .js-close-widget-overlay-panel":"hidePanel","click .js-widget":"hidePanel","click .js-search-footer":"footerSearchClicked","keyup .js-footer-search-field":"footerSearchKeyup"},render:function e(){var t=this.collection.toJSON();var r=Twig.render(Twig.templates.row_panel_container,{rows:t});(0,o.emptyElement)(this.el);this.el.innerHTML=r;this.attachChildrenEvents();this.onRender()},attachChildrenEvents:function e(){this.collection.each((function(e){this.attachRowItemFunction(e)}),this);this.delegateEvents()},attachRowItemFunction:function e(t){var r=new i.default({el:".js-widget[data-ref=".concat(t.get("ref"),"]"),model:t});this.proxyChildEvents(r);this.children.add(r)},initialize:function e(t){this.collection=t.collection;this.attachEditorEvents()},attachEditorEvents:function e(){Editor.Events.on("toolbar:togglePopover",this.togglePanel.bind(this));Editor.Events.on("widgetSettingsPanel:opened",this.hidePanel.bind(this));Editor.Events.on("dragdrop:clickToAddWidget",this.hidePanel.bind(this));Editor.Events.on("dragdrop:dragStart",this.hidePanel.bind(this))},footerSearchClicked:function e(){var t=this.search.getInput();this.search.applyFilter(t)},footerSearchKeyup:function e(t){this.search.handleKeyup(t)},togglePanel:function e(){if(this.el.classList.contains("is-open"))this.hidePanel();else{this.el.classList.add("is-open");this.giveSearchBoxFocus();this.hidePreviewBar()}},hidePreviewBar:function e(){if(n.deviceFeaturesHelper.isSmallDevice()){document.querySelector(".js-main-toolbar").classList.add("hidden");document.querySelector(".editor-body").classList.add("no-preview")}},showPreviewBar:function e(){if(n.deviceFeaturesHelper.isSmallDevice()){document.querySelector(".js-main-toolbar").classList.remove("hidden");document.querySelector(".editor-body").classList.remove("no-preview")}},giveSearchBoxFocus:function e(){this.el.querySelector(".js-footer-search-field").focus()},hidePanel:function e(){this.resetRowPanel();this.el.classList.remove("is-open")},resetRowPanel:function e(){this.search.clearInput();this.showPreviewBar();this.search.clearFilter()},onRender:function e(){this.search=new a.default({view:this});this.setTouchClasses()},setTouchClasses:function e(){"coarse"===n.deviceFeaturesHelper.getInputType()&&this.el.classList.add("mobile-panel")}});var u=t["default"]=l},27492:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r={defaults:{callback:"",custom:false,default:1,enabled:1,private:0,ref:1,version:"responsive"},transformRowData:function e(t){var r=this;var n=1;var i=t.map((function(e){var t={};Object.assign(t,r.defaults);t.type=e.id;t.value=e.id;t.name=e.name;t.title=e.name;t.ref=n;t.translatedName=e.name;n++;return t}));return i}};var n=t["default"]=r},54310:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(25369));var i=o(r(21217));var a=o(r(27492));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){e.factory("RowPanelFactory",(function(){return new n.default({Model:Backbone.Model.extend(),Collection:Backbone.Collection.extend(),RowPanelView:i.default,dataTransformer:a.default})}));return e}var l=t["default"]=s},80377:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(9878);var i=Marionette.ItemView.extend({template:"scroll_effects_panel",events:{"click .js-scroll-effects-cancel":"cancelChanges","click .js-scroll-effects-done":"closePanel","click .js-scroll-effects-bg":"cancelChanges","click .js-scroll-effects-item":"onScrollEffectClicked"},initialize:function e(t){this.dialogStyle=t.dialogStyle;this.currentScrollEffect=t.scrollEffect||"none";this.prevEffect=this.currentScrollEffect;this.effects=t.effects},render:function e(){var t=Twig.render(Twig.templates[this.template],{dialogStyle:this.dialogStyle,currentScrollEffect:this.currentScrollEffect,effects:this.effects});(0,n.emptyElement)(this.el);(0,n.append)(this.el,t);document.querySelector("body").insertAdjacentElement("beforeend",this.el);this.setElement(this.el);this.onRender();return this},onScrollEffectClicked:function e(t){this._clearActiveEffectClass();this._addActiveEffectClass(t.currentTarget);this.changeScrollEffect(t.currentTarget.dataset.name)},changeScrollEffect:function e(t){if(t===this.currentScrollEffect)return;this.trigger("scrollEffect:change",t);this.currentScrollEffect=t},closePanel:function e(){this.trigger("panel:close");this.destroy()},onRender:function e(){Editor.Events.on("screenMode:change",this.closePanel.bind(this))},cancelChanges:function e(){this.changeScrollEffect(this.prevEffect);this.closePanel()},_clearActiveEffectClass:function e(){this.el.querySelector(".is-current").classList.remove("is-current")},_addActiveEffectClass:function e(t){t.classList.add("is-current")}});var a=t["default"]=i},77527:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(9878);var i=Marionette.ItemView.extend({template:"section_gradient_panel",events:{"click .js-section-gradient-cancel":"cancelChanges","click .js-section-gradient-done":"closePanel","click .js-section-gradient-bg":"cancelChanges","click .js-section-gradient-item":"onSectionGradientClicked"},initialize:function e(t){this.dialogStyle=t.dialogStyle;this.currentSectionGradient=t.currentSectionGradient||"none";this.prevGradient=this.currentSectionGradient;this.sectionGradients=t.sectionGradients},render:function e(){var t=Twig.render(Twig.templates[this.template],{dialogStyle:this.dialogStyle,currentSectionGradient:this.currentSectionGradient,sectionGradients:this.sectionGradients});(0,n.emptyElement)(this.el);(0,n.append)(this.el,t);document.querySelector("body").insertAdjacentElement("beforeend",this.el);this.setElement(this.el);this.onRender();return this},onSectionGradientClicked:function e(t){this._clearActiveClass();this._addActiveClass(t.currentTarget);this.changeSectionGradient(t.currentTarget.dataset.name)},changeSectionGradient:function e(t){if(t===this.currentSectionGradient)return;this.trigger("gradient:change",t);this.currentSectionGradient=t},closePanel:function e(){this.trigger("panel:close");this.destroy()},onRender:function e(){Editor.Events.on("screenMode:change",this.closePanel.bind(this))},cancelChanges:function e(){this.changeSectionGradient(this.prevGradient);this.closePanel()},_clearActiveClass:function e(){this.el.querySelector(".is-current").classList.remove("is-current")},_addActiveClass:function e(t){t.classList.add("is-current")}});var a=t["default"]=i},74807:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(9878);var i=Marionette.ItemView.extend({template:"section_height_panel",events:{"click .js-section-height-cancel":"cancelChanges","click .js-section-height-done":"closePanel","click .js-section-height-bg":"cancelChanges","click .js-section-height-item":"onSectionHeightClicked"},initialize:function e(t){this.dialogStyle=t.dialogStyle;this.currentSectionHeight=t.currentSectionHeight||"default";this.prevHeight=this.currentSectionHeight;this.sectionHeights=t.sectionHeights},render:function e(){var t=Twig.render(Twig.templates[this.template],{dialogStyle:this.dialogStyle,currentSectionHeight:this.currentSectionHeight,sectionHeights:this.sectionHeights});(0,n.emptyElement)(this.el);(0,n.append)(this.el,t);document.querySelector("body").insertAdjacentElement("beforeend",this.el);this.setElement(this.el);this.onRender();return this},onSectionHeightClicked:function e(t){this._clearActiveClass();this._addActiveClass(t.currentTarget);this.changeSectionHeight(t.currentTarget.dataset.name)},changeSectionHeight:function e(t){if(t===this.currentSectionHeight)return;this.trigger("height:change",t);this.currentSectionHeight=t},closePanel:function e(){this.trigger("panel:close");this.destroy()},onRender:function e(){Editor.Events.on("screenMode:change",this.closePanel.bind(this))},cancelChanges:function e(){this.changeSectionHeight(this.prevHeight);this.closePanel()},_clearActiveClass:function e(){this.el.querySelector(".is-current").classList.remove("is-current")},_addActiveClass:function e(t){t.classList.add("is-current")}});var a=t["default"]=i},10805:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(9878);var i=a(r(31170));function a(e){return e&&e.__esModule?e:{default:e}}var o=Marionette.ItemView.extend({template:"section_link_panel",events:{"click .js-section-link-bg":"closePanel","click .js-section-link-copy":"copyLink","click .js-section-link-done":"closePanel","click .js-section-add-new-link":"createNewNavLink"},initialize:function e(t){this.pagesAndFoldersPanel=null;this.dialogStyle=t.dialogStyle;this.pageUrl=t.pageUrl;this.sectionId=t.sectionId;this.sectionLink="".concat(this.pageUrl,"#").concat(this.sectionId);this.copiedSuccessMessage=App.t("editor.section_link_picker.copied_success","Copied to clipboard")},render:function e(){var t=Twig.render(Twig.templates[this.template],{dialogStyle:this.dialogStyle,sectionLink:this.sectionLink});(0,n.emptyElement)(this.el);(0,n.append)(this.el,t);document.querySelector("body").insertAdjacentElement("beforeend",this.el);this.setElement(this.el);this.onRender();return this},createNewNavLink:function e(){var t=this.el.querySelector(".cl-text-input__input").value;var r="/".concat(t.split("/").slice(3).join("/"));this.closePanel();this.openLinkPanel(r)},openLinkPanel:function e(t){this.pagesAndFoldersPanel=i.default.container.PagesAndFoldersPanel;this.pagesAndFoldersPanel.openPagesPanel();var r=this.pagesAndFoldersPanel.pagesPanelView.el.querySelector(".js-pages-nav__surface");r.setAttribute("hidden",true);var n=this.pagesAndFoldersPanel.openAddPagePanel();n.$("li[data-type=page]").removeClass("is-selected");n.$("li[data-type=link]").addClass("is-selected");n.$("div[data-card-type=page]").prop("hidden",true);n.$("div[data-card-type=link]").removeAttr("hidden");n.$("input[name=page-link]").prop("value",t);n.$("input[name=link-page-title]").focus();var a=new URL(window.location);a.searchParams.set("sectionLink","true");window.history.pushState({},"",a)},closePanel:function e(){this.trigger("panel:close");this.destroy()},copyLink:function e(){if("clipboard"in navigator){navigator.clipboard.writeText(this.sectionLink);this.showCopiedMessage()}},onRender:function e(){Editor.Events.on("screenMode:change",this.closePanel.bind(this))},showCopiedMessage:function e(){var t=this;if(this.$(".js-copied-success").length<1){this.$(".js-section-add-new-link").before('<span class="dialog__panel-body__switch-notification js-copied-success">'.concat(this.copiedSuccessMessage,"</span>"));window.setTimeout((function(){t.$(".js-copied-success").fadeOut((function(){t.$(".js-copied-success").remove()}))}),4e3)}}});var s=t["default"]=o},69863:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(9878);var i=Marionette.ItemView.extend({template:"section_width_panel",events:{"click .js-section-width-cancel":"cancelChanges","click .js-section-width-done":"closePanel","click .js-section-width-bg":"cancelChanges","click .js-section-width-item":"onSectionWidthClicked"},initialize:function e(t){this.dialogStyle=t.dialogStyle;this.currentSectionWidth=t.currentSectionWidth||"default";this.prevWidth=this.currentSectionWidth;this.sectionWidths=t.sectionWidths},render:function e(){var t=Twig.render(Twig.templates[this.template],{dialogStyle:this.dialogStyle,currentSectionWidth:this.currentSectionWidth,sectionWidths:this.sectionWidths});(0,n.emptyElement)(this.el);(0,n.append)(this.el,t);document.querySelector("body").insertAdjacentElement("beforeend",this.el);this.setElement(this.el);this.onRender();return this},onSectionWidthClicked:function e(t){this._clearActiveClass();this._addActiveClass(t.currentTarget);this.changeSectionWidth(t.currentTarget.dataset.name)},changeSectionWidth:function e(t){if(t===this.currentSectionWidth)return;this.trigger("width:change",t);this.currentSectionWidth=t},closePanel:function e(){this.trigger("panel:close");this.destroy()},onRender:function e(){Editor.Events.on("screenMode:change",this.closePanel.bind(this))},cancelChanges:function e(){this.changeSectionWidth(this.prevWidth);this.closePanel()},_clearActiveClass:function e(){this.el.querySelector(".is-current").classList.remove("is-current")},_addActiveClass:function e(t){t.classList.add("is-current")}});var a=t["default"]=i},18306:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Backbone.View.extend({template:"session_timeout_dialog",events:{"click .js-cancel":"closeDialog","click .js-login":"login"},brandLoginUrl:"",initialize:function e(t){var r=t.brandLoginUrl;this.brandLoginUrl=r},login:function e(){""!==this.brandLoginUrl?window.top.location=this.brandLoginUrl:window.top.location.reload()},render:function e(){var t=Twig.render(Twig.templates[this.template]);var r=document.querySelectorAll(".js-dialog-contents");var n=r.item(r.length-1);n.insertAdjacentHTML("beforeend",t)}});var n=t["default"]=r},96958:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(9878);var i=a(r(31170));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return c(e)||u(e)||l(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}function u(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e){if(Array.isArray(e))return d(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f="dark";var p="none";var g=Marionette.ItemView.extend({template:"shape_divider_panel",events:{"click .js-shape-divider-cancel":"cancelChanges","click .js-shape-divider-done":"saveChanges","click .js-shape-divider-bg":"cancelChanges","click .js-shape-divider-item":"shapeDividerClicked","click .js-shape-divider-color-option":"colorClicked"},initialize:function e(t){this.dialogStyle=t.dialogStyle;this.shapeDividers=t.shapeDividers;this.styleSets=t.styleSets;this.currentShapeDivider=t.currentShapeDivider;this.currentShapeDividerColor=t.currentShapeDividerColor;this.prevShapeDivider=this.currentShapeDivider;this.prevShapeDividerColor=this.currentShapeDividerColor},render:function e(){var t=Twig.render(Twig.templates[this.template],{dialogStyle:this.dialogStyle,currentShapeDivider:this.currentShapeDivider,currentShapeDividerColor:this.currentShapeDividerColor,shapeDividers:this.shapeDividers,styleSets:this.styleSets});(0,n.emptyElement)(this.el);(0,n.append)(this.el,t);document.querySelector("body").insertAdjacentElement("beforeend",this.el);this.setElement(this.el);this.onRender();return this},onRender:function e(){Editor.Events.on("screenMode:change",this.closePanel.bind(this))},closePanel:function e(){this.trigger("panel:close");this.destroy()},saveChanges:function e(){i.default.container.Tracker.track("Shape divider updated");this.closePanel()},cancelChanges:function e(){if(this.prevShapeDivider!==this.currentShapeDivider||this.prevShapeDividerColor!==this.currentShapeDividerColor){"undefined"===typeof this.prevShapeDivider&&(this.prevShapeDivider=p);this.trigger("shapeDivider:change",{shapeDivider:this.prevShapeDivider,shapeDividerColor:this.prevShapeDividerColor})}this.closePanel()},shapeDividerClicked:function e(t){if(this._isSelectedTypeAllowed(t.currentTarget.getAttribute("data-name"))){this.currentShapeDivider=t.currentTarget.getAttribute("data-name");"undefined"===typeof this.currentShapeDividerColor&&(this.currentShapeDividerColor=f);this._clearSelectedShapeDividerClasses();this._addSelectedShapeDividerClass(t.currentTarget);this._updateColorSwitchVisibility(this.currentShapeDivider);this.updateShapeDivider();i.default.container.Tracker.track("Divider type selected",{shapeDividerType:this.currentShapeDivider})}},colorClicked:function e(t){if(this._isSelectedColorAllowed(t.currentTarget.getAttribute("data-name"))){this.currentShapeDividerColor=t.currentTarget.getAttribute("data-name");this._clearSelectedColorClasses();this._addSelectedColorClass(t.currentTarget);this.updateShapeDivider();i.default.container.Tracker.track("Divider colour selected",{shapeDividerColour:this.currentShapeDividerColor})}},updateShapeDivider:function e(){this.trigger("shapeDivider:change",{shapeDivider:this.currentShapeDivider,shapeDividerColor:this.currentShapeDividerColor})},_isSelectedColorAllowed:function e(t){return-1!==Object.keys(this.styleSets).indexOf(t)},_isSelectedTypeAllowed:function e(t){return-1!==this.shapeDividers.indexOf(t)},_clearSelectedShapeDividerClasses:function e(){o(this.el.querySelectorAll(".js-shape-divider-item")).forEach((function(e){e.classList.remove("is-current")}))},_addSelectedShapeDividerClass:function e(t){t.classList.add("is-current")},_clearSelectedColorClasses:function e(){o(this.el.querySelectorAll(".js-shape-divider-color-option")).forEach((function(e){e.classList.remove("is-current-color")}))},_addSelectedColorClass:function e(t){t.classList.add("is-current-color")},_updateColorSwitchVisibility:function e(t){var r=this.el.querySelector(".js-shape-divider-color-switch");t===p?r.setAttribute("hidden","true"):r.removeAttribute("hidden")}});var h=t["default"]=g},39884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Backbone.View.extend({template:"delete_language_dialog",events:{"click .js-cancel":"cancel","click .js-delete":"delete"},cancel:function e(){this.trigger("dialog:close")},delete:function e(){this.trigger("dialog:resolve","delete")},render:function e(){var t=Twig.render(Twig.templates[this.template]);var r=document.querySelectorAll(".js-dialog-contents");var n=r.item(r.length-1);n.insertAdjacentHTML("beforeend",t)}});var n=t["default"]=r},7952:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=f(r(86985));var i=f(r(60989));var a=f(r(7808));var o=f(r(9838));var s=f(r(69464));var l=r(24531);var u=f(r(14414));var c=f(r(39884));var d=f(r(22372));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function y(e,t,r){t&&m(e.prototype,t);r&&m(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var b=new WeakMap;var w=function(){function e(t){v(this,e);b.set(this,g({},t))}y(e,[{key:"build",value:function e(t){var r=b.get(this),u=r.envDataProvider,f=r.siteDataProvider,p=r.sessionTimeoutDialog,g=r.tracker;var h=u.get("localisedLanguages");var v=u.get("languages");var m=u.get("flags");var y=t.selectedLanguage;var w=function e(){var t=new c.default;var r=new n.default({contentClassname:"dialog__content--center",title:App.t("editor.dialog.title.delete_language","Delete Language"),content:t,render:false});s.default.dispatch((0,l.openModal)("deleteLanguage"));return r.render()};Cocktail.mixin(d.default,i.default);return new d.default({siteDataProvider:f,sessionTimeoutDialog:p,displayDeleteDialog:w,localisedLanguages:h,envDataProvider:u,languages:v,tracker:g,sessionUpdate:a.default,notification:o.default,selectedLanguage:y,flags:m,initAddLanguage:this.initAddLanguage.bind(this)})}},{key:"initAddLanguage",value:function e(){var t=b.get(this),r=t.tracker,n=t.envDataProvider;var i=n.get("languageCode");var a=n.get("flags")[i];var o=new u.default({tracker:r,languageCode:i,languageCodeFlag:a});return o.init()}}]);return e}();var _=t["default"]=w},50430:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(9838));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var l=new WeakMap;var u=Marionette.ItemView.extend({el:".js-language-settings-container",template:"language_settings_panel",panelIsOpen:false,events:{"click .js-save-settings":"saveValues","click .js-cancel-settings":"revertAndClose","change .js-input":"valueChanged"},initialize:function e(t){l.set(this,o({},t));this.render();this.attachEvents()},attachEvents:function e(){Editor.Events.on("sidebarPanel:changed pageSwitch:click dragdrop:dragStart visibility:click",this.revertAndClose.bind(this))},serializeData:function e(){var t={isVersionTenCompatibility:l.get(this).envDataProvider.get("V10CompatibilityMode")};var r=l.get(this).siteGlobalValuesHelper;var n=r.getValue("siteLanguageMenuSettings");null!==n&&Object.assign(t,n);return t},valueChanged:function e(){var t={menuType:this.el.querySelector('[name="menu-type"]').value,menuShade:this.el.querySelector('[name="menu-shade"]').value,menuStyle:this.el.querySelector('[name="menu-style"]').value};this.el.querySelector(".js-save-settings").removeAttribute("disabled");this.updateSite(t)},saveValues:function e(){var t={menuType:this.el.querySelector('[name="menu-type"]').value,menuShade:this.el.querySelector('[name="menu-shade"]').value,menuStyle:this.el.querySelector('[name="menu-style"]').value};var r=l.get(this).siteGlobalValuesHelper;r.saveValue("siteLanguageMenuSettings",t).then(this.updateSite(t)).then(this.notifyAndClose.bind(this)).catch(this.notifyError)},notifyAndClose:function e(){(0,n.default)(App.t("shared_views.language_panel.success","Success"),App.t("shared_views.language_panel.saved","Language menu settings saved"),"success");this.closePanel()},notifyError:function e(){(0,n.default)(App.t("shared_views.language_panel.error","Error"),App.t("shared_views.language_panel.not_saved","Unable to save language menu settings"),"error")},updateSite:function e(t){var r=document.getElementById("siteFrame");var n={siteLanguageMenuSettings:t,action:"rerender:languagemenu"};r&&r.contentWindow&&r.contentWindow.postMessage(n,"".concat(r.contentWindow.location.protocol,"//").concat(r.contentWindow.location.host))},openPanel:function e(){this.panelIsOpen=true;this.render();this._togglePanelOpenClass()},revertAndClose:function e(){var t=l.get(this).siteGlobalValuesHelper;this.updateSite(t.getValue("siteLanguageMenuSettings"));this.closePanel()},closePanel:function e(){this.panelIsOpen=false;this._togglePanelOpenClass()},_togglePanelOpenClass:function e(){var t=document.querySelector(".js-main-toolbar-overlay");if(this.panelIsOpen){this.el.classList.add("is-open");t.classList.add("is-displayed")}else{this.el.classList.remove("is-open");t.classList.remove("is-displayed")}}});var c=t["default"]=u},22372:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=l(r(69464));var i=r(32686);var a=r(37058);var o=l(r(62951));var s=l(r(62201));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function f(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){f(a,n,i,o,s,"next",e)}function s(e){f(a,n,i,o,s,"throw",e)}o(void 0)}))}}var g=new WeakMap;function h(e,t,r,n){return v.apply(this,arguments)}function v(){v=p(regeneratorRuntime.mark((function e(t,r,n,i){var a,o;return regeneratorRuntime.wrap((function e(s){while(1)switch(s.prev=s.next){case 0:a="".concat(r,"/sites/").concat(n,"/languages/").concat(t);s.next=3;return window.fetch(a,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":i},method:"DELETE"});case 3:o=s.sent;return s.abrupt("return",o.json());case 5:case"end":return s.stop()}}),e)})));return v.apply(this,arguments)}function m(e,t,r,n,i){return y.apply(this,arguments)}function y(){y=p(regeneratorRuntime.mark((function e(t,r,n,i,a){var o,s;return regeneratorRuntime.wrap((function e(l){while(1)switch(l.prev=l.next){case 0:o="".concat(n,"/sites/").concat(i,"/languages/").concat(t);l.next=3;return window.fetch(o,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":a},method:"PUT",body:JSON.stringify({active:r})});case 3:s=l.sent;return l.abrupt("return",s.json());case 5:case"end":return l.stop()}}),e)})));return y.apply(this,arguments)}var b=Marionette.ItemView.extend({template:"language_panel",siteAddLanguagePanelView:null,openOptionMenu:null,events:{"click .js-add-language":"addLanguage","click .js-option-button":"onOptionsClicked","click .js-change-active":"onActiveChanged","click .js-delete":"onDeleteClicked","click .js-back":"onClosePanel"},initialize:function e(t){g.set(this,c({},t));this.render();Editor.Events.on("page:change",this.closePanel.bind(this));this.documentHandler=this.documentClickHandler.bind(this);this.setupStoreListener()},onDestroy:function e(){this.slice.unsubscribe()},setupStoreListener:function e(){var t="language.siteLanguages";this.slice=new o.default({store:n.default,stateId:t});this.state=this.slice.get();this.slice.subscribe(this.handleStateChange.bind(this))},handleStateChange:function e(t){if((0,s.default)(this.state,t))return;var r=t;var n=this.state;r.length!==n&&this.render()},render:function e(){var t=g.get(this),r=t.languages,n=t.siteDataProvider,i=t.localisedLanguages,a=t.selectedLanguage;this.tplData={languages:r,localisedLanguages:i,selectedLanguage:a,siteLanguages:n.getSiteLanguages(),lightBackground:true};"function"===typeof this.mixinRenderTpl&&this.mixinRenderTpl()},addLanguage:function e(){this.options.initAddLanguage();n.default.dispatch((0,a.openAddLanguage)())},documentClickHandler:function e(t){var r=t.target;var n=false;while(r.parentNode){r.classList.contains("is-open")&&(n=true);r=r.parentNode}n||this.closeAllOptionsDropdown()},onOptionsClicked:function e(t){t.stopPropagation();var r=t.currentTarget.getAttribute("data-ref");var n=this.el.querySelector(".js-options[data-ref=".concat(r,"]"));if(n.classList.contains("is-open"))this.hideOptionDropdown(n);else{this.closeAllOptionsDropdown();this.showOptionDropdown(n)}},closeAllOptionsDropdown:function e(){var t=this.el.querySelectorAll(".js-options");Array.prototype.forEach.call(t,(function(e){e.setAttribute("hidden",true);e.classList.remove("is-open")}));document.removeEventListener("click",this.documentHandler,true)},showOptionDropdown:function e(t){t.removeAttribute("hidden");t.classList.add("is-open");document.addEventListener("click",this.documentHandler,true)},hideOptionDropdown:function e(t){t.setAttribute("hidden",true);t.classList.remove("is-open");document.removeEventListener("click",this.documentHandler,true)},onActiveChanged:function e(t){var r=t.currentTarget.getAttribute("data-ref");var n=t.currentTarget.getAttribute("data-active");this.changeSiteLangStatus(r,n);var i=this.el.querySelector(".js-status[data-ref=".concat(r,"]"));var a=this.el.querySelector(".js-change-active[data-ref=".concat(r,"] span"));if(1===parseInt(n,10)){i.removeAttribute("hidden");t.currentTarget.setAttribute("data-active",0);a.textContent=App.t("shared_views.language_panel.take_online","Take online")}else{i.setAttribute("hidden","hidden");t.currentTarget.setAttribute("data-active",1);a.textContent=App.t("shared_views.language_panel.take_offline","Take offline")}},changeSiteLangStatus:function e(t,r){var a=this;return p(regeneratorRuntime.mark((function e(){var o,s,l,u,c;return regeneratorRuntime.wrap((function e(d){while(1)switch(d.prev=d.next){case 0:o=1===parseInt(r,10)?0:1;s=g.get(a).notification;l=g.get(a).sessionUpdate;u=App.t("shared_views.language_panel.language_is_online","Language is now online");o||(u=App.t("shared_views.language_panel.language_is_offline","Language is now offline"));d.next=7;return m(t,o,a.getApiProxyBaseUrl(),a.getSiteRef(),a.getCsrfToken());case 7:c=d.sent;n.default.dispatch((0,i.setSiteLanguages)(c.siteLanguages));a.updateSite({siteLanguages:c.siteLanguages});s(u,false,"success");l();return d.abrupt("return",o);case 13:case"end":return d.stop()}}),e)})))()},onDeleteClicked:function e(t){var r=this;return p(regeneratorRuntime.mark((function e(){var n,i,a,o,s,l;return regeneratorRuntime.wrap((function e(u){while(1)switch(u.prev=u.next){case 0:n=g.get(r),i=n.displayDeleteDialog,a=n.sessionUpdate;o=t.currentTarget.getAttribute("data-ref");s=r.el.querySelector(".js-language-item[data-ref=".concat(o,"]"));u.next=5;return i();case 5:l=u.sent;l.dialog.hide();s.parentNode.removeChild(s);u.next=10;return h(o,r.getApiProxyBaseUrl(),r.getSiteRef(),r.getCsrfToken());case 10:u.next=12;return a();case 12:r.updateSite({siteLanguages:g.get(r).siteDataProvider.getSiteLanguages()});Editor.Events.trigger("language:deleted",o);r.closePanel();r.checkLangListLength();case 16:case"end":return u.stop()}}),e)})))()},checkLangListLength:function e(){if(0===this.el.querySelectorAll(".js-language-item").length){this.el.querySelector(".js-landing").removeAttribute("hidden");this.el.querySelector(".js-lang-list").setAttribute("hidden","hidden")}else{this.el.querySelector(".js-lang-list").removeAttribute("hidden");this.el.querySelector(".js-landing").setAttribute("hidden","hidden")}},updateSite:function e(t){var r=document.getElementById("siteFrame");var n=Object.assign({},t,{action:"rerender:languagemenu"});r&&r.contentWindow&&r.contentWindow.postMessage(n,"".concat(r.contentWindow.location.protocol,"//").concat(r.contentWindow.location.host))},onClosePanel:function e(t){t.preventDefault();this.closePanel()},closePanel:function e(){this.trigger("panel:closed");"function"===typeof this.mixinClosePanel&&this.mixinClosePanel();this.destroy()},getSiteRef:function e(){var t=g.get(this),r=t.envDataProvider;return r.get("siteRef")},getApiProxyBaseUrl:function e(){var t=g.get(this),r=t.envDataProvider;return r.get("apiProxyBaseUrl")},getCsrfToken:function e(){var t=g.get(this),r=t.envDataProvider;return r.get("csrfToken")}});var w=t["default"]=b},73908:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=l(r(69464));var i=l(r(13745));var a=r(38869);var o=r(24531);var s=l(r(78281));function l(e){return e&&e.__esModule?e:{default:e}}var u={value:{advertising:true,analytics:true,preferences:true}};var c=Marionette.ItemView.extend({className:"site-scripts-panel",template:"site_scripts_panel",el:".js-page-scripts-editor-container",currentTab:"head",events:{"click .js-bg":"closePanelClicked","click .js-close":"closePanelClicked","click .js-save":"saveScriptsClicked","click .js-dialog-tab-head":"dialogHeadTabClicked","click .js-dialog-tab-body":"dialogBodyTabClicked"},initialize:function e(t){this.globalValuesCollection=BaseKit.Globals.globalValues;this.pageRef=t.pageRef;this.pageTitle=t.title;this.envDataProvider=t.envDataProvider;this.getScriptsFromGlobalCollection();this.getOptionsFromGlobalCollection();this.render()},render:function e(){var t="force"===n.default.getState().brand.cookieWarningSetting;var r=n.default.getState().site.enableCookiePolicyPage;var a=n.default.getState().site.cookieWarning;var o=r||t||a;var s=(0,i.default)("shared_views.pagespanel.page_scripts_placeholder","Page Scripts: %1",this.pageTitle);var l=Twig.render(Twig.templates[this.template],{title:s,renderPrivacyOptions:o});this.$el.empty().append(l);this.onRender();return this},onRender:function e(){this.loadHeadScripts();this.loadHeadOptions()},setupCodePanel:function e(t){this.editorPanel||(this.editorPanel=this.initializeCodeEditor(t.textAreaId));this.editorPanel.setValue(t.value)},getScriptsFromGlobalCollection:function e(){var t=(0,s.default)(this.pageRef);this.headScriptPage=t.get("headScript")||"";this.bodyScriptPage=t.get("bodyScript")||""},getOptionsFromGlobalCollection:function e(){var t=(0,s.default)(this.pageRef);this.getHeadOptionsFromGlobalCollection(t);this.getBodyOptionsFromGlobalCollection(t)},getHeadOptionsFromGlobalCollection:function e(t){if(Array.isArray(t.get("headScriptOptions"))){this.headOptionsPage=u.value;return}this.headOptionsPage=t.get("headScriptOptions")||u.value},getBodyOptionsFromGlobalCollection:function e(t){if(Array.isArray(t.get("bodyScriptOptions"))){this.bodyOptionsPage=u.value;return}this.bodyOptionsPage=t.get("bodyScriptOptions")||u.value},loadHeadScripts:function e(){this.setupCodePanel({textAreaId:"user-scripts-code-editor",value:this.headScriptPage})},loadHeadOptions:function e(){this.setElOptionValues(this.headOptionsPage)},loadBodyScripts:function e(){this.setupCodePanel({textAreaId:"user-scripts-code-editor",value:this.bodyScriptPage})},loadBodyOptions:function e(){this.setElOptionValues(this.bodyOptionsPage)},initializeCodeEditor:function e(t){return CodeMirror.fromTextArea(document.getElementById(t),{lineNumbers:false,matchBrackets:true,extraKeys:{Enter:"newlineAndIndentContinueComment"},mode:"htmlmixed"})},closePanelClicked:function e(){n.default.dispatch((0,o.closeModal)());this.setElement(this.$(".code-editor-panel"));delete this.editorPanel;this.destroy()},saveScriptsClicked:function e(){if("head"===this.currentTab){this.storeHeadScriptChanges();this.storeHeadOptionsChanges()}else{this.storeBodyScriptChanges();this.storeBodyOptionsChanges()}this.data=(0,s.default)(this.pageRef).toJSON();this.setHeadScripts(this.data);this.setHeadOptions(this.data);this.setBodyScripts(this.data);this.setBodyOptions(this.data);var t=this.envDataProvider.get("csrfToken");var r=this.envDataProvider.get("apiProxyBaseUrl");var i=this.envDataProvider.get("siteRef");var o="".concat(r,"/sites/").concat(i,"/pages/").concat(this.pageRef);var l=n.default.getState().language;var u=l.current;u===l.defaultLanguage.language&&(u="");n.default.dispatch((0,a.setScript)(o,t,this.data,u));this.closePanelClicked()},setHeadScripts:function e(t){t.headscript=this.headScriptPage;t.headScript=this.headScriptPage},setHeadOptions:function e(t){t.headScriptOptions=this.headOptionsPage},setBodyScripts:function e(t){t.bodyscript=this.bodyScriptPage;t.bodyScript=this.bodyScriptPage},setBodyOptions:function e(t){t.bodyScriptOptions=this.bodyOptionsPage},dialogHeadTabClicked:function e(){if("head"===this.currentTab)return;this.currentTab="head";this.storeBodyScriptChanges();this.storeBodyOptionsChanges();this.loadHeadScripts();this.loadHeadOptions();this.$(".js-dialog-tab-body").removeClass("is-active");this.$(".js-dialog-tab-head").addClass("is-active")},dialogBodyTabClicked:function e(){if("body"===this.currentTab)return;this.currentTab="body";this.storeHeadScriptChanges();this.storeHeadOptionsChanges();this.loadBodyScripts();this.loadBodyOptions();this.$(".js-dialog-tab-head").removeClass("is-active");this.$(".js-dialog-tab-body").addClass("is-active")},storeHeadScriptChanges:function e(){this.headScriptPage=this.editorPanel.getValue()},storeHeadOptionsChanges:function e(){if(!this.optionValuesShown())return;this.headOptionsPage=this.getElOptionValues()},storeBodyScriptChanges:function e(){this.bodyScriptPage=this.editorPanel.getValue()},storeBodyOptionsChanges:function e(){if(!this.optionValuesShown())return;this.bodyOptionsPage=this.getElOptionValues()},optionValuesShown:function e(){return!!this.el.querySelector("#privacy-options-section")},setElOptionValues:function e(t){var r=t.advertising,n=t.analytics,i=t.preferences;if(!this.optionValuesShown())return;this.el.querySelector("#advertising-checkbox").checked=r;this.el.querySelector("#preferences-checkbox").checked=i;this.el.querySelector("#analytics-checkbox").checked=n},getElOptionValues:function e(){return{advertising:this.el.querySelector("#advertising-checkbox").checked,preferences:this.el.querySelector("#preferences-checkbox").checked,analytics:this.el.querySelector("#analytics-checkbox").checked}}});var d=t["default"]=c},66573:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=l(r(13745));var i=r(9878);var a=l(r(69464));var o=r(24531);var s=r(83748);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var f=new WeakMap;var p={value:{advertising:true,analytics:true,preferences:true}};var g={value:""};var h=Marionette.ItemView.extend({className:"site-scripts-panel",template:"site_scripts_panel",el:".js-page-scripts-editor-container",currentTab:"head",events:{"click .js-bg":"closePanelClicked","click .js-close":"closePanelClicked","click .js-save":"saveScriptsClicked","click .js-dialog-tab-head":"dialogHeadTabClicked","click .js-dialog-tab-body":"dialogBodyTabClicked"},initialize:function e(t){f.set(this,c({},t));this.globalValuesCollection=BaseKit.Globals.globalValues;this.getScriptsFromGlobalCollection();this.render()},render:function e(){var t="force"===a.default.getState().brand.cookieWarningSetting;var r=a.default.getState().site.enableCookiePolicyPage;var o=a.default.getState().site.cookieWarning;var s=r||t||o;var l=(0,n.default)("shared_views.pagespanel.site_scripts","Site Scripts");var u=Twig.render(Twig.templates[this.template],{title:l,renderPrivacyOptions:s});(0,i.emptyElement)(this.el);(0,i.append)(this.el,u);this.onRender();return this},onRender:function e(){this.loadHeadScripts();this.optionValuesShown()&&this.loadHeadOptions()},setupCodePanel:function e(t){var r=t.textAreaId,n=t.value;this.editorPanel||(this.editorPanel=this.initializeCodeEditor(r));this.editorPanel.setValue(n)},getScriptsFromGlobalCollection:function e(){this.getGlobalHeadScript();this.getGlobalHeadScriptOptions();this.getGlobalBodyScript();this.getGlobalBodyScriptOptions()},getGlobalHeadScript:function e(){var t=this.globalValuesCollection.get("headScript");if(t)this.headScriptGlobal=t;else{this.headScriptGlobal=new BaseKit.Globals.SiteGlobalValueModel(c(c({},g),{},{name:"headScript"}));this.globalValuesCollection.add(this.headScriptGlobal,{silent:true})}var r=f.get(this),n=r.envDataProvider;this.headScriptGlobal.siteRef=n.get("siteRef")},getGlobalBodyScript:function e(){var t=this.globalValuesCollection.get("bodyScript");if(t)this.bodyScriptGlobal=t;else{this.bodyScriptGlobal=new BaseKit.Globals.SiteGlobalValueModel(c(c({},g),{},{name:"bodyScript"}));this.globalValuesCollection.add(this.bodyScriptGlobal,{silent:true})}var r=f.get(this),n=r.envDataProvider;this.bodyScriptGlobal.siteRef=n.get("siteRef")},getGlobalBodyScriptOptions:function e(){var t=this.globalValuesCollection.get("bodyScriptOptions");if(t)this.bodyScriptGlobalOptions=t;else{this.bodyScriptGlobalOptions=new BaseKit.Globals.SiteGlobalValueModel(c(c({},p),{},{name:"bodyScriptOptions"}));this.globalValuesCollection.add(this.bodyScriptGlobalOptions,{silent:true})}var r=f.get(this),n=r.envDataProvider;this.bodyScriptGlobalOptions.siteRef=n.get("siteRef")},getGlobalHeadScriptOptions:function e(){var t=this.globalValuesCollection.get("headScriptOptions");if(t)this.headScriptGlobalOptions=t;else{this.headScriptGlobalOptions=new BaseKit.Globals.SiteGlobalValueModel(c(c({},p),{},{name:"headScriptOptions"}));this.globalValuesCollection.add(this.headScriptGlobalOptions,{silent:true})}var r=f.get(this),n=r.envDataProvider;this.headScriptGlobalOptions.siteRef=n.get("siteRef")},loadHeadScripts:function e(){this.setupCodePanel({textAreaId:"user-scripts-code-editor",value:this.headScriptGlobal.get("value")})},loadHeadOptions:function e(){var t=this.headScriptGlobalOptions.get("value")||p.value;this.setOptionValues(t)},loadBodyScripts:function e(){this.setupCodePanel({textAreaId:"user-scripts-code-editor",value:this.bodyScriptGlobal.get("value")})},loadBodyOptions:function e(){var t=this.bodyScriptGlobalOptions.get("value")||p.value;this.setOptionValues(t)},initializeCodeEditor:function e(t){return CodeMirror.fromTextArea(document.getElementById(t),{lineNumbers:false,matchBrackets:true,extraKeys:{Enter:"newlineAndIndentContinueComment"},mode:"htmlmixed"})},closePanelClicked:function e(){a.default.dispatch((0,o.closeModal)());this.setElement(this.el.querySelector(".code-editor-panel"));delete this.editorPanel;this.destroy();(0,s.openIntercom)()},saveScriptsClicked:function e(){"head"===this.currentTab?this.storeHeadScriptChanges():this.storeBodyScriptChanges();this.saveHead();this.saveBody();this.closePanelClicked()},saveHead:function e(){this.headScriptGlobal.save();this.headScriptGlobalOptions.save();this.globalValuesCollection.get("headScript").set("value",this.headScriptGlobal.get("value"));this.globalValuesCollection.get("headScriptOptions").set("value",this.headScriptGlobalOptions.get("value"))},saveBody:function e(){this.bodyScriptGlobal.save();this.bodyScriptGlobalOptions.save();this.globalValuesCollection.get("bodyScript").set("value",this.bodyScriptGlobal.get("value"));this.globalValuesCollection.get("bodyScriptOptions").set("value",this.bodyScriptGlobalOptions.get("value"))},dialogHeadTabClicked:function e(){if("head"===this.currentTab)return;this.currentTab="head";this.storeBodyScriptChanges();this.storeBodyOptionsChanges();this.loadHeadScripts();this.loadHeadOptions();this.el.querySelector(".js-dialog-tab-body").classList.remove("is-active");this.el.querySelector(".js-dialog-tab-head").classList.add("is-active")},dialogBodyTabClicked:function e(){if("body"===this.currentTab)return;this.currentTab="body";this.storeHeadScriptChanges();this.storeHeadOptionsChanges();this.loadBodyScripts();this.loadBodyOptions();this.el.querySelector(".js-dialog-tab-head").classList.remove("is-active");this.el.querySelector(".js-dialog-tab-body").classList.add("is-active")},storeHeadScriptChanges:function e(){this.headScriptGlobal.set("value",this.editorPanel.getValue());this.optionValuesShown()&&this.headScriptGlobalOptions.set("value",this.getOptionValues())},storeHeadOptionsChanges:function e(){if(!this.optionValuesShown())return;var t=this.globalValuesCollection.get("headScriptOptions");var r=t.get("value");this.headScriptGlobalOptions.set("value",r)},storeBodyScriptChanges:function e(){this.bodyScriptGlobal.set("value",this.editorPanel.getValue());this.optionValuesShown()&&this.bodyScriptGlobalOptions.set("value",this.getOptionValues())},storeBodyOptionsChanges:function e(){if(!this.optionValuesShown())return;var t=this.globalValuesCollection.get("bodyScriptOptions");var r=t.get("value");this.bodyScriptGlobalOptions.set("value",r)},optionValuesShown:function e(){return!!this.el.querySelector("#privacy-options-section")},setOptionValues:function e(t){var r=t.advertising,n=t.analytics,i=t.preferences;if(!this.optionValuesShown())return;this.el.querySelector("#advertising-checkbox").checked=r;this.el.querySelector("#preferences-checkbox").checked=i;this.el.querySelector("#analytics-checkbox").checked=n},getOptionValues:function e(){return{advertising:this.el.querySelector("#advertising-checkbox").checked,preferences:this.el.querySelector("#preferences-checkbox").checked,analytics:this.el.querySelector("#analytics-checkbox").checked}}});var v=t["default"]=h},57093:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=d(r(86985));var i=d(r(69464));var a=r(83489);var o=r(43276);var s=r(83748);var l=d(r(37977));var u=d(r(13745));var c=d(r(62316));function d(e){return e&&e.__esModule?e:{default:e}}var f=Marionette.ItemView.extend({template:"site_styles_panel",className:"slide-in-panel site-styles-panel-container",events:{"click .js-cancel":"closePanel","click .js-colour-back":"closeColourPalette","click .js-font-back":"closeFontPicker","click .js-colour-set-button":"showColourSetPalette","click .js-solid-colour-button":"showSolidColourPalette","click .js-gradient-colour-button":"showGradientColourPalette","click .js-change-image":"openImagePopup","click .js-content-styles-button":"showStyleOptions","click .js-reset-styles":"resetStylesButtonClicked","change .js-body-background-select":"changeBodyBackgroundType","change .js-gradient-type-select":"changeGradientType","change .js-image-scale-select":"changeImageScale","change .js-image-alignment-horizontal-select":"changeImageAlignment","change .js-image-alignment-vertical-select":"changeImageAlignment","change .js-image-repeat-select":"changeImageRepeat"},colourPicker:null,fontPicker:null,$colourPicker:null,$body:null,initialize:function e(t){this.globalValuesCollection=t.globalValuesCollection;this.presetAttributesCollection=t.presetAttributesCollection;this.contentStylesCollection=t.contentStylesCollection;this.templateStylePreprocessorVariables=t.templateStylePreprocessorVariables;this.fontListContents=t.fontListContents;this.allGoogleFonts=t.allGoogleFonts;this.themeRef=t.themeRef;this.siteRef=t.siteRef;this.brandDomain=t.brandDomain;this.protocol=t.protocol;this.templateStylePreprocessorVariablesEnabled=t.templateStylePreprocessorVariablesEnabled;this.ColourPickerView=t.ColourPickerView;this.FontPickerView=t.FontPickerView;this.ImagesPanelView=t.ImagesPanelView;this.v10CompatibilityMode=t.v10CompatibilityMode;this.$body=$("#siteFrame").contents().find("body");this.listenTo(this,"open:panel",this.openPanel);this.renderToDom();this.attachEvents();return this},renderToDom:function e(){var t=this;this.render();$(".js-style-panel-wrapper").empty().append(this.$el);setTimeout((function(){t.openPanel()}),100)},attachEvents:function e(){this.v10CompatibilityMode&&Editor.Events.on("sidebarPanel:changed pageSwitch:click dragdrop:dragStart visibility:click",this.closePanel.bind(this))},serializeData:function e(){return{globalValues:this.globalValuesCollection.toProcessedJSON(),presetAttributes:this.presetAttributesCollection.toProcessedJSON(),contentStyles:this.replaceStyleVariablesWithColour(this.contentStylesCollection.toJSON()),v10CompatibilityMode:i.default.getState().env.V10CompatibilityMode,mainTitle:(0,u.default)("shared_views.site_styles_panel.main_title","Design")}},replaceStyleVariablesWithColour:function e(t){var r=this;var n=/^@[a-z0-9-_]*$/;t.map((function(e){e.value&&e.value.match(n)&&(e.value=r.getColourFromVariableName(e.value));return e}));return t},getColourFromVariableName:function e(t){var r=/^@[a-z0-9-_]*$/;var n="#000";var i;try{n=Editor.Site.Presets.getValueFromLessVar(t)}catch(e){i=this.templateStylePreprocessorVariables.findWhere({name:t.substring(1)});if(!i)return n;n=i.get("value").match(r)?this.getColourFromVariableName(i.get("value")):i.get("value")}return n},changeBodyBackgroundType:function e(t){var r=$(t.target).val();if("solid"===r){this.hideImageBodyBackgroundOptions();this.hideGradientBodyBackgroundOptions();this.setBodyClassForBackgroundColour();this.saveBackgroundType("solidcolor");return this.showSolidBodyBackgroundOptions()}if("gradient"===r){this.hideImageBodyBackgroundOptions();this.hideSolidBodyBackgroundOptions();this.setBodyClassForGradient();this.saveBackgroundType("gradient");return this.showGradientBodyBackgroundOptions()}if("image"===r){this.hideSolidBodyBackgroundOptions();this.hideGradientBodyBackgroundOptions();this.setBodyClassForImage();this.saveBackgroundType("image");return this.showImageBodyBackgroundOptions()}return null},saveBackgroundType:function e(t){this.getGlobalValuesModel("backgroundtype").set("value",t);this.updateStyleSheet()},hideSolidBodyBackgroundOptions:function e(){var t=document.querySelector(".js-solid-container");t.setAttribute("hidden","hidden")},hideImageBodyBackgroundOptions:function e(){var t=document.querySelector(".js-image-container");t.setAttribute("hidden","hidden")},hideGradientBodyBackgroundOptions:function e(){var t=document.querySelector(".js-gradient-container");t.setAttribute("hidden","hidden")},showImageBodyBackgroundOptions:function e(){var t=document.querySelector(".js-image-container");t.removeAttribute("hidden")},showSolidBodyBackgroundOptions:function e(){var t=document.querySelector(".js-solid-container");t.removeAttribute("hidden")},showGradientBodyBackgroundOptions:function e(){var t=document.querySelector(".js-gradient-container");t.removeAttribute("hidden")},updateStyleSheet:function e(){var t={globalValues:this.globalValuesCollection.toProcessedJSON(),preprocessorVariables:this.presetAttributesCollection.toProcessedJSON(),templateStylePreprocessorVariables:this.contentStylesCollection.toProcessedJSON()};var r=App.session.get("siteRef");window.parent.fetch("/site-css-template-model/".concat(r),{credentials:"include",method:"POST",body:JSON.stringify(t),headers:{"X-CSRF-TOKEN":App.frontEndBucket.csrfToken}}).then((function(e){401===e.status&&Editor.Responsive.displaySessionTimeoutDialog();return e.text()})).then((function(e){Editor.Site.Dom.replaceCss(e);Editor.Site.Dom.cleanUpStyles()}))},openImagePopup:function e(){this.imagesPanelView=new this.ImagesPanelView({model:new BaseKit.Panels.Model({panel:"upload",parentPanel:void 0,subPanel:false,isSubPanel:false,showSaveBtn:false,title:App.t("shared_components.imagespanel.source_title","Image source")})}).render();this.listenTo(this.imagesPanelView,"asset:change",this.setAsset)},setAsset:function e(t){var r=t.url.replace(/http[s]?:\/\//i,"//");var n=$(".js-image-scale-select").val();this.getGlobalValuesModel("backgroundtype").set("value","image");this.getGlobalValuesModel("backgroundImageUrl").set("value",r);this.getPresetAttributeModel("@siteBackgroundImage").set("value","url(".concat(r,")"));this.getPresetAttributeModel("@siteBackgroundImageScale").set("value",n);$(".js-image-thumbnail").attr("src",r);this.updateStyleSheet();this.setBodyClassForImage()},setBodyClassForImage:function e(){var t=this.getPresetAttributeModel("@siteBackgroundImageScale").get("value");switch(t){case"original":this.$body.addClass("bgImageOriginal");this.$body.removeClass("bgImageFullscreen");this.$body.removeClass("bc");this.$body.removeClass("bgradVertical");this.$body.removeClass("bgradHorizontal");this.$body.removeClass("bgradCircular");this.$body.removeClass("bgImageFullscreen");return;case"full":this.$body.addClass("bgImageFullscreen");this.$body.removeClass("bgImageOriginal");this.$body.removeClass("bc");this.$body.removeClass("bgradVertical");this.$body.removeClass("bgradHorizontal");this.$body.removeClass("bgradCircular");this.$body.removeClass("bgImageOriginal")}},changeImageScale:function e(t){var r=$(t.target).val();this.getPresetAttributeModel("@siteBackgroundImageScale").set("value",r);this.updateStyleSheet();this.setBodyClassForImage()},changeImageAlignment:function e(){var t=$(".js-image-alignment-horizontal-select").val();var r=$(".js-image-alignment-vertical-select").val();this.getPresetAttributeModel("@siteBackgroundPositionX").set("value",t);this.getPresetAttributeModel("@siteBackgroundPositionY").set("value",r);this.updateStyleSheet();this.setBodyClassForImage()},changeImageRepeat:function e(t){var r=$(t.currentTarget).val();this.getPresetAttributeModel("@siteBackgroundRepeat").set("value",r);this.updateStyleSheet();this.setBodyClassForImage()},showSolidColourPalette:function e(){this.showColourPicker(this.getPresetAttributeModel("@siteBackgroundColor"),this.setBackgroundColour.bind(this))},showColourSetPalette:function e(t){var r=this;var n=t.currentTarget.getAttribute("data-name");this.showColourPicker(this.getPresetAttributeModel(n),(function(e,t){r.getPresetAttributeModel(n).set("value",t);r.el.querySelector('.js-colour-set-button[data-name="'.concat(n,'"] span')).style.backgroundColor=t;r.updateSiteColourSet(n.replace("@color--",""),t);r.updateStyleSheet()}))},updateSiteColourSet:function e(t,r){var n=(0,l.default)(i.default.getState().env.siteColorSet);n[t].background=r;i.default.dispatch((0,o.updateSiteColorSet)(n))},showStyleOptions:function e(t){var r=$(t.currentTarget).data("content-style-type");switch(r){case"colour":return this.showContentStylesColourPalette(t);case"font":return this.showContentStylesFontOptione(t)}return null},showContentStylesFontOptione:function e(t){var r=$(t.currentTarget).data("content-style-name");var n=this.getContentStyleModel(r);if("undefined"===typeof n)return;this.showFontOptions(n,this.updateFont.bind(this))},showContentStylesColourPalette:function e(t){var r=$(t.currentTarget).data("content-style-name");var n=this.getContentStyleModel(r);if("undefined"===typeof n)return;this.showColourPicker(n,this.updateContentStyle.bind(this))},updateFont:function e(){this.updateStyleSheet()},updateContentStyle:function e(t,r){var n=this.getContentStyleModel(t);$('button[data-content-style-name="'.concat(t,'"] > span')).css("background-color",r);n.set("value",r);this.updateStyleSheet()},setBackgroundColour:function e(t,r){this.getPresetAttributeModel("@siteBackgroundColor").set("value",r);this.getGlobalValuesModel("backgroundtype").set("value","solidcolor");this.$(".js-solid-colour-button > span").css("background-color",r);this.updateStyleSheet();this.setBodyClassForBackgroundColour()},setBodyClassForBackgroundColour:function e(){this.$body.addClass("bc");this.$body.removeClass("bgradVertical");this.$body.removeClass("bgradHorizontal");this.$body.removeClass("bgradCircular");this.$body.removeClass("bgImageOriginal");this.$body.removeClass("bgImageFullscreen")},showGradientColourPalette:function e(t){var r=$(t.currentTarget).data("colour");var n="one"===r?"@siteBackgroundGradientFrom":"@siteBackgroundGradientTo";this.showColourPicker(this.getPresetAttributeModel(n),this.setGradientColour.bind(this))},setGradientColour:function e(t,r){var n=this.presetAttributesCollection.findWhere({ref:t});n.set("value",r);this.getGlobalValuesModel("backgroundtype").set("value","gradient");this.updateStyleSheet();this.setBodyClassForGradient();switch(n.get("name")){case"@siteBackgroundGradientFrom":this.$('.js-gradient-colour-button[data-colour="one"] > span').css("background-color",r);return;case"@siteBackgroundGradientTo":this.$('.js-gradient-colour-button[data-colour="two"] > span').css("background-color",r)}},changeGradientType:function e(t){var r=$(t.target).val();this.getGlobalValuesModel("backgroundtype").set("value","gradient");this.getPresetAttributeModel("@siteBackgroundGradientType").set("value",r);this.updateStyleSheet();this.setBodyClassForGradient()},setBodyClassForGradient:function e(){var t=this.getPresetAttributeModel("@siteBackgroundGradientType").get("value");var r=this.getPresetAttributeModel("@siteBackgroundGradientFrom").get("value");var n=this.getPresetAttributeModel("@siteBackgroundGradientTo").get("value");if("undefined"===typeof r||"undefined"===typeof n)return;if("transparent"===r&&"transparent"===n)return;this.$body.removeClass("bc");this.$body.removeClass("bgImageFullscreen");this.$body.removeClass("bgImageOriginal");switch(t){case"vertical":this.$body.addClass("bgradVertical");this.$body.removeClass("bgradHorizontal");this.$body.removeClass("bgradCircular");return;case"horizontal":this.$body.addClass("bgradHorizontal");this.$body.removeClass("bgradVertical");this.$body.removeClass("bgradCircular");return;case"circular":this.$body.addClass("bgradCircular");this.$body.removeClass("bgradVertical");this.$body.removeClass("bgradHorizontal")}},getContentStyleModel:function e(t){return this.contentStylesCollection.findWhere({name:t})},getPresetAttributeModel:function e(t){var r=this.presetAttributesCollection.findWhere({name:t});if("undefined"===typeof r){r=new BaseKit.Globals.PresetAttribute({name:t,value:null});this.presetAttributesCollection.add(r)}return r},getGlobalValuesModel:function e(t){var r=this.globalValuesCollection.findWhere({name:t});if("undefined"===typeof r){r=new BaseKit.Globals.SiteGlobalValueModel({name:t,value:null});this.globalValuesCollection.add(r)}r.siteRef||(r.siteRef=App.session.get("siteRef"));return r},showColourPicker:function e(t,r){var n=this;null===this.colourPicker&&(this.colourPicker=new this.ColourPickerView({el:".js-colour-contents",afterRender:function e(){return n.openColourPalette()},colourChosen:r}));this.colourPicker.setModel(t);this.colourPicker.render()},showFontOptions:function e(t,r){var n=this;null===this.fontPicker&&(this.fontPicker=new this.FontPickerView({el:".js-font-contents",fontListContents:this.fontListContents,allGoogleFonts:this.allGoogleFonts,templateStylePreprocessorVariablesEnabled:this.templateStylePreprocessorVariablesEnabled,afterRender:function e(){return n.openFontPicker()}}));this.fontPicker.setModel(t);this.fontPicker.setFontChosen(r);this.fontPicker.render()},openPanel:function e(){this.$el.addClass("is-open");(0,s.closeIntercom)()},closePanel:function e(){i.default.dispatch((0,a.closePanel)());this.$el.removeClass("is-open");(0,s.openIntercom)()},openColourPalette:function e(){this.$el.find(".js-site-styles-panel").removeClass("is-open");this.$el.find(".js-colour-picker-container").addClass("is-open")},openFontPicker:function e(){$(".js-site-styles-panel").removeClass("is-open");$(".js-font-picker-container").addClass("is-open")},closeColourPalette:function e(){$(".js-site-styles-panel").addClass("is-open");$(".js-colour-picker-container").removeClass("is-open");this.colourPicker.setElement(this.$(".js-colour-picker-wrapper"));this.colourPicker.destroy();this.colourPicker=null},closeFontPicker:function e(){$(".js-site-styles-panel").addClass("is-open");$(".js-font-picker-container").removeClass("is-open");this.fontPicker.setElement(this.$(".js-font-panel-wrapper"));this.fontPicker.destroy();this.fontPicker=null},resetStylesButtonClicked:function e(){return new n.default({contentClassname:"dialog__content--center",title:App.t("editor.dialog.title.reset-styles","Reset styles"),content:new c.default({themeRef:this.themeRef,siteRef:this.siteRef,protocol:this.protocol,brandDomain:this.brandDomain})})}});var p=t["default"]=f},62316:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,l,"next",e)}function l(e){r(o,i,a,s,l,"throw",e)}s(void 0)}))}}var i=Backbone.View.extend({template:"colour_picker_panel_reset_styles_dialog",events:{"click .js-reset-styles":"resetStyles","click .js-cancel":"closeDialog"},initialize:function e(t){this.themeRef=t.themeRef;this.siteRef=t.siteRef;this.protocol=t.protocol;this.brandDomain=t.brandDomain;return this},render:function e(){this.renderTemplate(this.template);return this},resetStyles:function e(){var t=this;return n(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return window.parent.fetch("".concat(App.session.get("apiProxyBaseUrl"),"/sites/").concat(t.siteRef,"/reset-styles"),{credentials:"include",method:"POST",headers:{"X-CSRF-TOKEN":App.frontEndBucket.csrfToken}});case 2:r=n.sent;204===r.status?window.location="".concat(t.protocol,"://editor.").concat(t.brandDomain):401===r.status?Editor.Responsive.displaySessionTimeoutDialog():App.t("editor.dialog.reset-styles.error","We were unable to reset your site's styles. Please contact support.");case 4:case"end":return n.stop()}}),e)})))()}});var a=t["default"]=i},49653:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({template:"view_settings_widgetpropertypanel_empty",initialize:function e(t){this.emptySettingMessage=t.emptySettingMessage||"";return this},serializeData:function e(){return{emptySettingMessage:this.emptySettingMessage}}});var n=t["default"]=r},50154:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=l(r(13745));var i=l(r(49653));var a=r(83489);var o=l(r(2568));var s=l(r(69464));function l(e){return e&&e.__esModule?e:{default:e}}var u="is-active";var c="is-open";function d(e){return e.ui.panel.activePanel}function f(e){return e.ui.panel.panelOpen}function p(e){return e.ui.panel.saveActive}function g(e){return e.ui.panel.hasError}var h=Marionette.CompositeView.extend({template:"view_settings_widgetpropertypanel",emptyView:i.default,keepWidgetPanelOpen:false,childEvents:{"save:disable":"onSaveDisabled","save:enable":"onSaveEnabled","save:validate":"onSaveValidated","setting:change":"onSettingsChange","setting:click":"onSettingsButtonClick","setting:reset":"onSettingsReset"},initialize:function e(t){this.profileModel=t.profileModel;this.widgetStyleSettingsViewFactory=t.widgetStyleSettingsViewFactory;this.styleSettingsProvider=t.styleSettingsProvider;this.stylesEnabled=false;this.settingsComponentProvider=t.settingsComponentProvider;this.tracker=t.tracker;t.rowsEnabled||this.setupViewBindings();return this},setupViewBindings:function e(){s.default.dispatch((0,a.removeError)());this.bindGlobalEvents();this.unsubscribe=s.default.subscribe(this.handleChange.bind(this))},handleChange:function e(){if(!this.el){this.unsubscribe();return}switch(d(s.default.getState())){case"style":this.renderStyle();break;case"settings":this.renderSettings();break}p(s.default.getState())&&!this.hasInputError()?this.enableSaveBtn():this.disableSaveBtn();s.default.getState().ui.panel.showSave?this.showSaveBtn():this.hideSaveBtn()},onSettingsChange:function e(t,r,n){s.default.dispatch((0,a.enableSave)());this.trigger(r,n)},onSettingsReset:function e(t,r,n){this.updateStyleSettings();this.options.rowsEnabled&&true===this.options.rowsEnabled||this.render()},onSettingsButtonClick:function e(t,r,n){this.trigger(r,n)},onPanelChange:function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s.default.dispatch((0,a.openPanel)(t));r?s.default.dispatch((0,a.hideSave)()):s.default.dispatch((0,a.showSave)())},childViewOptions:function e(){return{profileModel:this.profileModel,emptySettingMessage:this.emptySettingMessage}},childViewContainer:".js-settings-content",featuredChildViewContainer:".js-featured-settings-content",events:{"click .js-cancel-settings":"cancelBtnClicked",submit:"onSubmit","click .js-settings-tab-button":"settingsTabBtnClicked","click .js-style-tab-button":"styleTabBtnClicked","input input,textarea":"onChange"},onChange:function e(){!p(s.default.getState())&&this.hasInputError()||s.default.dispatch((0,a.enableSave)())},settingsTabBtnClicked:function e(t){t.preventDefault();if("settings"===d(s.default.getState()))return;s.default.dispatch((0,a.openPanel)("settings"))},renderSettings:function e(){var t=this.el.querySelector(".js-style-tab-button");if(t){t.classList.remove(u);this.el.querySelector(".js-settings-tab-button").classList.add(u);this.el.querySelector(".js-settings-tab").style.display="block";this.el.querySelector(".js-styles-tab").style.display="none"}this.el.querySelector(".js-save-settings")&&this.el.querySelector(".js-save-settings").removeAttribute("hidden")},styleTabBtnClicked:function e(t){t.preventDefault();if("style"===d(s.default.getState()))return;s.default.dispatch((0,a.openPanel)("style"))},renderStyle:function e(){this.el.querySelector(".js-settings-tab-button").classList.remove(u);this.el.querySelector(".js-style-tab-button").classList.add(u);this.el.querySelector(".js-styles-tab").style.display="block";this.el.querySelector(".js-settings-tab").style.display="none";this.el.querySelector(".js-save-settings")&&this.el.querySelector(".js-save-settings").setAttribute("hidden","hidden")},getChildView:function e(t){return this.settingsComponentProvider(t.get("type"))},serializeData:function e(){return{componentsLength:this.collection.length,widgetTitle:this.widgetTitle,immutable:this.model.get("immutable"),fixed:this.fixed,stylesEnabled:this.stylesEnabled,forceEnableSave:this.forceEnableSave}},bindGlobalEvents:function e(){o.default.Events.on("widgetSettings:exit-edit-mode",this.hideWidgetPanel.bind(this));o.default.Events.on("sidebarPanel:changed",this.hideWidgetPanel.bind(this));o.default.Events.on("setting:error:show",this.showSettingsError.bind(this));o.default.Events.on("setting:error:clear",this.clearSettingsError.bind(this));o.default.Events.on("on:toolbarOverlay:click on:textEditor:open",this.saveAndClosePanel.bind(this));o.default.Events.on("page:change",this.pageChangeCleanUp.bind(this));o.default.Events.on("panel:change",this.onPanelChange.bind(this))},pageChangeCleanUp:function e(){this.stopListening(this.model);this.model=null},saveAndClosePanel:function e(){f(s.default.getState())&&!g(s.default.hasError)&&this.saveSettingsChange()},onRender:function e(){this.el.classList.add(c);this.stylesEnabled&&this.renderStyleSectionsPanel();s.default.getState().ui.panel.activePanel||s.default.dispatch((0,a.openPanel)("settings"));o.default.Events.trigger("on:propertyPanel:open")},renderStyleSectionsPanel:function e(){var t=this.widgetStyleSettingsViewFactory.build({el:".js-style-content"});t.render()},attachHtml:function e(t,r,n){var i=null;if(r.model.get("featuredSetting")){i=t.$(this.featuredChildViewContainer);i.append(r.el)}else if(t.isBuffering){t.elBuffer.appendChild(r.el);t._bufferedChildren.push(r)}else t._insertBefore(r,n)||t._insertAfter(r)},onSaveDisabled:function e(){s.default.dispatch((0,a.disableSave)());s.default.dispatch((0,a.addError)())},onSaveValidated:function e(){this.hasInputError()||this.onSaveEnabled()},onSaveEnabled:function e(){s.default.dispatch((0,a.enableSave)());s.default.dispatch((0,a.removeError)())},disableSaveBtn:function e(){var t=this.el.querySelector(".js-save-settings");t&&t.setAttribute("disabled","disabled")},enableSaveBtn:function e(){var t=this.el.querySelector(".js-save-settings");t&&t.removeAttribute("disabled")},hideSaveBtn:function e(){var t=this.el.querySelector(".js-save-settings");t&&(t.style.display="none")},showSaveBtn:function e(){var t=this.el.querySelector(".js-save-settings");t&&(t.style.display="inherit")},showSettingsError:function e(t){var r=this.collection.get(t.settingId);if(!r)return;var n=this.children.findByModel(r);r.set("error",t.message);n.render();s.default.dispatch((0,a.disableSave)());s.default.dispatch((0,a.addError)())},clearSettingsError:function e(t){var r=this.collection.get(t);if(!r)return;var n=this.children.findByModel(r);r.set("error","");n.render();s.default.dispatch((0,a.enableSave)());s.default.dispatch((0,a.removeError)())},clearAllSettingsErrors:function e(){var t=this;this.collection.forEach((function(e){if(!e.get("error"))return;e.set("error","");var r=t.children.findByModel(e);r.render()}));s.default.dispatch((0,a.enableSave)());s.default.dispatch((0,a.removeError)())},hideWidgetPanel:function e(){this.el.classList.remove(c);s.default.dispatch((0,a.removeError)());this.previousPosition&&(document.querySelector(".js-site-preview").scrollTop=this.previousPosition);o.default.Events.trigger("on:propertyPanel:close");s.default.dispatch((0,a.closePanel)())},viewReset:function e(t){if(!f(s.default.getState())||g(s.default.getState())||t.enableSave){if(g(s.default.getState()))return this}else this.saveSettingsChange();this.cleanUpEventsListener();this.model=t.model||{};this.collection=t.collection||{};this.widgetTitle=t.widgetTitle||"";this.widgetName=t.widgetName||"";this.widgetUniqueId=t.widgetUniqueId;this.fixed=t.fixed;this.widgetType=t.className||"";this.widgetEl=t.widgetEl;this.forceEnableSave=t.enableSave;this.previousAttributes=t.previousAttributes;this.previousProfileAttributes=t.previousProfileAttributes;this.previousPosition=$(".js-site-preview").scrollTop();this.emptySettingMessage=t.emptySettingMessage||"";this.updateStyleSettings();this.options.rowsEnabled&&true===this.options.rowsEnabled||this.render();this.listenTo(this.model,"saved",this.widgetModelSaved);s.default.getState().ui.panel.activePanel||s.default.dispatch((0,a.openPanel)(""));t.enableSave||s.default.dispatch((0,a.disableSave)());s.default.getState().ui.panel.showSave||s.default.dispatch((0,a.hideSave)());return this},updateStyleSettings:function e(){if(this.styleSettingsProvider.hasStyleCollection()){var t=this.styleSettingsProvider.getStyleSettings({widgetType:this.widgetType,widgetEl:this.widgetEl,fixed:this.fixed,model:this.model});this.stylesEnabled=Object.keys(t).length>0;this.stylesEnabled&&s.default.dispatch((0,a.updateStyles)(t))}},cleanUpEventsListener:function e(){this.off();this.model&&this.stopListening(this.model,"saved",this.widgetModelSaved)},cancelBtnClicked:function e(){this.model.get("type")&&-1!==this.model.get("type").indexOf("widget.content")&&this.handleTextEditorClose();if(this.isModelChanged()&&!this.keepWidgetPanelOpen){this.model.clear({silent:true});this.model.set(this.previousAttributes)}if(this.isProfileModelChanged()&&!this.keepWidgetPanelOpen){this.profileModel.clear({silent:true});this.profileModel.set(this.previousProfileAttributes)}this.trigger("before:close");this.hideWidgetPanel()},onSubmit:function e(t){t.preventDefault();this.clearAllSettingsErrors();var r=this.checkRequiredFields();this.model.get("type")&&-1!==this.model.get("type").indexOf("widget.content")&&this.handleTextEditorClose();if(!g(s.default.getState())&&!r){this.saveSettingsChange();this.trigger("widget:save-clicked")}},checkRequiredFields:function e(){var t=false;var r=this.collection.filter((function(e){return e.get("required")}));r.forEach((function(e){var r=e.get("value");if(!r||!r.length){t=true;var i={settingId:e.get("id"),message:(0,n.default)("global.message-field-required","This field is required")};o.default.Events.trigger("setting:error:show",i)}}));return t},handleTextEditorClose:function e(){this.hideWidgetPanel()},saveSettingsChange:function e(){this.isProfileModelChanged()&&this.handleProfileModel();this.isModelChanged()?this.handleWidgetModel():this.hideWidgetPanel();this.trigger("save")},isModelChanged:function e(){var t=Object.keys(this.previousAttributes);var r=Object.keys(this.model.toJSON());var n=false;(this.model.changedAttributes(this.previousAttributes)||t.length!==r.length)&&(n=true);return n},isProfileModelChanged:function e(){var t=Object.keys(this.previousProfileAttributes);var r=Object.keys(this.profileModel.toJSON());var n=false;(this.profileModel.changedAttributes(this.previousProfileAttributes)||t.length!==r.length)&&(n=true);return n},handleWidgetModel:function e(){this.model.save({widgetName:this.widgetName,widgetUniqueId:this.widgetUniqueId,fixed:this.fixed});this.trackChanges()},handleProfileModel:function e(){this.profileModel.save()},widgetModelSaved:function e(){if(this.keepWidgetPanelOpen)return;this.hideWidgetPanel()},trackChanges:function e(){var t=this.getWidgetTypeName();if(""===t)return;this.sendChanges(t)},sendChanges:function e(t){if(!this.tracker)return;this.tracker.track("".concat(t," widget updated"),{changedFields:this.getChangedFields()})},getWidgetTypeName:function e(){var t=this.model.widgetType;var r=t.split(".");if(2!==r.length)return"";if("widget"!==r[0])return"";return r[1]},getChangedFields:function e(){var t=[];var r=this.previousAttributes,n=this.model;var i=n.toJSON();Object.keys(i).forEach((function(e){Object.prototype.hasOwnProperty.call(r,e)&&r[e]===i[e]||t.push(e)}));return t.join(", ")},hasInputError:function e(){return this.el.querySelectorAll(".settings__error-input").length>0}});var v=t["default"]=h},2263:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(69464));var i=o(r(84190));var a=r(31002);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){s(a,n,i,o,l,"next",e)}function l(e){s(a,n,i,o,l,"throw",e)}o(void 0)}))}}var u={onSettingsChange:function e(t,r,n){this.handleEmailVerificationOnChange(t,r,n)},onRender:function e(t){this.handleEmailVerificationOnRender(t)},updateEmailVerification:function e(){return l(regeneratorRuntime.mark((function e(){var t,r,i,o;return regeneratorRuntime.wrap((function e(s){while(1)switch(s.prev=s.next){case 0:t=n.default.getState();r=t.site.ref;i=t.env.csrfToken;o="".concat(t.env.apiProxyBaseUrl,"/sites/").concat(r,"/email-verification");s.next=6;return n.default.dispatch((0,a.getEmailVerification)(o,i));case 6:case"end":return s.stop()}}),e)})))()},handleEmailVerificationOnRender:function e(){var t=this;return l(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:r=t.getEmailSettingsComponent();n=null;if(!r){i.next=8;break}n="profile-settings"===r.model.get("type")&&"form"===r.model.get("profileType")?r.model.get("email"):r.model.get("value");if(!(n&&!t.isEmailVerified(n))){i.next=8;break}i.next=7;return t.updateEmailVerification();case 7:if(t.isEmailUnverified(n)){t.emailToVerify=n;t.showEmailVerificationInfo()}case 8:case"end":return i.stop()}}),e)})))()},handleEmailVerificationOnChange:function e(t,r,n){if(t.model.get("emailVerificationEnable")){if("profile-settings"===t.model.get("type")){this.handlProfileWidget(r,n);Editor.Events.once("profile:changed",this.onSave.bind(this))}else this.handleEmailVerification(n);this.verificationView&&this.isEmailVerified(n)&&this.verificationView.remove()}},handlProfileWidget:function e(t,r){if("widget-profile-form-email"===t)this.handleEmailVerification(r);else{this.keepWidgetPanelOpen=false;this.emailToVerify=null;this.verificationView&&this.verificationView.remove()}},handleEmailVerification:function e(t){if(this.isEmailVerified(t)){this.keepWidgetPanelOpen=false;this.emailToVerify=null}else{this.keepWidgetPanelOpen=true;this.emailToVerify=t}},widgetModelSaved:function e(){this.onSave()},onSave:function e(){this.emailToVerify&&this.showEmailVerificationInfo()},showEmailVerificationInfo:function e(){this.verificationView=new i.default({email:this.emailToVerify,csrfToken:n.default.getState().env.csrfToken}).render();this.$(this.featuredChildViewContainer).empty().append(this.verificationView.el);this.disableSaveButton()},disableSaveButton:function e(){var t=this.getEmailSettingsComponent();t&&t.trigger("save:disable")},getEmailSettingsComponent:function e(){var t=this.collection.filter((function(e){return e.get("emailVerificationEnable")}));if(t.length>0)return this.children.findByModel(t[0]);return false},isEmailVerified:function e(t){return n.default.getState().site.emailVerification.some((function(e){return t===e.email&&1===parseInt(e.verified,10)}))},isEmailUnverified:function e(t){return n.default.getState().site.emailVerification.some((function(e){return t===e.email&&0===parseInt(e.verified,10)}))}};var c=t["default"]=u},43179:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=["contentgroup","policypages","ecombasket","ecombasketsummary","ecomconfirmation","ecomlegal","ecomproduct","blogpost","buynow","navigation","extendednavigation","feature","parkinglogin","fonectacontactform","fonectamap","menusections","menu","redirecttodesktop","resetpassword","forgottenpassword","responsivecolumns","row","companybrand","emaildisplay","companyaddress","companydescription","contact","languagemenu","linkedinprofile","linkedincompanyprofile","ecwid","ecwidsearch","ecwidbasket","bookingsservicelist","bookingsservice"];var o=["bookingsservicelist","bookingsservice"];var s=["ecomproductslist","ecomfeaturedproducts","ecomcategorieslist"];var l={content:["image","text","h1","button","gallery","responsiveslideshow","clicktocall","map"],layout:["line","space"],forms:["contactform","signupform","advancedcontactform"],files:["dropbox","filedownload"],video_and_audio:["youtube","embed","soundcloud"],social:["twitter","facebooklike","tweet","socialicons","yelpreview"],blog:["blogpostlist","blogsearch","disqus","facebookcomments"],store:["ecomproductslist","ecomfeaturedproducts","ecomcategorieslist","paypalbuynow"],others:[]};var u=function(){function e(t){r(this,e);this.userDataProvider=t.userDataProvider;this.featureFlagDataProvider=t.featureFlagDataProvider;this.pluginsDataProvider=t.pluginsDataProvider}i(e,[{key:"filterWidgetArray",value:function e(t){this.nonEmptyGroup=[];this.widgetData=t;this.removeRedundantTextWidgets();this.removeDenylistedWidgets();this.removeBookingsDenylistedWidgetsIfRequired();this.removeEcwidDenylistedWidgetsIfRequired();this.addDefaultImageWidget();this.updateWidgetProperties();this.sortContentWidgets();this.sortNonEmptyGroup();return{widgetData:this.widgetData,widgetGroup:this.nonEmptyGroup}}},{key:"removeRedundantTextWidgets",value:function e(){this.widgetData=this.widgetData.filter((function(e){if("text"===e.group&&("text"===e.name||"h1"===e.name))return true;if("text"!==e.group&&"none"!==e.group)return true;return false}))}},{key:"addDefaultImageWidget",value:function e(){this.widgetData.unshift({callback:"",default:1,description:"Image",enabled:1,group:"normal",imageName:"image",name:"image",private:0,ref:0,title:"IMAGE",type:"basics",value:"widget.image",version:"responsive"})}},{key:"removeDenylistedWidgets",value:function e(){this.widgetData=this.widgetData.filter((function(e){return-1===a.indexOf(e.name)}))}},{key:"removeBookingsDenylistedWidgetsIfRequired",value:function e(){if(!this._shouldRemoveBookingsDenylistedWidgets())return;this.widgetData=this.widgetData.filter((function(e){return-1===o.indexOf(e.name)}))}},{key:"removeEcwidDenylistedWidgetsIfRequired",value:function e(){if(!this._shouldRemoveEcwidDenylistedWidgets())return;this.widgetData=this.widgetData.filter((function(e){return-1===s.indexOf(e.name)}))}},{key:"attachTranslatedName",value:function e(t){var r=t.title.toLowerCase();r=r[0].toUpperCase()+r.slice(1);t.translatedName=App.t("shared_views.".concat(t.value,".title_52"),r)}},{key:"updateWidgetProperties",value:function e(){var t=this;this.widgetData.forEach((function(e){t.attachTranslatedName(e);t.addWidgetsPanelGroup(e)}))}},{key:"addWidgetsPanelGroup",value:function e(t){var r=this;Object.keys(l).forEach((function(e){if(-1!==l[e].indexOf(t.name)){t.groupName=e;r.updateNonEmptyGroup(e)}}));if("undefined"===typeof t.groupName){t.groupName="others";this.updateNonEmptyGroup("others")}}},{key:"updateNonEmptyGroup",value:function e(t){-1===this.nonEmptyGroup.indexOf(t)&&this.nonEmptyGroup.push(t)}},{key:"sortNonEmptyGroup",value:function e(){var t=this;var r=[];Object.keys(l).forEach((function(e){l[e]&&-1!==t.nonEmptyGroup.indexOf(e)&&r.push(e)}));this.nonEmptyGroup=r}},{key:"sortContentWidgets",value:function e(){var t=this;var r=[];var n=l.content;n.forEach((function(e){t.widgetData.forEach((function(n,i){if(n.name===e){t.widgetData.splice(i,1);r.push(n)}}))}));this.widgetData=r.concat(this.widgetData)}},{key:"_shouldRemoveBookingsDenylistedWidgets",value:function e(){if(!this._isInV10())return true;return!this._isConnectBookingsEnabled()}},{key:"_shouldRemoveEcwidDenylistedWidgets",value:function e(){if(!this._isInV10())return false;return this._isEcwidEnabled()}},{key:"_isInV10",value:function e(){return"ten"===this.userDataProvider.get("productVersion")}},{key:"_isConnectBookingsEnabled",value:function e(){return this.pluginsDataProvider.has("connect-bookings")}},{key:"_isEcwidEnabled",value:function e(){return this.userDataProvider.has("enableEcwid")}}]);return e}();var c=t["default"]=u},93040:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.Model=t.Model;this.Collection=t.Collection;this.WidgetsPanelView=t.WidgetsPanelView;this.dataFilter=t.dataFilter;this.EnvDataProvider=t.EnvDataProvider;this.featureFlagDataProvider=t.featureFlagDataProvider}i(e,[{key:"build",value:function e(t){var r=this.dataFilter.filterWidgetArray(t);var n=r.widgetData;var i=r.widgetGroup;var a=new this.Collection(n,{model:this.Model});this.widgetsPanelView=new this.WidgetsPanelView({el:".js-widgets-overlay-panel-container",collection:a,widgetGroup:i,EnvDataProvider:this.EnvDataProvider,featureFlagDataProvider:this.featureFlagDataProvider});return this.widgetsPanelView}}]);return e}();var o=t["default"]=a},26151:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({tagName:"li",events:{"click .js-widget":"hidePanel"},initialize:function e(){this.widgetType=this.model.get("value");this.rowTemplate=null;this.model.on("widget:filtered",this.hideWidget.bind(this));this.model.on("widget:restored",this.showWidget.bind(this))},hideWidget:function e(){this.el.style.display="none"},showWidget:function e(){this.el.style.display=""}});var n=t["default"]=r},15182:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e){return o(e)||a(e)||i(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function o(e){if(Array.isArray(e))return s(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function c(e,t,r){t&&u(e.prototype,t);r&&u(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var d=function(){function e(t){l(this,e);this.view=t.view;this.cacheElements();this.keyEventHash={13:"_returnKeyDown",27:"_escKeyDown",8:"_backspaceKeyDown"}}c(e,[{key:"cacheElements",value:function e(){this.panelElements={panel:this.view.el,searchButton:this.view.el.querySelector(".js-search-footer"),closeButton:this.view.el.querySelector(".js-close-widget-overlay-panel"),searchInput:this.view.el.querySelector(".js-footer-search-field"),searchNoMatch:this.view.el.querySelector(".js-search-nomatch"),groupNameEls:this.view.el.querySelectorAll(".js-group")}}},{key:"applyFilter",value:function e(t){this.clearFilter();this.filteredWidgets=[];this.view.collection.models.forEach(function(e){if(-1===e.get("translatedName").toLowerCase().indexOf(t.toLowerCase())){e.trigger("widget:filtered");this.filteredWidgets.push(e)}}.bind(this));this._checkResultLength();this.hideGroupNames()}},{key:"clearFilter",value:function e(){if(!this.filteredWidgets)return;this.filteredWidgets.forEach((function(e){e.trigger("widget:restored")}));delete this.filteredWidgets;this._checkResultLength()}},{key:"getInput",value:function e(){return this.panelElements.searchInput.value}},{key:"clearInput",value:function e(){this.panelElements.searchInput.value="";this.showGroupNames()}},{key:"handleKeyup",value:function e(t){var r=this.keyEventHash[t.which];var n=this.getInput();if(r){this[r](n);return}this.clearFilter();this.applyFilter(n)}},{key:"_checkResultLength",value:function e(){if(this.filteredWidgets&&this.filteredWidgets.length===this.view.collection.models.length){this.panelElements.searchNoMatch.classList.add("show-message");return}this.panelElements.searchNoMatch.classList.remove("show-message")}},{key:"_returnKeyDown",value:function e(t){t.length>0?this.applyFilter(t):this.clearFilter()}},{key:"_escKeyDown",value:function e(t){if(t.length>0){this.clearInput();this.clearFilter()}else this.view.hidePanel()}},{key:"_backspaceKeyDown",value:function e(t){0===t.length&&this.showGroupNames();if(t.length<=1){this.clearFilter();return}this.applyFilter(t)}},{key:"hideGroupNames",value:function e(){r(this.panelElements.groupNameEls).forEach((function(e){e.setAttribute("hidden",true)}))}},{key:"showGroupNames",value:function e(){r(this.panelElements.groupNameEls).forEach((function(e){e.removeAttribute("hidden")}))}}]);return e}();var f=t["default"]=d},13961:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=r(55372);var a=v(r(22895));var o=r(9878);var s=r(83489);var l=r(83748);var u=g(r(69464));var c=g(r(92745));var d=g(r(15182));var f=g(r(26151));var p=g(r(19238));function g(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(h=function e(n){return n?r:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}var m=a.default.scrollToMainZone;var y=Marionette.CompositeView.extend({childView:f.default,events:{"click .js-close-widget-overlay-panel":"togglePanel","click .js-widget-panel-backstop":"togglePanel","click .js-site-frame-backstop":"togglePanel","click .js-search-footer":"footerSearchClicked","keyup .js-footer-search-field":"footerSearchKeyup"},render:function e(){var t=this.collection.toJSON();var r=c.default.groupWidgets(t,this.widgetGroup);var n=Twig.render(Twig.templates.widgets_panel_container,{groupedWidgetData:r,widgets:t,customWidgetsDomain:this.EnvDataProvider.get("customWidgetsDomain"),enableRows:this.featureFlagDataProvider.get("enableRows")});(0,o.emptyElement)(this.widgetPanel);this.widgetPanel.innerHTML=n;this.attachChildrenEvents();this.onRender()},attachChildrenEvents:function e(){this.collection.each((function(e){this.attachWidgetItemFunction(e)}),this);this.delegateEvents()},attachWidgetItemFunction:function e(t){var r=new f.default({el:".js-widget[data-ref=".concat(t.get("ref"),"]"),model:t});this.proxyChildEvents(r);this.children.add(r)},initialize:function e(t){this.widgetGroup=t.widgetGroup;this.collection=t.collection;this.EnvDataProvider=t.EnvDataProvider;this.featureFlagDataProvider=t.featureFlagDataProvider;this.widgetPanel=this.el.querySelector(".js-widgets-overlay-panel");this.attachEditorEvents()},attachEditorEvents:function e(){Editor.Events.on("toolbar:hideWidgetPanel",this.hidePanel.bind(this));Editor.Events.on("toolbar:togglePopover",this.togglePanel.bind(this));Editor.Events.on("widgetSettingsPanel:opened",this.hidePanel.bind(this));Editor.Events.on("dragdrop:clickToAddWidget",this.hidePanel.bind(this));Editor.Events.on("dragdrop:dragStart",this.hidePanel.bind(this))},footerSearchClicked:function e(){var t=this.search.getInput();this.search.applyFilter(t)},footerSearchKeyup:function e(t){this.search.handleKeyup(t)},togglePanel:function e(){Editor.Events.trigger("addRowMode:addButtons");if(u.default.getState().ui.panel.panelOpen){u.default.dispatch((0,s.closePanel)());this.hidePanel();this.unfocusMainZone()}else{u.default.dispatch((0,s.openPanel)("content"));this._addWidgetAddModeClass();this.widgetPanel.classList.add("is-open");this.giveSearchBoxFocus();this.hidePreviewBar();this.focusMainZone();(0,l.closeIntercom)()}},focusMainZone:function e(){if("coarse"===i.deviceFeaturesHelper.getInputType()){m();(0,p.default)("addClass",(0,a.getIframeWindow)(),{className:"drag-active",target:"body"})}},unfocusMainZone:function e(){"coarse"===i.deviceFeaturesHelper.getInputType()&&(0,p.default)("removeClass",(0,a.getIframeWindow)(),{className:"drag-active",target:"body"})},hidePreviewBar:function e(){if(i.deviceFeaturesHelper.isSmallDevice()){document.querySelector(".js-main-toolbar").classList.add("hidden");document.querySelector(".editor-body").classList.add("no-preview")}},showPreviewBar:function e(){if(i.deviceFeaturesHelper.isSmallDevice()){document.querySelector(".js-main-toolbar").classList.remove("hidden");document.querySelector(".editor-body").classList.remove("no-preview")}},giveSearchBoxFocus:function e(){this.el.querySelector(".js-footer-search-field").focus()},hidePanel:function e(){this.resetWidgetPanel();this.widgetPanel.classList.remove("is-open");this._removeWidgetAddModeClass();u.default.dispatch((0,s.closePanel)());(0,l.openIntercom)()},resetWidgetPanel:function e(){this.search.clearInput();this.showPreviewBar();this.search.clearFilter()},onRender:function e(){this.search=new d.default({view:this});this.setTouchClasses();this.bindEvents()},bindEvents:function e(){Editor.Events.on("screenMode:change",this.hidePanel.bind(this));(0,p.default)("addEventNotifier",(0,a.getIframeWindow)(),{type:"click",target:".js-site-frame-backstop",notifyEventType:"hideWidgetPanel"})},setTouchClasses:function e(){"coarse"===i.deviceFeaturesHelper.getInputType()&&this.widgetPanel.classList.add("mobile-panel")},_addWidgetAddModeClass:function e(){(0,p.default)("addClass",(0,a.getIframeWindow)(),{className:"widget-add-mode",target:"body"})},_removeWidgetAddModeClass:function e(){(0,p.default)("removeClass",(0,a.getIframeWindow)(),{className:"widget-add-mode",target:"body"})}});var b=t["default"]=y},92745:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r={groupWidgets:function e(t,r){var n={};r.forEach((function(e){n[e]=[];t.forEach((function(t){t.groupName===e&&n[e].push(t)}))}));return n}};var n=t["default"]=r},11530:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(93040));var i=o(r(43179));var a=o(r(13961));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){e.factory("WidgetsPanelDataFilter",(function(e){return new i.default({userDataProvider:e.UserDataProvider,featureFlagDataProvider:e.featureFlagDataProvider,pluginsDataProvider:e.PluginsDataProvider})}));e.factory("WidgetsPanelFactory",(function(e){return new n.default({Collection:Backbone.Collection.extend(),Model:Backbone.Model.extend(),dataFilter:e.WidgetsPanelDataFilter,WidgetsPanelView:a.default,EnvDataProvider:e.EnvDataProvider,featureFlagDataProvider:e.featureFlagDataProvider})}));return e}var l=t["default"]=s},6358:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(57789));function i(e){return e&&e.__esModule?e:{default:e}}var a=Backbone.View.extend({template:"header_footer_sharing_content_dialog",events:{"click .js-content-option":"onOptionClicked"},initialize:function e(t){this.zoneType=t.zoneType;this.currentZoneScope=t.currentZoneScope;this.zoneRestorer=t.zoneRestorer;this.zoneCloner=t.zoneCloner;this.templateRenderer=t.templateRenderer},onOptionClicked:function e(t){var r=t.currentTarget;var n="is-selected";if(r.classList.contains(n))return;var i=r.parentNode.querySelector(".".concat(n));i.classList.remove(n);r.classList.add(n)},restoreZone:function e(){this.zoneRestorer.restoreZone({name:this.zoneType,pageRef:Number((0,n.default)().get("pageRef"))})},cloneZone:function e(){this.zoneCloner.cloneZone({name:this.zoneType,pageRef:Number((0,n.default)().get("pageRef"))})},closeDialog:function e(){this.trigger("view:remove")},render:function e(){var t=this.templateRenderer.render(this.template,{zoneType:this.zoneType,currentZoneScope:this.currentZoneScope});var r=document.querySelectorAll(".js-dialog-contents");var n=r.item(r.length-1);n.insertAdjacentHTML("beforeend",t);this.onRender()},onRender:function e(){this.modal&&this.modal.modal.on("dialog:done",this.onDoneClicked.bind(this))},onDoneClicked:function e(){var t=this.el.querySelector(".is-selected");t.classList.contains("js-custom-option")&&"custom"!==this.currentZoneScope&&this.cloneZone();t.classList.contains("js-shared-option")&&"shared"!==this.currentZoneScope&&this.restoreZone();this.closeDialog()}});var o=t["default"]=a},61622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(57789));function i(e){return e&&e.__esModule?e:{default:e}}var a=Backbone.View.extend({template:"shared_row_dialog",events:{"click .js-change-zone-scope":"changeZoneScopeClicked","click .js-cancel":"cancelClicked","click .js-update":"updateClicked","click .js-done":"closeDialog"},initialize:function e(t){this.zoneType=t.zoneType;this.currentZoneScope=t.currentZoneScope;this.zoneRestorer=t.zoneRestorer;this.zoneCloner=t.zoneCloner;this.templateRenderer=t.templateRenderer},updateClicked:function e(){this.useSharedZoneEl.checked&&"shared"!==this.currentZoneScope&&this.restoreZone();this.useCustomZoneEl.checked&&"custom"!==this.currentZoneScope&&this.cloneZone();this.closeDialog()},closeDialog:function e(){this.trigger("view:remove")},restoreZone:function e(){this.zoneRestorer.restoreZone({name:this.zoneType,pageRef:Number((0,n.default)().get("pageRef"))})},cloneZone:function e(){this.zoneCloner.cloneZone({name:this.zoneType,pageRef:Number((0,n.default)().get("pageRef"))})},cacheElements:function e(){this.stepOneEl=this.el.querySelector(".js-step-one");this.stepTwoEl=this.el.querySelector(".js-step-two");this.useSharedZoneEl=this.el.querySelector("#use-shared-zone");this.useCustomZoneEl=this.el.querySelector("#use-custom-zone")},goForward:function e(){this.stepOneEl.setAttribute("hidden",true);this.stepTwoEl.removeAttribute("hidden")},goBack:function e(){this.stepTwoEl.setAttribute("hidden",true);this.stepOneEl.removeAttribute("hidden")},changeZoneScopeClicked:function e(){this.goForward()},cancelClicked:function e(){this.goBack()},render:function e(){var t=this.templateRenderer.render(this.template,{zoneType:this.zoneType,currentZoneScope:this.currentZoneScope});var r=document.querySelectorAll(".js-dialog-contents");var n=r.item(r.length-1);n.insertAdjacentHTML("beforeend",t);this.cacheElements()}});var o=t["default"]=a},52614:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.zoneCloner=t.zoneCloner;this.zoneRestorer=t.zoneRestorer;this.templateRenderer=t.templateRenderer}i(e,[{key:"build",value:function e(t,r,n){return new t({zoneCloner:this.zoneCloner,zoneRestorer:this.zoneRestorer,templateRenderer:this.templateRenderer,zoneType:n,currentZoneScope:r})}}]);return e}();var o=t["default"]=a},61249:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(13745));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=function(){function e(t){a(this,e);this.DialogPanelView=t.DialogPanelView;this.contentViewFactory=t.contentViewFactory}s(e,[{key:"display",value:function e(t,r,i,a){var o=(0,n.default)("editor.zone_scope_dialog.title_header","Page header");var s=(0,n.default)("editor.zone_scope_dialog.title_footer","Page footer");return new this.DialogPanelView(Object.assign({title:"header"===i?o:s,content:this.contentViewFactory.build(t,r,i)},a))}}]);return e}();var u=t["default"]=l},34978:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);this.key=t.key;this.visible=false}i(e,[{key:"isShowing",value:function e(){return this.visible}},{key:"isLoaded",value:function e(){return"undefined"!==typeof window.grecaptcha}},{key:"isVerified",value:function e(){return""!==window.grecaptcha.getResponse()}},{key:"getToken",value:function e(){return window.grecaptcha.getResponse()}},{key:"render",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.sitekey=this.key;window.grecaptcha.render(t,r);this.visible=true}},{key:"display",value:function e(t,r){this.isLoaded()?this.render(t,r):s(this.render.bind(this,t,r))}}]);return e}();var o=t["default"]=a;function s(e){var t=document.createElement("script");var r="recpatcha".concat(Math.random().toString(36).slice(2));var n="https://www.google.com/recaptcha/api.js?render=explicit";var i=false;if("function"===typeof e){window[r]=e;i=r}"undefined"!==typeof e&&"function"===typeof window[e]&&(i=e);i&&(n+="&onload=".concat(i));t.type="application/javascript";t.src=n;document.body.appendChild(t)}},25304:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=t["default"]=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;r(this,e);this.mainWindow=t;this._properties={siteLanguages:this.mainWindow.Server.siteLanguages,siteCurrentLanguage:this.mainWindow.Server.siteCurrentLanguage,siteDefaultLanguage:this.mainWindow.Server.siteDefaultLanguage,siteLanguageMenuSettings:this.mainWindow.Server.siteLanguageMenuSettings}}i(e,[{key:"get",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Object.keys(this._properties).includes(t))return this._properties[t];return r}}]);return e}()},6705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=r;function r(){return window.BaseKit.Widget}},65407:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=r;function r(){return window.Server.widgetsOnPage}},3351:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=f(r(41351));var i=f(r(21877));var a=f(r(46878));var o=f(r(56652));var s=f(r(63792));var l=f(r(6705));var u=f(r(97248));var c=f(r(25304));var d=f(r(73796));function f(e){return e&&e.__esModule?e:{default:e}}var p=new n.default;p.factory("WidgetClassDefinitionRetriever",(function(){return new i.default({widgetDefinitionsProvider:l.default})}));p.factory("WidgetViewFactory",(function(e){return new s.default({widgetClassDefinitionRetriever:e.WidgetClassDefinitionRetriever,StdViewClass:Backbone.View})}));p.factory("WidgetModelFactory",(function(e){return new o.default({widgetClassDefinitionRetriever:e.WidgetClassDefinitionRetriever,StdModelClass:Backbone.View})}));p.factory("WidgetFactory",(function(e){return new a.default({widgetViewFactory:e.WidgetViewFactory,widgetModelFactory:e.WidgetModelFactory})}));p.factory("siteLanguageDataProvider",(function(){return new c.default(window)}));p.factory("languageMenuRendererFactory",(function(e){return new u.default({LanguageMenuRenderer:d.default,targetElement:window.document.body,languageDataProvider:e.siteLanguageDataProvider})}));var g=t["default"]=p.container},73796:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(69464));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return u(e)||l(e)||s(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}function l(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e){if(Array.isArray(e))return c(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function p(e,t,r){t&&f(e.prototype,t);r&&f(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var g=t["default"]=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.siteLanguages,i=void 0===r?[]:r,a=t.siteDefaultLanguage,o=void 0!==a&&a,s=t.siteCurrentLanguage,l=void 0!==s&&s,u=t.siteLanguageMenuSettings,c=void 0===u?{}:u,f=t.sitePreview,p=void 0!==f&&f,g=t.widgetOverlayView,h=void 0!==g&&g,v=t.targetElement,m=void 0===v?window.document.body:v;d(this,e);this.siteLanguages=0!==n.default.getState().language.siteLanguages.length?n.default.getState().language.siteLanguages:i;this.siteDefaultLanguage=0!==n.default.getState().language.defaultLanguage.language.length?n.default.getState().language.defaultLanguage:o;this.siteCurrentLanguage=l;this.siteLanguageMenuSettings=c;this.sitePreview=p;this.widgetOverlayView=h;this.overlayElement=false;this.targetElement=m;this._listenToEvents()}p(e,[{key:"display",value:function e(){if(!this.siteDefaultLanguage||0===this.siteLanguages.length||this._isPageBlogOrStore())return;if(!this._hasActiveLanguages())return;this._renderMenu()}},{key:"reRender",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.siteLanguages,n=void 0!==r&&r,i=t.siteLanguageMenuSettings,a=void 0!==i&&i,o=t.siteDefaultLanguage,s=void 0!==o&&o,l=t.siteCurrentLanguage,u=void 0!==l&&l;var c=this.targetElement.querySelector(".js-language-selector");c&&c.parentNode.removeChild(c);false!==n&&(this.siteLanguages=n);false!==a&&(this.siteLanguageMenuSettings=a);false!==s&&(this.siteDefaultLanguage=s);false!==u&&(this.siteCurrentLanguage=u);if(false===this.siteDefaultLanguage||0===this.siteLanguages.length)return;if(!this._hasActiveLanguages())return;this._renderMenu()}},{key:"_listenToEvents",value:function e(){var t=this;var r=this.targetElement.ownerDocument.defaultView;if(!this.sitePreview)return;r.addEventListener("message",(function(e){var r="string"===typeof e.data?e.data:e.data.action||"";"rerender:languagemenu"===r&&t.reRender(e.data)}),false)}},{key:"_renderMenu",value:function e(){var t=this.targetElement;var r=this._createMenuElement();t.insertBefore(r,t.firstChild);var n=t.querySelector(".js-language-selector--current");if(!n)return;n.addEventListener("click",(function(e){e.preventDefault();e.stopPropagation();var r=t.querySelector(".js-language-selector");if(t.classList.contains("touch")){r.classList.toggle("hover");var n=function e(){r.classList.toggle("hover");document.removeEventListener("click",e)};document.addEventListener("click",n)}}))}},{key:"_setupMenuOverlay",value:function e(t){var r=this;this.overlayElement||(this.overlayElement=this.widgetOverlayView.render().el);t.appendChild(this.overlayElement);this.overlayElement.addEventListener("mouseenter",(function(){var e=a(r.targetElement.querySelectorAll(".js-widget-overlay.hover"));e.forEach((function(e){return e.classList.remove("hover")}));r.overlayElement.classList.add("hover")}));this.overlayElement.addEventListener("mouseleave",(function(){r.overlayElement.classList.remove("hover")}));this.widgetOverlayView.on("widget:settings",(function(){Editor.Events.trigger("languagemenu:settings")}));this.widgetOverlayView.on("widget:overlayClick",(function(){Editor.Events.trigger("languagemenu:settings")}))}},{key:"_createMenuElement",value:function e(){var t=this;var r=document.createElement("div");var n=this._getMenuElementClasses();var i=this._createMenuInnerElement();var a=this._createLanguageList();var o=this.siteLanguages.slice(0);o.unshift(this.siteDefaultLanguage);o=o.filter((function(e){return!e.active||"0"!==e.active}));n.forEach((function(e){return r.classList.add(e)}));r.appendChild(i);i.appendChild(a);o.forEach((function(e){var r=document.createElement("li");var n=t._createLanguageLinkElement(e);var i=t._getItemClasses(e);i.forEach((function(e){return r.classList.add(e)}));r.appendChild(n);a.appendChild(r)}));this.sitePreview&&this.widgetOverlayView&&this._setupMenuOverlay(i);return r}},{key:"_getItemClasses",value:function e(t){var r=["language-selector__item"];var n=this.siteCurrentLanguage?this.siteCurrentLanguage.language:"";t.id||r.push("language-selector__item---default");n===t.language&&r.push("language-selector__item--current","js-language-selector--current");""!==n||t.id||r.push("language-selector__item--current","js-language-selector--current");return r}},{key:"_createLanguageLinkElement",value:function e(t){var r=document.createElement("a");var n=document.createElement("span");var i=document.createElement("span");n.classList.add("language-selector__icon");t.flag&&n.classList.add("language-selector__icon--".concat(t.flag.toLowerCase()));i.classList.add("language-selector__name");i.textContent=t.localisedName;r.classList.add("language-selector__link");r.appendChild(n);r.appendChild(i);if(this.sitePreview){r.addEventListener("click",(function(e){return e.preventDefault()}));r.addEventListener("hover",(function(e){return e.preventDefault()}));r.classList.add("language-selector__link--site-preview")}t.id?r.setAttribute("href","/".concat(t.language,"/home")):r.setAttribute("href","/");return r}},{key:"_createLanguageList",value:function e(){var t=document.createElement("ul");t.classList.add("language-selector__list");return t}},{key:"_createMenuInnerElement",value:function e(){var t=document.createElement("div");t.classList.add("language-selector__inner");return t}},{key:"_getMenuElementClasses",value:function e(){var t=["language-selector","js-language-selector"];var r="language-selector--light";var n="language-selector--horizontal";var i="language-selector--flag-text";this.sitePreview&&t.push("language-selector--site-preview");null!==this.siteLanguageMenuSettings&&this.siteLanguageMenuSettings.menuShade&&(r="language-selector--".concat(this.siteLanguageMenuSettings.menuShade));null!==this.siteLanguageMenuSettings&&this.siteLanguageMenuSettings.menuStyle&&(n="language-selector--".concat(this.siteLanguageMenuSettings.menuStyle));null!==this.siteLanguageMenuSettings&&this.siteLanguageMenuSettings.menuType&&(i="language-selector--".concat(this.siteLanguageMenuSettings.menuType));return t.concat([r,n,i])}},{key:"_isPageBlogOrStore",value:function e(){var t=this.targetElement.ownerDocument.defaultView;if("undefined"===typeof t.Server)return false;if("undefined"===typeof t.Server.page)return false;return"ecomproductlist"===t.Server.page.templateType||"ecombasketsummary"===t.Server.page.templateType||"ecomproduct"===t.Server.page.templateType||"ecomlegal"===t.Server.page.templateType||"blogpostlist"===t.Server.page.templateType||"blogpost"===t.Server.page.templateType}},{key:"_hasActiveLanguages",value:function e(){return this.siteLanguages.some((function(e){return 1===parseInt(e.active,10)}))}}]);return e}()},97248:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(55372);var i=o(r(41026));var a=o(r(83805));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function u(e,t,r){t&&l(e.prototype,t);r&&l(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var c=t["default"]=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.LanguageMenuRenderer,n=void 0===r?{}:r,i=t.languageDataProvider,a=void 0===i?{}:i,o=t.sitePreview,l=void 0!==o&&o,u=t.targetElement,c=void 0===u?window.document.body:u,d=t.templateRenderer;s(this,e);this.LanguageMenuRenderer=n;this.languageDataProvider=a;this.sitePreview=l;this.targetElement=c;this.templateRenderer=d}u(e,[{key:"build",value:function e(t){var r=this.languageDataProvider.get("siteLanguages");var n=this.languageDataProvider.get("siteDefaultLanguage");var i=this.languageDataProvider.get("siteCurrentLanguage");var a=this.languageDataProvider.get("siteLanguageMenuSettings");var o=this.languageDataProvider;var s=this.createWidgetOverlayView();return new this.LanguageMenuRenderer({siteLanguages:r,siteDefaultLanguage:n,siteCurrentLanguage:i,siteLanguageMenuSettings:a,languageDataProvider:o,widgetOverlayView:s,targetElement:t,sitePreview:this.sitePreview})}},{key:"createWidgetOverlayView",value:function e(){var t={showTplWidget:false,isDeletable:false,isImageEditable:false,isMovable:false,showSettingsIcon:n.deviceFeaturesHelper.isSmallTouchDevice(),parentView:{$:function e(){return[]}},templateRenderer:this.templateRenderer};if(!this.sitePreview)return false;return n.deviceFeaturesHelper.isSmallTouchDevice()?new a.default(t):new i.default(t)}}]);return e}()},21877:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(58469);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function o(e,t,r){t&&a(e.prototype,t);r&&a(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var s=function(){function e(t){i(this,e);this.widgetDefinitionsProvider=t.widgetDefinitionsProvider}o(e,[{key:"getDefinition",value:function e(t){var r=this.widgetDefinitionsProvider();var n="".concat(d(t.widgetType)).concat(t.type);var i="function"===typeof r[n]?r[n]:t.StdClass;return i}}]);return e}();var l=t["default"]=s;function u(e){return(0,n.camelCase)("basekit.".concat(e)).replace(/^basekitWidget/i,"")}function c(e){var t="ColumnsColumn"===e?"ResponsivecolumnsColumn":e;return t}function d(e){return c(u(e))}},46878:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.widgetViewFactory=t.widgetViewFactory;this.widgetModelFactory=t.widgetModelFactory}i(e,[{key:"build",value:function e(t){var r=this.widgetModelFactory.build(t);this.widgetViewFactory.build(t,r)}}]);return e}();var o=t["default"]=a},56652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(63938));var i=r(9709);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function d(e,t,r){t&&c(e.prototype,t);r&&c(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var f=function(){function e(t){u(this,e);this.widgetClassDefinitionRetriever=t.widgetClassDefinitionRetriever;this.StdModelClass=t.StdModelClass;this.rowsEnabled=t.rowsEnabled}d(e,[{key:"build",value:function e(t){var r;if(i.AbstractWidgetData[t.type]){var a=BaseKit.Widget.AbstractModel.extend({defaults:s({},i.AbstractWidgetData[t.type].defaults)});r=a}else r=this.widgetClassDefinitionRetriever.getDefinition({widgetType:t.type,type:"Model",StdClass:this.StdModelClass});var o=new r(s(s({},t.data),{},{uniqueId:t.uniqueId}));if(this.rowsEnabled){o.stateManager=new n.default(o);o.stateManager.storeCurrentState()}return o}}]);return e}();var p=t["default"]=f},63792:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(69464));var i=r(9709);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function l(e,t,r){t&&s(e.prototype,t);r&&s(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var u=function(){function e(t){o(this,e);this.widgetClassDefinitionRetriever=t.widgetClassDefinitionRetriever;this.StdViewClass=t.StdViewClass}l(e,[{key:"build",value:function e(t,r){if(i.AbstractWidgetSite[t.type])return this._buildAbstractWidget(t,r);var a=this.widgetClassDefinitionRetriever.getDefinition({widgetType:t.type,type:"View",StdClass:this.StdViewClass});var o=this._setSelectorAccordingToWidgetType(t);var s=new a({el:o,properties:d(t),model:r,store:n.default,profile:BaseKit.Globals.profile,pages:BaseKit.Globals.pages,assets:BaseKit.Globals.imageAssets,enablePolicyPages:t.enablePolicyPages});return s}},{key:"_buildAbstractWidget",value:function e(t,r){var a=BaseKit.Widget.AbstractView;var o=this._setSelectorAccordingToWidgetType(t);var s={el:o,properties:d(t),model:r,store:n.default,profile:BaseKit.Globals.profile,pages:BaseKit.Globals.pages,assets:BaseKit.Globals.imageAssets,enablePolicyPages:t.enablePolicyPages,abstractWidget:i.AbstractWidgetSite[t.type]};return new a(s)}},{key:"_setSelectorAccordingToWidgetType",value:function e(t){if(t.isTemplateWidget)return"#".concat(t.uniqueHTMLId);return'[data-uniqueid="'.concat(t.uniqueId,'"]')}}]);return e}();var c=t["default"]=u;function d(e){return{fixed:e.fixed,name:e.name,className:e.className,uniqueId:e.uniqueId,uniqueHTMLId:e.uniqueHTMLId,debugMode:e.debugMode||void 0,type:e.type,ref:e.ref}}},60813:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=l(r(13745));var i=r(24219);var a=l(r(1904));var o=l(r(3887));var s=r(22895);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function d(e,t,r){t&&c(e.prototype,t);r&&c(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var f=a.default.iOSFixRequired();var p=a.default.isiOS13OrAbove();var g=function(){function e(t){u(this,e);if(!t.featureFlagDataProvider.get("enableRows"))return;this.store=t.store;this.widgetSettingsData=t.widgetSettingsData;this.editModeLayoutView=t.editModeLayoutView;this.eventDispatcher=t.eventDispatcher;this.RowEditingToolbarView=t.RowEditingToolbarView;this.RowSettingsView=t.RowSettingsView;this.RowSettingsViewEmailMixin=t.RowSettingsViewEmailMixin;this.TooltipView=t.TooltipView;this.templateRenderer=t.templateRenderer;this.widgetSettingsComponentViewFactory=t.widgetSettingsComponentViewFactory;this.rowLayoutControl=t.rowLayoutControl;this.envDataProvider=t.envDataProvider;this.widgetRegister=t.widgetRegister;this.featureFlagDataProvider=t.featureFlagDataProvider;this.featureFlagDataProvider.get("enableRows")&&this.editModeLayoutView.render();this.featureFlagDataProvider.get("formEmailVerification")&&(this.RowSettingsView=Cocktail.mixin(this.RowSettingsView,this.RowSettingsViewEmailMixin));this.attachEvents()}d(e,[{key:"attachEvents",value:function e(){Editor.Events.on("widgetSettings:changed",this.openSettings.bind(this))}},{key:"enable",value:function e(t){this._storeScrollPosition();this._cacheActiveRowView(t);f&&this.eventDispatcher.trigger("iosFrameBug:reset");this.editModeLayoutView.enableEditMode(this.rowView);this._renderViews()}},{key:"disable",value:function e(){this.store.dispatch((0,i.closeWidgetSettings)());this.editModeLayoutView.disableEditMode(this.rowView);if(f){this.eventDispatcher.trigger("iosFrameBug:fix");this._restoreScrollPosition()}p&&this._restoreScrollPosition()}},{key:"showStyleOptions",value:function e(){var t=this.widgetSettingsComponentViewFactory.build({widgetView:this.rowView,settingId:"widget-style-picker",autoSave:true});this.editModeLayoutView.getRegion("drawer").show(t);this.editModeLayoutView.getRegion("tooltip").empty()}},{key:"showRowPicker",value:function e(){this.editModeLayoutView.getRegion("drawer").empty();this.editModeLayoutView.getRegion("tooltip").empty();this.editModeLayoutView.getRegion("banner").empty();this.rowLayoutControl.enable(this.rowView)}},{key:"showRowLayoutSwitcher",value:function e(){var t=this.widgetSettingsComponentViewFactory.build({widgetView:this.rowView,settingId:"widget-layout-picker",autoSave:true});this.editModeLayoutView.getRegion("drawer").show(t);this.editModeLayoutView.getRegion("tooltip").empty()}},{key:"showShapeDividerSwitcher",value:function e(){var t=this.widgetSettingsComponentViewFactory.build({widgetView:this.rowView,settingId:"widget-shape-divider-picker",autoSave:true});this.editModeLayoutView.getRegion("drawer").show(t);this.editModeLayoutView.getRegion("tooltip").empty()}},{key:"showAnimationPicker",value:function e(){var t=this.widgetSettingsComponentViewFactory.build({widgetView:this.rowView,settingId:"widget-animation-picker",autoSave:true});this.editModeLayoutView.getRegion("animationPicker").show(t)}},{key:"showSectionHeightPicker",value:function e(){var t=this.widgetSettingsComponentViewFactory.build({widgetView:this.rowView,settingId:"widget-section-height-picker",autoSave:true});this.editModeLayoutView.getRegion("sectionHeightPicker").show(t)}},{key:"showSectionWidthPicker",value:function e(){var t=this.widgetSettingsComponentViewFactory.build({widgetView:this.rowView,settingId:"widget-section-width-picker",autoSave:true});this.editModeLayoutView.getRegion("sectionWidthPicker").show(t)}},{key:"showSectionGradientPicker",value:function e(){var t=this.widgetSettingsComponentViewFactory.build({widgetView:this.rowView,settingId:"widget-section-gradient-picker",autoSave:true});this.editModeLayoutView.getRegion("sectionGradientPicker").show(t)}},{key:"showSectionLinkPicker",value:function e(){var t=this.widgetSettingsComponentViewFactory.build({widgetView:this.rowView,settingId:"widget-section-link-picker",autoSave:false});this.editModeLayoutView.getRegion("sectionLinkPicker").show(t)}},{key:"openSettings",value:function e(t){if(!this.store.getState().site.isRowEditingMode)return;this._renderSettings(t);var r=this.editModeLayoutView.getRegion("settings").currentView;var n=this.widgetSettingsComponentViewFactory.build({widgetView:t});r.getRegion("settingsBody").show(n)}},{key:"isSettingsAlreadyOpen",value:function e(){var t=this.widgetSettingsData.get();return t.openWidgetUniqueId}},{key:"hideStyleOptions",value:function e(){this.editModeLayoutView.getRegion("drawer").empty();this._renderTooltip()}},{key:"_storeScrollPosition",value:function e(){this.scrollTop=p?(0,s.getIframeWindow)().scrollY:document.querySelector(".js-site-preview").scrollTop}},{key:"_restoreScrollPosition",value:function e(){p?(0,s.getIframeWindow)().scrollTo(0,this.scrollTop):document.querySelector(".js-site-preview").scrollTo(0,this.scrollTop)}},{key:"_showBanner",value:function e(){var t=this.widgetSettingsComponentViewFactory.build({widgetView:this.rowView,settingId:"widget-information"});this.editModeLayoutView.getRegion("banner").show(t)}},{key:"_cacheActiveRowView",value:function e(t){this.rowView=t}},{key:"_renderViews",value:function e(){this._renderToolbar();this._renderTooltip();this.rowView.isHeaderOrFooterRow()&&this._showBanner()}},{key:"_renderToolbar",value:function e(){var t=new this.RowEditingToolbarView({templateRenderer:this.templateRenderer,disableEditMode:this.disable.bind(this),editMode:this,rowProperties:this.rowView.properties,envDataProvider:this.envDataProvider});this.editModeLayoutView.getRegion("toolbar").show(t)}},{key:"_renderTooltip",value:function e(){if(o.default.getItem("rowEditModeContentHintShown"))return;var t="Tap any content to change its properties";var r=new this.TooltipView({text:(0,n.default)("editor.row_editing.content_hint",t),templateRenderer:this.templateRenderer,closeCallback:function e(){o.default.setItem("rowEditModeContentHintShown",true)}});this.editModeLayoutView.getRegion("tooltip").show(r)}},{key:"_renderSettings",value:function e(t){var r=this.widgetRegister.getParentByUniqueId(t.model.get("uniqueId"));var n=new this.RowSettingsView({store:this.store,templateRenderer:this.templateRenderer,model:t.model,profileModel:t.profileModel,title:t.getSettings().title,widgetView:t,parentWidget:r});this.editModeLayoutView.getRegion("settings").show(n);this.settings=n;Editor.Events.on("setting:error:show",this.showSettingsError.bind(this));Editor.Events.on("setting:error:clear",this.clearSettingsError.bind(this));Editor.Events.on("setting:save:enable",this._enableSaveSettings.bind(this));Editor.Events.on("setting:save:disable",this._disableSaveSettings.bind(this));this._removeTooltip()}},{key:"_removeTooltip",value:function e(){this.editModeLayoutView.getRegion("tooltip").empty();o.default.setItem("rowEditModeContentHintShown",true)}},{key:"_getErrorModel",value:function e(t){var r=this.settings.settingsBody.currentView.collection.toArray();var n=!!(r&&r[0].get("groupId"));var i=null;n?this.settings.settingsBody.currentView.collection.toJSON().every((function(e){var r=e.collection.filter((function(e){return e.get("id")===t})).pop();if(r){i=r;return false}return true})):i=r.filter((function(e){return e.get("id")===t})).pop();return i}},{key:"showSettingsError",value:function e(t){if(!this.store.getState().site.isRowEditingMode)return;var r=this._getErrorModel(t.settingId);r&&r.set("error",t.message);var n=this.settings.settingsBody.currentView;n.render();this.settings.el.classList.add("error");this.settings.el.querySelector(".js-save-panel").disabled=true}},{key:"clearSettingsError",value:function e(t){if(!this.store.getState().site.isRowEditingMode)return;var r=this._getErrorModel(t);r&&r.set("error","");var n=this.settings.settingsBody.currentView;n.render();if(n.el.querySelectorAll(".popup-panel-form__field--error").length<1){this.settings.el.classList.remove("error");this.settings.el.querySelector(".js-save-panel").disabled=false}}},{key:"_enableSaveSettings",value:function e(){this.settings.el.classList.remove("error");this.settings.el.querySelector(".js-save-panel").disabled=false}},{key:"_disableSaveSettings",value:function e(t){t&&this.settings.el.classList.add("error");this.settings.el.querySelector(".js-save-panel").disabled=true}}]);return e}();var h=t["default"]=g},82264:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(59298));function i(e){return e&&e.__esModule?e:{default:e}}var a=Marionette.LayoutView.extend({template:"row_editing_mode_layout",el:".js-row-edit-mode-elements",regions:{settings:"#row-editing-settings-region",tooltip:"#row-editing-tooltip-region",drawer:"#row-editing-drawer-region",toolbar:"#row-editing-toolbar-region",banner:"#row-editing-banner-region",rowPicker:"#row-editing-row-picker-region",animationPicker:"#row-editing-animation-picker-region",sectionHeightPicker:"#row-editing-section-height-picker-region",sectionWidthPicker:"#row-editing-section-width-picker-region",sectionGradientPicker:"#row-editing-section-gradient-picker-region",sectionLinkPicker:"#row-editing-section-link-picker-region"},enableEditMode:function e(t){n.default.enableEditMode(t);this._scrollActiveRowIntoView(t)},disableEditMode:function e(t){n.default.disableEditMode(t);this.regionManager.emptyRegions()},_scrollActiveRowIntoView:function e(t){t.el.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}});var o=t["default"]=a},31851:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(31170));var i=o(r(69464));var a=o(r(22895));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return d(e)||c(e)||u(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}function c(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=Backbone.View.extend({template:"row_editing_toolbar",events:{"click .js-exit-edit-mode":"exitEditMode","click .js-style-tab":"openStyleOptions","click .js-content-tab":"setContentView","click .js-layout-tab":"setLayoutView","click .js-shape-divider-tab":"setShapeDividerView","click .js-animation-tab":"setAnimationView","click .js-section-height-tab":"setSectionHeightView","click .js-section-width-tab":"setSectionWidthView","click .js-section-gradient-tab":"setSectionGradientView","click .js-section-link-tab":"setSectionLinkView"},className:"row-editing-toolbar row-editor",initialize:function e(t){this.templateRenderer=t.templateRenderer;this.disableEditMode=t.disableEditMode;this.editMode=t.editMode;this.rowProperties=t.rowProperties;this.envDataProvider=t.envDataProvider;this.sectionEdited=false;this.attachGlobalEvents()},attachGlobalEvents:function e(){Editor.Events.on("section:edited",this.onSectionEdited.bind(this));Editor.Events.on("widgetSettingsPanel:opened",this.onWidgetSettingsOpened.bind(this));Editor.Events.on("widgetSettings:exit-edit-mode",this.exitEditMode.bind(this));Editor.Events.on("rowEditMode:orientationchange",this.onOrientationChanged.bind(this))},render:function e(){var t=this.templateRenderer.render(this.template,{tabs:{content:true,style:true,layout:this._rowSupportsLayoutSwitching(),shapeDivider:this._rowSupportsShapeDivider(),animation:true,sectionHeight:true,sectionWidth:true,sectionGradient:true,sectionLink:true}});this.el.insertAdjacentHTML("beforeend",t);this._rowSupportsGradients()},exitEditMode:function e(){Editor.Events.trigger("widgetSettings:close");this.setContentView();this._removeBodyRowEditingClass();n.default.container.Tracker.track("Edited any widget inside a section",{section_edited:this.sectionEdited});this.disableEditMode()},setContentView:function e(){Editor.Events.trigger("EditModeTab:changed");this._removeBodyRowEditingClass();this.el.querySelector(".is-selected").classList.remove("is-selected");this.el.querySelector(".js-content-tab").classList.add("is-selected");this.editMode.hideStyleOptions();this._scrollToCurrentRow()},setLayoutView:function e(){this._removeBodyRowEditingClass();this._getSiteFrameElement().body.classList.add("row-editing-layout");this.el.querySelector(".is-selected").classList.remove("is-selected");this.el.querySelector(".js-layout-tab").classList.add("is-selected");["header","footer"].includes(this.rowProperties.parentZone)?this.editMode.showRowPicker():this.editMode.showRowLayoutSwitcher()},setShapeDividerView:function e(){Editor.Events.trigger("EditModeTab:changed");n.default.container.Tracker.track("Shape divider button clicked");this._removeBodyRowEditingClass();this._getSiteFrameElement().body.classList.add("row-editing-shape-divider");this.el.querySelector(".is-selected").classList.remove("is-selected");this.el.querySelector(".js-shape-divider-tab").classList.add("is-selected");this.editMode.showShapeDividerSwitcher()},setAnimationView:function e(){n.default.container.Tracker.track("Animation button clicked");this.editMode.showAnimationPicker()},setSectionHeightView:function e(){n.default.container.Tracker.track("Section height button clicked");this.editMode.showSectionHeightPicker()},setSectionWidthView:function e(){n.default.container.Tracker.track("Section width button clicked");this.editMode.showSectionWidthPicker()},setSectionGradientView:function e(){n.default.container.Tracker.track("Section gradient button clicked");this.editMode.showSectionGradientPicker()},setSectionLinkView:function e(){this.editMode.showSectionLinkPicker()},openStyleOptions:function e(){Editor.Events.trigger("EditModeTab:changed");this._removeBodyRowEditingClass();this._getSiteFrameElement().body.classList.add("row-editing-style");this.el.querySelector(".is-selected").classList.remove("is-selected");this.el.querySelector(".js-style-tab").classList.add("is-selected");this.editMode.showStyleOptions();this._scrollToCurrentRow()},_rowSupportsLayoutSwitching:function e(){var t=this.envDataProvider.get("rowLayouts");var r=t[this.rowProperties.rowType];var n=["header","footer"].includes(this.rowProperties.parentZone);var a=i.default.getState().user.capabilities.enableStandaloneMode;if(n&&a)return false;return r||n},_rowSupportsShapeDivider:function e(){if("footer"===this.rowProperties.parentZone)return false;var t=this.envDataProvider.get("rows");var r=[];Object.keys(t).forEach((function(e){r.push.apply(r,s(t[e]))}));if("undefined"===typeof this.rowProperties.rowType)return false;var n=this.rowProperties.rowType.replace(/-/g,"_");var i=r.filter((function(e){return e.id===n}))[0];if(i&&i.values&&"true"===i.values.disableShapeDivider)return false;return true},_rowSupportsGradients:function e(){var t=a.default.getIframeDocument().querySelector(".active-row.style--background-image");t&&this.el.querySelector(".js-section-gradient-tab").closest("li").setAttribute("hidden","true")},_removeBodyRowEditingClass:function e(){this._getSiteFrameElement().body.classList.remove("row-editing-style","row-editing-layout","row-editing-shape-divider")},_getSiteFrameElement:function e(){return document.querySelector("#siteFrame").contentDocument},_scrollToCurrentRow:function e(){var t=a.default.getIframeDocument().querySelector(".active-row");t&&t.scrollIntoView()},onSectionEdited:function e(){this.sectionEdited=true},onWidgetSettingsOpened:function e(){this.el.querySelector(".js-content-tab").classList.contains("is-selected")||this.setContentView()},onOrientationChanged:function e(){var t=this;setTimeout((function(){t._scrollToCurrentRow()}),200)}});var g=t["default"]=p},9094:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(13745));var i=r(24219);function a(e){return e&&e.__esModule?e:{default:e}}var o=27;var s=Marionette.LayoutView.extend({template:"row_settings_view",attributes:{role:"dialog","aria-labelledby":"row-settings-panel-title"},className:function e(){var t="popup-panel";if(this._widgetIsOnRight(this.options.parentWidget))return"".concat(t,"--left-aligned");return t},regions:{settingsBody:".js-settings-body"},events:{"click .js-close-panel":"closePanel",keydown:"handleKeydown",submit:"handleSubmit"},keepPanelOpen:false,initialize:function e(t){this.store=t.store;this.templateRenderer=t.templateRenderer;this.title=t.title;this.model=t.model;this.profileModel=t.profileModel;this.widgetView=t.widgetView;this.parentWidget=t.parentWidget;this.closePanelHandler=this.closePanel.bind(this);this.attachEvents()},attachEvents:function e(){Editor.Events.on("widgetSettings:exit-edit-mode",this.closePanelHandler);Editor.Events.on("widgetSettings:close",this.closePanelHandler);Editor.Events.on("dragdrop:dragStart",this.closePanelHandler)},render:function e(){var t=this.templateRenderer.render(this.template,{title:this.title,hasSettings:this.widgetView.getSettings().components.length>0,emptySettingMessage:this.widgetView.getSettings().emptySettingMessage||""});this.el.insertAdjacentHTML("beforeend",t)},removePanel:function e(){Editor.Events.off("widgetSettings:exit-edit-mode",this.closePanelHandler);Editor.Events.off("widgetSettings:close",this.closePanelHandler);Editor.Events.off("dragdrop:dragStart",this.closePanelHandler);this.remove();this.store.dispatch((0,i.closeWidgetSettings)())},closePanel:function e(){this.model.clear({silent:true});this.model.stateManager.restoreInitialState();this.profileModel.stateManager.restoreInitialState();this.removePanel()},save:function e(){if(this.model.hasChanged){this.model.save({widgetName:this.widgetView.properties.name,widgetUniqueId:this.widgetView.properties.uniqueId,fixed:this.widgetView.properties.fixed});this.model.stateManager.storeCurrentState()}if(this.profileModel.hasChanged){this.profileModel.save();this.profileModel.stateManager.storeCurrentState()}if(this.keepPanelOpen)return this;this.removePanel();return this},clearAllErrors:function e(){this.el.classList.remove("error");var t=this.settingsBody.currentView.collection.toArray();var r=!!(t&&t[0].get("groupId"));r?this.settingsBody.currentView.collection.toJSON().forEach((function(e){e.collection.toArray().forEach((function(e){return e.set("error","")}))})):t.forEach((function(e){return e.set("error","")}));var n=this.settingsBody.currentView;n.render()},handleSubmit:function e(t){var r=this;t.preventDefault();this.clearAllErrors();var n=false;var i=this.settingsBody.currentView.collection.toArray();var a=!!(i&&i[0].get("groupId"));if(a)n=this.settingsBody.currentView.collection.toJSON().some((function(e){var t=e.collection.toArray().filter((function(e){return e.get("required")}));return r.checkRequiredFields(t)}));else{var o=i.filter((function(e){return e.get("required")}));n=this.checkRequiredFields(o)}n||this.save()},checkRequiredFields:function e(t){var r=false;t.forEach((function(e){var t=e.get("value");if(!t||!t.length){r=true;var i={settingId:e.get("id"),message:(0,n.default)("global.message-field-required","This field is required")};Editor.Events.trigger("setting:error:show",i)}}));return r},handleKeydown:function e(t){t.keyCode===o&&this.closePanel()},_widgetIsOnRight:function e(t){return t.isColumn()&&t.model.collection.indexOf(t.model)>0}});var l=t["default"]=s},63050:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=s(r(62951));var i=s(r(62201));var a=s(r(84190));var o=r(31002);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){l(a,n,i,o,s,"next",e)}function s(e){l(a,n,i,o,s,"throw",e)}o(void 0)}))}}var c={regions:{preSettingsBody:".js-settings-pre-body"},initialize:function e(){this.addStoreSubscriber()},addStoreSubscriber:function e(){var t="widgetSettings.openWidgetUniqueId";this.slice=new n.default({store:this.store,stateId:t});this.state=this.slice.get();this.slice.subscribe(this.onWidgetSettingsOpen.bind(this))},onWidgetSettingsOpen:function e(t){var r=this;if((0,i.default)(this.state,t))return;this.showVerificationDialog();if(this.isEmailVerificationEnable()){this.settingsBody.currentView.on("render",(function(){r.addEventListener()}));this.addEventListener()}},updateEmailVerification:function e(){var t=this;return u(regeneratorRuntime.mark((function e(){var r,n,i,a;return regeneratorRuntime.wrap((function e(s){while(1)switch(s.prev=s.next){case 0:r=t.store.getState();n=r.site.ref;i=r.env.csrfToken;a="".concat(r.env.apiProxyBaseUrl,"/sites/").concat(n,"/email-verification");s.next=6;return t.store.dispatch((0,o.getEmailVerification)(a,i));case 6:case"end":return s.stop()}}),e)})))()},showVerificationDialog:function e(){var t=this;return u(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:r=t.getEmailSettingsComponentModel();if(!r){i.next=7;break}n=r.get("value");if(!(n&&!t.isEmailVerified(n))){i.next=7;break}i.next=6;return t.updateEmailVerification();case 6:if(t.isEmailUnverified(n)){t.emailToVerify=n;t.showEmailVerificationInfo()}case 7:case"end":return i.stop()}}),e)})))()},addEventListener:function e(){var t=this.getEmailSettingsComponentView();this.listenToOnce(t,"setting:change",this.handleEmailVerificationOnChange)},handleEmailVerificationOnChange:function e(t,r){if(this.isEmailVerified(r)){this.keepPanelOpen=false;this.emailToVerify=null}else{this.keepPanelOpen=true;this.emailToVerify=r}this.verificationView&&this.isEmailVerified(r)&&this.verificationView.remove()},remove:function e(){this.slice.unsubscribe()},handleSubmit:function e(){this.emailToVerify&&this.showEmailVerificationInfo()},showEmailVerificationInfo:function e(){this.verificationView=new a.default({email:this.emailToVerify,csrfToken:this.store.getState().env.csrfToken}).render();this.$(".js-settings-pre-body").empty().append(this.verificationView.el)},isEmailVerified:function e(t){return this.store.getState().site.emailVerification.some((function(e){return t===e.email&&1===parseInt(e.verified,10)}))},isEmailUnverified:function e(t){return this.store.getState().site.emailVerification.some((function(e){return t===e.email&&0===parseInt(e.verified,10)}))},getEmailSettingsComponentView:function e(){var t=this.settingsBody.currentView.children;var r=this.getEmailSettingsComponentModel();var n=null;t.findByModel(r)?n=t.findByModel(r):t.each((function(e){e.children.findByModel(r)&&(n=e.children.findByModel(r))}));return n},getEmailSettingsComponentModel:function e(){var t=this.settingsBody.currentView.collection;var r=t.some((function(e){return e.get("groupId")}));var n=null;r?t.forEach((function(e){var t=e.get("collection");var r=t.filter((function(e){return e.get("emailVerificationEnable")}));r.length>0&&(n=r[0])})):n=t.filter((function(e){return e.get("emailVerificationEnable")}))[0];return n},removePanel:function e(){this.keepPanelOpen=true},isEmailVerificationEnable:function e(){var t=this.settingsBody.currentView.collection;var r=t.some((function(e){return e.get("groupId")}));var n=false;n=r?t.some((function(e){return e.get("collection").some((function(e){return e.get("emailVerificationEnable")}))})):t.some((function(e){return e.get("emailVerificationEnable")}));return n}};var d=t["default"]=c},59298:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(69464));var i=r(31002);function a(e){return e&&e.__esModule?e:{default:e}}var o={enableEditMode:function e(t){this._addEditingClassToRowElement(t);this._addEditingClassToSiteFrameBody();this._addEditingClassToEditorBody();n.default.dispatch((0,i.setRowEditingMode)(true))},disableEditMode:function e(t){this._removeEditingClassFromRowElement(t);this._removeEditingClassFromSiteFrameBody();this._removeEditingClassFromEditorBody();n.default.dispatch((0,i.setRowEditingMode)(false))},_getSiteFrameElement:function e(){return document.querySelector("#siteFrame").contentDocument},_addEditingClassToEditorBody:function e(){document.body.classList.add("row-editing");document.body.classList.add("hide-primary-ui")},_addEditingClassToSiteFrameBody:function e(){var t=this._getSiteFrameElement();t.body.classList.add("row-editing")},_addEditingClassToRowElement:function e(t){t.el.classList.add("active-row")},_removeEditingClassFromEditorBody:function e(){document.body.classList.remove("row-editing");document.body.classList.remove("hide-primary-ui")},_removeEditingClassFromSiteFrameBody:function e(){var t=this._getSiteFrameElement();t.body.classList.remove("row-editing")},_removeEditingClassFromRowElement:function e(t){t.el.classList.remove("active-row")}};var s=t["default"]=o},53978:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(22895));var i=a(r(57789));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function l(e,t,r){t&&s(e.prototype,t);r&&s(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var u="row-layout-selection-mode";var c=function(){function e(t){o(this,e);this.rowLayoutSelectorPanelView=t.rowLayoutSelectorPanelView;this.disableHandler=this.disable.bind(this);this.closePanelViewHandler=this.closeRowLayoutView.bind(this)}l(e,[{key:"attachEvents",value:function e(){Editor.Events.on("rowLayoutSelectorView:close",this.disableHandler);Editor.Events.on("screenMode:change widgetSettings:close EditModeTab:changed",this.closePanelViewHandler);document.querySelector(".js-layout-selection-mode-overlay").addEventListener("click",this.closePanelViewHandler)}},{key:"enable",value:function e(t){this._enableRowLayoutSelectionMode();this.rowLayoutSelectorPanelView.setup({layoutType:t.properties.parentZone,pageRef:(0,i.default)().get("pageRef"),selectedRow:t.model.get("originalRowTemplateId"),uniqueId:t.properties.uniqueId});this.attachEvents();return this.rowLayoutSelectorPanelView.render()}},{key:"disable",value:function e(){Editor.Events.off("rowLayoutSelectorView:close",this.disableHandler);Editor.Events.off("screenMode:change widgetSettings:close EditModeTab:changed",this.closePanelViewHandler);this._disableRowLayoutSelectionMode()}},{key:"closeRowLayoutView",value:function e(){this.rowLayoutSelectorPanelView.closePanel()}},{key:"_enableRowLayoutSelectionMode",value:function e(){document.body.classList.add(u);n.default.getIframeDocument().body.classList.add(u)}},{key:"_disableRowLayoutSelectionMode",value:function e(){n.default.getIframeDocument().body.classList.remove(u);document.body.classList.remove(u)}}]);return e}();var d=t["default"]=c},17488:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(9878);var i=o(r(22895));var a=o(r(1904));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return d(e)||c(e)||u(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}function c(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=Marionette.ItemView.extend({template:"layout_preview_container",events:{"click .js-row-selector-cancel":"cancelChanges","click .js-row-selector-update":"saveChanges","click .js-row-selector-bg":"cancelChanges","click .js-update-row-template":"rowClicked"},initialize:function e(t){this.store=t.store;this.envDataProvider=t.envDataProvider;this.templateRenderer=t.templateRenderer;this.widgetApi=t.widgetApi},setup:function e(t){this.layoutType=t.layoutType;this.pageRef=t.pageRef;this.selectedRow=t.selectedRow;this.currentRow=t.selectedRow;this.uniqueId=t.uniqueId;this.setElement(i.default.getIframeDocument().getElementById("rowSelectorPreviewContainer"));this.loadingElement=this.el.querySelector(".js-loading")},beforeRender:function e(){if(!this.store.getState().site.isRowEditingMode&&a.default.isiOS()){var t=i.default.getIframeDocument().querySelector(".is-setting-open .js-edit-control");this.el.querySelector(".row-selector-panel").style.top="".concat(t.getBoundingClientRect().bottom,"px")}this.loadingElement.removeAttribute("hidden");this.el.removeAttribute("hidden")},render:function e(){var t=this;this.beforeRender();var r=this.el.querySelector(".js-row-selector-list");(0,n.emptyElement)(r);this._fetchLayoutPreview({callback:function e(i){t.rowData=i;var a="";t.rowData.forEach((function(e){a+=t.templateRenderer.render(t.template,{rowHtml:e.html,id:e.id,selectedRow:t.selectedRow})}));t.loadingElement.setAttribute("hidden","hidden");(0,n.append)(r,a);t.onRender()}});return this},onRender:function e(){this._fixRowPreviewHeight()},closePanel:function e(){if(this.el.hasAttribute("hidden"))return;this.trigger("panel:close");this.el.setAttribute("hidden","hidden");this.el.querySelector(".row-selector-panel").removeAttribute("style");Editor.Events.trigger("rowLayoutSelectorView:close")},saveChanges:function e(){this._isSelectedRowChanged()&&this._updateRow(this.currentRow);this.closePanel()},cancelChanges:function e(){this.closePanel()},rowClicked:function e(t){this.currentRow=t.currentTarget.getAttribute("data-row-template-id");this.el.querySelector(".js-update-row-template.is-selected").classList.remove("is-selected");t.currentTarget.classList.add("is-selected");this.store.getState().site.isRowEditingMode&&this._isSelectedRowChanged()&&this.saveChanges()},_isSelectedRowChanged:function e(){return this.selectedRow!==this.currentRow},_updateRow:function e(t){this.widgetApi.replaceRow({uniqueId:this.uniqueId,rowTemplate:t})},_fetchLayoutPreview:function e(t){return fetch("/_/row-previews?zone=".concat(this.layoutType,"&page=").concat(this.pageRef),{headers:{"X-CSRF-Token":this.envDataProvider.get("csrfToken")},credentials:"include"}).then((function(e){return e.json()})).then((function(e){t.callback(e)}))},_fixRowPreviewHeight:function e(){s(i.default.getIframeDocument().querySelectorAll(".js-row-template-preview-markup")).forEach((function(e){e.parentElement.style.height="".concat(e.getBoundingClientRect().height,"px")}))}});var g=t["default"]=p},79010:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(){r(this,e);this.bundles={}}i(e,[{key:"addBundle",value:function e(t,r){this.bundles[t]=r}},{key:"hasBundle",value:function e(t){return Object.keys(this.bundles).includes(t)}},{key:"getBundle",value:function e(t){if(this.hasBundle(t))return this.bundles[t];return null}}]);return e}();var o=t["default"]=a},26255:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.properties=t}i(e,[{key:"get",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Object.keys(this.properties).includes(t))return r;return this.properties[t]}}]);return e}();var o=t["default"]=a},30196:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(79010));var i=a(r(26255));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return d(e)||c(e,t)||l(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n=[];var i=true;var a=false;var o,s;try{for(r=r.call(e);!(i=(o=r.next()).done);i=true){n.push(o.value);if(t&&n.length===t)break}}catch(e){a=true;s=e}finally{try{i||null==r["return"]||r["return"]()}finally{if(a)throw s}}return n}function d(e){if(Array.isArray(e))return e}var f=function e(t){t.service("ServerVars",n.default);t.decorator("ServerVars",(function(e){var t="__SERVER_VARS__";void 0!==window[t]&&Object.entries(window[t]).forEach((function(t){var r=o(t,2),n=r[0],a=r[1];var s=new i.default(a);e.addBundle(n,s)}));return e}));return t};var p=t["default"]=f},19238:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;window.App=window.App||{};var r=function e(t,r,n){return new Promise((function(e,i){var a={type:t,payload:n};var o=new MessageChannel;o.port1.onmessage=function(t){var r=t.data;o.port1.close();r.error?i(r.error):e(r.response)};r.postMessage(a,"*",[o.port2])}))};App.sendCrossOriginMessage=r;var n=t["default"]=r},97115:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=s;var n=o(r(97248));var i=o(r(53798));var a=o(r(73796));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){e.factory("languageDataProvider",(function(){return new i.default}));e.factory("languageMenuRendererFactory",(function(e){return new n.default({LanguageMenuRenderer:a.default,languageDataProvider:e.editorSiteLanguageDataProvider,sitePreview:true,templateRenderer:e.TemplateRenderer})}));return e}},524:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=t["default"]=function(){function e(t){r(this,e);this.props=t}i(e,[{key:"get",value:function e(t){return this.props[t]||null}},{key:"toJSON",value:function e(){return this.props}}]);return e}()},62951:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=t["default"]=function(){function e(t){r(this,e);this.store=t.store;this.stateId=t.stateId;this.currentState=this.get()}i(e,[{key:"subscribe",value:function e(t){this.onChange=t;this.unsubscribeMethod=this.store.subscribe(this._handleChange.bind(this))}},{key:"unsubscribe",value:function e(){this.unsubscribeMethod()}},{key:"get",value:function e(){var t=o(this.store.getState(),this.stateId);if(t)return t;return{}}},{key:"_handleChange",value:function e(){var t=this.get();if(t!==this.currentState){this.currentState=t;this.onChange(this.currentState)}}}]);return e}();function o(e,t){if(!t)return e;var r=e;var n=t.split(".");n.forEach((function(e){var t=r[e];"undefined"!==typeof t&&(r=t)}));return r}},33821:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(62951));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=t["default"]=function(){function e(t){a(this,e);this.store=t.store}s(e,[{key:"build",value:function e(t){return new n.default({store:this.store,stateId:t.stateId})}}]);return e}()},24300:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setBrand=t.SET_BRAND=void 0;var r=t.SET_BRAND="SET_BRAND";var n=t.setBrand=function e(t){return{type:r,brand:t}}},90031:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.enableAddButton=t.disableAddButton=t.changeSavedColours=t.changePanel=t.changeColour=t.ENABLE_ADD=t.DISABLE_ADD=t.CHANGE_SAVED_COLOURS=t.CHANGE_PANEL=t.CHANGE_COLOUR=void 0;var r=t.CHANGE_PANEL="CHANGE_PANEL";var n=t.ENABLE_ADD="ENABLE_ADD";var i=t.DISABLE_ADD="DISABLE_ADD";var a=t.CHANGE_COLOUR="CHANGE_COLOUR";var o=t.CHANGE_SAVED_COLOURS="CHANGE_SAVED_COLOURS";var s=t.changePanel=function e(t){return{type:r,panel:t}};var l=t.enableAddButton=function e(){return{type:n}};var u=t.disableAddButton=function e(){return{type:i}};var c=t.changeColour=function e(t){return{type:a,colour:t}};var d=t.changeSavedColours=function e(t){return{type:o,colours:t}}},18687:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setContentSetData=t.SET_CONTENT_SET=void 0;var r=t.SET_CONTENT_SET="SET_CONTENT_SET";var n=t.setContentSetData=function e(t){return{type:r,data:t}}},43276:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.updateSiteColorSet=t.setEnvData=t.UPDATE_SITE_COLOR_SET=t.SET_ENV=void 0;var r=t.SET_ENV="SET_ENV";var n=t.UPDATE_SITE_COLOR_SET="UPDATE_SITE_COLOR_SET";var i=t.setEnvData=function e(t){return{type:r,data:t}};var a=t.updateSiteColorSet=function e(t){return{type:n,colorSet:t}}},50909:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.importContentSuccess=t.importContentStart=t.importContentFailure=t.importContent=t.getWidgetsSuccess=t.getWidgetsStart=t.getWidgetsFailure=t.getWidgets=t.getSitePagesSuccess=t.getSitePagesStart=t.getSitePagesFailure=t.getSitePages=t.changeTextFilter=t.changeSourcePage=t.changeIncludeText=t.changeIncludeImg=t.changeImgFilter=t.WIDGETS_LOADING_SUCCESS=t.WIDGETS_LOADING_START=t.WIDGETS_LOADING_FAILURE=t.PAGES_LOADING_SUCCESS=t.PAGES_LOADING_START=t.PAGES_LOADING_FAILURE=t.IMPORT_CONTENT_SUCCESS=t.IMPORT_CONTENT_START=t.IMPORT_CONTENT_FAILURE=t.CHANGE_TEXT_FILTER=t.CHANGE_SOURCE_PAGE=t.CHANGE_INCLUDE_TEXT=t.CHANGE_INCLUDE_IMG=t.CHANGE_IMG_FILTER=void 0;function r(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,l,"next",e)}function l(e){r(o,i,a,s,l,"throw",e)}s(void 0)}))}}var i=t.WIDGETS_LOADING_START="WIDGETS_LOADING_START";var a=t.WIDGETS_LOADING_SUCCESS="WIDGETS_LOADING_SUCCESS";var o=t.WIDGETS_LOADING_FAILURE="WIDGETS_LOADING_FAILURE";var s=t.PAGES_LOADING_START="SITE_PAGES_LOADING_START";var l=t.PAGES_LOADING_SUCCESS="SITE_PAGES_LOADING_SUCCESS";var u=t.PAGES_LOADING_FAILURE="SITE_PAGES_LOADING_FAILURE";var c=t.CHANGE_TEXT_FILTER="CHANGE_TEXT_FILTER";var d=t.CHANGE_IMG_FILTER="CHANGE_IMG_FILTER";var f=t.CHANGE_INCLUDE_TEXT="CHANGE_INCLUDE_TEXT";var p=t.CHANGE_INCLUDE_IMG="CHANGE_INCLUDE_IMG";var g=t.IMPORT_CONTENT_START="IMPORT_CONTENT_START";var h=t.IMPORT_CONTENT_SUCCESS="IMPORT_CONTENT_SUCCESS";var v=t.IMPORT_CONTENT_FAILURE="IMPORT_CONTENT_FAILURE";var m=t.CHANGE_SOURCE_PAGE="CHANGE_SOURCE_PAGE";var y=t.getWidgetsStart=function e(){return{type:i}};var b=t.getWidgetsSuccess=function e(t,r,n){return{type:a,payload:{widgets:t,siteRef:r,pageRef:n}}};var w=t.getWidgetsFailure=function e(t){return{type:o,error:true,payload:t}};var _=t.getWidgets=function e(t,r,i,a){return function(){var e=n(regeneratorRuntime.mark((function e(n){var o,s,l;return regeneratorRuntime.wrap((function e(u){while(1)switch(u.prev=u.next){case 0:n(y());u.prev=1;u.next=4;return window.fetch(t,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":r},method:"GET"});case 4:o=u.sent;if(!(200===o.status)){u.next=14;break}u.next=8;return o.json();case 8:s=u.sent;l=s.widgets;l.forEach((function(e){e.ref=parseInt(e.ref,10)}));n(b(s.widgets,i,a));u.next=15;break;case 14:n(w({message:"Server error"}));case 15:u.next=20;break;case 17:u.prev=17;u.t0=u["catch"](1);n(w(u.t0));case 20:case"end":return u.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}()};var S=t.getSitePagesStart=function e(){return{type:s}};var P=t.getSitePagesSuccess=function e(t,r){return{type:l,payload:{siteRef:r,pages:t}}};var E=t.getSitePagesFailure=function e(t){return{type:u,error:true,payload:t}};var k=t.getSitePages=function e(t,r,i){return function(){var e=n(regeneratorRuntime.mark((function e(n){var a,o;return regeneratorRuntime.wrap((function e(s){while(1)switch(s.prev=s.next){case 0:n(S());s.prev=1;s.next=4;return window.fetch(t,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":r},method:"GET"});case 4:a=s.sent;if(!(200===a.status)){s.next=12;break}s.next=8;return a.json();case 8:o=s.sent;n(P(o.pages,i));s.next=13;break;case 12:n(E({message:"Server error"}));case 13:s.next=18;break;case 15:s.prev=15;s.t0=s["catch"](1);n(E(s.t0));case 18:case"end":return s.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}()};var C=t.changeSourcePage=function e(t){return{type:m,payload:t}};var O=t.changeTextFilter=function e(t){return{type:c,payload:t}};var A=t.changeImgFilter=function e(t){return{type:d,payload:t}};var T=t.changeIncludeText=function e(t){return{type:f,payload:t}};var j=t.changeIncludeImg=function e(t){return{type:p,payload:t}};var D=t.importContentStart=function e(){return{type:g}};var L=t.importContentSuccess=function e(){return{type:h}};var R=t.importContentFailure=function e(t){return{type:v,error:true,payload:t}};var I=t.importContent=function e(t,r,i){return function(){var e=n(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function e(o){while(1)switch(o.prev=o.next){case 0:n(D());o.prev=1;o.next=4;return window.fetch(t,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":r},method:"POST",body:JSON.stringify(i)});case 4:a=o.sent;200===a.status?n(L()):n(R({message:"Server error"}));o.next=11;break;case 8:o.prev=8;o.t0=o["catch"](1);n(R(o.t0));case 11:case"end":return o.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}},32686:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.updateLanguageStatus=t.updateDefaultLanguage=t.setSiteLanguages=t.setShowChangeLanguage=t.setLocalisedLanguages=t.setDefaultLanguage=t.removeSelectedPages=t.removeActiveLanguage=t.deleteLanguage=t.changeLanguage=t.addSiteLanguagePages=t.addSiteActiveLanguage=t.addSelectedPages=t.UPDATE_LANGUAGE_STATUS_SUCCESS=t.UPDATE_LANGUAGE_STATUS_START=t.UPDATE_LANGUAGE_STATUS_FAILED=t.UPDATE_DEFAULT_LANGUAGE_SUCCESS=t.UPDATE_DEFAULT_LANGUAGE_START=t.UPDATE_DEFAULT_LANGUAGE_FAILED=t.SET_SITE_LANGUAGES=t.SET_SHOW_CHANGE_LANGUAGE=t.SET_LOCALISED_LANGUAGES=t.SET_DEFAULT=t.REMOVE_SITE_ACTIVE_LANGUAGE=t.REMOVE_SELECTED_PAGES=t.DELETE_LANGUAGE_SUCCESS=t.DELETE_LANGUAGE_START=t.DELETE_LANGUAGE_FAILED=t.DELETE_LANGUAGE=t.CHANGE_LANGUAGE=t.ADD_SITE_LANGUAGE_PAGES_SUCCESS=t.ADD_SITE_LANGUAGE_PAGES_START=t.ADD_SITE_LANGUAGE_PAGES_FAILED=t.ADD_SITE_ACTIVE_LANGUAGE=t.ADD_SELECTED_PAGES=void 0;function r(e,t){return s(e)||o(e,t)||i(e,t)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n=[];var i=true;var a=false;var o,s;try{for(r=r.call(e);!(i=(o=r.next()).done);i=true){n.push(o.value);if(t&&n.length===t)break}}catch(e){a=true;s=e}finally{try{i||null==r["return"]||r["return"]()}finally{if(a)throw s}}return n}function s(e){if(Array.isArray(e))return e}function l(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){l(a,n,i,o,s,"next",e)}function s(e){l(a,n,i,o,s,"throw",e)}o(void 0)}))}}var c=t.CHANGE_LANGUAGE="CHANGE_LANGUAGE";var d=t.SET_DEFAULT="SET_DEFAULT";var f=t.SET_SITE_LANGUAGES="SET_SITE_LANGUAGES";var p=t.DELETE_LANGUAGE="DELETE_LANGUAGE";var g=t.UPDATE_DEFAULT_LANGUAGE_START="UPDATE_DEFAULT_LANGUAGE_START";var h=t.UPDATE_DEFAULT_LANGUAGE_FAILED="UPDATE_DEFAULT_LANGUAGE_FAILED";var v=t.UPDATE_DEFAULT_LANGUAGE_SUCCESS="UPDATE_DEFAULT_LANGUAGE_SUCCESS";var m=t.ADD_SITE_ACTIVE_LANGUAGE="ADD_SITE_ACTIVE_LANGUAGE";var y=t.REMOVE_SITE_ACTIVE_LANGUAGE="REMOVE_SITE_ACTIVE_LANGUAGE";var b=t.ADD_SELECTED_PAGES="ADD_SELECTED_PAGES";var w=t.REMOVE_SELECTED_PAGES="REMOVE_SELECTED_PAGES";var _=t.ADD_SITE_LANGUAGE_PAGES_START="ADD_SITE_LANGUAGE_PAGES_START";var S=t.ADD_SITE_LANGUAGE_PAGES_SUCCESS="ADD_SITE_LANGUAGE_PAGES_SUCCESS";var P=t.ADD_SITE_LANGUAGE_PAGES_FAILED="ADD_SITE_LANGUAGE_PAGES_FAILED";var E=t.DELETE_LANGUAGE_START="DELETE_LANGUAGE_START";var k=t.DELETE_LANGUAGE_SUCCESS="DELETE_LANGUAGE_SUCCESS";var C=t.DELETE_LANGUAGE_FAILED="DELETE_LANGUAGE_FAILED";var O=t.UPDATE_LANGUAGE_STATUS_START="UPDATE_LANGUAGE_STATUS_START";var A=t.UPDATE_LANGUAGE_STATUS_FAILED="UPDATE_LANGUAGE_STATUS_FAILED";var T=t.UPDATE_LANGUAGE_STATUS_SUCCESS="UPDATE_LANGUAGE_STATUS_SUCCESS";var j=t.SET_LOCALISED_LANGUAGES="SET_LOCALISED_LANGUAGES";var D=t.SET_SHOW_CHANGE_LANGUAGE="SET_SHOW_CHANGE_LANGUAGE";var L=t.changeLanguage=function e(t){return{type:c,lang:t}};var R=t.setDefaultLanguage=function e(t){return{type:d,lang:t}};var I=t.setSiteLanguages=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:f,languages:t}};var M=function(){var e=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",window.fetch("/refresh",{method:"GET",credentials:"include"}));case 1:case"end":return t.stop()}}),e)})));return function t(){return e.apply(this,arguments)}}();var x=function e(){return{type:E}};var N=function e(t){return{type:C,error:true,payload:t}};var F=function e(t){return{type:k,siteLanguages:t}};var V=t.deleteLanguage=function e(t){var r=t.url,n=t.token;return function(){var e=u(regeneratorRuntime.mark((function e(t){var i,a,o;return regeneratorRuntime.wrap((function e(s){while(1)switch(s.prev=s.next){case 0:t(x());s.prev=1;s.next=4;return window.fetch(r,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":n},method:"DELETE"});case 4:i=s.sent;if(!(200===i.status)){s.next=15;break}s.next=8;return i.json();case 8:a=s.sent;o=a.siteLanguages;s.next=12;return M();case 12:t(F(o));s.next=16;break;case 15:t(N({message:"Server error"}));case 16:s.next=21;break;case 18:s.prev=18;s.t0=s["catch"](1);t(N(s.t0));case 21:case"end":return s.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}()};var B=function e(){return{type:g}};var W=function e(t){return{type:h,error:true,payload:t}};var G=function e(t,r){return{type:v,payload:{language:t,oldLanguageCode:r}}};var q=t.updateDefaultLanguage=function e(t){var n=t.siteRef,i=t.url,a=t.token,o=t.language,s=t.oldLanguageCode;return function(){var e=u(regeneratorRuntime.mark((function e(t){var l,u,c,d,f,p;return regeneratorRuntime.wrap((function e(g){while(1)switch(g.prev=g.next){case 0:t(B());g.prev=1;g.next=4;return window.fetch(i,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":a},method:"PUT",body:JSON.stringify({defaultLanguage:o})});case 4:l=g.sent;if(!(200===l.status)){g.next=16;break}g.next=8;return M();case 8:u=g.sent;g.next=11;return u.json();case 11:c=g.sent;d=c.sites.filter((function(e){return e.ref===n})),f=r(d,1),p=f[0];t(G(p.siteDefaultLanguage,s));g.next=17;break;case 16:t(W({message:"Server error"}));case 17:g.next=22;break;case 19:g.prev=19;g.t0=g["catch"](1);t(W(g.t0));case 22:case"end":return g.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}()};var U=t.addSiteActiveLanguage=function e(t){var r=t.language;return{type:m,payload:{language:r}}};var H=t.addSelectedPages=function e(t){var r=t.pages;return{type:b,payload:{pages:r}}};var z=t.removeSelectedPages=function e(){return{type:w}};var $=t.removeActiveLanguage=function e(){return{type:y}};var K=function e(){return{type:_}};var Z=function e(t){var r=t.siteLanguages;return{type:S,siteLanguages:r}};var Y=function e(t){return{type:P,error:true,payload:t}};var X=t.addSiteLanguagePages=function e(t){var r=t.url,n=t.token,i=t.pages;return function(){var e=u(regeneratorRuntime.mark((function e(t){var a,o,s;return regeneratorRuntime.wrap((function e(l){while(1)switch(l.prev=l.next){case 0:t(K());l.prev=1;l.next=4;return window.fetch(r,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":n},method:"POST",body:JSON.stringify({pages:i})});case 4:a=l.sent;if(!(200===a.status)){l.next=15;break}l.next=8;return a.json();case 8:o=l.sent;s=o.siteLanguages;l.next=12;return M();case 12:t(Z({siteLanguages:s}));l.next=16;break;case 15:t(Y({message:"Server error"}));case 16:l.next=21;break;case 18:l.prev=18;l.t0=l["catch"](1);t(Y(l.t0));case 21:case"end":return l.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}()};var J=function e(){return{type:O}};var Q=function e(t){var r=t.siteLanguages;return{type:T,siteLanguages:r}};var ee=function e(t){return{type:A,error:true,payload:t}};var te=t.updateLanguageStatus=function e(t){var r=t.url,n=t.token,i=t.active;return function(){var e=u(regeneratorRuntime.mark((function e(t){var a,o,s;return regeneratorRuntime.wrap((function e(l){while(1)switch(l.prev=l.next){case 0:t(J());l.prev=1;l.next=4;return window.fetch(r,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":n},method:"PUT",body:JSON.stringify({active:i})});case 4:a=l.sent;if(!(200===a.status)){l.next=15;break}l.next=8;return a.json();case 8:o=l.sent;s=o.siteLanguages;l.next=12;return M();case 12:t(Q({siteLanguages:s}));l.next=16;break;case 15:t(ee({message:"Server error"}));case 16:l.next=21;break;case 18:l.prev=18;l.t0=l["catch"](1);t(ee(l.t0));case 21:case"end":return l.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}()};var re=t.setShowChangeLanguage=function e(t){return{type:D,show:t}};var ne=t.setLocalisedLanguages=function e(t){return{type:j,localisedLanguages:t}}},61842:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.showManageLanguageList=t.showLanguageList=t.hideManageLanguageList=t.hideLanguageList=t.OPEN_MANAGE_LANGUAGE_LIST=t.OPEN_ADD_LANGUAGE_LIST=t.CLOSE_MANAGE_LANGUAGE_LIST=t.CLOSE_ADD_LANGUAGE_LIST=void 0;var r=t.OPEN_ADD_LANGUAGE_LIST="OPEN_ADD_LANGUAGE_LIST";var n=t.CLOSE_ADD_LANGUAGE_LIST="CLOSE_ADD_LANGUAGE_LIST";var i=t.OPEN_MANAGE_LANGUAGE_LIST="OPEN_MANAGE_LANGUAGE_LIST";var a=t.CLOSE_MANAGE_LANGUAGE_LIST="CLOSE_MANAGE_LANGUAGE_LIST";var o=t.showLanguageList=function e(){return{type:r}};var s=t.hideLanguageList=function e(){return{type:n}};var l=t.showManageLanguageList=function e(){return{type:i}};var u=t.hideManageLanguageList=function e(){return{type:a}}},37058:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.openPagesSelector=t.openPageTitleEdit=t.openAddLanguageDone=t.openAddLanguage=t.closeAddLanguageDone=t.closeAddLanguage=t.OPEN_PAGE_TITLE_EDIT_MODAL=t.OPEN_PAGES_SELECTOR_MODAL=t.OPEN_ADD_LANGUAGE_MODAL=t.OPEN_ADD_LANGUAGE_DONE_MODAL=t.CLOSE_ADD_LANGUAGE_MODAL=t.CLOSE_ADD_LANGUAGE_DONE_MODAL=void 0;var r=t.OPEN_ADD_LANGUAGE_MODAL="OPEN_ADD_LANGUAGE_MODAL";var n=t.CLOSE_ADD_LANGUAGE_MODAL="CLOSE_ADD_LANGUAGE_MODAL";var i=t.OPEN_PAGES_SELECTOR_MODAL="OPEN_PAGES_SELECTOR_MODAL";var a=t.OPEN_PAGE_TITLE_EDIT_MODAL="OPEN_PAGE_TITLE_EDIT_MODAL";var o=t.OPEN_ADD_LANGUAGE_DONE_MODAL="OPEN_ADD_LANGUAGE_DONE_MODAL";var s=t.CLOSE_ADD_LANGUAGE_DONE_MODAL="CLOSE_ADD_LANGUAGE_DONE_MODAL";var l=t.openAddLanguage=function e(){return{type:r,modal:"add_language"}};var u=t.openPagesSelector=function e(){return{type:i,modal:"select_pages"}};var c=t.closeAddLanguage=function e(){return{type:n,modal:null}};var d=t.openPageTitleEdit=function e(){return{type:a,modal:"page_title_edit"}};var f=t.openAddLanguageDone=function e(){return{type:o,modal:"add_language_done"}};var p=t.closeAddLanguageDone=function e(){return{type:s,modal:null}}},24531:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.openModal=t.closeModal=t.OPEN_MODAL=t.CLOSE_MODAL=void 0;var r=t.OPEN_MODAL="OPEN_MODAL";var n=t.CLOSE_MODAL="CLOSE_MODAL";var i=t.openModal=function e(t){return{type:r,name:t}};var a=t.closeModal=function e(){return{type:n}}},23711:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.showNotification=t.hideNotification=t.NOTIFY=t.HIDE_NOTIFICATION=void 0;var r=t.NOTIFY="NOTIFY";var n=t.HIDE_NOTIFICATION="HIDE_NOTIFICATION";var i=t.showNotification=function e(t){return{type:r,payload:t}};var a=t.hideNotification=function e(){return{type:n}}},38869:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.updateOrder=t.setScript=t.setCurrentPageTextEntryMetadata=t.setCurrentPage=t.savePageChanges=t.orderPages=t.langPageTreeSuccess=t.getPageTreeSuccess=t.getPageTree=t.getLanguagesPageTree=t.editPageSuccess=t.editPageStart=t.editPageFailure=t.deletePage=t.deleteLangPage=t.addSinglePage=t.addScriptSuccess=t.addScriptStart=t.addScriptFailure=t.addPagesRequest=t.addPages=t.addLanguagesPageTree=t.SET_CURRENT_PAGE_TEXT_ENTRY_METADATA=t.SET_CURRENT_PAGE=t.PAGE_TREE_SUCCESS=t.PAGE_TREE_START=t.PAGE_TREE_FAILURE=t.ORDER_PAGES_SUCCESS=t.ORDER_PAGES_START=t.ORDER_PAGES_FAILURE=t.LANGUAGES_PAGE_TREE_SUCCESS=t.LANGUAGES_PAGE_TREE_START=t.LANGUAGES_PAGE_TREE_FAILURE=t.EDIT_PAGE_SUCCESS=t.EDIT_PAGE_START=t.EDIT_PAGE_FAILURE=t.DELETE_PAGE=t.DELETE_LANG_PAGE=t.ADD_SINGLE_PAGE=t.ADD_SCRIPT_SUCCESS=t.ADD_SCRIPT_START=t.ADD_SCRIPT_FAILURE=t.ADD_PAGES=t.ADD_LANGUAGES_PAGE_TREE=void 0;function r(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,l,"next",e)}function l(e){r(o,i,a,s,l,"throw",e)}s(void 0)}))}}var i=t.ADD_PAGES="ADD_PAGES";var a=t.ADD_SINGLE_PAGE="ADD_SINGLE_PAGE";var o=t.DELETE_PAGE="DELETE_PAGE";var s=t.DELETE_LANG_PAGE="DELETE_LANG_PAGE";var l=t.SET_CURRENT_PAGE="SET_CURRENT_PAGE";var u=t.SET_CURRENT_PAGE_TEXT_ENTRY_METADATA="SET_CURRENT_PAGE_TEXT_ENTRY_METADATA";var c=t.ADD_LANGUAGES_PAGE_TREE="ADD_LANGUAGES_PAGE_TREE";var d=t.ORDER_PAGES_START="ORDER_PAGES";var f=t.ORDER_PAGES_SUCCESS="ORDER_PAGES_SUCCESS";var p=t.ORDER_PAGES_FAILURE="ORDER_PAGES_FAILURE";var g=t.PAGE_TREE_START="PAGE_TREE_START";var h=t.PAGE_TREE_SUCCESS="PAGE_TREE_SUCCESS";var v=t.PAGE_TREE_FAILURE="PAGE_TREE_FAILURE";var m=t.LANGUAGES_PAGE_TREE_START="LANGUAGES_PAGE_TREE_START";var y=t.LANGUAGES_PAGE_TREE_SUCCESS="LANGUAGES_PAGE_TREE_SUCCESS";var b=t.LANGUAGES_PAGE_TREE_FAILURE="LANGUAGES_PAGE_TREE_FAILURE";var w=t.ADD_SCRIPT_SUCCESS="ADD_SCRIPT_SUCCESS";var _=t.ADD_SCRIPT_START="ADD_SCRIPT_START";var S=t.ADD_SCRIPT_FAILURE="ADD_SCRIPT_FAILURE";var P=t.EDIT_PAGE_SUCCESS="EDIT_PAGE_SUCCESS";var E=t.EDIT_PAGE_FAILURE="EDIT_PAGE_FAILURE";var k=t.EDIT_PAGE_START="EDIT_PAGE_START";var C=t.addPagesRequest=function e(t){return{type:i,pages:t}};var O=t.addPages=function e(t){return function(){var e=n(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function e(n){while(1)switch(n.prev=n.next){case 0:BaseKit.Globals.pages.resetPageTree(t);r(C(t));case 2:case"end":return n.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var A=t.addSinglePage=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:a,payload:{page:t,lang:r}}};var T=t.deletePage=function e(t){return{type:o,payload:t}};var j=t.deleteLangPage=function e(t,r){return{type:s,payload:{id:t,lang:r}}};var D=t.setCurrentPage=function e(t){return{type:l,ref:t}};var L=t.setCurrentPageTextEntryMetadata=function e(t){return{type:u,isRTLLanguage:t}};var R=t.addLanguagesPageTree=function e(t){return{type:c,payload:t}};var I=t.orderPages=function e(){return{type:d}};var M=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:f,payload:{tree:t,lang:r}}};var x=function e(t){return{type:p,payload:t,error:true}};var N=function e(){return{type:g}};var F=function e(t){return{type:h,payload:t}};var V=function e(t){return{type:v,error:true,payload:t}};var B=function e(){return{type:m}};var W=t.langPageTreeSuccess=function e(t){return{type:y,payload:t}};var G=function e(t){return{type:b,error:true,payload:t}};function q(e){return U.apply(this,arguments)}function U(){U=n(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:r="/_/order-pages";n={credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},method:"PUT",body:JSON.stringify(t)};return i.abrupt("return",window.fetch(r,n));case 3:case"end":return i.stop()}}),e)})));return U.apply(this,arguments)}var H=t.updateOrder=function e(t){return function(){var e=n(regeneratorRuntime.mark((function e(r){var n,i;return regeneratorRuntime.wrap((function e(a){while(1)switch(a.prev=a.next){case 0:r(I());a.prev=1;a.next=4;return q(t);case 4:n=a.sent;if(!(200===n.status)){a.next=12;break}a.next=8;return n.json();case 8:i=a.sent;r(M(i.pageTree,t.language||""));a.next=13;break;case 12:401===n.status?r(x({status:401})):r(x({message:"Unknown error"}));case 13:a.next=18;break;case 15:a.prev=15;a.t0=a["catch"](1);r(x(a.t0));case 18:case"end":return a.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}()};var z=t.getLanguagesPageTree=function e(t){return function(){var e=n(regeneratorRuntime.mark((function e(r){var n,i;return regeneratorRuntime.wrap((function e(a){while(1)switch(a.prev=a.next){case 0:r(B());a.prev=1;a.next=4;return window.fetch("/_/site-languages-page-tree",{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":t},method:"GET"});case 4:n=a.sent;if(!(200===n.status)){a.next=12;break}a.next=8;return n.json();case 8:i=a.sent;r(W(i));a.next=13;break;case 12:r(G({message:"Server error"}));case 13:a.next=18;break;case 15:a.prev=15;a.t0=a["catch"](1);r(G(a.t0));case 18:case"end":return a.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}()};var $=t.getPageTreeSuccess=function e(t){return function(){var e=n(regeneratorRuntime.mark((function e(r,n){var i;return regeneratorRuntime.wrap((function e(a){while(1)switch(a.prev=a.next){case 0:i=n();BaseKit.Globals.pages.resetPageTree(t);Editor.addSiteLanguagePagesToCollection(i.page.languages);r(F(t));case 4:case"end":return a.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()};var K=t.getPageTree=function e(t){return function(){var e=n(regeneratorRuntime.mark((function e(r){var n,i;return regeneratorRuntime.wrap((function e(a){while(1)switch(a.prev=a.next){case 0:r(N());a.prev=1;a.next=4;return window.fetch("/_/page-tree",{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":t},method:"GET"});case 4:n=a.sent;if(!(200===n.status)){a.next=12;break}a.next=8;return n.json();case 8:i=a.sent;r($(i.pageTree));a.next=13;break;case 12:r(V({message:"Server error"}));case 13:a.next=18;break;case 15:a.prev=15;a.t0=a["catch"](1);r(V(a.t0));case 18:case"end":return a.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}()};var Z=t.addScriptStart=function e(){return{type:_}};var Y=t.addScriptFailure=function e(t){return{type:S,error:true,payload:t}};var X=t.addScriptSuccess=function e(t,r){return{type:w,payload:{page:t,lang:r}}};var J=t.setScript=function e(t,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(){var e=n(regeneratorRuntime.mark((function e(n){var o;return regeneratorRuntime.wrap((function e(s){while(1)switch(s.prev=s.next){case 0:n(Z());s.prev=1;s.next=4;return window.fetch(t,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":r},method:"PUT",body:JSON.stringify(i)});case 4:o=s.sent;200===o.status?n(X(i,a)):n(Y({message:"Server error"}));s.next=11;break;case 8:s.prev=8;s.t0=s["catch"](1);n(Y(s.t0));case 11:case"end":return s.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()};var Q=t.editPageStart=function e(){return{type:k}};var ee=t.editPageSuccess=function e(t,r,n){return{type:P,payload:{ref:t,page:r,lang:n}}};var te=t.editPageFailure=function e(t){return{type:E,error:true,payload:t}};var re=t.savePageChanges=function e(t,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return function(){var e=n(regeneratorRuntime.mark((function e(n){var s;return regeneratorRuntime.wrap((function e(l){while(1)switch(l.prev=l.next){case 0:n(Q());l.prev=1;l.next=4;return window.fetch(t,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":r},method:"PUT",body:JSON.stringify(a)});case 4:s=l.sent;200===s.status?n(ee(i,a,o)):n(te({message:"Server error"}));l.next=11;break;case 8:l.prev=8;l.t0=l["catch"](1);n(te(l.t0));case 11:case"end":return l.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}},83489:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.updateStyles=t.showSave=t.removeError=t.openPanel=t.hideSave=t.enableSave=t.enableCancel=t.disableSave=t.disableCancel=t.closeSubpanel=t.closePanel=t.addError=t.UPDATE_STYLES=t.SHOW_SAVE=t.REMOVE_ERROR=t.OPEN_PANEL=t.HIDE_SAVE=t.ENABLE_SAVE=t.ENABLE_CANCEL=t.DISABLE_SAVE=t.DISABLE_CANCEL=t.CLOSE_SUBPANEL=t.CLOSE_PANEL=t.ADD_ERROR=void 0;var r=t.OPEN_PANEL="OPEN_PANEL";var n=t.CLOSE_PANEL="CLOSE_PANEL";var i=t.CLOSE_SUBPANEL="CLOSE_SUBPANEL";var a=t.ENABLE_SAVE="ENABLE_SAVE";var o=t.DISABLE_SAVE="DISABLE_SAVE";var s=t.HIDE_SAVE="HIDE_SAVE";var l=t.SHOW_SAVE="SHOW_SAVE";var u=t.ENABLE_CANCEL="ENABLE_CANCEL";var c=t.DISABLE_CANCEL="DISABLE_CANCEL";var d=t.ADD_ERROR="ADD_ERROR";var f=t.REMOVE_ERROR="REMOVE_ERROR";var p=t.UPDATE_STYLES="UPDATE_STYLES";var g=t.openPanel=function e(t){return{type:r,panel:t}};var h=t.closePanel=function e(t){return{type:n,panel:t}};var v=t.closeSubpanel=function e(){return{type:i}};var m=t.enableSave=function e(){return{type:a}};var y=t.disableSave=function e(){return{type:o}};var b=t.hideSave=function e(){return{type:s}};var w=t.showSave=function e(){return{type:l}};var _=t.enableCancel=function e(){return{type:u}};var S=t.disableCancel=function e(){return{type:c}};var P=t.addError=function e(){return{type:d}};var E=t.removeError=function e(){return{type:f}};var k=t.updateStyles=function e(t){return{type:p,styles:t}}},57644:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.showRowWidgetLayoutControlList=t.showRowWidgetControlList=t.showImageBackgroundControlList=t.setRowWidgetControlSettings=t.setRowWidgetControlRendered=t.openControlPanel=t.hideRowWidgetLayoutControlList=t.hideRowWidgetControlList=t.hideImageBackgroundControlList=t.closeControlPanel=t.changeRowWidgetStyle=t.SHOW_ROW_WIDGET_LAYOUT_CONTROL_LIST=t.SHOW_IMAGE_BACKGROUND_CONTROL_LIST=t.SET_ROW_WIDGET_CONTROL_SETTINGS=t.SET_ROW_WIDGET_CONTROL_RENDERED=t.OPEN_ROW_WIDGET_CONTROL_LIST=t.OPEN_CONTROL_PANEL=t.HIDE_ROW_WIDGET_LAYOUT_CONTROL_LIST=t.HIDE_IMAGE_BACKGROUND_CONTROL_LIST=t.CLOSE_ROW_WIDGET_CONTROL_LIST=t.CLOSE_CONTROL_PANEL=t.CHANGE_ROW_WIDGET_STYLE=void 0;var r=t.OPEN_ROW_WIDGET_CONTROL_LIST="OPEN_ROW_WIDGET_CONTROL_LIST";var n=t.CLOSE_ROW_WIDGET_CONTROL_LIST="CLOSE_ROW_WIDGET_CONTROL_LIST";var i=t.SHOW_ROW_WIDGET_LAYOUT_CONTROL_LIST="SHOW_ROW_WIDGET_LAYOUT_CONTROL_LIST";var a=t.HIDE_ROW_WIDGET_LAYOUT_CONTROL_LIST="HIDE_ROW_WIDGET_LAYOUT_CONTROL_LIST";var o=t.SET_ROW_WIDGET_CONTROL_SETTINGS="SET_ROW_WIDGET_CONTROL_SETTINGS";var s=t.CHANGE_ROW_WIDGET_STYLE="CHANGE_ROW_WIDGET_STYLE";var l=t.SET_ROW_WIDGET_CONTROL_RENDERED="SET_ROW_WIDGET_CONTROL_RENDERED";var u=t.SHOW_IMAGE_BACKGROUND_CONTROL_LIST="SHOW_IMAGE_BACKGROUND_CONTROL_LIST";var c=t.HIDE_IMAGE_BACKGROUND_CONTROL_LIST="HIDE_IMAGE_BACKGROUND_CONTROL_LIST";var d=t.OPEN_CONTROL_PANEL="OPEN_CONTROL_PANEL";var f=t.CLOSE_CONTROL_PANEL="CLOSE_CONTROL_PANEL";var p=t.showRowWidgetControlList=function e(){return{type:r}};var g=t.hideRowWidgetControlList=function e(){return{type:n}};var h=t.showRowWidgetLayoutControlList=function e(){return{type:i}};var v=t.hideRowWidgetLayoutControlList=function e(){return{type:a}};var m=t.setRowWidgetControlSettings=function e(t){var r=t.settings,n=t.rowType,i=t.zoneSharingScope,a=t.showLayout,s=t.showShapeDivider;return{type:o,settings:r,rowType:n,showLayout:a,zoneSharingScope:i,showShapeDivider:s}};var y=t.changeRowWidgetStyle=function e(t){return{type:s,settings:t}};var b=t.setRowWidgetControlRendered=function e(t){return{type:l,payload:t}};var w=t.showImageBackgroundControlList=function e(){return{type:u}};var _=t.hideImageBackgroundControlList=function e(){return{type:c}};var S=t.openControlPanel=function e(t){return{type:d,panel:t}};var P=t.closeControlPanel=function e(t){return{type:f,panel:t}}},31002:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.undoColorSetChange=t.setSiteStyleType=t.setSiteRef=t.setRowMoveMode=t.setRowEditingMode=t.setPrimaryDomain=t.setPrevFontSet=t.setPrevCustomColorSet=t.setPrevColorSet=t.setPolicyPageData=t.setOrigColorSet=t.setGlobalValues=t.setEnableRows=t.setEmailVerification=t.setEditorVersion=t.setDesktopScreenMode=t.setColorSet=t.initColorSets=t.getEmailVerification=t.UNDO_COLOR_SET_CHANGE=t.SET_SITE_STYLE_TYPE=t.SET_SITE_REF=t.SET_ROW_MOVE_MODE=t.SET_ROW_EDITING_MODE=t.SET_PRIMARY_DOMAIN=t.SET_PREV_FONT_SET=t.SET_PREV_CUSTOM_COLOR_SET=t.SET_PREV_COLOR_SET=t.SET_POLICY_PAGE_DATA=t.SET_ORIG_COLOR_SET=t.SET_GLOBAL_VALUES=t.SET_ENABLE_ROWS=t.SET_EMAIL_VERIFICATION=t.SET_EDITOR_VERSION=t.SET_DESKTOP_SCREEN_MODE=t.SET_COLOR_SET=t.INIT_COLOR_SETS=t.EMAIL_VERIFICATION_SUCCESS=t.EMAIL_VERIFICATION_START=t.EMAIL_VERIFICATION_FAILURE=void 0;function r(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,l,"next",e)}function l(e){r(o,i,a,s,l,"throw",e)}s(void 0)}))}}var i=t.SET_SITE_REF="SET_SITE_REF";var a=t.SET_PRIMARY_DOMAIN="SET_PRIMARY_DOMAIN";var o=t.SET_ENABLE_ROWS="SET_ENABLE_ROWS";var s=t.SET_EDITOR_VERSION="SET_EDITOR_VERSION";var l=t.SET_GLOBAL_VALUES="SET_GLOBAL_VALUES";var u=t.SET_POLICY_PAGE_DATA="SET_POLICY_PAGE_DATA";var c=t.SET_COLOR_SET="SET_COLOR_SET";var d=t.INIT_COLOR_SETS="INIT_COLOR_SETS";var f=t.SET_ORIG_COLOR_SET="SET_ORIG_COLOR_SET";var p=t.UNDO_COLOR_SET_CHANGE="UNDO_COLOR_SET_CHANGE";var g=t.SET_SITE_STYLE_TYPE="SET_SITE_STYLE_TYPE";var h=t.SET_PREV_COLOR_SET="SET_PREV_COLOR_SET";var v=t.SET_PREV_CUSTOM_COLOR_SET="SET_PREV_CUSTOM_COLOR_SET";var m=t.SET_PREV_FONT_SET="SET_PREV_FONT_SET";var y=t.SET_ROW_EDITING_MODE="SET_ROW_EDITING_MODE";var b=t.SET_ROW_MOVE_MODE="SET_ROW_MOVE_MODE";var w=t.SET_DESKTOP_SCREEN_MODE="SET_DESKTOP_SCREEN_MODE";var _=t.SET_EMAIL_VERIFICATION="SET_EMAIL_VERIFICATION";var S=t.EMAIL_VERIFICATION_START="EMAIL_VERIFICATION_START";var P=t.EMAIL_VERIFICATION_SUCCESS="EMAIL_VERIFICATION_SUCCESS";var E=t.EMAIL_VERIFICATION_FAILURE="EMAIL_VERIFICATION_FAILURE";var k=t.initColorSets=function e(t){return{type:d,payload:t}};var C=t.undoColorSetChange=function e(){return{type:p}};var O=t.setColorSet=function e(t){return{type:c,payload:t}};var A=t.setOrigColorSet=function e(){return{type:f}};var T=t.setSiteStyleType=function e(t){return{type:g,payload:t}};var j=t.setPrevColorSet=function e(t){return{type:h,payload:t}};var D=t.setPrevCustomColorSet=function e(t){return{type:v,payload:t}};var L=t.setPrevFontSet=function e(t){return{type:m,payload:t}};var R=t.setSiteRef=function e(t){return{type:i,ref:t}};var I=t.setPrimaryDomain=function e(t){return{type:a,domain:t}};var M=t.setEnableRows=function e(t){return{type:o,enableRows:t}};var x=t.setEditorVersion=function e(t){return{type:s,editorVersion:t}};var N=t.setGlobalValues=function e(t){return{type:l,payload:t}};var F=t.setPolicyPageData=function e(t){return{type:u,policyPageData:t}};var V=t.setRowEditingMode=function e(t){return{type:y,payload:t}};var B=t.setRowMoveMode=function e(t){return{type:b,payload:t}};var W=t.setDesktopScreenMode=function e(t){return{type:w,payload:t}};var G=t.setEmailVerification=function e(t){return{type:_,payload:t}};var q=function e(){return{type:S}};var U=function e(t){return{type:P,payload:t}};var H=function e(t){return{type:E,error:true,payload:t}};var z=t.getEmailVerification=function e(t,r){return function(){var e=n(regeneratorRuntime.mark((function e(n){var i,a;return regeneratorRuntime.wrap((function e(o){while(1)switch(o.prev=o.next){case 0:n(q());o.prev=1;o.next=4;return window.fetch(t,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":r},method:"GET"});case 4:i=o.sent;if(!(200===i.status)){o.next=12;break}o.next=8;return i.json();case 8:a=o.sent;n(U(a.emailVerification));o.next=13;break;case 12:401===i.status?n(H({status:401})):n(H({message:"Unknown error"}));case 13:o.next=18;break;case 15:o.prev=15;o.t0=o["catch"](1);n(H(o.t0));case 18:case"end":return o.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}()}},98850:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setUserData=t.SET_USER=void 0;var r=t.SET_USER="SET_USER";var n=t.setUserData=function e(t){return{type:r,user:t}}},68088:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.changeLastWidgetOnPage=t.changeFirstWidgetOnPage=t.CHANGE_LAST_WIDGET_ON_PAGE=t.CHANGE_FIRST_WIDGET_ON_PAGE=void 0;var r=t.CHANGE_FIRST_WIDGET_ON_PAGE="CHANGE_FIRST_WIDGET_ON_PAGE";var n=t.CHANGE_LAST_WIDGET_ON_PAGE="CHANGE_LAST_WIDGET_ON_PAGE";var i=t.changeFirstWidgetOnPage=function e(t){return{type:r,widget:t}};var a=t.changeLastWidgetOnPage=function e(t){return{type:n,widget:t}}},24219:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.openWidgetSettings=t.closeWidgetSettings=t.OPEN_WIDGET_SETTINGS=t.CLOSE_WIDGET_SETTINGS=void 0;var r=t.OPEN_WIDGET_SETTINGS="OPEN_WIDGET_SETTINGS";var n=t.CLOSE_WIDGET_SETTINGS="CLOSE_WIDGET_SETTINGS";var i=t.openWidgetSettings=function e(t){return{type:r,openWidgetUniqueId:t}};var a=t.closeWidgetSettings=function e(){return{type:n}}},69464:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=t.createStore=void 0;var i=r(7768);var a=r(61586);var o=l(r(514));function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(s=function e(n){return n?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}var u=t.createStore=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.compose;var n=(0,i.createStore)((0,i.combineReducers)(o),t,r((0,i.applyMiddleware)(a.thunk)));return n};var c=u();var d=t["default"]=c},514:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"brand",{enumerable:true,get:function e(){return a.default}});Object.defineProperty(t,"contentSet",{enumerable:true,get:function e(){return o.default}});Object.defineProperty(t,"env",{enumerable:true,get:function e(){return d.default}});Object.defineProperty(t,"importPanel",{enumerable:true,get:function e(){return g.default}});Object.defineProperty(t,"language",{enumerable:true,get:function e(){return l.default}});Object.defineProperty(t,"notification",{enumerable:true,get:function e(){return i.default}});Object.defineProperty(t,"page",{enumerable:true,get:function e(){return u.default}});Object.defineProperty(t,"site",{enumerable:true,get:function e(){return s.default}});Object.defineProperty(t,"ui",{enumerable:true,get:function e(){return n.default}});Object.defineProperty(t,"user",{enumerable:true,get:function e(){return c.default}});Object.defineProperty(t,"widget",{enumerable:true,get:function e(){return f.default}});Object.defineProperty(t,"widgetSettings",{enumerable:true,get:function e(){return p.default}});var n=h(r(77777));var i=h(r(25125));var a=h(r(67277));var o=h(r(18234));var s=h(r(2294));var l=h(r(92811));var u=h(r(96703));var c=h(r(92623));var d=h(r(33965));var f=h(r(39618));var p=h(r(6130));var g=h(r(62333));function h(e){return e&&e.__esModule?e:{default:e}}},67277:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=l;var n=r(24300);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s={};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_BRAND:return a(a({},e),t.brand);default:return e}}},70165:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=l;t.initialState=void 0;var n=r(90031);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s=t.initialState={activePanel:"palette",addButtonDisabled:true,selectedColour:"",savedColours:[]};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.CHANGE_PANEL:return a(a({},e),{},{activePanel:t.panel});case n.ENABLE_ADD:return a(a({},e),{},{addButtonDisabled:false});case n.DISABLE_ADD:return a(a({},e),{},{addButtonDisabled:true});case n.CHANGE_COLOUR:return a(a({},e),{},{selectedColour:t.colour});case n.CHANGE_SAVED_COLOURS:return a(a({},e),{},{savedColours:t.colours});default:return e}}},18234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=l;var n=r(18687);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s={images:""};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_CONTENT_SET:return a(a({},e),t.data);default:return e}}},33965:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=l;var n=r(43276);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s={codeVersion:"",mixpanelEnv:"",mixpanelToken:"",customWidgetsDomain:"",errors:[],allGoogleFonts:[],colorSets:{},googleMapsEmbedKey:"",protocol:"",domain:"",apiProxyBaseUrl:"",csrfToken:"",siteSubdomain:"",siteRef:null,languages:{},localisedLanguages:{},rows:false,rowLayouts:{},intercomAppId:"",manageDomain:"manage",V10CompatibilityMode:false};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_ENV:return a(a({},e),t.data);case n.UPDATE_SITE_COLOR_SET:return a(a({},e),{},{siteColorSet:t.colorSet});default:return e}}},62333:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NO_FILTER=void 0;t["default"]=u;var n=r(50909);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s=t.NO_FILTER=-1;var l={sites:{},pagesLoading:false,pagesError:false,selectedSourcePage:0,widgets:{},widgetsLoading:false,widgetsError:false,importLoading:false,importError:false,errorDetails:"",includeText:true,includeImg:true,textFilter:s,imgFilter:s};function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.PAGES_LOADING_START:return a(a({},e),{},{pagesLoading:true,pagesError:false});case n.PAGES_LOADING_SUCCESS:return a(a({},e),{},{sites:a(a({},e.sites),{},o({},t.payload.siteRef,{pages:t.payload.pages})),pagesLoading:false,pagesError:false});case n.PAGES_LOADING_FAILURE:return a(a({},e),{},{pagesLoading:false,pagesError:true,errorDetails:t.payload});case n.WIDGETS_LOADING_START:return a(a({},e),{},{widgetsLoading:true,widgetsError:false});case n.WIDGETS_LOADING_SUCCESS:return a(a({},e),{},{widgetsLoading:false,widgetsError:false,widgets:a(a({},e.widgets),{},o({},t.payload.siteRef,a(a({},e.widgets[t.payload.siteRef]),{},o({},t.payload.pageRef,t.payload.widgets))))});case n.WIDGETS_LOADING_FAILURE:return a(a({},e),{},{widgetsLoading:false,widgetsError:true});case n.IMPORT_CONTENT_START:return a(a({},e),{},{importLoading:true,importError:false});case n.IMPORT_CONTENT_SUCCESS:return a(a({},e),{},{importLoading:false});case n.IMPORT_CONTENT_FAILURE:return a(a({},e),{},{importLoading:false,importError:true,errorDetails:t.payload});case n.CHANGE_TEXT_FILTER:return a(a({},e),{},{textFilter:t.payload});case n.CHANGE_IMG_FILTER:return a(a({},e),{},{imgFilter:t.payload});case n.CHANGE_INCLUDE_TEXT:return a(a({},e),{},{includeText:t.payload});case n.CHANGE_INCLUDE_IMG:return a(a({},e),{},{includeImg:t.payload});case n.CHANGE_SOURCE_PAGE:return a(a({},e),{},{selectedSourcePage:t.payload});default:return e}}},92811:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=l;var n=r(32686);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s={current:"",defaultLanguage:{language:"",name:"",localisedName:"",flag:""},pages:{},siteLanguages:[],activeLanguage:null,localisedLanguages:[],languageLoading:false,languageError:false,defaultLanguageUpdated:false,siteLanguagePagesAdding:false,siteLanguagePagesAddingError:false,siteLanguageDeleting:false,siteLanguageDeletingError:false,languageStatusUpdating:false,languageStatusUpdatingError:false,showingChangeLanguage:false};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.CHANGE_LANGUAGE:var r=e.defaultLanguage.language===t.lang;var i=e.siteLanguages.filter((function(e){return e.language===t.lang})).length>0;var o=r||i?t.lang:"";return a(a({},e),{},{current:o});case n.SET_LOCALISED_LANGUAGES:return a(a({},e),{},{localisedLanguages:t.localisedLanguages});case n.SET_DEFAULT:return a(a({},e),{},{defaultLanguage:t.lang});case n.SET_SITE_LANGUAGES:return a(a({},e),{},{siteLanguages:t.languages});case n.ADD_SITE_ACTIVE_LANGUAGE:return a(a({},e),{},{activeLanguage:t.payload.language});case n.UPDATE_DEFAULT_LANGUAGE_START:return a(a({},e),{},{languageLoading:true,languageError:false});case n.UPDATE_DEFAULT_LANGUAGE_FAILED:return a(a({},e),{},{languageLoading:false,languageError:true});case n.UPDATE_DEFAULT_LANGUAGE_SUCCESS:return a(a({},e),{},{languageLoading:false,languageError:false,defaultLanguageUpdated:true,defaultLanguage:t.payload.language,current:e.current&&e.current===t.payload.oldLanguageCode?t.payload.language.language:e.current});case n.ADD_SELECTED_PAGES:return a(a({},e),{},{pages:t.payload.pages});case n.REMOVE_SELECTED_PAGES:return a(a({},e),{},{pages:{}});case n.REMOVE_SITE_ACTIVE_LANGUAGE:return a(a({},e),{},{activeLanguage:null});case n.ADD_SITE_LANGUAGE_PAGES_START:return a(a({},e),{},{siteLanguagePagesAdding:true,siteLanguagePagesAddingError:false});case n.ADD_SITE_LANGUAGE_PAGES_SUCCESS:return a(a({},e),{},{siteLanguages:t.siteLanguages,siteLanguagePagesAdding:false,siteLanguagePagesAddingError:false});case n.ADD_SITE_LANGUAGE_PAGES_FAILED:return a(a({},e),{},{siteLanguagePagesAdding:false,siteLanguagePagesAddingError:true});case n.DELETE_LANGUAGE_START:return a(a({},e),{},{siteLanguageDeleting:true,siteLanguageDeletingError:false});case n.DELETE_LANGUAGE_SUCCESS:return a(a({},e),{},{siteLanguages:t.siteLanguages,siteLanguageDeleting:false,siteLanguageDeletingError:false});case n.DELETE_LANGUAGE_FAILED:return a(a({},e),{},{siteLanguageDeleting:false,siteLanguageDeletingError:true});case n.UPDATE_LANGUAGE_STATUS_START:return a(a({},e),{},{languageStatusUpdating:true,languageStatusUpdatingError:false});case n.UPDATE_LANGUAGE_STATUS_SUCCESS:return a(a({},e),{},{siteLanguages:t.siteLanguages,languageStatusUpdating:false,languageStatusUpdatingError:false});case n.UPDATE_LANGUAGE_STATUS_FAILED:return a(a({},e),{},{languageStatusUpdating:false,languageStatusUpdatingError:true});case n.SET_SHOW_CHANGE_LANGUAGE:return a(a({},e),{},{showingChangeLanguage:t.show});default:return e}}},94100:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=l;var n=r(61842);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s={showLanguageList:false,showManageList:false};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.OPEN_ADD_LANGUAGE_LIST:return a(a({},e),{},{showLanguageList:true});case n.CLOSE_ADD_LANGUAGE_LIST:return a(a({},e),{},{showLanguageList:false});case n.OPEN_MANAGE_LANGUAGE_LIST:return a(a({},e),{},{showManageList:true});case n.CLOSE_MANAGE_LANGUAGE_LIST:return a(a({},e),{},{showManageList:false});default:return e}}},92781:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=l;var n=r(37058);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s={activeModal:""};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.OPEN_ADD_LANGUAGE_DONE_MODAL:case n.CLOSE_ADD_LANGUAGE_DONE_MODAL:case n.OPEN_PAGE_TITLE_EDIT_MODAL:case n.OPEN_PAGES_SELECTOR_MODAL:case n.OPEN_ADD_LANGUAGE_MODAL:case n.CLOSE_ADD_LANGUAGE_MODAL:return a(a({},e),{},{activeModal:t.modal});default:return e}}},52744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=l;t.initialState=void 0;var n=r(24531);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s=t.initialState={modalOpen:false,activeModal:""};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.OPEN_MODAL:return a(a({},e),{},{modalOpen:true,activeModal:t.name});case n.CLOSE_MODAL:return a(a({},e),{},{modalOpen:false,activeModal:""});default:return e}}},25125:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=l;t.initialState=void 0;var n=r(23711);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s=t.initialState={visible:false,current:null,queue:[]};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.NOTIFY:var r=e.queue;var i=e.current;e.current?i=t.payload:r.push(t.payload);return a(a({},e),{},{current:i,queue:r});case n.HIDE_NOTIFICATION:var o=e.queue;var l=null;e.queue.length&&(l=o.shift());return a(a({},e),{},{current:l,queue:o});default:return e}}},96703:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=y;t.initialState=void 0;var n=r(7794);var i=o(r(13745));var a=r(38869);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return d(e)||c(e)||u(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}function c(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function v(e){var t=[{text:(0,i.default)("shared_views.pagespanel.top_level","Top level"),value:0}];return e.reduce((function(e,t){"folder"===t.type&&e.push({text:t.title,value:t.ref});return e}),t)}var m=t.initialState={pages:[],folders:[],activePage:null,pagesError:false,pagesLoading:false,pagesOrdering:false,pagesErrorDetails:{},languages:{}};function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.ADD_PAGES:Editor.addSiteLanguagePagesToCollection(e.languages);return g(g({},e),{},{pages:t.pages,folders:v((0,n.formatPages)(t.pages))});case a.ADD_SINGLE_PAGE:if(""===t.payload.lang){var r=s(e.pages);r.push(t.payload.page);return g(g({},e),{},{pages:r})}var i=s(e.languages[t.payload.lang].pages);i.push(t.payload.page);return g(g({},e),{},{languages:g(g({},e.languages),{},h({},t.payload.lang,g(g({},e.languages[t.payload.lang]),{},{pages:i})))});case a.ADD_SCRIPT_START:case a.EDIT_PAGE_START:return g(g({},e),{},{pagesLoading:true,pagesError:false});case a.ADD_SCRIPT_SUCCESS:if(""===t.payload.lang){var o=(0,n.formatPages)(e.pages);o.forEach((function(e){if("".concat(e.ref)==="".concat(t.payload.page.ref)){e.headscript=t.payload.page.headscript;e.headScript=t.payload.page.headScript;e.bodyscript=t.payload.page.bodyscript;e.bodyScript=t.payload.page.bodyScript;e.headScriptOptions=t.payload.page.headScriptOptions;e.bodyScriptOptions=t.payload.page.bodyScriptOptions}}));return g(g({},e),{},{pages:(0,n.nestPages)(o),pagesError:false,pagesLoading:false})}var l=(0,n.formatPages)(e.languages[t.payload.lang].pages);l.forEach((function(e){if("".concat(e.ref)==="".concat(t.payload.page.ref)){e.headscript=t.payload.page.headscript;e.headScript=t.payload.page.headScript;e.bodyscript=t.payload.page.bodyscript;e.bodyScript=t.payload.page.bodyScript;e.headScriptOptions=t.payload.page.headScriptOptions;e.bodyScriptOptions=t.payload.page.bodyScriptOptions}}));return g(g({},e),{},{languages:g(g({},e.languages),{},h({},t.payload.lang,g(g({},e.languages[t.payload.lang]),{},{pages:(0,n.nestPages)(l)}))),pagesError:false,pagesLoading:false});case a.EDIT_PAGE_SUCCESS:if(""===t.payload.lang){var u=(0,n.formatPages)(e.pages);u.forEach((function(e){"".concat(e.ref)==="".concat(t.payload.ref)&&Object.keys(t.payload.page).forEach((function(r){e[r]=t.payload.page[r]}))}));return g(g({},e),{},{folders:v(u),pages:(0,n.nestPages)(u)})}var c=(0,n.formatPages)(e.languages[t.payload.lang].pages);c.forEach((function(e){"".concat(e.ref)==="".concat(t.payload.ref)&&Object.keys(t.payload.page).forEach((function(r){e[r]=t.payload.page[r]}))}));return g(g({},e),{},{languages:g(g({},e.languages),{},h({},t.payload.lang,{folders:v(c),pages:(0,n.nestPages)(c)}))});case a.ADD_SCRIPT_FAILURE:case a.EDIT_PAGE_FAILURE:return g(g({},e),{},{pagesError:true,pagesLoading:false,pagesErrorDetails:t.payload});case a.DELETE_PAGE:var d=(0,n.formatPages)(e.pages).filter((function(e){return e.ref!==t.payload}));return g(g({},e),{},{pages:(0,n.nestPages)(d),folders:v((0,n.formatPages)(d))});case a.DELETE_LANG_PAGE:var f=(0,n.formatPages)(e.languages[t.payload.lang].pages).filter((function(e){return e.ref!==t.payload.id}));return g(g({},e),{},{languages:g(g({},e.languages),{},h({},t.payload.lang,g(g({},e.languages[t.payload.lang]),{},{pages:(0,n.nestPages)(f),folders:v((0,n.formatPages)(f))})))});case a.SET_CURRENT_PAGE:return g(g({},e),{},{activePage:t.ref});case a.SET_CURRENT_PAGE_TEXT_ENTRY_METADATA:return g(g({},e),{},{isRTLLanguage:t.isRTLLanguage});case a.LANGUAGES_PAGE_TREE_START:return g(g({},e),{},{pagesLoading:true,pagesError:false});case a.ADD_LANGUAGES_PAGE_TREE:case a.LANGUAGES_PAGE_TREE_SUCCESS:Editor.addSiteLanguagePagesToCollection(t.payload);var p=Object.keys(t.payload);var y=g(g({},e),{},{languages:{}});p.forEach((function(e){y.languages[e]={pages:t.payload[e],folders:v((0,n.formatPages)(t.payload[e]))}}));return y;case a.LANGUAGES_PAGE_TREE_FAILURE:return g(g({},e),{},{pagesError:true,pagesLoading:false,pagesErrorDetails:t.payload});case a.ORDER_PAGES_START:return g(g({},e),{},{pagesOrdering:true,pagesError:false});case a.ORDER_PAGES_SUCCESS:if(""===t.payload.lang)return g(g({},e),{},{pages:t.payload.tree,folders:v((0,n.formatPages)(t.payload.tree)),pagesError:false,pagesLoading:false,pagesOrdering:false});return g(g({},e),{},{pagesError:false,pagesOrdering:false,pagesLoading:false,languages:g(g({},e.languages),{},h({},t.payload.lang,{pages:t.payload.tree,folders:v((0,n.formatPages)(t.payload.tree))}))});case a.ORDER_PAGES_FAILURE:return g(g({},e),{},{pagesError:true,pagesOrdering:false,pagesErrorDetails:t.payload});case a.PAGE_TREE_START:return g(g({},e),{},{pagesLoading:true,pagesError:false});case a.PAGE_TREE_SUCCESS:return g(g({},e),{},{pages:t.payload,folders:v((0,n.formatPages)(t.payload)),pagesError:false,pagesLoading:false});case a.PAGE_TREE_FAILURE:return g(g({},e),{},{pagesError:true,pagesLoading:false,pagesErrorDetails:t.payload});default:return e}}},7521:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=l;t.initialState=void 0;var n=r(83489);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s=t.initialState={panelOpen:false,activePanel:"",saveActive:false,showSave:true,cancelActive:true,hasError:false,styles:{},panelHistory:[]};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;var t=arguments.length>1?arguments[1]:void 0;var r=e.panelHistory.slice();switch(t.type){case n.OPEN_PANEL:r.push(t.panel);return a(a({},e),{},{panelOpen:true,activePanel:t.panel,panelHistory:r});case n.CLOSE_PANEL:r.pop();return a(a({},e),{},{panelOpen:false,activePanel:"",panelHistory:r});case n.CLOSE_SUBPANEL:r.pop();return a(a({},e),{},{panelOpen:r.length>0,activePanel:r.length?r[r.length-1]:"",panelHistory:r});case n.ENABLE_SAVE:return a(a({},e),{},{saveActive:true});case n.DISABLE_SAVE:return a(a({},e),{},{saveActive:false});case n.HIDE_SAVE:return a(a({},e),{},{showSave:false});case n.SHOW_SAVE:return a(a({},e),{},{showSave:true});case n.ENABLE_CANCEL:return a(a({},e),{},{cancelActive:true});case n.DISABLE_CANCEL:return a(a({},e),{},{cancelActive:false});case n.ADD_ERROR:return a(a({},e),{},{hasError:true});case n.REMOVE_ERROR:return a(a({},e),{},{hasError:false});case n.UPDATE_STYLES:return a(a({},e),{},{styles:t.styles});default:return e}}},35879:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=l;var n=r(57644);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s={showRowWidgetControlList:false,showRowWidgetLayoutControlList:false,showImageBackgroundControlList:false,showLayoutControlList:false,showShapeDividerControlList:false,isRowWidgetControlRendered:false,rowType:"",zoneSharingScope:"",settings:{},panelOpen:false,activePanel:""};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.OPEN_ROW_WIDGET_CONTROL_LIST:return a(a({},e),{},{showRowWidgetControlList:true});case n.CLOSE_ROW_WIDGET_CONTROL_LIST:return a(a({},s),{},{panelOpen:e.panelOpen,activePanel:e.activePanel});case n.SHOW_ROW_WIDGET_LAYOUT_CONTROL_LIST:return a(a({},e),{},{showRowWidgetLayoutControlList:true});case n.HIDE_ROW_WIDGET_LAYOUT_CONTROL_LIST:return a(a({},e),{},{showRowWidgetLayoutControlList:false});case n.SET_ROW_WIDGET_CONTROL_SETTINGS:return a(a({},e),{},{settings:t.settings,rowType:t.rowType,zoneSharingScope:t.zoneSharingScope,showLayoutControlList:t.showLayout,showShapeDividerControlList:t.showShapeDivider});case n.CHANGE_ROW_WIDGET_STYLE:return a(a({},e),{},{settings:a(a({},e.settings),{},{selectedStyleSet:t.settings.selectedStyleSet,selectedStyleType:t.settings.selectedStyleType})});case n.SET_ROW_WIDGET_CONTROL_RENDERED:return a(a({},e),{},{isRowWidgetControlRendered:t.payload});case n.SHOW_IMAGE_BACKGROUND_CONTROL_LIST:return a(a({},e),{},{showImageBackgroundControlList:true});case n.HIDE_IMAGE_BACKGROUND_CONTROL_LIST:return a(a({},e),{},{showImageBackgroundControlList:false});case n.OPEN_CONTROL_PANEL:return a(a({},e),{},{panelOpen:true,activePanel:t.panel});case n.CLOSE_CONTROL_PANEL:return a(a({},e),{},{panelOpen:false,activePanel:""});default:return e}}},2294:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=c;var n=r(31002);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s={ref:void 0,domain:void 0,enableRows:false,backgroundtype:"",colorSwatch:"",seoTitle:"",seoDescription:"",seoKeywords:"",seoLang:"",autogenerateOpengraph:false,enablePolicyPages:false,siteColors:{orig:{colorsInUse:{},colorSetId:"",colorsSource:""},current:{colorsInUse:{},colorSetId:"",colorsSource:""}},siteStyleType:"",prevColorSetId:"",prevCustomColorSet:{},prevFontSetId:"",isRowEditingMode:false,isRowMoveMode:false,isDesktopMode:false,emailVerificationLoading:false,emailVerificationLoadingError:false};function l(e){return e.replace(/(_)(.)/,(function(e,t,r){return r.toUpperCase()}))}function u(e){return e.reduce((function(e,t){return a(a({},e),{},o({},l(t.name),t.value))}),{})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.INIT_COLOR_SETS:return a(a({},e),{},{siteColors:{current:t.payload.siteColors,orig:t.payload.siteColors},colorSets:t.payload.colorSets});case n.SET_ORIG_COLOR_SET:return a(a({},e),{},{siteColors:{current:a({},e.siteColors.current),orig:a({},e.siteColors.current)}});case n.UNDO_COLOR_SET_CHANGE:return a(a({},e),{},{siteColors:{current:a({},e.siteColors.orig),orig:a({},e.siteColors.orig)}});case n.SET_COLOR_SET:return a(a({},e),{},{siteColors:{orig:a({},e.siteColors.orig),current:{colorSetId:t.payload.colorSetId,colorsSource:t.payload.colorsSource,colorsInUse:t.payload.colorsInUse}}});case n.SET_SITE_STYLE_TYPE:return a(a({},e),{},{siteStyleType:t.payload});case n.SET_PREV_COLOR_SET:return a(a({},e),{},{prevColorSetId:t.payload});case n.SET_PREV_CUSTOM_COLOR_SET:return a(a({},e),{},{prevCustomColorSet:t.payload});case n.SET_PREV_FONT_SET:return a(a({},e),{},{prevFontSetId:t.payload});case n.SET_SITE_REF:return a(a({},e),{},{ref:t.ref});case n.SET_PRIMARY_DOMAIN:return a(a({},e),{},{domain:t.domain});case n.SET_ENABLE_ROWS:return a(a({},e),{},{enableRows:t.enableRows});case n.SET_EDITOR_VERSION:return a(a({},e),{},{editorVersion:t.editorVersion});case n.SET_GLOBAL_VALUES:return a(a({},e),u(t.payload));case n.SET_ROW_EDITING_MODE:return a(a({},e),{},{isRowEditingMode:t.payload});case n.SET_ROW_MOVE_MODE:return a(a({},e),{},{isRowMoveMode:t.payload});case n.SET_DESKTOP_SCREEN_MODE:return a(a({},e),{},{isDesktopMode:t.payload});case n.SET_EMAIL_VERIFICATION:return a(a({},e),{},{emailVerification:t.payload});case n.EMAIL_VERIFICATION_START:return a(a({},e),{},{emailVerificationLoading:true});case n.EMAIL_VERIFICATION_SUCCESS:return a(a({},e),{},{emailVerificationLoading:false,emailVerificationLoadingError:false,emailVerification:t.payload});case n.EMAIL_VERIFICATION_FAILURE:return a(a({},e),{},{emailVerificationLoading:false,emailVerificationLoadingError:true});default:return e}}},77777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(7768);var i=c(r(7521));var a=c(r(52744));var o=c(r(92781));var s=c(r(94100));var l=c(r(70165));var u=c(r(35879));function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,n.combineReducers)({panel:i.default,modal:a.default,colourPanel:l.default,languageModal:o.default,languageList:s.default,rowWidgetControl:u.default});var f=t["default"]=d},92623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=l;var n=r(98850);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s={ref:-1,email:"",subscriptionPackageRef:-1,productVersion:-1,languageCode:"en",subscriptionPackageName:"",dateCreated:"",capabilities:{multiLanguageEditor:false,disableV8SiteAndPageScripts:false,enableStandaloneMode:false}};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_USER:return a(a({},e),t.user);default:return e}}},39618:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=l;t.initialState=void 0;var n=r(68088);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s=t.initialState={};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.CHANGE_FIRST_WIDGET_ON_PAGE:return a(a({},e),{},{firstWidget:t.widget});case n.CHANGE_LAST_WIDGET_ON_PAGE:return a(a({},e),{},{lastWidget:t.widget});default:return e}}},6130:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=l;t.initialState=void 0;var n=r(24219);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s=t.initialState={};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.OPEN_WIDGET_SETTINGS:return a(a({},e),{},{openWidgetUniqueId:t.openWidgetUniqueId});case n.CLOSE_WIDGET_SETTINGS:return a(a({},e),{},{openWidgetUniqueId:null});default:return e}}},58329:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.templateRendererFactory=t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.twig=t.twig}i(e,[{key:"_getTemplate",value:function e(t){return this.twig.templates[t]}},{key:"render",value:function e(t,r){return this.twig.render(this._getTemplate(t),r)}}]);return e}();var o=t.templateRendererFactory=function e(t){return new a({twig:t.Twig})};var s=t["default"]=a},54285:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(4831));var i=a(r(58329));function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)();function s(e){e.factory("TemplateRenderer",(function(){return new i.default({twig:o.Twig})}));return e}var l=t["default"]=s},51449:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e){return o(e)||a(e)||i(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function o(e){if(Array.isArray(e))return s(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e){var t={container:["header","footer","sidebar"],companyname:["header","sidebar","footer"],extendednavigation:["header","sidebar"],feature:["header"],socialicons:["footer"]};e.forEach((function(n){t[n]&&e.push.apply(e,r(t[n]))}));return e}var u=t["default"]=l},7668:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Backbone.View.extend({template:"hint",events:{"click .js-close-hint":"closeHint"},initialize:function e(t){this.templateRenderer=t.templateRenderer;this.text=t.text;this.closeCallback=t.closeCallback},render:function e(){var t=this.templateRenderer.render(this.template,{text:this.text});this.el.insertAdjacentHTML("beforeend",t)},closeHint:function e(){this.remove();this.closeCallback()}});var n=t["default"]=r},63569:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.options=t.appcues}i(e,[{key:"track",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NOT DEFINED";var r=arguments.length>1?arguments[1]:void 0;return Promise.resolve(window.Appcues.track(t,r))}},{key:"identify",value:function e(){var t=this.options,r=t.userDataProvider,n=t.brandDataProvider,i=t.envDataProvider;window.Appcues.identify(r.get("email"),{brand:n.get("brandName"),productVersion:r.get("productVersion"),subscriptionPackageRef:r.get("subscriptionPackageRef"),accountCreated:r.get("dateCreated"),compatibilityMode:i.get("V10CompatibilityMode")})}},{key:"getName",value:function e(){return"Appcues"}}]);return e}();var o=t["default"]=a},32628:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(63569));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function c(e,t,r){t&&u(e.prototype,t);r&&u(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var d=new WeakMap;var f=function(){function e(t){l(this,e);d.set(this,o({},t))}c(e,[{key:"create",value:function e(){var t=new n.default({appcues:d.get(this)});t.identify();return t}}]);return e}();var p=t["default"]=f},15603:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=new WeakMap;var u=function(){function e(t){a(this,e);l.set(this,t.intercom)}s(e,[{key:"track",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NOT DEFINED";var r=arguments.length>1?arguments[1]:void 0;return Promise.resolve(window.Intercom("trackEvent",t,r))}},{key:"boot",value:function e(){var t=l.get(this),r=t.userDataProvider,i=t.envDataProvider,a=t.brandDataProvider,o=t.siteDataProvider;var s=i.get("intercomAppId");if(!window.Intercom||!s)return;var u=n(n({app_id:s,user_hash:i.get("intercomUserHash"),name:r.get("email"),brand:a.get("brandName"),template:o.get("templateName"),siteRef:o.getSiteRef(),siteDefaultLanguage:o.getDefaultLanguage()},r.all()),{},{hide_default_launcher:false});window.Intercom("boot",u)}},{key:"open",value:function e(){window.Intercom("showNewMessage")}},{key:"hideDefaultLauncher",value:function e(){window.Intercom("update",{hide_default_launcher:true})}},{key:"getName",value:function e(){return"Intercom"}}]);return e}();var c=t["default"]=u},65851:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(55372);var i=a(r(15603));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function d(e,t,r){t&&c(e.prototype,t);r&&c(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var f=new WeakMap;var p=window.matchMedia("(max-width: 930px)").matches;var g=function(){function e(t){u(this,e);f.set(this,s({},t))}d(e,[{key:"create",value:function e(){var t=new i.default({intercom:f.get(this)});t.boot();((0,n.isMobileDevice)()||p)&&t.hideDefaultLauncher();return t}}]);return e}();var h=t["default"]=g},76964:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(4831));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return c(e)||u(e,t)||s(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n=[];var i=true;var a=false;var o,s;try{for(r=r.call(e);!(i=(o=r.next()).done);i=true){n.push(o.value);if(t&&n.length===t)break}}catch(e){a=true;s=e}finally{try{i||null==r["return"]||r["return"]()}finally{if(a)throw s}}return n}function c(e){if(Array.isArray(e))return e}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function v(e,t,r){t&&h(e.prototype,t);r&&h(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var m=new WeakMap;var y="x-";var b=function(){function e(t){g(this,e);m.set(this,t.mixpanel)}v(e,[{key:"track",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NOT DEFINED";var i=arguments.length>1?arguments[1]:void 0;return new Promise((function(e){var a=m.get(t);void 0!==(0,n.default)().mixpanelDistinctId&&(a=(0,n.default)().mixpanel);a.track(r,i,(function(){e()}))}))}},{key:"register",value:function e(t){var r=this.getFormattedMetadata(t.accountHolderMetadata);m.get(this).register(f({userRef:t.userRef,primaryDomain:t.primaryDomain,subscriptionPackageRef:t.subscriptionPackageRef,env:t.mixpanelEnv,brand:t.brandName,codeVersion:t.codeVersion,productVersion:t.productVersion,languageCode:t.languageCode,compatibilityMode:t.compatibilityMode},r));return this}},{key:"identify",value:function e(t){m.get(this).identify("".concat(t.mixpanelEnv,"-").concat(t.userRef));return this}},{key:"getName",value:function e(){return"Mixpanel"}},{key:"getFormattedMetadata",value:function e(t){var r={};Object.entries(t||{}).forEach((function(e){var t=a(e,2),n=t[0],i=t[1];r["".concat(y).concat(n)]=i}));return r}}]);return e}();var w=t["default"]=b},14417:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(76964));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=new WeakMap;var u=function(){function e(t){a(this,e);this._envDataProvider=t.envDataProvider;this._userDataProvider=t.userDataProvider;this._siteDataProvider=t.siteDataProvider;this._brandDataProvider=t.brandDataProvider;l.set(this,t.mixpanel)}s(e,[{key:"create",value:function e(){var t=new n.default({mixpanel:l.get(this)});t.register({mixpanelEnv:this._envDataProvider.get("mixpanelEnv"),userRef:this._userDataProvider.get("ref"),subscriptionPackageRef:this._userDataProvider.get("subscriptionPackageRef"),primaryDomain:this._siteDataProvider.get("primaryDomain"),brandName:this._brandDataProvider.get("brandName"),codeVersion:this._envDataProvider.get("codeVersion"),productVersion:this._userDataProvider.get("productVersion"),languageCode:this._userDataProvider.get("languageCode"),compatibilityMode:this._envDataProvider.get("V10CompatibilityMode"),accountHolderMetadata:this._userDataProvider.get("accountHolderMetadata")});t.identify({mixpanelEnv:this._envDataProvider.get("mixpanelEnv"),userRef:this._userDataProvider.get("ref")});return t}}]);return e}();var c=t["default"]=u},63854:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=new WeakMap;var o=function(){function e(){r(this,e);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];a.set(this,{trackers:n})}i(e,[{key:"addTracker",value:function e(t){var r=a.get(this),n=r.trackers;n.push(t);a.set(this,{trackers:n})}},{key:"track",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NOT DEFINED";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n=a.get(this),i=n.trackers;var o=""===r?{}:r;var s=[];Array.isArray(t)?i.forEach((function(e){var r=t.filter((function(t){return void 0!==t.tracker&&t.tracker===e.getName()}));r.length&&void 0!==r[0].event&&s.push(e.track(r[0].event,o))})):i.forEach((function(e){return s.push(e.track(t,o))}));return Promise.all(s)}}]);return e}();var s=t["default"]=o},85349:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=l(r(4831));var i=l(r(14417));var a=l(r(63854));var o=l(r(65851));var s=l(r(32628));function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,n.default)();function c(e){e.factory("MixpanelFactory",(function(e){return new i.default({envDataProvider:e.EnvDataProvider,userDataProvider:e.UserDataProvider,brandDataProvider:e.BrandDataProvider,siteDataProvider:e.SiteDataProvider,mixpanel:u.mixpanel})}));e.factory("IntercomFactory",(function(e){return new o.default({envDataProvider:e.EnvDataProvider,userDataProvider:e.UserDataProvider,brandDataProvider:e.BrandDataProvider,siteDataProvider:e.SiteDataProvider})}));e.factory("AppcuesFactory",(function(e){return new s.default({envDataProvider:e.EnvDataProvider,userDataProvider:e.UserDataProvider,brandDataProvider:e.BrandDataProvider})}));e.factory("Tracker",(function(e){var t=new a.default;d(e,(function(){t.addTracker(e.MixpanelFactory.create())}));f(e,(function(){t.addTracker(e.IntercomFactory.create())}));p(e,(function(){t.addTracker(e.AppcuesFactory.create())}));return t}));e.factory("ErrorMonitor",(function(e){return{init:function t(){window.Raven&&window.Raven.setExtraContext({template:e.SiteDataProvider.get("templateName"),codeVersion:e.EnvDataProvider.get("codeVersion"),brand:e.BrandDataProvider.get("displayName")})}}}));return e}function d(e,t){v(e)?t():m(u,"mixpanel",5e3).then((function(){v(e)&&t()})).catch((function(){}))}function f(e,t){g(e)?t():m(window,"Intercom",5e3).then((function(){g(e)&&t()})).catch((function(){}))}function p(e,t){h(e)?t():m(window,"Appcues",5e3).then((function(){h(e)&&t()})).catch((function(){}))}function g(e){var t=e.BrandDataProvider;var r=t.get("capabilities"),n=r.enableIntercom;return n&&window.Intercom}function h(e){var t=e.BrandDataProvider;return t.has("enableAppcues")&&window.Appcues}function v(e){var t=!!u.mixpanel;var r=e.EnvDataProvider.get("mixpanelEnv")&&e.EnvDataProvider.get("mixpanelToken");var n=e.BrandDataProvider.has("tracking");var i=!e.UserDataProvider.get("email").includes("@basekit.com");return t&&r&&n&&i}function m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;return new Promise((function(n,i){var a=0;function o(s){setTimeout((function(){a+=s;if(void 0!==e[t]){n();return}if(a>=r){i();return}o(2*s)}),s)}o(10)}))}var y=t["default"]=c},29649:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Backbone.View.extend({el:".js-undo-prompt",events:{"click .js-undo-button":"undoButtonClicked"},initialize:function e(){this.animationEndHandler=this.hideElement.bind(this);this.attachGlobalEvents()},attachGlobalEvents:function e(){Editor.Events.on("undoAvailable",this.startUndo.bind(this));Editor.Events.on("imagesPanel:rendered",this.hide.bind(this));Editor.Events.on("widgetSettingsPanel:opened",this.hide.bind(this));Editor.Events.on("widgetAction:triggered",this.hide.bind(this));Editor.Events.on("widgetOverlay:destroy",this.hide.bind(this));Editor.Events.on("page:change",this.hide.bind(this));Editor.Events.on("pagespanel:rendered",this.hide.bind(this))},remove:function e(){Backbone.View.prototype.remove.call(this);Editor.Events.off("undoAvailable",this.startUndo.bind(this));Editor.Events.off("imagesPanel:rendered",this.hide.bind(this));Editor.Events.off("widgetSettingsPanel:opened",this.hide.bind(this));Editor.Events.off("widgetAction:triggered",this.hide.bind(this));Editor.Events.off("widgetOverlay:destroy",this.hide.bind(this));Editor.Events.off("page:change",this.hide.bind(this));Editor.Events.on("pagespanel:rendered",this.hide.bind(this))},startUndo:function e(t){this.widgetModel=t.widgetModel;this.show()},undoButtonClicked:function e(){this.hide();this.widgetModel.undo()},show:function e(){this.removeAnimationEndEvent();this.el.hidden=false;this.el.classList.add("is-visible");this.startAutoCloseTimer()},hide:function e(){this.removeAutoCloseTimer();this.el.classList.remove("is-visible");this.attachAnimationEndEvent()},hideElement:function e(){this.el.hidden=true},attachAnimationEndEvent:function e(){this.el.addEventListener("animationend",this.animationEndHandler)},removeAnimationEndEvent:function e(){this.el.removeEventListener("animationend",this.animationEndHandler)},startAutoCloseTimer:function e(){var t=this;this.autoCloseTimeoutId=window.setTimeout((function(){t.hide()}),12e3)},removeAutoCloseTimer:function e(){window.clearTimeout(this.autoCloseTimeoutId)}});var n=t["default"]=r},58248:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=new WeakMap;var u=function(){function e(t){a(this,e);l.set(this,n({},t))}s(e,[{key:"checkTimeout",value:function e(t){var r=l.get(this),n=r.sessionTimeoutDialog;if(401===t.status){n.display();throw new Error}return t}},{key:"update",value:function e(){var t=this;return new Promise((function(e,r){window.fetch("/refresh",{method:"GET",credentials:"include",mode:"cors"}).then(t.checkTimeout.bind(t)).then((function(e){return e.json()})).then((function(t){var r=t.billingCycle&&t.billingCycle.offerExpiryDate||null;App.sites.reset&&App.sites.reset(t.sites);App.user=t.accountHolder;App.brand=t.brand;App.frontEndBucket.languageCode=t.accountHolder.languageCode;App.frontEndBucket.tier=t.accountHolder.capabilities.templateTier;App.frontEndBucket.offerExpiryDate=r;e(t)})).catch(r)}))}}]);return e}();var c=t["default"]=u},76021:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isAssetSvg=void 0;var r=t.isAssetSvg=function e(t){var r;var n=(null===t||void 0===t||null===(r=t.attributes)||void 0===r?void 0:r.path)||"";return n.endsWith(".svg")||n.endsWith(".svgz")}},30802:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var i=0;var a=function e(){};return{s:a,n:function t(){if(i>=e.length)return{done:true};return{done:false,value:e[i++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=true,s=false,l;return{s:function t(){r=r.call(e)},n:function e(){var t=r.next();o=t.done;return t},e:function e(t){s=true;l=t},f:function e(){try{o||null==r.return||r.return()}finally{if(s)throw l}}}}function n(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=3;var u=1e7;var c=function(){function e(t){a(this,e);this.options=t;this.options.chunkSize=this.options.chunkSize||1048576}s(e,[{key:"upload",value:function e(t){var n=r(t),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.size>=u){var o=this.options.eventDispatcher;o.trigger("file.uploaderror",400,"maxUploadSizeExceeded");return}}}catch(e){n.e(e)}finally{n.f()}var s=Array.prototype.map.call(t,(function(e,t){e.fileIndex=t;return e}));d({files:s,fileCount:s.length,chunkTotals:{},progressObj:{},chunks:[],chunksComplete:0,options:this.options})}}]);return e}();function d(e){var t=e.files.shift();if("undefined"===typeof t)return;f(e,t,t.fileIndex)}function f(e,t,r){var n=t.size;var i=e.options.chunkSize;var a=Math.ceil(n/i);var o=m();var s=0;var u=i;var c=1;var d=1;n<=i&&(c=0);e.chunks=[];e.chunksComplete=0;e.chunkTotals[r]=a;e.chunkTotal=a;while(s<n){var f=t.slice(s,u);var h=y(f,t.name,e.options.type);if(c){h.append("chunkIndex",d);h.append("chunkTotal",a);h.append("id",o)}var v={formData:h,counter:d,chunkTotal:a,fileIndex:r,id:o,fileName:t.name};e.chunks.push(v);s=u;u=s+i;d+=1}if(1===e.chunks.length){p(e,e.chunks.pop());return}var b=l;l>e.chunks.length&&(b=e.chunks.length);for(var w=0;w<b;w++)g(e)}function p(e,t){var r=new XMLHttpRequest;var n=e.options.eventDispatcher;r.onload=function(){var t=JSON.parse(r.response);if(200!==r.status){n.trigger("file.uploaderror",r.status,t.errorKey);return}var i=t.result;n.trigger("file.uploaded",i);d(e)};r.upload.onprogress=function(r){v(e,r,t)};r.open("POST","".concat(e.options.apiProxyBaseUrl,"/_/assemble"),true);r.setRequestHeader("X-CSRF-TOKEN",e.options.csrfToken);r.withCredentials=true;r.send(t.formData)}function g(e){if(0===e.chunks.length)return;var t=e.chunks.pop();h(e,t)}function h(e,t){var r=new XMLHttpRequest;var n=t.counter,i=t.fileIndex;r.upload.onprogress=function(r){v(e,r,t)};r.onload=function(){e.chunksComplete+=1;g(e);if(e.chunksComplete===e.chunkTotal){var r=new FormData;r.append("id",t.id);r.append("fileName",t.fileName);p(e,{formData:r,fileIndex:i,counter:n,chunkTotal:e.chunkTotal})}};r.open("POST","".concat(e.options.apiProxyBaseUrl,"/_/chunk"),true);r.setRequestHeader("X-CSRF-TOKEN",e.options.csrfToken);r.withCredentials=true;r.send(t.formData)}function v(e,t,r){var n=e.options.progressCalculator;if(t.lengthComputable){n.updateProgress(e.progressObj,t.loaded,t.total,r);var i=n.calculateProgress(e.progressObj,e.chunkTotals,e.fileCount);e.options.eventDispatcher.trigger("file.progress",i)}}function m(){var e=32;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var r=new Uint32Array(e);var n=window.msCrypto?window.msCrypto:window.crypto;var i="";n.getRandomValues(r);for(var a=0;a<e;a++)i+=t[r[a]%t.length];return i}function y(e,t,r){var n=new FormData;n.append("type",r);n.append("file",e,t);return n}BaseKit.chunkedUpload=BaseKit.chunkedUpload||{};BaseKit.chunkedUpload.ChunkedUploader=c;var b=t["default"]=c},77943:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(){r(this,e)}i(e,[{key:"calculateProgress",value:function e(t,r,n){var i=Reflect.ownKeys(t).reduce((function(e,n){var i=o(t[n]);return e+i/r[n]}),0);if(0===i)return i;return i/n}},{key:"updateProgress",value:function e(t,r,n,i){var a=Math.floor(r/n*1e3)/10;if(t[i.fileIndex])t[i.fileIndex][i.counter]=a;else{t[i.fileIndex]=[];t[i.fileIndex][i.counter]=a}return t}}]);return e}();function o(e){var t=e.reduce((function(e,t){if(void 0!==t)return e+t;return 0}),0);return t}BaseKit.chunkedUpload=BaseKit.chunkedUpload||{};BaseKit.chunkedUpload.ProgressCalculator=a;var s=t["default"]=a},79467:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.rgbToHex=t.isValidRgbColour=t.isValidHexColour=t.hexToRgb=t["default"]=t.convertComputedStyleRgbColourToHex=void 0;var r=t.isValidHexColour=function e(t){return/^#([a-f0-9]{3}){1,2}\b$/i.test(t.trim())};var n=t.isValidRgbColour=function e(t){if(!/^(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})$/i.test(t))return false;var r=t.trim().split(",");for(var n=0;n<r.length;n++)if(parseInt(r[n],10)>255)return false;return true};var i=t.hexToRgb=function e(t){return t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,r,n){return"#".concat(t).concat(t).concat(r).concat(r).concat(n).concat(n)})).substring(1).match(/.{2}/g).map((function(e){return parseInt(e,16)}))};var a=t.rgbToHex=function e(t,r,n){return"#".concat([t,r,n].map((function(e){return Number(e).toString(16).padStart(2,"0")})).join(""))};var o=t.convertComputedStyleRgbColourToHex=function e(t){var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);if(!n("".concat(r[1],",").concat(r[2],",").concat(r[3])))throw new Error("Invalid computed RGB colour, ".concat(t));return a(r[1],r[2],r[3])};var s=t["default"]={isValidHexColour:r,isValidRgbColour:n,hexToRgb:i,rgbToHex:a,convertComputedStyleRgbColourToHex:o}},33835:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.debounce=n;var r;function n(e,t){return function(){var n=this;var i=function t(){return e.apply(n)};clearTimeout(r);r=setTimeout(i,t)}}},37977:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=r;function r(e){return JSON.parse(JSON.stringify(e))}},55372:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.deviceFeaturesHelper=void 0;t.getInputType=h;t.hasOrientation=d;t.isLargeDevice=c;t.isMobileDevice=g;t.isSmallDevice=u;t.isSmallTouchDevice=f;t.isTouchDevice=p;var n=i(r(1904));function i(e){return e&&e.__esModule?e:{default:e}}var a="(max-width: 616px) and (orientation: portrait)";var o="(orientation: landscape) and (max-height: 616px)";var s="(min-width: 617px) and (orientation: portrait)";var l="(orientation: landscape) and (min-height: 617px)";function u(){return window.matchMedia("".concat(a,", ").concat(o)).matches}function c(){return window.matchMedia("".concat(s,", ").concat(l)).matches}function d(e){return window.matchMedia("(orientation: ".concat(e,")")).matches}function f(){return"coarse"===this.getInputType()&&n.default.isMobileWebKit()}function p(){return"ontouchstart"in window}function g(){return n.default.isMobileWebKit()}function h(){if(p())return"coarse";return"fine"}var v=t.deviceFeaturesHelper={isSmallDevice:u,isLargeDevice:c,hasOrientation:d,isSmallTouchDevice:f,getInputType:h,isTouchDevice:p,isMobileDevice:g};window.BaseKit&&(window.BaseKit.deviceFeaturesHelper=v)},9878:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toggleHiddenAttribute=t.remove=t.emptyElement=t["default"]=t.append=void 0;function r(e){return o(e)||a(e)||i(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function o(e){if(Array.isArray(e))return s(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=function e(t){t.setAttribute("hidden",true)};var u=function e(t){t.removeAttribute("hidden")};var c=t.toggleHiddenAttribute=function e(t,r){null===t.getAttribute("hidden")||r?l(t):u(t)};var d=t.emptyElement=function e(t){while(t.firstChild)t.removeChild(t.firstChild)};var f=t.append=function e(t,n){var i=new DOMParser;var a=i.parseFromString(n,"text/html");if(!a)return;r(a.querySelectorAll("body > *")).forEach((function(e){var r=document.importNode(e,true);t.appendChild(r)}))};var p=t.remove=function e(t){t.remove?t.remove():t.parentElement.removeChild(t)};var g=t["default"]={toggleHiddenAttribute:c,emptyElement:d,append:f,remove:p}},7874:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(65407));var i=a(r(44578));function a(e){return e&&e.__esModule?e:{default:e}}var o={addEcwidScript:function e(){var t=(0,n.default)();this.storeId=i.default.getData("ecwidStoreId");var r=this._getStoreElementId();var a=this._getSearchElementId();var o=false;var s=false;var l=false;window.ecwid_script_defer=true;window.ec=window.ec||{};window.ec.config=window.ec.config||{};window.ec.config.storefrontUrls=window.ec.config.storefrontUrls||{};window.ec.config.storefrontUrls.cleanUrls=true;window.ec.config.storefrontUrls.queryBasedCleanUrls=true;if(this.storeId&&!document.getElementById("ecwid-script")){var u=document.createElement("script");u.charset="utf-8";u.type="text/javascript";u.id="ecwid-script";u.src="https://app.ecwid.com/script.js?".concat(this.storeId);window.document.head.appendChild(u)}t.forEach((function(e){"widget.ecwid"===e.type&&(o=true);"widget.ecwidsearch"===e.type&&(s=true);"widget.ecwidbasket"===e.type&&document.getElementById("ecwid-script")&&(l=true)}));o&&s&&(window._xnext_initialization_scripts=[{widgetType:"ProductBrowser",id:r,arg:["id=".concat(r)]},{widgetType:"SearchWidget",id:a,arg:["id=".concat(a)]}]);o&&!s&&(window._xnext_initialization_scripts=[{widgetType:"ProductBrowser",id:r,arg:["id=".concat(r)]}]);!o&&s&&(window._xnext_initialization_scripts=[{widgetType:"SearchWidget",id:a,arg:["id=".concat(r)]}]);l&&window.addEventListener("load",(function(){var e=document.createElement("script");e.charset="utf-8";e.type="text/javascript";e.text="Ecwid.init();";window.document.body.appendChild(e)}))},_getStoreElementId:function e(){return"my-store-".concat(this.storeId)},_getSearchElementId:function e(){return"my-search-".concat(this.storeId)}};var s=t["default"]=o},85761:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=function e(t){var r={};_.each(t,(function(e){r[e.ref]=e}));return r};var n=t["default"]=r},22895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;t.getIframeWindow=y;var n=a(r(1904));var i=a(r(19238));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return d(e)||c(e,t)||l(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n=[];var i=true;var a=false;var o,s;try{for(r=r.call(e);!(i=(o=r.next()).done);i=true){n.push(o.value);if(t&&n.length===t)break}}catch(e){a=true;s=e}finally{try{i||null==r["return"]||r["return"]()}finally{if(a)throw s}}return n}function d(e){if(Array.isArray(e))return e}function f(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){f(a,n,i,o,s,"next",e)}function s(e){f(a,n,i,o,s,"throw",e)}o(void 0)}))}}var g=n.default.iOSFixRequired;var h={calculateFrameHeight:function e(){var t=$(b());var r=$("body",t.contents()).height()-2;t.height(r)},resetFrameHeight:function e(){b().style.height="100%"},updateViewportHeight:function e(){return p(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function e(a){while(1)switch(a.prev=a.next){case 0:t=y();r=window.getComputedStyle(document.querySelector(".js-canvas")).getPropertyValue("height");(0,i.default)("setStyle",t,{property:"--viewport-height",target:"body",value:r});a.next=5;return(0,i.default)("getClassListContains",t,{className:"editor-loaded",target:"body"});case 5:n=a.sent;if(!n){a.next=8;break}return a.abrupt("return");case 8:(0,i.default)("addClass",t,{className:"editor-loaded",target:"body"});case 9:case"end":return a.stop()}}),e)})))()},getScrollWin:function e(){var t=y();var r=g()?window:t;return r},getScrollListenerTarget:function e(){return m()},getIframeDocument:function e(){return y().document},scrollToMainZone:function e(){var t=m();var r=v(t),n=o(r,3),i=n[1],a=n[2];null!==i&&a.scrollIntoView({behavior:"smooth",block:"nearest"})}};function v(e){var t=y();var r=t.document.getElementById("page-zones__main");var n=r.offsetTop;var i=r.offsetHeight+n;var a=void 0!==e.pageYOffset?e.pageYOffset:e.scrollTop;var o=null;a<n?o=n:a>i&&(o=i);return[a,o,r]}function m(){var e=y();var t=g()?document.querySelector(".js-site-preview"):e;return t}function y(){var e=b().contentWindow?b().contentWindow:b().contentDocument.defaultView;return e}function b(){return Editor.Site.Dom.iframe}var w=t["default"]=h},62201:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=r;function r(e,t){return JSON.stringify(e)===JSON.stringify(t)}},9838:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=function e(t,r,s){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;var u=document.createElement("div");var c=document.querySelector(".container");var d=function e(){return new Promise((function(e){return setTimeout(e,l)}))};u.setAttribute("role","alert");u.style.zIndex=9999;i(s,u);a(t,u);o(r,u);c.appendChild(u);u.classList.add("is-visible");d().then((function(){return n(u)}))};function n(e){e.addEventListener("animationend",(function(){return e.remove()}));e.classList.remove("is-visible")}function i(e,t){var r=e&&"string"===typeof e?"action-notification--".concat(e):"";t.classList.add("action-notification",r)}function a(e,t){if("string"===typeof e){var r=document.createElement("h2");r.textContent=e;r.classList.add("action-notification__title");t.appendChild(r)}}function o(e,t){if("string"===typeof e){var r=document.createElement("p");r.textContent=e;r.classList.add("action-notification__message");t.appendChild(r)}}window.Eight=window.Eight||{};window.Eight.notify=r;var s=t["default"]=r},8086:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=s;r(7784);var n=i(r(19238));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,l,"next",e)}function l(e){a(o,n,i,s,l,"throw",e)}s(void 0)}))}}function s(){return l.apply(this,arguments)}function l(){l=o(regeneratorRuntime.mark((function e(){var t,r,i,a;return regeneratorRuntime.wrap((function e(o){while(1)switch(o.prev=o.next){case 0:t={};o.next=3;return(0,n.default)("getUrl",window.top);case 3:r=o.sent;i=r.match(/\?(.+)/);if(i){a=i[1].split("&");a.reduce((function(e,t){var r=t.split("=");2===r.length&&(e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]));return e}),t)}return o.abrupt("return",t);case 7:case"end":return o.stop()}}),e)})));return l.apply(this,arguments)}},3887:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r={getItem:function e(t){return window.sessionStorage.getItem(t)},setItem:function e(t,r){return window.sessionStorage.setItem(t,r)}};var n=t["default"]=r},7808:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=g;var n=s(r(31170));var i=s(r(69464));var a=r(32686);var o=r(31002);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return p(e)||f(e,t)||c(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n=[];var i=true;var a=false;var o,s;try{for(r=r.call(e);!(i=(o=r.next()).done);i=true){n.push(o.value);if(t&&n.length===t)break}}catch(e){a=true;s=e}finally{try{i||null==r["return"]||r["return"]()}finally{if(a)throw s}}return n}function p(e){if(Array.isArray(e))return e}function g(){var e=function e(t){var r=n.default.container.SessionErrorMessage;if(401===t.status){r.display();throw new Error}return t};return new Promise((function(t,r){window.fetch("/refresh",{method:"GET",credentials:"include"}).then(e).then((function(e){return e.json()})).then((function(e){var n=e.sites.filter((function(e){return e.ref===i.default.getState().site.ref})),s=l(n,1),u=s[0];u||r("Current site not found");i.default.dispatch((0,a.setSiteLanguages)(u.siteLanguages));u.siteDefaultLanguage&&i.default.dispatch((0,a.setDefaultLanguage)(u.siteDefaultLanguage));i.default.dispatch((0,o.setPrimaryDomain)(u.primaryDomain.domainName));App.sites.reset(e.sites);App.user=e.accountHolder;App.brand=e.brand;App.frontEndBucket.languageCode=e.accountHolder.languageCode;App.frontEndBucket.tier=e.accountHolder.capabilities.templateTier;App.frontEndBucket.offerExpiryDate=e.billingCycle&&e.billingCycle.offerExpiryDate||null;t(e)})).catch(r)}))}"undefined"!==typeof Editor&&Editor.Events&&Editor.Events.on("session:update",g)},58469:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toTitleCase=t["default"]=t.camelCase=void 0;var r=t.toTitleCase=function e(t){return t.toLowerCase().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")};var n=t.camelCase=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".";return t.replace(/(\.[a-z])/g,(function(e){return e.toUpperCase().replace(r,"")}))};var i=t["default"]={toTitleCase:r,camelCase:n}},13745:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(8086));var i=a(r(4831));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return d(e)||c(e,t)||l(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n=[];var i=true;var a=false;var o,s;try{for(r=r.call(e);!(i=(o=r.next()).done);i=true){n.push(o.value);if(t&&n.length===t)break}}catch(e){a=true;s=e}finally{try{i||null==r["return"]||r["return"]()}finally{if(a)throw s}}return n}function d(e){if(Array.isArray(e))return e}var f=function e(t,r){for(var i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];var s={debugkeys:h.bind(null,t),debugvalues:v.bind(null,t),translate:m.bind.apply(m,[null,t,r].concat(a))};return s[(0,n.default)().translate||"translate"]()};function p(e){var t=(0,i.default)();var r=e.match(/^(.+?)\.(.+)$/),n=o(r,3),a=n[1],s=n[2];if("undefined"!==typeof t.App.i18n[a]&&"undefined"!==typeof t.App.i18n[a][s])return t.App.i18n[a][s];return null}function g(){var e=(0,i.default)();return e.App.frontEndBucket&&0!==parseInt(e.App.frontEndBucket.useDefaultTranslations,10)}function h(e){return e}function v(e){var t=p(e);if(""===t)return"MASTER";if(t)return"TRANSLATED";return"DEFAULT"}function m(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var a=p(e);var o=t||"";var s=a||(g()?o:"");var l=s.replace(/%([1-9])/g,(function(e,t){return"undefined"!==typeof n[t-1]?n[t-1]:""}));return l||e}var y=t["default"]=f},1904:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;t.iOSFixRequired=l;t.iOSVersion=o;t.isAndroidChrome=f;t.isEdge=g;t.isIE=p;t.isMobileWebKit=d;t.isiOS=a;t.isiOS13OrAbove=s;t.isiOSSafari=i;t.isiOSTablet=u;t.isiPadOS=c;var n=r(55372);function i(){var e=/Version\/[\d.]+.*Safari/.test(navigator.userAgent);return e&&a()}function a(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return e||c()}function o(){if(a()){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(e)return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)];if(c())return[13,0,0]}return""}function s(){var e=o();return""!==e&&e[0]>=13}function l(){return a()&&!s()}function u(){return/iPad/.test(navigator.platform)}function c(){return"MacIntel"===navigator.platform&&(0,n.isTouchDevice)()}function d(){var e=navigator.userAgent;var t=new RegExp(" AppleWebKit/").test(e);var r=t&&new RegExp(" Android").test(e);var n=t&&new RegExp(" Silk/").test(e);var i=t&&new RegExp(" Mobile/").test(e);var a=t&&c();var o=new RegExp("^basekit-app").test(e);return i||r||n||o||a}function f(){var e=navigator.userAgent;var t=new RegExp("^basekit-app").test(e);var r=new RegExp(" AppleWebKit/").test(e)&&new RegExp(" Android").test(e);return r||t}function p(){var e=new RegExp("/Trident/.*rv:([0-9]{1,}[.0-9]{0,})/");return e.test(navigator.userAgent)}function g(){var e=new RegExp("/ Edge//");return e.test(navigator.userAgent)}var h={isiOSSafari:i,isiOS:a,iOSVersion:o,isiOS13OrAbove:s,iOSFixRequired:l,isiOSTablet:u,isMobileWebKit:d,isAndroidChrome:f,isIE:p,isEdge:g};window.BaseKit&&(BaseKit.UserAgentSniffer=h);var v=t["default"]=h},96209:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(9838));var i=o(r(3181));var a=o(r(58248));function o(e){return e&&e.__esModule?e:{default:e}}var s=t["default"]=function e(t){t.factory("notification",(function(){return n.default}));t.factory("session",(function(e){return new a.default({sessionTimeoutDialog:e.SessionErrorMessage})}));t.factory("SiteGlobalValuesHelper",(function(e){return new i.default({siteDataProvider:e.SiteDataProvider,envDataProvider:e.EnvDataProvider,siteGlobalValuesCollection:BaseKit.Globals.globalValues})}));return t}},7344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getWidgetClass=l;t.getWidgetName=s;t.getWidgetNameFromType=a;t.normalisedColumnName=o;t.normalisedWidgetContentType=i;var n=r(58469);function i(e){if(/\.content\./.test(e))return"widget.content";return e}function a(e){return(0,n.camelCase)("basekit.".concat(e)).replace(/^basekitWidget/i,"")}function o(e){var t="ColumnsColumn"===e?"ResponsivecolumnsColumn":e;return t}function s(e){return o(a(i(e)))}function l(e){var t=u();var r="".concat(s(e.widgetType)).concat(e.type);var n="function"===typeof t[r]?t[r]:t["DefaultWidget".concat(e.type)];return n}function u(){return document.querySelector(".js-site-frame").contentWindow.BaseKit.Widget}},12295:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isMobileScreenMode=t.isDesktopScreenMode=t.getWindowWidth=t["default"]=void 0;var r=930;var n=t.getWindowWidth=function e(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||document.body.offsetWidth};var i=t.isDesktopScreenMode=function e(){return n()>=r};var a=t.isMobileScreenMode=function e(){return n()<r};var o=t["default"]={getWindowWidth:n,isDesktopScreenMode:i,isMobileScreenMode:a}},41395:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.widgetDataTransformer=t.widgetDataTransformer;this.newWidgetAction=t.newWidgetAction;this.replaceWidgetAction=t.replaceWidgetAction;this.deleteWidgetAction=t.deleteWidgetAction;this.afterChangesAction=t.afterChangesAction;this.changeOrder=["deletion","addition","replacement"]}i(e,[{key:"interpretAndExecute",value:function e(t){var r=this._extractChangeProcedures(t);this._executeChanges(r,this.changeOrder)}},{key:"_executeChanges",value:function e(t,r){var n=this;r.forEach((function(e){t.forEach((function(t){if(t.type===e){var r=t.action;var i=n._prepareData(t.data);r.applyChange(i)}}))}));this.afterChangesAction.applyChange()}},{key:"_prepareData",value:function e(t){var r=this;t.widgets&&(t.widgets=t.widgets.map((function(e){e.data=r.widgetDataTransformer.transform(e.type,e.data);return e})));return t}},{key:"_extractChangeProcedures",value:function e(t){var r=this;var n=this._getPageTreeChanges(t);var i=[];n.forEach((function(e){i.push({type:e.type,action:r._changeTypeMapper(e.type),data:e})}));return i}},{key:"_changeTypeMapper",value:function e(t){var r={addition:this.newWidgetAction,deletion:this.deleteWidgetAction,replacement:this.replaceWidgetAction};return r[t]}},{key:"_getPageTreeChanges",value:function e(t){return t.pageTreeChanges}}]);return e}();var o=t["default"]=a},16487:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.widgetAPI=t.serverWidgetAPIFacade;this.widgetRequestBodyFactory=t.widgetRequestBodyFactory}i(e,[{key:"add",value:function e(t){var r=this.widgetRequestBodyFactory.build(t,"add");this.widgetAPI.add(r)}},{key:"move",value:function e(t){var r=this.widgetRequestBodyFactory.build(t);return this.widgetAPI.move(r)}}]);return e}();var o=t["default"]=a},33625:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t,r,n,i,a,o){try{var s=e[a](o);var l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,l,"next",e)}function l(e){r(o,i,a,s,l,"throw",e)}s(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function o(e,t,r){t&&a(e.prototype,t);r&&a(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var s=function(){function e(t){i(this,e);this.fetch=t.fetch;this.envDataProvider=t.envDataProvider;this.changeInstructionInterpreter=t.changeInstructionInterpreter;this.tracker=t.tracker}o(e,[{key:"add",value:function(){var e=n(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:r="/_/add-widget";i.next=3;return this._makeRequest(r,t);case 3:n=i.sent;this.changeInstructionInterpreter.interpretAndExecute(n,"add");this.tracker.track("Add widget",{widget:t.type});case 6:case"end":return i.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"move",value:function(){var e=n(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:r="/_/move-widget";i.next=3;return this._makeRequest(r,t);case 3:n=i.sent;this.changeInstructionInterpreter.interpretAndExecute(n,"move");case 5:case"end":return i.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"remove",value:function(){var e=n(regeneratorRuntime.mark((function e(t){var r,n,i;return regeneratorRuntime.wrap((function e(a){while(1)switch(a.prev=a.next){case 0:r="/_/delete-widget";n={uniqueId:t};a.next=4;return this._makeRequest(r,n);case 4:i=a.sent;this.changeInstructionInterpreter.interpretAndExecute(i,"remove");case 6:case"end":return a.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"replaceRow",value:function(){var e=n(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:r="/_/replace-row";i.next=3;return this._makeRequest(r,t);case 3:n=i.sent;this.changeInstructionInterpreter.interpretAndExecute(n,"replace");case 5:case"end":return i.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"cloneZone",value:function(){var e=n(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:r="/_/clone-shared-zone";i.next=3;return this._makeRequest(r,t);case 3:n=i.sent;this.changeInstructionInterpreter.interpretAndExecute(n,"clone");case 5:case"end":return i.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"restoreZone",value:function(){var e=n(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function e(i){while(1)switch(i.prev=i.next){case 0:r="/_/restore-shared-zone";i.next=3;return this._makeRequest(r,t);case 3:n=i.sent;this.changeInstructionInterpreter.interpretAndExecute(n,"restore");case 5:case"end":return i.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_makeRequest",value:function(){var e=n(regeneratorRuntime.mark((function e(t,r){var n,i,a=arguments;return regeneratorRuntime.wrap((function e(o){while(1)switch(o.prev=o.next){case 0:n=a.length>2&&void 0!==a[2]?a[2]:"POST";o.next=3;return this._request({url:t,method:n,body:r});case 3:i=o.sent;return o.abrupt("return",i.json());case 5:case"end":return o.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"_getBaseURL",value:function e(){var t=this.envDataProvider.get("protocol");var r=this.envDataProvider.get("domain");return"".concat(t,"://editor.").concat(r)}},{key:"_request",value:function e(t){var r=this._getBaseURL();return window.fetch("".concat(r).concat(t.url),{method:t.method,credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":this.envDataProvider.get("csrfToken")},body:JSON.stringify(t.body)})}}]);return e}();var l=t["default"]=s},72278:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(7344);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function o(e,t,r){t&&a(e.prototype,t);r&&a(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var s=function(){function e(t){i(this,e);this.widgetDefaultValueRetriever=t.widgetDefaultValueRetriever;this.widgetRegister=t.widgetRegister}o(e,[{key:"build",value:function e(t,r){var n=t;r&&"add"===r&&(n=this._createAddWidgetRequest(t));return n}},{key:"_createAddWidgetRequest",value:function e(t){var r=Object.assign(t,{values:this._getWidgetDefaults(t.type),type:(0,n.normalisedWidgetContentType)(t.type)});this._isEmptyMainZoneAdd(t.target)&&(r.parent=t.target);return r}},{key:"_isEmptyMainZoneAdd",value:function e(t){var r=this.widgetRegister.getMainZoneWidget();return t===r.uniqueId&&r.isEmpty()}},{key:"_getWidgetDefaults",value:function e(t){return this.widgetDefaultValueRetriever.getDefaults(t)}}]);return e}();var l=t["default"]=s},82427:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(68088);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function o(e,t,r){t&&a(e.prototype,t);r&&a(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var s=function(){function e(t){i(this,e);this.store=t.store;this.widgetRegister=t.widgetRegister}o(e,[{key:"applyChange",value:function e(){this._updateWidgetPositionsInState();this._recalculateFrameScrollbar();Editor.Events.trigger("addRowMode:addButtons")}},{key:"_updateWidgetPositionsInState",value:function e(){var t=this.widgetRegister.getZone("main");var r=this._getWidgetIdFromElement(t.view.el.firstElementChild);var i=this._getWidgetIdFromElement(t.view.el.lastElementChild);this.store.dispatch((0,n.changeFirstWidgetOnPage)(r));this.store.dispatch((0,n.changeLastWidgetOnPage)(i))}},{key:"_getWidgetIdFromElement",value:function e(t){if(t)return t.getAttribute("data-uniqueId");return null}},{key:"_recalculateFrameScrollbar",value:function e(){Editor.Events.trigger("FrameScrollbar:recalculate")}}]);return e}();var l=t["default"]=s},84:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.widgetRegister=t.widgetRegister}i(e,[{key:"applyChange",value:function e(t){var r=t.widget;this.widgetRegister.unregister(r);Editor.Events.trigger("addRowMode:removeButtons");this._emptyMainZoneIfEmpty()}},{key:"_emptyMainZoneIfEmpty",value:function e(){var t=this.widgetRegister.getMainZoneWidget();t.isEmpty()&&t.emptyElement()}}]);return e}();var o=t["default"]=a},30186:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=function(){function e(t){a(this,e);this.nodeTreeConstructor=t.nodeTreeConstructor;this.widgetInserter=t.widgetInserter;this.widgetFactory=t.widgetFactory;this.widgetRegister=t.widgetRegister;this.dragdropEngine=t.dragdropEngine}s(e,[{key:"applyChange",value:function e(t){var r=this;var i=this.nodeTreeConstructor.createTreeFromWidgetData(t.widgets);Editor.Events.trigger("addRowMode:removeButtons");this.widgetInserter.insert(n(n({},t.insertInto),{},{node:i}));t.widgets.forEach((function(e){r.widgetFactory.build(e)}));this._resolveDragDrop(t.widgets.slice(0,1).pop())}},{key:"_resolveDragDrop",value:function e(t){var r=this.widgetRegister.get(t.uniqueId);this.dragdropEngine.finishDrag(r.view)}}]);return e}();var u=t["default"]=l},68802:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(69464));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=function(){function e(t){a(this,e);this.nodeTreeConstructor=t.nodeTreeConstructor;this.widgetFactory=t.widgetFactory;this.widgetRegister=t.widgetRegister;this.widgetReplacer=t.widgetReplacer;this.dragdropEngine=t.dragdropEngine}s(e,[{key:"applyChange",value:function e(t){var r=this;var n=this.nodeTreeConstructor.createTreeFromWidgetData(t.widgets);this.widgetReplacer.replace({replaces:t.replaces,node:n});this.widgetRegister.unregister(t.replaces);t.widgets.forEach((function(e){r.widgetFactory.build(e)}));Editor.Events.trigger("addRowMode:addButtons");var i=this._getFirstWidget(t);this._resolveDragDrop(i);this._openSettingsPanel(i)}},{key:"_getFirstWidget",value:function e(t){return this.widgetRegister.get(t.widgets.slice(0,1).pop().uniqueId)}},{key:"_openSettingsPanel",value:function e(t){if(!n.default.getState().site.isRowEditingMode)return;if(t.model.get("isZone")){t.children().pop().view.openSettings();return}t.isRow()&&t.view.openSettings()}},{key:"_resolveDragDrop",value:function e(t){this.dragdropEngine.finishDrag(t.view)}}]);return e}();var u=t["default"]=l},44671:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(){r(this,e)}i(e,[{key:"setRelationships",value:function e(t){this._setCollection(t);this._setColumnViewRelationship(t)}},{key:"_setCollection",value:function e(t){if(t.parentUniqueId){var r=t.parent();r.addToChildCollection(t)}}},{key:"_setColumnViewRelationship",value:function e(t){var r=t.parent();!r||t.isResponsiveColumnWidget()||r.isMainZone()||t.view.setContainer(r.view);if(r&&!t.isResponsiveColumnWidget()){r.view.children&&r.view.children.add(t.view,t.uniqueId);r.view.collection&&r.view.collection.add(t.model)}}}]);return e}();var o=t["default"]=a},98786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(){r(this,e)}i(e,[{key:"breakRelationships",value:function e(t){this._removeFromParentViewCollection(t);this._removeFromParentViewChildren(t)}},{key:"_removeFromParentViewCollection",value:function e(t){var r=t.parent();r&&r.view.collection&&r.view.collection.remove(t.model)}},{key:"_removeFromParentViewChildren",value:function e(t){var r=t.parent();r&&r.view.children&&r.view.children.remove(t.view)}}]);return e}();var o=t["default"]=a},9307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(8980));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=function(){function e(t){a(this,e);this.templateRenderer=t.templateRenderer}s(e,[{key:"build",value:function e(t){var r=Object.assign({templateRenderer:this.templateRenderer},t);return new n.default(r)}}]);return e}();var u=t["default"]=l},8980:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Backbone.View.extend({template:"view_rowbackgroundcontrol",className:"row__background-controls js-row-background-controls",events:{"click .js-replace-background":"replaceBackgroundClicked"},initialize:function e(t){this.properties=t.properties;this.parentView=t.parentView;this.templateRenderer=t.templateRenderer},render:function e(){var t=this.templateRenderer.render(this.template,{headerOrFooter:this._isHeaderOrFooterRow(),backgroundType:this.parentView.model.get("backgroundType")});this.$el.append(t);return this},replaceBackgroundClicked:function e(){this.trigger("widget:replaceBackgroundClick")},_isHeaderOrFooterRow:function e(){return"header"===this.properties.parentZone||"footer"===this.properties.parentZone}});var n=t["default"]=r},37754:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=ke(r(76172));var i=ke(r(44671));var a=ke(r(98786));var o=ke(r(51021));var s=ke(r(12793));var l=ke(r(24089));var u=ke(r(49190));var c=ke(r(59741));var d=ke(r(6572));var f=ke(r(75095));var p=ke(r(49646));var g=ke(r(38309));var h=ke(r(54329));var v=r(55372);var m=ke(r(1724));var y=ke(r(16703));var b=ke(r(52760));var w=ke(r(98181));var _=ke(r(38195));var S=ke(r(33208));var P=ke(r(78281));var E=ke(r(57789));var k=ke(r(85761));var C=ke(r(62047));var O=ke(r(74849));var A=ke(r(13759));var T=ke(r(57538));var j=ke(r(16487));var D=ke(r(54296));var L=ke(r(40266));var R=ke(r(33625));var I=ke(r(41395));var M=ke(r(65690));var x=ke(r(70693));var N=ke(r(8101));var F=ke(r(92735));var V=ke(r(1351));var B=ke(r(30186));var W=ke(r(82427));var G=ke(r(68802));var q=ke(r(84));var U=ke(r(72278));var H=ke(r(29649));var z=ke(r(27765));var $=ke(r(4956));var K=ke(r(53978));var Z=ke(r(17488));var Y=ke(r(49529));var X=ke(r(46415));var J=ke(r(86985));var Q=ke(r(61622));var ee=ke(r(6358));var te=ke(r(61249));var re=ke(r(52614));var ne=ke(r(10653));var ie=ke(r(55806));var ae=ke(r(29361));var oe=ke(r(60813));var se=ke(r(31851));var le=ke(r(82264));var ue=ke(r(66052));var ce=ke(r(7668));var de=ke(r(9094));var fe=ke(r(30530));var pe=ke(r(63050));var ge=ke(r(12979));var he=ke(r(17074));var ve=ke(r(85285));var me=ke(r(33821));var ye=ke(r(9307));var be=ke(r(14651));var we=ke(r(17515));var _e=ke(r(76046));var Se=ke(r(27187));var Pe=ke(r(97477));var Ee=ke(r(69464));function ke(e){return e&&e.__esModule?e:{default:e}}var Ce=function e(t){t.factory("WidgetInserter",(function(){return new D.default}));t.factory("UndoWidgetSettingsView",(function(){return new H.default}));t.factory("WidgetReplacer",(function(){return new L.default}));t.factory("RowEditModeLayoutView",(function(){return new le.default}));t.factory("WidgetSettingsControlLayoutView",(function(){return new _e.default}));t.factory("WidgetSettingsComponentViewFactory",(function(){return new fe.default({settingsComponentProvider:ae.default})}));t.factory("StoreDataAdapterFactory",(function(){return new me.default({store:Ee.default})}));t.factory("RowEditMode",(function(e){return new oe.default({store:Ee.default,RowEditingToolbarView:se.default,TooltipView:ce.default,RowSettingsView:de.default,RowSettingsViewEmailMixin:pe.default,eventDispatcher:Editor.Events,editModeLayoutView:e.RowEditModeLayoutView,templateRenderer:e.TemplateRenderer,widgetSettingsComponentViewFactory:e.WidgetSettingsComponentViewFactory,rowLayoutControl:e.RowLayoutControl,envDataProvider:e.EnvDataProvider,widgetRegister:e.WidgetRegister,featureFlagDataProvider:e.featureFlagDataProvider})}));t.factory("WidgetSettingsControl",(function(e){return new we.default({store:Ee.default,widgetSettingsView:Se.default,RowSettingsViewEmailMixin:pe.default,widgetStyleSettingsViewFactory:e.WidgetStyleSettingsViewFactory,styleSettingsProvider:e.StyleSettingsProvider,widgetSettingsControlLayoutView:e.WidgetSettingsControlLayoutView,templateRenderer:e.TemplateRenderer,widgetSettingsComponentViewFactory:e.WidgetSettingsComponentViewFactory,widgetRegister:e.WidgetRegister,featureFlagDataProvider:e.featureFlagDataProvider})}));t.factory("RowWidgetControlViewFactory",(function(){return new be.default}));t.factory("RowWidgetSettingsControl",(function(e){return new ue.default({store:Ee.default,templateRenderer:e.TemplateRenderer,rowWidgetSettingsView:Pe.default,widgetSettingsControlLayoutView:e.WidgetSettingsControlLayoutView,storeDataAdapterFactory:e.StoreDataAdapterFactory,rowWidgetControlViewFactory:e.RowWidgetControlViewFactory,envDataProvider:e.EnvDataProvider,zoneSharingDialogView:e.ZoneSharingDialogView,HeaderFooterSharingDialogContentView:ee.default,rowLayoutControl:e.RowLayoutControl,tracker:e.Tracker})}));t.factory("SiteWidgetOverlayFactory",(function(e){return new u.default({templateRenderer:e.TemplateRenderer,featureFlagDataProvider:e.featureFlagDataProvider,storeDataAdapterFactory:e.StoreDataAdapterFactory,userDataProvider:e.UserDataProvider})}));t.factory("ZoneSharingDialogContentViewFactory",(function(e){return new re.default({zoneCloner:e.ZoneCloner,zoneRestorer:e.ZoneRestorer,templateRenderer:e.TemplateRenderer})}));t.factory("ZoneSharingDialogView",(function(e){return new te.default({DialogPanelView:J.default,contentViewFactory:e.ZoneSharingDialogContentViewFactory})}));t.factory("WidgetAssociator",(function(){return new i.default}));t.factory("WidgetDisassociator",(function(){return new a.default}));t.factory("WidgetRegister",(function(){return new n.default({stdCollectionClass:Backbone.Collection,globalEventsHandler:Editor.Events})}));t.factory("WidgetCollectionObserver",(function(e){return new c.default({widgetRegister:e.WidgetRegister})}));t.factory("WidgetViewModelFactory",(function(e){return new N.default({rowsEnabled:e.featureFlagDataProvider.get("enableRows")})}));t.factory("WidgetModelFactory",(function(e){return new M.default({widgetViewModelFactory:e.WidgetViewModelFactory,StdModelClass:Backbone.Model,StdCollectionClass:Backbone.Collection,rowsEnabled:e.featureFlagDataProvider.get("enableRows")})}));t.factory("WidgetPropertyPanelFactory",(function(e){return new O.default({siteDataProvider:e.SiteDataProvider,widgetStyleSettingsViewFactory:e.WidgetStyleSettingsViewFactory,styleSettingsProvider:e.StyleSettingsProvider,rowsEnabled:e.featureFlagDataProvider.get("enableRows"),settingsComponentProvider:ae.default,tracker:e.Tracker,formEmailVerification:e.featureFlagDataProvider.get("formEmailVerification")})}));t.factory("WidgetStyleSettingsViewFactory",(function(e){return new A.default({store:Ee.default,styleSettingsProvider:e.StyleSettingsProvider,envDataProvider:e.EnvDataProvider,rowsEnabled:e.featureFlagDataProvider.get("enableRows")})}));t.factory("StyleSettingsProvider",(function(e){return new T.default({siteDataProvider:e.SiteDataProvider})}));t.factory("WidgetDefaultValueRetriever",(function(){return new F.default({StdModelClass:Backbone.Model})}));t.factory("WidgetDataTransformer",(function(){return new V.default({StdModelClass:Backbone.Model})}));t.factory("WidgetPropertyPanelAdapter",(function(e){return new C.default({settingsView:e.WidgetPropertyPanelFactory.build()})}));t.factory("WidgetViewFactory",(function(e){return new o.default({store:Ee.default,profile:BaseKit.Globals.profile,pages:BaseKit.Globals.pages,assets:BaseKit.Globals.imageAssets,hiddenWidgetsPanel:e.HiddenWidgetsPanelView,overlayFactory:e.SiteWidgetOverlayFactory,fileViewFactory:he.default,imageEditor:$.default,widgetPropertyPanelAdapter:e.WidgetPropertyPanelAdapter,undoWidgetSettingsView:e.UndoWidgetSettingsView,envDataProvider:e.EnvDataProvider,fetch:window.fetch,dragDropEligibilityChecker:e.DragDropEligibilityChecker,userDataProvider:e.UserDataProvider,siteDataProvider:e.SiteDataProvider,featureFlagDataProvider:e.featureFlagDataProvider})}));t.factory("RowsWidgetViewFactory",(function(e){return new s.default({profile:BaseKit.Globals.profile,pages:BaseKit.Globals.pages,assets:BaseKit.Globals.imageAssets,hiddenWidgetsPanel:e.HiddenWidgetsPanelView,overlayFactory:e.SiteWidgetOverlayFactory,widgetBackgroundControlFactory:e.WidgetBackgroundControlFactory,fileViewFactory:he.default,imageEditor:$.default,widgetPropertyPanelAdapter:e.WidgetPropertyPanelAdapter,undoWidgetSettingsView:e.UndoWidgetSettingsView,envDataProvider:e.EnvDataProvider,fetch:window.fetch,zoneCloner:e.ZoneCloner,zoneRestorer:e.ZoneRestorer,zoneSharingDialogView:e.ZoneSharingDialogView,ZoneSharingDialogContentView:Q.default,dragDropEligibilityChecker:e.DragDropEligibilityChecker,rowEditMode:e.RowEditMode,widgetSettingsControl:e.WidgetSettingsControl,rowWidgetSettingsControl:e.RowWidgetSettingsControl,userDataProvider:e.UserDataProvider,featureFlagDataProvider:e.featureFlagDataProvider,siteDataProvider:e.SiteDataProvider,widgetSettingsData:e.StoreDataAdapterFactory.build({stateId:"widgetSettings"}),tracker:e.Tracker,brandDataProvider:e.BrandDataProvider})}));t.factory("AbstractWidgetViewFactory",(function(e){return new l.default({widgetViewFactory:e.WidgetViewFactory,rowsWidgetViewFactory:e.RowsWidgetViewFactory,featureFlagDataProvider:e.featureFlagDataProvider})}));t.factory("WidgetRendererFactory",(function(e){return new y.default({store:Ee.default,siteDataProvider:e.SiteDataProvider,envDataProvider:e.EnvDataProvider,assets:BaseKit.Globals.imageAssets,pagesProvider:P.default,sessionProvider:E.default,profile:BaseKit.Globals.profile,twig:Twig,formatImageAssetData:k.default,ColumnWidgetRenderer:b.default,ZoneRenderer:w.default,ZoneWidgetRenderer:_.default})}));t.factory("NodeTreeConstructor",(function(e){return new S.default({widgetRendererFactory:e.WidgetRendererFactory})}));t.factory("WidgetFactory",(function(e){return new x.default({Widget:d.default,userDataProvider:e.UserDataProvider,widgetViewFactory:e.AbstractWidgetViewFactory,modelFactory:e.WidgetModelFactory,widgetRegister:e.WidgetRegister,widgetAssociator:e.WidgetAssociator,widgetDisassociator:e.WidgetDisassociator,dragdropEngine:BaseKit.DragDropV8&&BaseKit.DragDropV8.dragdropEngine||m.default})}));t.factory("WidgetInitialiser",(function(e){return new ve.default({store:Ee.default,siteDataProvider:e.SiteDataProvider,widgetFactory:e.WidgetFactory,widgetRegister:e.WidgetRegister})}));t.factory("DragDropEligibilityChecker",(function(e){return new ne.default({featureFlagDataProvider:e.featureFlagDataProvider,userDataProvider:e.UserDataProvider})}));t.factory("DragBehaviourFactory",(function(e){return new ie.default({featureFlagDataProvider:e.featureFlagDataProvider,userDataProvider:e.UserDataProvider})}));t.factory("HiddenWidgetsPanelView",(function(e){return new f.default({el:".js-hidden-widgets-panel-container",widgetRegister:e.WidgetRegister,highlighter:p.default,globalEventsHandler:Editor.Events,childBehavior:Oe()?h.default:g.default,envDataProvider:e.EnvDataProvider})}));t.factory("NewWidgetAction",(function(e){return new B.default({widgetFactory:e.WidgetFactory,widgetInserter:e.WidgetInserter,nodeTreeConstructor:e.NodeTreeConstructor,widgetRegister:e.WidgetRegister,dragdropEngine:BaseKit.DragDropV8&&BaseKit.DragDropV8.dragdropEngine||m.default})}));t.factory("ReplaceWidgetAction",(function(e){return new G.default({widgetFactory:e.WidgetFactory,widgetReplacer:e.WidgetReplacer,nodeTreeConstructor:e.NodeTreeConstructor,widgetRegister:e.WidgetRegister,dragdropEngine:BaseKit.DragDropV8&&BaseKit.DragDropV8.dragdropEngine||m.default})}));t.factory("DeleteWidgetAction",(function(e){return new q.default({widgetRegister:e.WidgetRegister})}));t.factory("AfterChangesAction",(function(e){return new W.default({store:Ee.default,widgetRegister:e.WidgetRegister})}));t.factory("ChangeInstructionInterpreter",(function(e){return new I.default({widgetDataTransformer:e.WidgetDataTransformer,newWidgetAction:e.NewWidgetAction,replaceWidgetAction:e.ReplaceWidgetAction,deleteWidgetAction:e.DeleteWidgetAction,afterChangesAction:e.AfterChangesAction})}));t.factory("ServerWidgetAPIFacade",(function(e){return new R.default({fetch:window.fetch,envDataProvider:e.EnvDataProvider,changeInstructionInterpreter:e.ChangeInstructionInterpreter,tracker:e.Tracker})}));t.factory("RowLayoutControl",(function(e){return new K.default({rowLayoutSelectorPanelView:e.RowLayoutSelectorPanelView})}));t.factory("RowLayoutSelectorPanelView",(function(e){return new Z.default({store:Ee.default,envDataProvider:e.EnvDataProvider,widgetApi:BaseKit.Globals.widgetApi,templateRenderer:e.TemplateRenderer})}));t.factory("ZoneRestorer",(function(){return new Y.default({widgetApi:BaseKit.Globals.widgetApi})}));t.factory("ZoneCloner",(function(){return new X.default({widgetApi:BaseKit.Globals.widgetApi})}));t.factory("WidgetRequestBodyFactory",(function(e){return new U.default({widgetDefaultValueRetriever:e.WidgetDefaultValueRetriever,widgetRegister:e.WidgetRegister})}));t.factory("DragAndDropInterface",(function(e){return new j.default({serverWidgetAPIFacade:e.ServerWidgetAPIFacade,widgetRequestBodyFactory:e.WidgetRequestBodyFactory})}));t.factory("MoveWidgetOnDevice",(function(e){return new z.default({widgetAPI:e.DragAndDropInterface})}));t.factory("deleteRowDialogViewFactory",(function(e){var t=e.TemplateRenderer;return new ge.default({templateRenderer:t})}));t.factory("WidgetBackgroundControlFactory",(function(e){return new ye.default({templateRenderer:e.TemplateRenderer})}));return t};function Oe(){return"coarse"===v.deviceFeaturesHelper.getInputType()}var Ae=t["default"]=Ce},52276:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=t["default"]={defaults:{email:"profile",text:App.t("widgets.contactform.default_button_text","Send"),formTitle:App.t("widgets.contactform.subject_line_default","Subject")}}},45825:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(13745));var i=r(32637);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var s=t["default"]={template:"widget_contactform",getSettings:function e(){var t={title:(0,n.default)("widgets.contactform.title","Contact Form"),groupInformation:[{groupId:1,groupTitle:(0,n.default)("widgets.contactform.form_details_group","Form details")},{groupId:2,groupTitle:(0,n.default)("widgets.contactform.email_details_group","Email details")},{groupId:3,groupTitle:(0,n.default)("widgets.contactform.post_submit_page_group","Post-submit page")},{groupId:4,groupTitle:(0,n.default)("widgets.contactform.display_options_group","Display options")},{groupId:5,groupTitle:(0,n.default)("widgets.contactform.marketing_consent_group","Marketing Consent")}],components:[{id:"widget-contactform-name",type:"text",label:(0,n.default)("widgets.contactform.form_name","Form name"),placeholder:(0,n.default)("widgets.contactform.placeholder","Contact form"),value:this.getData("formName")||"",autocapitalize:"on",autocorrect:"on",groupId:1},{emailVerificationEnable:true,id:"widget-contactform-email",type:"text",label:(0,n.default)("widgets.contactform.email_label","Email address"),placeholder:"test@example.com",value:"profile"!==this.getData("email")?this.getData("email"):this.profileModel.get("email"),inputType:"email",groupId:2,required:true},{id:"widget-contactform-title",type:"text",label:(0,n.default)("widgets.contactform.subject_line","Subject Line"),placeholder:this.model.defaults.formTitle,value:this.getData("formTitle")!==this.model.defaults.formTitle?this.getData("formTitle"):"",autocapitalize:"on",autocorrect:"on",groupId:2},{id:"widget-contactform-goal",type:"datasourcechooser",inputType:"url",label:(0,n.default)("widgets.contactform.goal_label","Success Page"),tooltip:(0,n.default)("widgets.contactform.success_page_tooltip","Users will be redirected to the success page after submitting this form."),customFieldLabel:(0,n.default)("widgets.contactform.custom_field_label","URL"),placeholder:(0,n.default)("widgets.contactform.goal_url_placeholder","https://www.example.com"),value:this.getData("goalUrl"),text:this.getData("goalUrl"),data:(0,i.getActiveLanguageInternalPages)(this.store.getState()),groupId:3},{id:"widget-contactform-section-header",type:"label",className:"full-page-panel__label--caps-header",value:(0,n.default)("widgets.contactform.text_fields_header","Form text"),groupId:2},{id:"widget-contactform-form-header",type:"text",label:(0,n.default)("widgets.contactform.form_header_text","Form title"),placeholder:(0,n.default)("widgets.contactform.formheader_placeholder","eg. Contact us"),value:this.getData("formHeader"),autocapitalize:"on",autocorrect:"on",groupId:4},{id:"widget-contactform-btn-text",type:"text",label:(0,n.default)("widgets.contactform.btntext","Button Text"),placeholder:this.model.defaults.text,value:this.getData("text")!==this.model.defaults.text?this.getData("text"):"",autocapitalize:"on",autocorrect:"on",groupId:4},{id:"widget-contactform-email-label",type:"text",label:(0,n.default)("widgets.contactform.email_field_label","Email label"),placeholder:(0,n.default)("widgets.contactform.email","Your Email"),value:this.getData("emailLabel"),groupId:4},{id:"widget-contactform-email-placeholder",type:"text",label:(0,n.default)("widgets.contactform.email_placeholder","Email placeholder"),placeholder:(0,n.default)("widgets.contactform.emailholder","Type your Email"),value:this.getData("emailPlaceholder"),groupId:4},{id:"widget-contactform-message-label",type:"text",label:(0,n.default)("widgets.contactform.message_label","Message label"),placeholder:(0,n.default)("widgets.contactform.message","Message"),value:this.getData("messageLabel"),autocorrect:"on",groupId:4},{id:"widget-contactform-marketing-consent-enabled",type:"checkbox",label:(0,n.default)("widgets.contactform.marketing_consent_label","Enable marketing consent"),value:this.getData("marketingConsentEnabled"),groupId:5},{id:"widget-contactform-marketing-consent-text",type:"text",label:(0,n.default)("widgets.contactform.marketing_consent_text_label","Marketing consent text"),value:this.getData("marketingConsentText")||(0,n.default)("widgets.contactform.marketing_consent_text_default","I consent to receive marketing communications."),groupId:5}]};this.enablePolicyPages&&t.components.push({id:"widget-contactform-privacy-label",type:"text",label:(0,n.default)("widgets.contactform.privacy_label","Privacy label"),placeholder:(0,n.default)("widgets.contactform.privacy_label_placeholder","eg. I agree to the use..."),value:this.getData("privacyLabel"),autocapitalize:"on",autocorrect:"on",groupId:3});return t},getSettingsEventHandlers:function e(){var t=this,r;return r={},o(r,"widget-contactform-name",(function e(r){t.setData("formName",r)})),o(r,"widget-contactform-title",(function e(r){var n=r;""===r&&(n=t.model.defaults.formTitle);t.setData("formTitle",n)})),o(r,"widget-contactform-btn-text",(function e(r){var n=r;""===r&&(n=t.model.defaults.text);t.setData("text",n)})),o(r,"widget-contactform-email",(function e(r){var i={};var a=/^.+@.+\..+$/;if(""===r){i={settingId:"widget-contactform-email",message:(0,n.default)("widgets.contactform.error_invalidemail","e.g. myname@gmail.com")};Editor.Events.trigger("setting:error:show",i)}if(r)if(a.test(r)){t.setData("email",r,{silent:true});Editor.Events.trigger("setting:error:clear","widget-contactform-email")}else{i={settingId:"widget-contactform-email",message:(0,n.default)("widgets.contactform.error_invalidemail","e.g. myname@gmail.com")};Editor.Events.trigger("setting:error:show",i)}})),o(r,"widget-contactform-goal",(function e(r){var i={};var a=/^((http|ftp|ftps|https):\/\/)?[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?\^=%&amp;:\/~\+#]*[\w\-\@?\^=%&amp;\/~\+#])?$/i;var o=/^(http|ftp|ftps|https)/i;var s=r.source;var l=r.value;if("custom"===s)if(l)if(a.test(l)){o.test(l)||(l="http://".concat(l));t.model.set({goalUrl:l,goalSource:s},{silent:true});Editor.Events.trigger("setting:error:clear","widget-contactform-goal")}else{i={settingId:"widget-contactform-goal",message:(0,n.default)("widgets.contactform.error_invalidgoal","e.g. http://mypage.com")};Editor.Events.trigger("setting:error:show",i)}else{t.setData({goalUrl:"",goalSource:s},{silent:true});Editor.Events.trigger("setting:error:clear","widget-contactform-goal")}else t.setData({goalUrl:l,goalSource:s},{silent:true})})),o(r,"widget-contactform-form-header",(function e(r){t.setData("formHeader",r)})),o(r,"widget-contactform-email-label",(function e(r){t.setData("emailLabel",r)})),o(r,"widget-contactform-email-placeholder",(function e(r){t.setData("emailPlaceholder",r)})),o(r,"widget-contactform-message-label",(function e(r){t.setData("messageLabel",r)})),o(r,"widget-contactform-privacy-label",(function e(r){t.setData("privacyLabel",r)})),o(r,"widget-contactform-marketing-consent-enabled",(function e(r){t.setData("marketingConsentEnabled",r);t.getData("marketingConsentText")||t.setData("marketingConsentText",(0,n.default)("widgets.contactform.marketing_consent_text_default","I consent to receive marketing communications."))})),o(r,"widget-contactform-marketing-consent-text",(function e(r){t.model.set("marketingConsentText",r)})),r}}},1768:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(13745));var i=a(r(34978));function a(e){return e&&e.__esModule?e:{default:e}}var o=t["default"]={recaptcha:null,template:"widget_contactform",events:{"submit .js-form":"onFormSubmit"},onFormSubmit:function e(t){t.preventDefault();var r=this.getFormData();var n=this.validateFormData(r);this.$("[aria-invalid]").on("change",(function(){bk$(this).removeAttr("aria-invalid").removeAttr("aria-describedby")}));if(n.length){this.enableForm();return}this.submitFormData(r)},getFormData:function e(){var t={};t.emailFrom=this.el.querySelector(".js-email-input").value.trim();t.message=this.el.querySelector(".js-message-input").value.trim();t.useProfile="profile"===this.model.get("email")?1:0;t.widgetId=this.el.id;t.widgetRef=this.properties.ref;t.pageRef=App.session.get("pageRef");t.pageLanguage=App.session.get("pageLanguage");this.enablePolicyPages&&(t.termsTicked=this.el.querySelector(".js-terms-input").checked);null!==this.recaptcha&&this.recaptcha.isShowing()&&this.recaptcha.isVerified()&&(t.recaptchaResponse=this.recaptcha.getToken());"1"===this.model.get("marketingConsentEnabled")&&(t.marketingConsentEnabled=this.el.querySelector(".js-marketing-consent-input").checked);return t},throwFormFieldError:function e(t,r){this.$(t).attr("aria-invalid",true).attr("aria-describedby",r)},showRecaptcha:function e(t){var r=this;null===this.recaptcha&&(this.recaptcha=new i.default({key:t}));this.recaptcha.isShowing()||this.recaptcha.display(this.$el.find(".js-recaptcha").get(0),{callback:function e(){return r.onFormSubmit(new Event("submit"))}})},validateFormData:function e(t){var r=this;var i=/.+@.+/;var a=[];var o=this.$el.attr("id");t.emailFrom.length?i.test(t.emailFrom)||a.push({selector:".js-email-input",message:(0,n.default)("widgets.form.invalid_email","Please enter a valid email address."),ariaDescribedBy:"".concat(o,"-input--valid-email--error")}):a.push({selector:".js-email-input",message:(0,n.default)("widgets.form.empty_email","Please enter an email address."),ariaDescribedBy:"".concat(o,"-input--email--error")});t.message.length||a.push({selector:".js-message-input",message:(0,n.default)("widgets.form.empty_message","Please enter a message."),ariaDescribedBy:"".concat(o,"-input--message--error")});this.enablePolicyPages&&!t.termsTicked&&a.push({selector:".js-terms-input",message:(0,n.default)("widgets.form.terms_unticked","Please agree to submitting your data to this organisation."),ariaDescribedBy:"".concat(o,"-input--terms--error")});if(a.length){var s=a.map((function(e){var t=e.message,r=e.ariaDescribedBy;return{message:t,ariaDescribedBy:r}}));this.showMessage(s,"fail");a.forEach((function(e){var t=e.selector,n=e.ariaDescribedBy;r.throwFormFieldError(t,n)}));return a}return true},disableForm:function e(){this.$(".js-form").attr("aria-busy","true");this.$(".js-loading-spinner").removeClass("hidden");this.$(".js-submit-button-text").addClass("hidden");this.$(".js-button").prop("disabled",true)},enableForm:function e(){this.$(".js-form").removeClass("submitting").attr("aria-busy","false");this.$(".js-loading-spinner").addClass("hidden");this.$(".js-submit-button-text").removeClass("hidden");this.$(".js-button").prop("disabled",false)},submitFormData:function e(t){var r=this;var i=this.$el.attr("id");var a=".js-form";var o="".concat(i,"-input--form-submitted-status");this.disableForm();this.showMessageBox();Backbone.ajax({url:"/_bk/submit-form",type:"POST",data:t,success:function e(){if(r.model.get("goalUrl"))r.redirect(r.model.get("goalUrl"));else{var t=(0,n.default)("widgets.form.success","Message sent successfully.");r.showMessage([{message:t,ariaDescribedBy:o}],"success");r.$(a).attr("aria-describedby",o);r.removeMessageBox()}},error:function e(t){if(422===t.status){r.enableForm();r.showRecaptcha(t.responseJSON.recaptcha.siteKey)}else{var i=(0,n.default)("widgets.form.failed","Submit failed.");r.showMessage([{message:i,ariaDescribedBy:o}],"fail");r.throwFormFieldError(a,o);r.removeMessageBox()}}})},showMessage:function e(t,r){if(!t||0===t.length)return;this.$(".message-box").length>0&&this.$(".message-box").remove();0===this.$(".overlay").length&&this.showMessageBox();var n=t.map((function(e){var t=e.ariaDescribedBy,r=e.message;return'<div id="'.concat(t,'" class="message-text">').concat(r,"</div>")})).join("");this.$(".overlay").addClass(r).append('<div class="message-box" style="display: block">'.concat(n,"</div>"))},showMessageBox:function e(){var t=bk$('<div class="overlay"></div>');0===this.$(".overlay").length&&this.$el.append(t);this.$(".js-form").addClass("submitting")},redirect:function e(t){window.location.assign(t)},resetFormData:function e(){this.el.querySelector(".js-email-input").value="";this.el.querySelector(".js-message-input").value="";var t=this.el.querySelector(".js-terms-input");var r=this.el.querySelector(".js-marketing-consent-input");t&&(t.checked=false);r&&(r.checked=false)},removeMessageBox:function e(){var t=this;this.enableForm();this.resetFormData();var r=setTimeout((function(){clearTimeout(r);t.$(".js-form").removeAttr("aria-invalid").removeAttr("aria-describedby");t.$(".overlay").fadeOut((function(){t.$(".overlay").remove()}))}),8e3)}}},44578:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r={getPluginData:function e(t){return window.Server.plugins[t]||{}},getAppData:function e(t){return window.Server.app[t]},getAppBag:function e(){return window.Server.app},getData:function e(t){return window.Server[t]}};var n=t["default"]=r},9709:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AbstractWidgetSite=t.AbstractWidgetSettings=t.AbstractWidgetData=void 0;var n=o(r(45825));var i=o(r(1768));var a=o(r(52276));function o(e){return e&&e.__esModule?e:{default:e}}var s=t.AbstractWidgetSettings={"widget.contactform":n.default};var l=t.AbstractWidgetSite={"widget.contactform":i.default};var u=t.AbstractWidgetData={"widget.contactform":a.default}},24089:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.rowsWidgetViewFactory=t.rowsWidgetViewFactory;this.widgetViewFactory=t.widgetViewFactory;this.featureFlagDataProvider=t.featureFlagDataProvider}i(e,[{key:"build",value:function e(t,r){if(this.featureFlagDataProvider.get("enableRows"))return this.rowsWidgetViewFactory.build(t,r);return this.widgetViewFactory.build(t,r)}}]);return e}();var o=t["default"]=a},12793:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(7344);var i=o(r(69464));var a=r(9709);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function u(e,t,r){t&&l(e.prototype,t);r&&l(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var c=function(){function e(t){s(this,e);this.profile=t.profile;this.pages=t.pages;this.assets=t.assets;this.hiddenWidgetsPanel=t.hiddenWidgetsPanel;this.overlayFactory=t.overlayFactory;this.widgetBackgroundControlFactory=t.widgetBackgroundControlFactory;this.imageEditor=t.imageEditor;this.widgetPropertyPanelAdapter=t.widgetPropertyPanelAdapter;this.envData=t.envDataProvider;this.fetch=t.fetch;this.zonecloner=t.zoneCloner;this.zoneRestorer=t.zoneRestorer;this.zoneSharingDialogView=t.zoneSharingDialogView;this.zoneSharingDialogContentView=t.ZoneSharingDialogContentView;this.dragDropEligibilityChecker=t.dragDropEligibilityChecker;this.rowEditMode=t.rowEditMode;this.widgetSettingsControl=t.widgetSettingsControl;this.rowWidgetSettingsControl=t.rowWidgetSettingsControl;this.userDataProvider=t.userDataProvider;this.featureFlagDataProvider=t.featureFlagDataProvider;this.widgetSettingsData=t.widgetSettingsData;this.siteDataProvider=t.siteDataProvider;this.tracker=t.tracker;this.brandDataProvider=t.brandDataProvider;this.fileViewFactory=t.fileViewFactory}u(e,[{key:"build",value:function e(t,r){var i=this._getOptions(t,r);if(a.AbstractWidgetSettings[t.type]){i.abstractWidget=a.AbstractWidgetSettings[t.type];var o=Editor.Site.Dom.iframe.contentWindow.window.BaseKit.Widget.AbstractView;return new o(i)}var s=(0,n.getWidgetClass)({widgetType:t.type,type:"View"});return new s(i)}},{key:"_getOptions",value:function e(t,r){var n=false;var a=this.siteDataProvider.get("globalValues").find((function(e){return"enablePolicyPages"===e.name}));"undefined"!==typeof a&&(n=a.value);var o=this.siteDataProvider.get("policyPageData");var s=this._setSelectorAccordingToType(t);var l={el:s,store:i.default,properties:f(t),model:r.get("viewModel"),collection:r.get("collection"),profile:this.profile,pages:this.pages,assets:this.assets,hiddenWidgetsPanel:this.hiddenWidgetsPanel,overlayFactory:this.overlayFactory,widgetBackgroundControlFactory:this.widgetBackgroundControlFactory,imageEditor:this.imageEditor,widgetPropertyPanelAdapter:this.widgetPropertyPanelAdapter,envData:this.envData,rowEditMode:this.rowEditMode,widgetSettingsControl:this.widgetSettingsControl,userDataProvider:this.userDataProvider,featureFlagDataProvider:this.featureFlagDataProvider,widgetSettingsData:this.widgetSettingsData,enablePolicyPages:n,policyPageData:o,tracker:this.tracker,brandDataProvider:this.brandDataProvider,fileViewFactory:this.fileViewFactory};l=this._setRowArguments(l,t);l.isDragDropEnabled=this.dragDropEligibilityChecker.isEligible(l);return l}},{key:"_setRowArguments",value:function e(t,r){if("widget.row"===r.type)return Object.assign(t,{fetch:this.fetch,zoneCloner:this.zoneCloner,zoneRestorer:this.zoneRestorer,zoneSharingDialogView:this.zoneSharingDialogView,zoneSharingDialogContentView:this.zoneSharingDialogContentView,rowWidgetSettingsControl:this.rowWidgetSettingsControl});return t}},{key:"_setSelectorAccordingToType",value:function e(t){if(t.isTemplateWidget)return"#".concat(t.uniqueHTMLId);if("widget.template"===t.type)return"[data-uniqueid=".concat(t.uniqueId,"]");return"[data-parentuniqueid=".concat(t.parentUniqueId,"][data-uniqueid=").concat(t.uniqueId,"]")}}]);return e}();var d=t["default"]=c;function f(e){return{fixed:e.fixed,name:e.name,className:e.className,uniqueId:e.uniqueId,uniqueHTMLId:e.uniqueHTMLId,debugMode:e.debugMode||void 0,type:e.type,ref:e.ref,pageRef:e.pageRef,isZone:e.isZone,zone:e.zoneName,parentZone:e.parentZone,rowType:e.data.rowType,layout:e.data.layout,isInRow:e.isInRow}}},6572:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(9878);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function o(e,t,r){t&&a(e.prototype,t);r&&a(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var s=function(){function e(t){i(this,e);this.uniqueId=t.uniqueId;this.parentUniqueId=t.parentUniqueId;this.model=t.model;this.view=t.view;this.widgetRegister=t.widgetRegister;this.widgetAssociator=t.widgetAssociator;this.widgetDisassociator=t.widgetDisassociator;this.dragdropEngine=t.dragdropEngine;this.userDataProvider=t.userDataProvider;this._setMetadata();this._setAssociations();this._enableDragAndDrop()}o(e,[{key:"get",value:function e(t){return this.model.get(t)}},{key:"set",value:function e(t,r){this.model.set(t,r)}},{key:"destroy",value:function e(){this.widgetDisassociator.breakRelationships(this);this.view.deleteWidget();this.model.destroy()}},{key:"children",value:function e(){return this.widgetRegister.getByParentId(this.uniqueId)}},{key:"parent",value:function e(){return this.widgetRegister.get(this.parentUniqueId)}},{key:"addToChildCollection",value:function e(t){this.get("collection").add(t.model)}},{key:"isInColumn",value:function e(){var t=this.parent();return"widget.columns.column"===t.get("type")}},{key:"isResponsiveColumnWidget",value:function e(){return"widget.responsivecolumns"===this.get("type")}},{key:"isColumn",value:function e(){return"widget.columns.column"===this.get("type")}},{key:"isEmpty",value:function e(){return 0===this.get("collection").length}},{key:"isMainZone",value:function e(){return"page-zones__main"===this.get("uniqueHTMLId")}},{key:"isRow",value:function e(){return"widget.row"===this.get("type")}},{key:"emptyElement",value:function e(){var t=this.view.el||document.querySelector(".js-site-frame").contentWindow.document.querySelector('[data-uniqueid="'.concat(this.uniqueId,'"]'));(0,n.emptyElement)(t)}},{key:"_setAssociations",value:function e(){this.widgetAssociator.setRelationships(this)}},{key:"_enableDragAndDrop",value:function e(){this.dragdropEngine.addToInitQueue(this.view)}},{key:"_setMetadata",value:function e(){this.isTemplateWidget=this.model.get("isTemplateWidget")}}]);return e}();var l=t["default"]=s},70693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.Widget=t.Widget;this.userDataProvider=t.userDataProvider;this.widgetViewFactory=t.widgetViewFactory;this.modelFactory=t.modelFactory;this.widgetRegister=t.widgetRegister;this.widgetAssociator=t.widgetAssociator;this.widgetDisassociator=t.widgetDisassociator;this.dragdropEngine=t.dragdropEngine}i(e,[{key:"build",value:function e(t){var r=this.modelFactory.build(t);var n=this.widgetViewFactory.build(t,r);var i=new this.Widget({uniqueId:t.uniqueId,parentUniqueId:t.parentUniqueId,model:r,view:n,widgetRegister:this.widgetRegister,widgetAssociator:this.widgetAssociator,widgetDisassociator:this.widgetDisassociator,dragdropEngine:this.dragdropEngine,userDataProvider:this.userDataProvider});this.widgetRegister.register(i)}}]);return e}();var o=t["default"]=a},85285:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(68088);var i=a(r(22895));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return c(e)||u(e)||l(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}function u(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e){if(Array.isArray(e))return d(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function g(e,t,r){t&&p(e.prototype,t);r&&p(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var h=t["default"]=function(){function e(t){f(this,e);this.store=t.store;this.siteDataProvider=t.siteDataProvider;this.widgetFactory=t.widgetFactory;this.widgetRegister=t.widgetRegister}g(e,[{key:"initialiseWidgets",value:function e(){var t=this;this._setFirstAndLastWidget();var r=this.siteDataProvider.getWidgetData();r=this._removeWidgetsWithNoElement(r);r.forEach((function(e){t.widgetFactory.build(e)}))}},{key:"_setFirstAndLastWidget",value:function e(){var t=i.default.getIframeDocument();var r=t.getElementById("page-zones__main");var a=null;var o=null;if(r.children.length>0){a=this._getWidgetIdFromElement(r.firstElementChild);o=this._getWidgetIdFromElement(r.lastElementChild)}this.store.dispatch((0,n.changeFirstWidgetOnPage)(a));this.store.dispatch((0,n.changeLastWidgetOnPage)(o))}},{key:"_getWidgetIdFromElement",value:function e(t){return t.getAttribute("data-uniqueId")}},{key:"_removeWidgetsWithNoElement",value:function e(t){var r=i.default.getIframeDocument();return o(t).filter((function(e){return!!r.getElementById(e.uniqueHTMLId)}))}}]);return e}()},65690:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=function(){function e(t){a(this,e);this.widgetViewModelFactory=t.widgetViewModelFactory;this.StdModelClass=t.StdModelClass;this.StdCollectionClass=t.StdCollectionClass}s(e,[{key:"build",value:function e(t){var r=this.widgetViewModelFactory.build(t);var i=n(n({},t),{},{viewModel:r,collection:new this.StdCollectionClass});return new this.StdModelClass(i,{idAttribute:"uniqueId"})}}]);return e}();var u=t["default"]=l},51021:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(7344);var i=r(9709);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=function(){function e(t){a(this,e);this.profile=t.profile;this.pages=t.pages;this.assets=t.assets;this.hiddenWidgetsPanel=t.hiddenWidgetsPanel;this.overlayFactory=t.overlayFactory;this.fileViewFactory=t.fileViewFactory;this.imageEditor=t.imageEditor;this.widgetPropertyPanelAdapter=t.widgetPropertyPanelAdapter;this.envData=t.envDataProvider;this.fetch=t.fetch;this.dragDropEligibilityChecker=t.dragDropEligibilityChecker;this.userDataProvider=t.userDataProvider;this.store=t.store;this.featureFlagDataProvider=t.featureFlagDataProvider;this.siteDataProvider=t.siteDataProvider}s(e,[{key:"build",value:function e(t,r){var a=this._getOptions(t,r);if(i.AbstractWidgetSettings[t.type]){a.abstractWidget=i.AbstractWidgetSettings[t.type];var o=Editor.Site.Dom.iframe.contentWindow.window.BaseKit.Widget.AbstractView;return new o(a)}var s=(0,n.getWidgetClass)({widgetType:t.type,type:"View"});var l=new s(a);return l}},{key:"_getOptions",value:function e(t,r){var n=false;var i=this.siteDataProvider.get("globalValues").find((function(e){return"enablePolicyPages"===e.name}));"undefined"!==typeof i&&(n=i.value);var a=this.siteDataProvider.get("policyPageData");var o=this._setSelectorAccordingToType(t);var s={el:o,properties:c(t),model:r.get("viewModel"),collection:r.get("collection"),profile:this.profile,pages:this.pages,assets:this.assets,store:this.store,hiddenWidgetsPanel:this.hiddenWidgetsPanel,overlayFactory:this.overlayFactory,imageEditor:this.imageEditor,widgetPropertyPanelAdapter:this.widgetPropertyPanelAdapter,envData:this.envData,fileViewFactory:this.fileViewFactory,userDataProvider:this.userDataProvider,featureFlagDataProvider:this.featureFlagDataProvider,enablePolicyPages:n,policyPageData:a};s.isDragDropEnabled=this.dragDropEligibilityChecker.isEligible(s);return s}},{key:"_setSelectorAccordingToType",value:function e(t){if(t.isTemplateWidget)return"#".concat(t.uniqueHTMLId);if("widget.template"===t.type)return"[data-uniqueid=".concat(t.uniqueId,"]");return"[data-parentuniqueid=".concat(t.parentUniqueId,"][data-uniqueid=").concat(t.uniqueId,"]")}}]);return e}();var u=t["default"]=l;function c(e){return{fixed:e.fixed,name:e.name,className:e.className,uniqueId:e.uniqueId,uniqueHTMLId:e.uniqueHTMLId,debugMode:e.debugMode||void 0,type:e.type,ref:e.ref,pageRef:e.pageRef,isZone:e.isZone,zone:e.zoneName,parentZone:e.parentZone}}},8101:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(7344);var i=o(r(63938));var a=r(9709);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function f(e,t,r){t&&d(e.prototype,t);r&&d(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var p=function(){function e(t){c(this,e);this.rowsEnabled=t.rowsEnabled}f(e,[{key:"build",value:function e(t){var r;if(a.AbstractWidgetData[t.type]){var o=Editor.Site.Dom.iframe.contentWindow.window.BaseKit.Widget.AbstractModel.extend({defaults:l({},a.AbstractWidgetData[t.type].defaults)});r=o}else r=(0,n.getWidgetClass)({widgetType:t.type,type:"Model"});var s=new r(l(l({},t.data),{},{isNew:t.isNew||void 0,uniqueId:t.uniqueId}));s.widgetType=t.type;if(this.rowsEnabled){s.stateManager=new i.default(s);s.stateManager.storeCurrentState()}return s}}]);return e}();var g=t["default"]=p},66052:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(57644);var i=o(r(22895));var a=o(r(1904));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return d(e)||c(e)||u(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}function c(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function h(e,t,r){t&&g(e.prototype,t);r&&g(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var v=a.default.isiOS;var m=function(){function e(t){p(this,e);this.store=t.store;this.templateRenderer=t.templateRenderer;this.storeDataAdapterFactory=t.storeDataAdapterFactory;this.envDataProvider=t.envDataProvider;this.widgetSettingsControlLayoutView=t.widgetSettingsControlLayoutView;this.RowWidgetSettingsView=t.rowWidgetSettingsView;this.rowWidgetControlViewFactory=t.rowWidgetControlViewFactory;this.zoneSharingDialogView=t.zoneSharingDialogView;this.headerFooterSharingDialogContentView=t.HeaderFooterSharingDialogContentView;this.rowLayoutControl=t.rowLayoutControl;this.tracker=t.tracker;this._listenToRowWidgetControlState()}h(e,[{key:"openSettings",value:function e(t){this.rowView=t;this.widgetSettingsControlLayoutView.getRegion("settings").show(this._createRowWidgetSettingsView(t));this._showControlList()}},{key:"_listenToRowWidgetControlState",value:function e(){this.rowWidgetControlState=this._createRowWidgetControlState();this.state=this.rowWidgetControlState.get();this.rowWidgetControlState.subscribe(this._onRowWidgetControlUIStateChange.bind(this))}},{key:"_createRowWidgetControlState",value:function e(){return this.storeDataAdapterFactory.build({stateId:"ui.rowWidgetControl"})}},{key:"_createRowWidgetSettingsView",value:function e(t){return new this.RowWidgetSettingsView({store:this.store,templateRenderer:this.templateRenderer,rowView:t,rowWidgetControlState:this._createRowWidgetControlState(),envDataProvider:this.envDataProvider,zoneSharingDialogView:this.zoneSharingDialogView,headerFooterSharingDialogContentView:this.headerFooterSharingDialogContentView,rowLayoutControl:this.rowLayoutControl,tracker:this.tracker})}},{key:"_onRowWidgetControlUIStateChange",value:function e(t){t.showRowWidgetControlList&&t.isRowWidgetControlRendered&&this._repositionControlList();!t.showRowWidgetControlList&&this.state.showRowWidgetControlList&&this._hideControlList();this.state=t}},{key:"_showControlList",value:function e(){document.body.classList.add("is-row-menu-open");this.rowWidgetControlViewFactory.build(this.rowView.el.querySelector(".js-row-edit-mount"));this.store.dispatch((0,n.setRowWidgetControlSettings)({settings:this._getRowStyleSettings(),rowType:this.rowView.properties.parentZone,zoneSharingScope:this._isShared()?"shared":"custom",showLayout:this._rowSupportsLayoutSwitching(),showShapeDivider:this._rowSupportsShapeDivider()}));this.store.dispatch((0,n.showRowWidgetControlList)())}},{key:"_hideControlList",value:function e(){this.rowWidgetControlViewFactory.destroy();document.body.classList.remove("is-row-menu-open")}},{key:"_repositionControlList",value:function e(){var t=this.rowView.el.querySelector(".js-row-edit-mount");var r=this.rowView.el.querySelector(".js-edit");var n=document.querySelector(".js-site-preview").getBoundingClientRect();var a=document.querySelector(".js-site-frame");var o=t.getBoundingClientRect();var s=r.getBoundingClientRect();var l=r.parentNode.offsetTop+this.rowView.el.offsetTop;var u=0;if(v()){var c=i.default.getIframeDocument().querySelector("#page-zones__footer");var d=c?c.getBoundingClientRect().bottom:a.offsetHeight;u=d-s.bottom}else u=n.height-s.bottom;u<o.height&&l>o.height?t.style.top="".concat(-o.height,"px"):t.removeAttribute("style")}},{key:"_getRowStyleSettings",value:function e(){return this.rowView.getSettings().components.filter((function(e){return"widget-style-picker"===e.id}))[0]}},{key:"_rowSupportsLayoutSwitching",value:function e(){var t=this.envDataProvider.get("rowLayouts");var r=void 0!==t[this.rowView.properties.rowType];return r||this._isHeaderOrFooterRow()}},{key:"_rowSupportsShapeDivider",value:function e(){if("footer"===this.rowView.properties.parentZone)return false;var t=this.envDataProvider.get("rows");var r=[];Object.keys(t).forEach((function(e){r.push.apply(r,s(t[e]))}));if("undefined"===typeof this.rowView.properties.rowType)return false;var n=this.rowView.properties.rowType.replace(/-/g,"_");var i=r.filter((function(e){return e.id===n}))[0];if(i&&i.values&&"true"===i.values.disableShapeDivider)return false;return true}},{key:"_isShared",value:function e(){return this._isHeaderOrFooterRow()&&!this.rowView.properties.pageRef}},{key:"_isHeaderOrFooterRow",value:function e(){return"header"===this.rowView.properties.parentZone||"footer"===this.rowView.properties.parentZone}}]);return e}();var y=t["default"]=m},97477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(57644);var i=y(r(35306));var a=y(r(81960));var o=y(r(53995));var s=y(r(23778));var l=y(r(97908));var u=y(r(96958));var c=y(r(80377));var d=y(r(78600));var f=y(r(74807));var p=y(r(69863));var g=y(r(77527));var h=y(r(10805));var v=y(r(22895));var m=y(r(1904));function y(e){return e&&e.__esModule?e:{default:e}}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var S=m.default.iOSFixRequired;var P=Marionette.LayoutView.extend({template:"row_widget_settings_layout",attributes:{id:"row-widget-settings-region"},className:"row-widget-settings-container js-row-widget-settings-container",events:{"click .js-row-widget-settings-backstop":"onBackstopClick","click .js-widget-control-backstop":"onBackstopClick"},initialize:function e(t){this.store=t.store;this.templateRenderer=t.templateRenderer;this.rowView=t.rowView;this.rowWidgetControlState=t.rowWidgetControlState;this.state=this.rowWidgetControlState.get();this.envDataProvider=t.envDataProvider;this.zoneSharingDialogView=t.zoneSharingDialogView;this.headerFooterSharingDialogContentView=t.headerFooterSharingDialogContentView;this.rowLayoutControl=t.rowLayoutControl;this.tracker=t.tracker;this.currentPage=this._getCurrentPage();this.rowWidgetControlState.subscribe(this._onRowWidgetControlUIStateChange.bind(this));this.rowStyleSettings=this._getRowStyleSettings();this.rowView.listenForSettingsChanges(this)},changeSettings:function e(t,r){this.trigger(t,r);this.rowView.model.save({widgetName:this.rowView.properties.name,widgetUniqueId:this.rowView.properties.uniqueId,fixed:this.rowView.properties.fixed})},updateSettings:function e(t,r){this.trigger(t,r)},render:function e(){var t=this.templateRenderer.render(this.template,{});this.el.insertAdjacentHTML("beforeend",t)},destroy:function e(){this.rowWidgetControlState.unsubscribe()},onBackstopClick:function e(){this.store.dispatch((0,n.hideRowWidgetControlList)())},_getCurrentPage:function e(){var t=document.querySelector(".js-site-frame").contentWindow;var r=t.document.querySelector('meta[property="og:url"]');return r.getAttribute("content")},_onRowWidgetControlUIStateChange:function e(t){t.panelOpen&&this.state.panelOpen!==t.panelOpen&&this._handleOpenControlPanel(t.activePanel);this._shouldHandleStyleChange(this.state,t)&&this._styleChanged(t.settings.selectedStyleSet);this._shouldRestorePreviousImageStyleChange(this.state,t)&&this._restorePreviousBackgroundImage(t);t.showRowWidgetControlList&&!this.state.showRowWidgetControlList&&this._showControlList();this.state=t},_handleOpenControlPanel:function e(t){"more-information"!==t&&this._beforePanelOpen();switch(t){case"replace-image":this.openReplaceImagePanel();break;case"overlay":this.openOverlayPanel();break;case"focal-point":this.openFocalPointPanel();break;case"change-layout":this.openChangeLayoutPanel();break;case"more-information":this.openMoreInformationPanel();break;case"change-shape-divider":this.openChangeShapeDividerPanel();break;case"scroll-effects":this.openScrollEffectsPanel();break;case"animation":this.openAnimationPanel();break;case"section-height":this.openSectionHeightPanel();break;case"section-width":this.openSectionWidthPanel();break;case"section-gradient":this.openSectionGradientPanel();break;case"section-link":this.openSectionLinkPanel();break}},_shouldHandleStyleChange:function e(t,r){return"image"!==r.settings.selectedStyleType&&r.settings.selectedStyleSet&&t.settings.selectedStyleSet&&("image"===t.settings.selectedStyleType||r.settings.selectedStyleSet!==t.settings.selectedStyleSet)},_shouldRestorePreviousImageStyleChange:function e(t,r){return r.showImageBackgroundControlList&&"image"!==r.settings.selectedStyleType&&"image"!==t.settings.selectedStyleType&&t.settings.backgroundImageSrc},_restorePreviousBackgroundImage:function e(t){this._setAsset({url:t.settings.backgroundImageSrc,ref:t.settings.backgroundImageRef,dominantColor:t.settings.dominantColor},t.settings.backgroundPosition);this.rowStyleSettings=this._getRowStyleSettings();this.store.dispatch((0,n.changeRowWidgetStyle)({selectedStyleSet:this.rowStyleSettings.selectedStyleSet,selectedStyleType:this.rowStyleSettings.selectedStyleType}))},_showControlList:function e(){this._scrollToCurrentRow()},_getRowStyleSettings:function e(){return this.rowView.getSettings().components.filter((function(e){return"widget-style-picker"===e.id}))[0]},_getRowLayoutSettings:function e(){return this.rowView.getSettings().components.filter((function(e){return"widget-layout-picker"===e.id}))[0]},_getShapeDividerSettings:function e(){return this.rowView.getSettings().components.filter((function(e){return"widget-shape-divider-picker"===e.id}))[0]},_getAnimationSettings:function e(){return this.rowView.getSettings().components.filter((function(e){return"widget-animation-picker"===e.id}))[0]},_getSectionHeightSettings:function e(){return this.rowView.getSettings().components.filter((function(e){return"widget-section-height-picker"===e.id}))[0]},_getSectionWidthSettings:function e(){return this.rowView.getSettings().components.filter((function(e){return"widget-section-width-picker"===e.id}))[0]},_getSectionGradientSettings:function e(){return this.rowView.getSettings().components.filter((function(e){return"widget-section-gradient-picker"===e.id}))[0]},_getSectionLinkSettings:function e(){return{pageUrl:this.currentPage,sectionId:this.rowView.properties.uniqueHTMLId}},_styleChanged:function e(t){this.changeSettings("row-style-changed",{styleName:t})},openReplaceImagePanel:function e(){var t=new i.default({model:new a.default({panel:"upload",title:App.t("shared_components.imagespanel.source_title","Image source")})}).render();this.listenTo(t,"asset:change",this._setAsset.bind(this));this.listenTo(t,"close:images-panel",this._onPanelClosed.bind(this))},openOverlayPanel:function e(){var t=new o.default({dialogStyle:"dialog__panel-style--green",styleSets:this.rowStyleSettings.styleSets,overlayColour:this.rowStyleSettings.overlayColour,overlayColourType:this.rowStyleSettings.overlayColourType,overlayOpacity:this.rowStyleSettings.overlayOpacity}).render();this.listenTo(t,"overlay:change",this._setOverlaySettings.bind(this));this.listenTo(t,"opacity:drag",this._updateOverlayOpacity.bind(this));this.listenTo(t,"panel:close",this._onPanelClosed.bind(this))},openFocalPointPanel:function e(){var t=new s.default({dialogStyle:"dialog__panel-style--green",backgroundImage:this.rowStyleSettings.backgroundImageSrc,backgroundPosition:this.rowStyleSettings.backgroundPosition}).render();this.listenTo(t,"focus:change",this._setBackgroundPosition.bind(this));this.listenTo(t,"panel:close",this._onPanelClosed.bind(this))},openChangeLayoutPanel:function e(){this._isHeaderOrFooterRow()?this.openLayoutSelectorPanel():this.openRowLayoutPanel()},openLayoutSelectorPanel:function e(){var t=this.rowLayoutControl.enable(this.rowView);this.listenTo(t,"panel:close",this._onPanelClosed.bind(this))},openRowLayoutPanel:function e(){var t=new l.default(w({dialogStyle:"dialog__panel-style--green"},this._getRowLayoutSettings())).render();this.listenTo(t,"layout:change",this._setLayout.bind(this));this.listenTo(t,"panel:close",this._onPanelClosed.bind(this))},openChangeShapeDividerPanel:function e(){this.tracker.track("Shape divider button clicked");var t=new u.default(w({dialogStyle:"dialog__panel-style--green"},this._getShapeDividerSettings())).render();this.listenTo(t,"shapeDivider:change",this._setShapeDivider.bind(this));this.listenTo(t,"panel:close",this._onPanelClosed.bind(this))},openScrollEffectsPanel:function e(){var t=new c.default(w({dialogStyle:"dialog__panel-style--green"},this._getRowStyleSettings())).render();this.listenTo(t,"scrollEffect:change",this._setScrollEffect.bind(this));this.listenTo(t,"panel:close",this._onPanelClosed.bind(this))},openAnimationPanel:function e(){this.tracker.track("Animation button clicked");var t=new d.default(w({dialogStyle:"dialog__panel-style--green"},this._getAnimationSettings())).render();this.listenTo(t,"animationEffect:change",this._setAnimationEffect.bind(this));this.listenTo(t,"panel:close",this._onPanelClosed.bind(this))},openSectionHeightPanel:function e(){this.tracker.track("Section height button clicked");var t=new f.default(w({dialogStyle:"dialog__panel-style--green"},this._getSectionHeightSettings())).render();this.listenTo(t,"height:change",this._setSectionHeight.bind(this));this.listenTo(t,"panel:close",this._onPanelClosed.bind(this))},openSectionWidthPanel:function e(){this.tracker.track("Section width button clicked");var t=new p.default(w({dialogStyle:"dialog__panel-style--green"},this._getSectionWidthSettings())).render();this.listenTo(t,"width:change",this._setSectionWidth.bind(this));this.listenTo(t,"panel:close",this._onPanelClosed.bind(this))},openSectionGradientPanel:function e(){this.tracker.track("Section gradient button clicked");var t=new g.default(w({dialogStyle:"dialog__panel-style--green"},this._getSectionGradientSettings())).render();this.listenTo(t,"gradient:change",this._setSectionGradient.bind(this));this.listenTo(t,"panel:close",this._onPanelClosed.bind(this))},openSectionLinkPanel:function e(){var t=new h.default(w({dialogStyle:"dialog__panel-style--green"},this._getSectionLinkSettings())).render();this.listenTo(t,"panel:close",this._onPanelClosed.bind(this))},openMoreInformationPanel:function e(){var t=this.zoneSharingDialogView.display(this.headerFooterSharingDialogContentView,this._isShared()?"shared":"custom",this.rowView.properties.parentZone,{dialogClassname:"zone-sharing-dialog",showDone:true});this.listenTo(t,"panel:close",this._onPanelClosed.bind(this))},_isShared:function e(){return this._isHeaderOrFooterRow()&&!this.rowView.properties.pageRef},_isHeaderOrFooterRow:function e(){return"header"===this.rowView.properties.parentZone||"footer"===this.rowView.properties.parentZone},_setAsset:function e(t,r){var n=r||{left:"50%",top:"50%"};this.changeSettings("row-image-changed",{asset:t,backgroundPosition:n})},_setBackgroundPosition:function e(t){this.changeSettings("row-background-position-changed",{backgroundPosition:t})},_setOverlaySettings:function e(t){this.changeSettings("row-overlay-changed",{overlayColour:t.overlayColour,overlayColourType:t.overlayColourType,overlayOpacity:t.overlayOpacity})},_updateOverlayOpacity:function e(t){this.updateSettings("row-overlay-opacity-changed",{overlayOpacity:t})},_setLayout:function e(t){this.changeSettings("row-layout-changed",t)},_setShapeDivider:function e(t){this.changeSettings("row-shape-divider-changed",t)},_setScrollEffect:function e(t){this.changeSettings("row-scroll-effect-changed",t)},_setAnimationEffect:function e(t){this.changeSettings("row-animation-effect-changed",t)},_setSectionHeight:function e(t){this.changeSettings("row-section-height-changed",t)},_setSectionGradient:function e(t){this.changeSettings("row-section-gradient-changed",t)},_setSectionWidth:function e(t){this.changeSettings("row-section-width-changed",t)},_beforePanelOpen:function e(){document.body.classList.add("is-setting-open");this.rowView.el.querySelector(".row-overlay").classList.add("is-setting-open");this._addFramePadding();this._scrollToCurrentRow()},_onPanelClosed:function e(){this.store.dispatch((0,n.closeControlPanel)());document.body.classList.remove("is-setting-open");this.rowView.el.querySelector(".row-overlay").classList.remove("is-setting-open");this._scrollToCurrentRow();this._updateFramePadding()},_updateFramePadding:function e(){setTimeout((function(){Editor.Events.trigger("sitePadding:update")}),500)},_addFramePadding:function e(){var t=document.querySelector(".js-site-preview").getBoundingClientRect();Editor.Events.trigger("sitePadding:set",t.height)},_scrollToCurrentRow:function e(){if(S()){var t=document.querySelector(".js-site-preview");t.scrollTo(0,this.rowView.el.getBoundingClientRect().top)}else{var r=v.default.getIframeDocument();r.body.scrollTop=0;r.documentElement.scrollTop=0;r.body.scrollTop=this.rowView.el.getBoundingClientRect().top;r.documentElement.scrollTop=this.rowView.el.getBoundingClientRect().top}}});var E=t["default"]=P},17515:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(83489);var i=o(r(22895));var a=o(r(11869));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function u(e,t,r){t&&l(e.prototype,t);r&&l(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var c=function(){function e(t){s(this,e);if(!t.featureFlagDataProvider.get("enableRows"))return;this.store=t.store;this.widgetSettingsControlLayoutView=t.widgetSettingsControlLayoutView;this.WidgetSettingsView=t.widgetSettingsView;this.RowSettingsViewEmailMixin=t.RowSettingsViewEmailMixin;this.widgetStyleSettingsViewFactory=t.widgetStyleSettingsViewFactory;this.styleSettingsProvider=t.styleSettingsProvider;this.templateRenderer=t.templateRenderer;this.widgetSettingsComponentViewFactory=t.widgetSettingsComponentViewFactory;this.widgetRegister=t.widgetRegister;this.featureFlagDataProvider=t.featureFlagDataProvider;this.init()}u(e,[{key:"init",value:function e(){this.widgetSettingsControlLayoutView.render();this.featureFlagDataProvider.get("formEmailVerification")&&(this.RowSettingsView=Cocktail.mixin(this.WidgetSettingsView,this.RowSettingsViewEmailMixin));this.attachEvents()}},{key:"attachEvents",value:function e(){Editor.Events.on("widgetSettings:changed",this.openSettings.bind(this))}},{key:"openSettings",value:function e(t){if(this.store.getState().site.isRowEditingMode)return;this._setWidgetInEditingStatus();var r=this._hasStyleSettings(t);this.widgetSettingsPanel=this._createWidgetSettingsPanel(t,r);var n=this._createWidgetSettingsPanelBody(t);this._renderWidgetSettings(this.widgetSettingsPanel,n);if(r){var i=this._createWidgetStyleSettingsPanelBody();i.render()}this._monitorWidgetSettingError()}},{key:"_hasStyleSettings",value:function e(t){var r=false;if(!this._isWidgetInSection(t)&&this._shouldHandleStyleSettings()){var i=this.styleSettingsProvider.getStyleSettings({widgetType:t.properties.className||t.properties.type,widgetEl:t.$el,fixed:t.properties.fixed,model:t.model});r=Object.keys(i).length>0;r&&this.store.dispatch((0,n.updateStyles)(i))}return r}},{key:"_isWidgetInSection",value:function e(t){return t.properties.isInRow}},{key:"_shouldHandleStyleSettings",value:function e(){return this.store.getState().env.V10CompatibilityMode&&this.styleSettingsProvider.hasStyleCollection()}},{key:"_setWidgetInEditingStatus",value:function e(){document.body.classList.add("widget-editing");i.default.getIframeDocument().body.classList.add("widget-editing")}},{key:"_createWidgetSettingsPanel",value:function e(t,r){var n=t.model.get("uniqueId")||t.properties.uniqueHTMLId;var i=n?this.widgetRegister.getParentByUniqueId(n):null;return new this.WidgetSettingsView({store:this.store,stylesEnabled:r,templateRenderer:this.templateRenderer,model:t.model,profileModel:t.profileModel,title:t.getSettings().title,widgetView:t,parentWidget:i})}},{key:"_createWidgetSettingsPanelBody",value:function e(t){return this.widgetSettingsComponentViewFactory.build({widgetView:t,profileModel:(0,a.default)()})}},{key:"_createWidgetStyleSettingsPanelBody",value:function e(){return this.widgetStyleSettingsViewFactory.build({el:".js-style-content"})}},{key:"_renderWidgetSettings",value:function e(t,r){var n=this.widgetSettingsControlLayoutView.getRegion("settings");n.show(t);n.currentView.getRegion("settingsBody").show(r)}},{key:"_monitorWidgetSettingError",value:function e(){Editor.Events.on("setting:error:show",this._showSettingsError.bind(this));Editor.Events.on("setting:error:clear",this._clearSettingsError.bind(this));Editor.Events.on("setting:save:validate",this._validateSaveSettings.bind(this));Editor.Events.on("setting:save:enable",this._enableSaveSettings.bind(this));Editor.Events.on("setting:save:disable",this._disableSaveSettings.bind(this))}},{key:"_getErrorModel",value:function e(t){var r=this.widgetSettingsPanel.settingsBody.currentView.collection.toArray();var n=!!(r&&r[0].get("groupId"));var i=null;n?this.widgetSettingsPanel.settingsBody.currentView.collection.toJSON().every((function(e){var r=e.collection.filter((function(e){return e.get("id")===t})).pop();if(r){i=r;return false}return true})):i=r.filter((function(e){return e.get("id")===t})).pop();return i}},{key:"_showSettingsError",value:function e(t){if(this.store.getState().site.isRowEditingMode)return;var r=this._getErrorModel(t.settingId);r&&r.set("error",t.message);this.widgetSettingsPanel.settingsBody.currentView.render();this._disableSaveSettings(true)}},{key:"_clearSettingsError",value:function e(t){if(this.store.getState().site.isRowEditingMode)return;var r=this._getErrorModel(t);r&&r.set("error","");this.widgetSettingsPanel.settingsBody.currentView.render();this._validateSaveSettings()}},{key:"_validateSaveSettings",value:function e(){var t=this.widgetSettingsPanel.settingsBody.currentView;t.el.querySelectorAll(".popup-panel-form__field--error").length<1&&this._enableSaveSettings()}},{key:"_enableSaveSettings",value:function e(){this.widgetSettingsPanel.el.classList.remove("error");this.widgetSettingsPanel.el.querySelector(".js-save-panel").disabled=false}},{key:"_disableSaveSettings",value:function e(t){t&&this.widgetSettingsPanel.el.classList.add("error");this.widgetSettingsPanel.el.querySelector(".js-save-panel").disabled=true}}]);return e}();var d=t["default"]=c},76046:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.LayoutView.extend({template:"widget_settings_control_layout",el:".js-widget-settings-elements",regions:{settings:"#widget-settings-region"}});var n=t["default"]=r},27187:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=l(r(13745));var i=r(24219);var a=l(r(22895));var o=l(r(12295));var s=r(83748);function l(e){return e&&e.__esModule?e:{default:e}}var u=27;var c=Marionette.LayoutView.extend({template:"widget_settings_view",attributes:{role:"dialog","aria-labelledby":"row-settings-panel-title"},className:function e(){var t="popup-panel";if(this._widgetIsOnRight(this.options.parentWidget,this.options.widgetView))return"".concat(t,"--left-aligned");return t},regions:{settingsBody:".js-settings-body",styleSettingsBody:".js-style-content"},events:{"click .js-close-panel":"closePanel","click .js-backstop":"onBackstopClicked","click .js-settings-tab-button":"onSettingsTabClicked","click .js-style-tab-button":"onStyleTabClicked",keydown:"handleKeydown",submit:"handleSubmit"},keepPanelOpen:false,initialize:function e(t){this.store=t.store;this.stylesEnabled=t.stylesEnabled;this.templateRenderer=t.templateRenderer;this.title=t.title;this.model=t.model;this.profileModel=t.profileModel;this.widgetView=t.widgetView;this.parentWidget=t.parentWidget;this.closePanelHandler=this.closePanel.bind(this);this.attachEvents();(0,s.closeIntercom)()},attachEvents:function e(){Editor.Events.on("widgetSettings:close",this.closePanelHandler);Editor.Events.on("dragdrop:dragStart",this.closePanelHandler)},render:function e(){var t=this.templateRenderer.render(this.template,{title:this.title,stylesEnabled:this.stylesEnabled,hasSettings:this.widgetView.getSettings().components.length>0,emptySettingMessage:this.widgetView.getSettings().emptySettingMessage||""});this.el.insertAdjacentHTML("beforeend",t)},removePanel:function e(){Editor.Events.off("widgetSettings:close",this.closePanelHandler);Editor.Events.off("dragdrop:dragStart",this.closePanelHandler);this.remove();this._unsetWidgetInEditingStatus();this.store.dispatch((0,i.closeWidgetSettings)());(0,s.openIntercom)()},closePanel:function e(){this.model.clear({silent:true});this.model.stateManager.restoreInitialState();this.profileModel.stateManager.restoreInitialState();this.removePanel()},onBackstopClicked:function e(t){t.stopPropagation();var r=this.el.querySelector(".js-save-panel");if(r&&r.disabled)return;this.save()},onSettingsTabClicked:function e(t){t.preventDefault();t.stopPropagation();this.el.querySelector(this.regions.styleSettingsBody).setAttribute("hidden","hidden");this.el.querySelector(this.regions.settingsBody).removeAttribute("hidden");this.el.querySelector(".js-save-panel").removeAttribute("hidden");t.currentTarget.classList.add("is-active");this.el.querySelector(".js-style-tab-button").classList.remove("is-active")},onStyleTabClicked:function e(t){t.preventDefault();t.stopPropagation();this.el.querySelector(this.regions.settingsBody).setAttribute("hidden","hidden");this.el.querySelector(this.regions.styleSettingsBody).removeAttribute("hidden");this.el.querySelector(".js-save-panel").setAttribute("hidden","hidden");t.currentTarget.classList.add("is-active");this.el.querySelector(".js-settings-tab-button").classList.remove("is-active")},logEventLookup:function e(t){var r={"widget.ecomproductslist":"ecomproductslist widget updated","widget.ecomfeaturedproducts":"ecomfeaturedproducts widget updated"};return r[t]},logIfRequired:function e(){var t=this.logEventLookup(this.widgetView.properties.type);t&&App.appcuesTrack(t)},save:function e(){if(this.model.hasChanged()){this.model.save({widgetName:this.widgetView.properties.name,widgetUniqueId:this.widgetView.properties.uniqueId||this.widgetView.properties.uniqueHTMLId,fixed:this.widgetView.properties.fixed});this.model.stateManager.storeCurrentState();this.logIfRequired(this.widgetView.properties.type)}if(this.profileModel.hasChanged()){this.profileModel.save();this.profileModel.stateManager.storeCurrentState()}if(this.keepPanelOpen)return this;this.removePanel();return this},clearAllErrors:function e(){this.el.classList.remove("error");var t=this.settingsBody.currentView.collection.toArray();var r=!!(t&&t[0].get("groupId"));r?this.settingsBody.currentView.collection.toJSON().forEach((function(e){e.collection.toArray().forEach((function(e){return e.set("error","")}))})):t.forEach((function(e){return e.set("error","")}));var n=this.settingsBody.currentView;n.render()},handleSubmit:function e(t){var r=this;t.preventDefault();this.clearAllErrors();var n=false;var i=this.settingsBody.currentView.collection.toArray();var a=!!(i&&i[0].get("groupId"));if(a)n=this.settingsBody.currentView.collection.toJSON().some((function(e){var t=e.collection.toArray().filter((function(e){return e.get("required")}));return r.checkRequiredFields(t)}));else{var o=i.filter((function(e){return e.get("required")}));n=this.checkRequiredFields(o)}n||this.save()},checkRequiredFields:function e(t){var r=false;t.forEach((function(e){var t=e.get("value");if(!t||!t.length){r=true;var i={settingId:e.get("id"),message:(0,n.default)("global.message-field-required","This field is required")};Editor.Events.trigger("setting:error:show",i)}}));return r},handleKeydown:function e(t){t.keyCode===u&&this.closePanel()},_widgetIsOnRight:function e(t,r){if(t)return t.isColumn()&&t.model.collection.indexOf(t.model)>0;var n=r.el.getBoundingClientRect();return o.default.getWindowWidth()/2<n.left+n.width/2},_unsetWidgetInEditingStatus:function e(){document.body.classList.remove("widget-editing");a.default.getIframeDocument().body.classList.remove("widget-editing")}});var d=t["default"]=c},27765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(1904));var i=o(r(69464));var a=r(31002);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function u(e,t,r){t&&l(e.prototype,t);r&&l(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var c=n.default.iOSFixRequired();var d=function(){function e(t){s(this,e);this.widgetAPI=t.widgetAPI}u(e,[{key:"toggleMoveMode",value:function e(){var t=document.querySelector("body");var r=Editor.Site.Dom.window.document.querySelector("body");r.classList.toggle("is-move-mode");t.classList.toggle("is-move-mode");i.default.dispatch((0,a.setRowMoveMode)(this.isMoveModeEnabled()));c&&Editor.Events.trigger("iosFrameBug:recalculate")}},{key:"isMoveModeEnabled",value:function e(){var t=document.querySelector("body");return t.classList.contains("is-move-mode")}}]);return e}();var f=t["default"]=d},83238:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=r(1904);var a=d(r(69464));var o=d(r(31170));var s=c(r(22895));var l=r(57644);function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(u=function e(n){return n?r:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}function d(e){return e&&e.__esModule?e:{default:e}}var f=Backbone.View.extend({className:"row-overlay js-widget-overlay",events:{click:"onClick","click .js-delete-confirm":"onDeleteConfirmClick","click .js-delete":"onDeleteClick","click .js-cancel-delete":"hideRowDeleteModal","click .js-move-up":"onMoveClick","click .js-move-down":"onMoveClick","click .js-edit":"onEditClick","click .js-layout":"onLayoutClick","click .js-backstop":"onBackstopClick","click .js-delete-backstop":"hideRowDeleteModal","mouseover .js-content-area":"onContentAreaMouseOver"},initialize:function e(t){this.hideTplWidget=0===parseInt(t.showTplWidget,10);this.properties=t.properties;this.immutable=t.immutable;this.isImageEditable=t.isImageEditable;this.isDeletable=t.isDeletable;this.isMovable=t.isMovable||false;this.parentView=t.parentView;this.templateRenderer=t.templateRenderer;this.sticky=t.sticky;this.widgetData=t.widgetData;this.widgetData.subscribe(this._onWidgetDataChange.bind(this));this.rowWidgetControlState=t.rowWidgetControlState;this.rowDeleteBackstopClick=this.closeRowDeleteModalClickHandler.bind(this)},render:function e(){var t=this.templateRenderer.render("view_rowoverlay",this._getTwigTemplateContext());this.$el.append(t);this.onRender();return this},onRender:function e(){var t=this;var r=new MutationObserver((function(e,r){t.onAttach(r)}));if(this.parentView&&this.parentView.el){r.observe(this.parentView.el,{childList:true});this.updateParentViewChildWidgetStatus();this.removeEmptyParentView()}},onAttach:function e(t){Editor.Events.trigger("widgetOverlay:render",this.parentView);(0,i.isIE)()||this.sticky.add(this.el.querySelector(".js-overlay-sticky"));t.disconnect()},updateParentViewChildWidgetStatus:function e(){this._hasMultipleChildWidgetsInParentView()?this.parentView.el.classList.remove("has-last-child-widget"):this.parentView.el.classList.add("has-last-child-widget")},removeEmptyParentView:function e(){if(this._hasNoChildWidgetInParentView()&&!this.deleteRequestInFlight){this._deleteParentRowWidget();this.deleteRequestInFlight=true}},onParentViewDelete:function e(){this.sticky.remove(this.el.querySelector(".js-overlay-sticky"));this.widgetData.unsubscribe()},onClick:function e(t){var r=this.parentView.el;var n=r.querySelector('[data-name="ecomproductslist"');var i=o.default.container.SiteDataProvider.get("ecommerce");if(a.default.getState().site.isRowMoveMode||a.default.getState().site.isDesktopMode||i&&!i.store.live&&n||!i&&n)return;this.trigger("widget:overlayClick",t)},onDeleteConfirmClick:function e(){var t=this.el.querySelector(".js-delete-backstop");Editor.Events.trigger("addRowMode:removeButtons");t.removeAttribute("hidden");parent.document.body.classList.add("row-delete-mode");s.default.getIframeDocument().body.classList.add("row-menu-open");document.addEventListener("click",this.rowDeleteBackstopClick,true);this.showRowDeleteModal()},showRowDeleteModal:function e(){var t=Twig.render(Twig.templates.view_row_confirm_delete_dialog);this.$el.append(t);return this},hideRowDeleteModal:function e(){var t=this.el.querySelector(".row-overlay__delete-modal");var r=this.el.querySelector(".js-delete-backstop");r.setAttribute("hidden","hidden");parent.document.body.classList.remove("row-delete-mode");s.default.getIframeDocument().body.classList.remove("row-menu-open");document.removeEventListener("click",this.rowDeleteBackstopClick,true);t.remove();Editor.Events.trigger("addRowMode:addButtons")},onDeleteClick:function e(t){t.stopPropagation();this._deleteParentRowWidget();this.hideRowDeleteModal()},closeRowDeleteModalClickHandler:function e(t){t.target.closest(".row-overlay__delete-modal")||this.hideRowDeleteModal()},onMoveClick:function e(t){Editor.Events.trigger("addRowMode:removeButtons");t.stopPropagation();var r=t.currentTarget.getAttribute("data-position");var n=this.properties.uniqueId;Editor.Events.trigger("widget:move:".concat(n),{position:r,uniqueId:n});this._updateFramePadding()},onEditClick:function e(t){Editor.Events.trigger("addRowMode:removeButtons");t.stopPropagation();this.el.querySelector(".js-edit").classList.add("is-active");this.state=this.rowWidgetControlState.get();this.rowWidgetControlState.subscribe(this._onRowWidgetControlUIStateChange.bind(this));this.trigger("rowWidget:editClick",t)},onLayoutClick:function e(t){Editor.Events.trigger("addRowMode:removeButtons");t.stopPropagation();this.el.querySelector(".js-layout").classList.add("is-active");a.default.dispatch((0,l.showRowWidgetLayoutControlList)());this.state=this.rowWidgetControlState.get();this.rowWidgetControlState.subscribe(this._onRowWidgetControlUIStateChange.bind(this));this.trigger("rowWidget:editClick",t)},onBackstopClick:function e(){Editor.Events.trigger("addRowMode:addButtons");a.default.dispatch((0,l.hideRowWidgetLayoutControlList)());a.default.dispatch((0,l.hideRowWidgetControlList)())},onContentAreaMouseOver:function e(t){t.stopPropagation();t.stopImmediatePropagation();this.el.classList.contains("is-setting-open")||this.el.classList.remove("hover")},_deleteParentRowWidget:function e(){this.trigger("widget:delete");this._updateFramePadding()},_onWidgetDataChange:function e(){this.$el.empty();this.render()},_getTwigTemplateContext:function e(){return{hideTplWidget:this.hideTplWidget,properties:this.properties,immutable:this.immutable,isImageEditable:this.isImageEditable,isDeletable:this.isDeletable,isMovable:this.isMovable,canMoveUp:this.widgetData.get().firstWidget!==this.properties.uniqueId,canMoveDown:this.widgetData.get().lastWidget!==this.properties.uniqueId}},_onRowWidgetControlUIStateChange:function e(t){t.showRowWidgetControlList&&!this.state.showRowWidgetControlList&&this._showControlList();!t.showRowWidgetControlList&&this.state.showRowWidgetControlList&&this._hideControlList();this.state=t},_showControlList:function e(){this.el.classList.add("is-dropdown-open");this.el.querySelector(".js-backstop").removeAttribute("hidden");s.default.getIframeDocument().body.classList.add("row-menu-open")},_hideControlList:function e(){var t=this;Editor.Events.trigger("addRowMode:addButtons");this.rowWidgetControlState.unsubscribe();this.el.querySelector(".is-active").classList.remove("is-active");this.el.classList.remove("is-dropdown-open");s.default.getIframeDocument().body.classList.remove("row-menu-open");setTimeout((function(){t.el.querySelector(".js-backstop").setAttribute("hidden","hidden")}),100)},_updateFramePadding:function e(){setTimeout((function(){Editor.Events.trigger("sitePadding:update")}),500)},_hasMultipleChildWidgetsInParentView:function e(){return this.parentView.el.querySelectorAll(".js-widget").length>1},_hasNoChildWidgetInParentView:function e(){return this.parentView.el.querySelectorAll(".js-widget").length<1}});var p=t["default"]=f},24343:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=c(r(69464));var a=c(r(31170));var o=u(r(22895));var s=r(57644);function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(l=function e(n){return n?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}function c(e){return e&&e.__esModule?e:{default:e}}var d=Backbone.View.extend({className:"row-overlay js-widget-overlay",events:{click:"onTouch","click .js-delete-confirm":"onDeleteConfirmClick","click .js-delete":"onDeleteTouch","click .js-cancel-delete":"hideRowDeleteModal","click .js-move-up":"onMoveClick","click .js-move-down":"onMoveClick","click .js-edit":"onEditClick","click .js-layout":"onLayoutClick","click .js-backstop":"onBackstopClick","click .js-delete-backstop":"hideRowDeleteModal"},initialize:function e(t){this.hideTplWidget=0===parseInt(t.showTplWidget,10);this.properties=t.properties;this.immutable=t.immutable;this.isImageEditable=t.isImageEditable;this.isDeletable=t.isDeletable;this.isMovable=t.isMovable||false;this.parentView=t.parentView;this.templateRenderer=t.templateRenderer;this.isActive=false;this.widgetData=t.widgetData;this.widgetData.subscribe(this._onWidgetDataChange.bind(this));this.rowWidgetControlState=t.rowWidgetControlState;this.rowDeleteBackstopClick=this.closeRowDeleteModalClickHandler.bind(this);Editor.Events.on("widgetOverlay:touchOverlayClicked",this.onGlobalOverlayTouch.bind(this))},render:function e(){var t=this.templateRenderer.render("view_rowoverlay",this._getTwigTemplateContext());this.$el.append(t);return this},onGlobalOverlayTouch:function e(){this.isActive&&this._deactivateOverlay()},onTouch:function e(t){var r=this.parentView.el;var n=r.querySelector('[data-name="ecomproductslist"');var o=a.default.container.SiteDataProvider.get("ecommerce");if(i.default.getState().site.isRowMoveMode||i.default.getState().site.isDesktopMode||o&&!o.store.live&&n||!o&&n)return;this.trigger("widget:overlayClick",t)},onDeleteConfirmClick:function e(){var t=this.el.querySelector(".js-delete-backstop");t.removeAttribute("hidden");this.el.classList.add("hover");parent.document.body.classList.add("row-delete-mode");o.default.getIframeDocument().body.classList.add("row-menu-open");document.addEventListener("touchstart",this.rowDeleteBackstopClick,true);this.showRowDeleteModal()},showRowDeleteModal:function e(){var t=Twig.render(Twig.templates.view_row_confirm_delete_dialog);this.$el.append(t);return this},hideRowDeleteModal:function e(){var t=this.el.querySelector(".row-overlay__delete-modal");var r=this.el.querySelector(".js-delete-backstop");r.setAttribute("hidden","hidden");this.el.classList.remove("hover");parent.document.body.classList.remove("row-delete-mode");o.default.getIframeDocument().body.classList.remove("row-menu-open");document.removeEventListener("touchstart",this.rowDeleteBackstopClick,true);t.remove()},closeRowDeleteModalClickHandler:function e(t){t.target.closest(".row-overlay__delete-modal")||this.hideRowDeleteModal()},onDeleteTouch:function e(t){t.stopPropagation();this.trigger("widget:delete");this.hideRowDeleteModal();this._updateFramePadding()},onMoveClick:function e(t){var r=t.currentTarget.getAttribute("data-position");var n=this.properties.uniqueId;Editor.Events.trigger("widget:move:".concat(n),{position:r,uniqueId:n});this._updateFramePadding()},onEditClick:function e(t){t.stopPropagation();this.el.querySelector(".js-edit").classList.add("is-active");this.el.classList.add("hover");this.state=this.rowWidgetControlState.get();this.rowWidgetControlState.subscribe(this._onRowWidgetControlUIStateChange.bind(this));this.trigger("rowWidget:editClick",t)},onLayoutClick:function e(t){t.stopPropagation();this.el.classList.add("hover");this.el.querySelector(".js-layout").classList.add("is-active");i.default.dispatch((0,s.showRowWidgetLayoutControlList)());this.state=this.rowWidgetControlState.get();this.rowWidgetControlState.subscribe(this._onRowWidgetControlUIStateChange.bind(this));this.trigger("rowWidget:editClick",t)},onBackstopClick:function e(t){t.stopPropagation();i.default.dispatch((0,s.hideRowWidgetControlList)())},onParentViewDelete:function e(){},_onWidgetDataChange:function e(){this.$el.empty();this.render()},_getTwigTemplateContext:function e(){return{hideTplWidget:this.hideTplWidget,properties:this.properties,immutable:this.immutable,isImageEditable:this.isImageEditable,isDeletable:this.isDeletable,isMovable:this.isMovable,canMoveUp:this.widgetData.get().firstWidget!==this.properties.uniqueId,canMoveDown:this.widgetData.get().lastWidget!==this.properties.uniqueId}},_onRowWidgetControlUIStateChange:function e(t){t.showRowWidgetControlList&&!this.state.showRowWidgetControlList&&this._showControlList();!t.showRowWidgetControlList&&this.state.showRowWidgetControlList&&this._hideControlList();this.state=t},_showControlList:function e(){this.el.classList.add("is-dropdown-open");this.el.querySelector(".js-backstop").removeAttribute("hidden")},_hideControlList:function e(){var t=this;this.rowWidgetControlState.unsubscribe();this.el.querySelector(".is-active").classList.remove("is-active");this.el.classList.remove("is-dropdown-open","hover");o.default.getIframeDocument().body.classList.remove("row-menu-open");setTimeout((function(){t.el.querySelector(".js-backstop").setAttribute("hidden","hidden")}),100)},_updateFramePadding:function e(){setTimeout((function(){Editor.Events.trigger("sitePadding:update")}),500)}});var f=t["default"]=d},49190:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=p(r(35136));var i=r(55372);var a=p(r(41026));var o=p(r(83238));var s=p(r(83805));var l=p(r(24343));var u=p(r(12615));var c=p(r(10127));var d=p(r(19462));var f=p(r(55999));function p(e){return e&&e.__esModule?e:{default:e}}function g(e){return y(e)||m(e)||v(e)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}function m(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function y(e){if(Array.isArray(e))return b(e)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function S(e,t,r){t&&_(e.prototype,t);r&&_(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var P=function(){function e(t){w(this,e);this.templateRenderer=t.templateRenderer;this.featureFlagDataProvider=t.featureFlagDataProvider;this.storeDataAdapterFactory=t.storeDataAdapterFactory;this.userDataProvider=t.userDataProvider}S(e,[{key:"build",value:function e(t){var r=this._getOverlayClass(t);var n=this._getAdditionalOptions(t);var i=Object.assign(n,t);var a=this._createWidgetOverlays(r,i);t.hasMigratedTopLevelOverlay&&a.push(this._createTopLevelOverlay(i));return a}},{key:"_createWidgetOverlays",value:function e(t,r){var n=[];if(!r.hasWidgetOverlay)return n;r.multipleOverlays?n=this._createMultipleOverlays(t,r):n.push(new t(r));return n}},{key:"_createTopLevelOverlay",value:function e(t){return new n.default(Object.assign(t,{isMovable:true,isDeletable:true}))}},{key:"_createMultipleOverlays",value:function e(t,r){var n=[];var i=r.parentView;var a=g(i.el.querySelectorAll(".js-has-overlay"));a.forEach((function(e){var i=Object.assign({},r,{childElement:e});var a=new t(i);n.push(a)}));this._shouldCreateParentWidgetOverlay(r)&&n.push(new t(Object.assign(r,{isMovable:true,isDeletable:true})));return n}},{key:"_getOverlayClass",value:function e(t){var r=this._getOverlayType(t);if(this.featureFlagDataProvider.get("enableRows")){if("widgetInRow"===r)return E()?c.default:u.default;if(E())return"row"===r?l.default:f.default;return"row"===r?o.default:d.default}return E()?s.default:a.default}},{key:"_getOverlayType",value:function e(t){if(this.featureFlagDataProvider.get("enableRows")&&"widget.row"===t.properties.type)return"row";if(t.properties.isInRow)return"widgetInRow";return"widget"}},{key:"_getAdditionalOptions",value:function e(t){var r=this.featureFlagDataProvider.get("enableRows");var n="widget.row"===t.properties.type;var i=this.userDataProvider.has("enableDragAndDropWidgets");var a={templateRenderer:this.templateRenderer,isMovable:this._checkIsMovable(t,n,r,i),isDeletable:this._checkIsDeletable(t,n,r,i),showImageSelectionButton:this._shouldShowImageSelectionButton(t,r),showImageEditorButton:this._shouldShowImageEditorButton(t,r),sticky:t.sticky};if(r){a.widgetData=this.storeDataAdapterFactory.build({stateId:"widget"});n&&(a.rowWidgetControlState=this.storeDataAdapterFactory.build({stateId:"ui.rowWidgetControl"}))}else a.showSettingsIcon=true;return a}},{key:"_checkIsMovable",value:function e(t,r,n,i){if(n&&"main"!==t.properties.parentZone)return false;var a=n&&!r;if(a)return this._isMovableWidgetInRow(t,i);return!t.properties.fixed}},{key:"_isMovableWidgetInRow",value:function e(t,r){return r&&!this._isMovableExceptionInRow(t)&&!E()}},{key:"_checkIsDeletable",value:function e(t,r,n,i){if(t.properties.fixed)return false;if(t.immutable&&"0"!==t.immutable)return false;if(n&&"main"!==t.properties.parentZone)return false;if(n&&!r){if("widget.contentgroup"===t.properties.type)return false;return i&&!E()}return true}},{key:"_shouldShowImageSelectionButton",value:function e(t,r){if(r)return false;return["image","gallery","responsiveslideshow"].includes(t.properties.className)}},{key:"_shouldShowImageEditorButton",value:function e(t,r){if(r)return false;return"image"===t.properties.className}},{key:"_shouldCreateParentWidgetOverlay",value:function e(t){var r=this.featureFlagDataProvider.get("enableRows");var n=this.userDataProvider.has("enableDragAndDropWidgets");var i="main"===t.properties.parentZone;var a="widget.contentgroup"===t.properties.type;if(E())return false;if(!r||!n)return false;return i&&a}},{key:"_isMovableExceptionInRow",value:function e(t){if(this._isWidgetImmutable(t))return true;return this._isContentGroupWidget(t)}},{key:"_isWidgetImmutable",value:function e(t){return t.immutable&&"0"!==t.immutable}},{key:"_isContentGroupWidget",value:function e(t){return"widget.contentgroup"===t.properties.type}}]);return e}();function E(){return i.deviceFeaturesHelper.isSmallTouchDevice()}var k=t["default"]=P},35136:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(1904);var i=r(9878);var a=Backbone.View.extend({className:"top-level-overlay js-widget-overlay",events:{"click .js-delete":"onDeleteClick","click .js-move-up":"onMoveClick","click .js-move-down":"onMoveClick"},initialize:function e(t){this.properties=t.properties;this.isDeletable=t.isDeletable;this.isMovable=t.isMovable;this.parentView=t.parentView;this.templateRenderer=t.templateRenderer;this.sticky=t.sticky;this.widgetData=t.widgetData;this.widgetData.subscribe(this.onWidgetDataChange.bind(this))},render:function e(){var t=this.templateRenderer.render("view_topleveloverlay",this._getTwigTemplateContext());(0,i.append)(this.el,t);this.onRender();return this},onRender:function e(){this.attachParentViewObserver()},attachParentViewObserver:function e(){var t=new MutationObserver(this.onParentViewMutated.bind(this));t.observe(this.parentView.el,{childList:true})},onParentViewMutated:function e(t,r){Editor.Events.trigger("widgetOverlay:render",this.parentView);(0,n.isIE)()||this.sticky.add(this.el.querySelector(".js-overlay-sticky"));r.disconnect()},onParentViewDelete:function e(){(0,n.isIE)()||this.sticky.remove(this.el.querySelector(".js-overlay-sticky"));this.widgetData.unsubscribe()},onDeleteClick:function e(t){t.stopPropagation();this.trigger("widget:delete")},onMoveClick:function e(t){t.stopPropagation();var r=t.currentTarget.getAttribute("data-position");var n=this.properties.uniqueId;Editor.Events.trigger("widget:move:".concat(n),{position:r,uniqueId:n})},onWidgetDataChange:function e(){(0,i.emptyElement)(this.el);this.render()},_getTwigTemplateContext:function e(){return{isDeletable:this.isDeletable,isMovable:this.isMovable,canMoveUp:this.widgetData.get().firstWidget!==this.properties.uniqueId,canMoveDown:this.widgetData.get().lastWidget!==this.properties.uniqueId}}});var o=t["default"]=a},19462:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(1904);var i=r(76021);var a=Backbone.View.extend({className:"widget-overlay js-widget-overlay",events:{click:"onClick","click .js-delete":"onDeleteClick","click .js-visibility":"onVisibilityClick"},initialize:function e(t){this.templateRenderer=t.templateRenderer;this.hideTplWidget=0===parseInt(t.showTplWidget,10);this.overlayData=this.setOverlayData(t);this.parentView=t.parentView;this.childElement=t.childElement;this.sticky=t.sticky},setOverlayData:function e(t){var r,n;var a=null!==(r=null===t||void 0===t||null===(n=t.parentView)||void 0===n?void 0:n.model)&&void 0!==r&&r;return{hideTplWidget:this.hideTplWidget,properties:t.properties,immutable:t.immutable,isImageEditable:t.isImageEditable,isDeletable:t.isDeletable,isMovable:t.isMovable||false,showImageSelectionButton:t.showImageSelectionButton,showImageEditorButton:t.showImageEditorButton&&!(0,i.isAssetSvg)(a),enableRows:true}},render:function e(){var t=this.templateRenderer.render("view_widgetoverlay",this.overlayData);this.$el.append(t);this.onRender();return this},onRender:function e(){var t=this;var r=new MutationObserver((function(e,r){t.onAttach(r)}));this.parentView&&this.parentView.el&&r.observe(this.parentView.el,{childList:true,subtree:true})},onAttach:function e(t){Editor.Events.trigger("widgetOverlay:render",this.parentView);(0,n.isIE)()||this.sticky.add(this.el.querySelector(".js-overlay-sticky"));t.disconnect()},onParentViewDelete:function e(){this.sticky.remove(this.el.querySelector(".js-overlay-sticky"))},onClick:function e(t){this.trigger("widget:overlayClick",t)},onDeleteClick:function e(t){t.stopPropagation();this.trigger("widget:delete")},onVisibilityClick:function e(t){t.stopPropagation();Editor.Events.trigger("visibility:click");var r=this._getNewVisibilityState(t.currentTarget);this.parentView.changeVisibility(r);this._setVisibilityDataAttribute(t.currentTarget,r)},_getNewVisibilityState:function e(t){var r=t.getAttribute("data-visibility");if("hidden"===r)return"visible";return"hidden"},_setVisibilityDataAttribute:function e(t,r){t.setAttribute("data-visibility",r)}});var o=t["default"]=a},55999:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(76021);var i=Backbone.View.extend({className:"widget-overlay js-widget-overlay",events:{click:"onTouch","click .js-delete":"onDeleteTouch","click .js-visibility":"onVisibilityTouch"},initialize:function e(t){this.templateRenderer=t.templateRenderer;this.hideTplWidget=0===parseInt(t.showTplWidget,10);this.overlayData=this.setOverlayData(t);this.parentView=t.parentView;this.childElement=t.childElement;this.isActive=false;Editor.Events.on("widgetOverlay:touchOverlayClicked",this.onGlobalOverlayTouch.bind(this))},setOverlayData:function e(t){var r,i;var a=null!==(r=null===t||void 0===t||null===(i=t.parentView)||void 0===i?void 0:i.model)&&void 0!==r&&r;return{hideTplWidget:this.hideTplWidget,properties:t.properties,immutable:t.immutable,isImageEditable:t.isImageEditable,isDeletable:t.isDeletable,isMovable:t.isMovable||false,showImageSelectionButton:t.showImageSelectionButton,showImageEditorButton:t.showImageEditorButton&&!(0,n.isAssetSvg)(a)}},render:function e(){var t=this.templateRenderer.render("view_widgetoverlay",this.overlayData);this.$el.append(t);return this},onGlobalOverlayTouch:function e(){this.isActive&&this._deactivateOverlay()},onTouch:function e(t){this.trigger("widget:overlayClick",t)},onDeleteTouch:function e(t){t.stopPropagation();this.isActive&&this.trigger("widget:delete")},onParentViewDelete:function e(){},onVisibilityTouch:function e(t){t.stopPropagation();Editor.Events.trigger("visibility:click");if(this.isActive){var r=this._getNewVisibilityState(t.currentTarget);this.parentView.changeVisibility(r);this._setVisibilityDataAttribute(t.currentTarget,r)}},_getNewVisibilityState:function e(t){var r=t.getAttribute("data-visibility");if("hidden"===r)return"visible";return"hidden"},_setVisibilityDataAttribute:function e(t,r){t.setAttribute("data-visibility",r)}});var a=t["default"]=i},41026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(31170));var i=r(76021);function a(e){return e&&e.__esModule?e:{default:e}}var o=Backbone.View.extend({className:"widget-overlay js-widget-overlay",events:{click:"onClick","click .js-settings":"onSettingsClick","click .js-image-picker":"onImagePickerClick","click .js-visibility":"onVisibilityClick","click .js-delete":"onDeleteClick","click .js-edit-image":"onEditImageClick",mouseover:"onMouseover",mouseout:"onMouseout"},initialize:function e(t){this.templateRenderer=t.templateRenderer;this.hideTplWidget=0===parseInt(t.showTplWidget,10);this.overlayData=this.setOverlayData(t);this.parentView=t.parentView;this.sticky=t.sticky},setOverlayData:function e(t){var r,a;var o=null!==(r=null===t||void 0===t||null===(a=t.parentView)||void 0===a?void 0:a.model)&&void 0!==r&&r;var s=t.hasOwnProperty("properties");var l=n.default.container.SiteDataProvider.get("ecommerce");var u=!(l&&!l.store.live&&s&&"widget.ecomproductslist"===t.properties.type||!l&&s&&"widget.ecomproductslist"===t.properties.type)&&t.showSettingsIcon;var c={hideTplWidget:this.hideTplWidget,properties:t.properties,immutable:t.immutable,isImageEditable:t.isImageEditable&&!(0,i.isAssetSvg)(o),isMovable:t.isMovable,isDeletable:t.isDeletable,showSettingsIcon:u,showImageSelectionButton:t.showImageSelectionButton,showImageEditorButton:t.showImageEditorButton};return c},render:function e(){var t=this.templateRenderer.render("view_widgetoverlay",this.overlayData);this.$el.append(t);this.onRender();return this},onRender:function e(){var t=this;var r=new MutationObserver((function(e,r){t.onAttach(r)}));this.parentView&&this.parentView.el&&r.observe(this.parentView.el,{childList:true})},onAttach:function e(t){Editor.Events.trigger("widgetOverlay:render",this.parentView);try{this.sticky.add(this.el.querySelector(".js-overlay-sticky"));t.disconnect()}catch(e){}},onParentViewDelete:function e(){this.sticky.remove(this.el.querySelector(".js-overlay-sticky"))},isWidgetType:function e(t){return this.overlayData.properties&&this.overlayData.properties.type===t},onClick:function e(t){var r=n.default.container.SiteDataProvider.get("ecommerce");var i=this.isWidgetType("widget.ecomproductslist");if(r&&!r.store.live&&i||!r&&i)return;this.trigger("widget:overlayClick",t)},onEditImageClick:function e(t){t.stopPropagation();this.trigger("widget:editImage")},onSettingsClick:function e(t){t.stopPropagation();this.trigger("widget:settings")},onImagePickerClick:function e(t){t.stopPropagation();this.trigger("widget:imagePicker")},onDeleteClick:function e(t){t.stopPropagation();this.trigger("widget:delete")},onVisibilityClick:function e(t){t.stopPropagation();Editor.Events.trigger("visibility:click");var r=this._getNewVisibilityState(t.currentTarget);this.parentView.changeVisibility(r);this._setVisibilityDataAttribute(t.currentTarget,r)},_getNewVisibilityState:function e(t){var r=t.getAttribute("data-visibility");if("hidden"===r)return"visible";return"hidden"},_setVisibilityDataAttribute:function e(t,r){t.setAttribute("data-visibility",r)},onMouseover:function e(t){t.stopPropagation();var r=n.default.container.SiteDataProvider.get("ecommerce");var i=this.isWidgetType("widget.ecomproductslist");(r&&!r.store.live&&i||!r&&i)&&this.el.classList.add("no-pointer")},onMouseout:function e(t){t.stopPropagation();var r=n.default.container.SiteDataProvider.get("ecommerce");var i=this.isWidgetType("widget.ecomproductslist");(r&&!r.store.live&&i||!r&&i)&&this.el.classList.remove("no-pointer")}});var s=t["default"]=o},12615:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(1904);var i=o(r(31170));var a=r(76021);function o(e){return e&&e.__esModule?e:{default:e}}var s=Backbone.View.extend({className:"widget-overlay widget-in-row-overlay js-widget-overlay js-widget-in-row-overlay",events:{click:"onClick","click .js-delete":"onDeleteClick",mouseover:"onMouseover",mouseout:"onMouseout"},initialize:function e(t){this.templateRenderer=t.templateRenderer;this.hideTplWidget=0===parseInt(t.showTplWidget,10);this.overlayData=this.setOverlayData(t);this.parentView=t.parentView;this.childElement=t.childElement;this.sticky=t.sticky},setOverlayData:function e(t){var r,n;var i=null!==(r=null===t||void 0===t||null===(n=t.parentView)||void 0===n?void 0:n.model)&&void 0!==r&&r;return{hideTplWidget:this.hideTplWidget,properties:t.properties,immutable:t.immutable,isImageEditable:t.isImageEditable,isDeletable:t.isDeletable,isMovable:t.isMovable||false,showImageSelectionButton:t.showImageSelectionButton,showImageEditorButton:t.showImageEditorButton&&!(0,a.isAssetSvg)(i),enableRows:true}},render:function e(){var t=this.templateRenderer.render("view_widgetoverlay",this.overlayData);this.$el.append(t);this.onRender();return this},onRender:function e(){var t=this;var r=new MutationObserver((function(e,r){t.onAttach(r)}));this.parentView&&this.parentView.el&&r.observe(this.parentView.el,{childList:true,subtree:true})},onAttach:function e(t){Editor.Events.trigger("widgetOverlay:render",this.parentView);(0,n.isIE)()||this.sticky.add(this.el.querySelector(".js-overlay-sticky"));t.disconnect()},onParentViewDelete:function e(){this.sticky.remove(this.el.querySelector(".js-overlay-sticky"))},onClick:function e(t){var r=i.default.container.SiteDataProvider.get("ecommerce");var n="widget.ecomproductslist"===this.overlayData.properties.type;if(r&&!r.store.live&&n||!r&&n)return;this.trigger("widget:overlayClick",t)},onDeleteClick:function e(t){t.stopPropagation();this.trigger("widget:delete")},onMouseover:function e(t){t.stopPropagation();this.el.closest(".js-widget").classList.add("hover-active-widget");var r=i.default.container.SiteDataProvider.get("ecommerce");var n="widget.ecomproductslist"===this.overlayData.properties.type;(r&&!r.store.live&&n||!r&&n)&&this.el.classList.add("no-pointer")},onMouseout:function e(t){t.stopPropagation();this.el.closest(".js-widget").classList.remove("hover-active-widget");var r=i.default.container.SiteDataProvider.get("ecommerce");var n="widget.ecomproductslist"===this.overlayData.properties.type;(r&&!r.store.live&&n||!r&&n)&&this.el.classList.remove("no-pointer")}});var l=t["default"]=s},10127:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(31170));var i=r(76021);function a(e){return e&&e.__esModule?e:{default:e}}var o=Backbone.View.extend({className:"widget-overlay js-widget-overlay js-widget-in-row-overlay",events:{click:"onTouch","click .js-delete":"onDeleteTouch"},initialize:function e(t){this.templateRenderer=t.templateRenderer;this.hideTplWidget=0===parseInt(t.showTplWidget,10);this.overlayData=this.setOverlayData(t);this.parentView=t.parentView;this.childElement=t.childElement;this.isActive=false;Editor.Events.on("widgetOverlay:touchOverlayClicked",this.onGlobalOverlayTouch.bind(this))},setOverlayData:function e(t){var r,n;var a=null!==(r=null===t||void 0===t||null===(n=t.parentView)||void 0===n?void 0:n.model)&&void 0!==r&&r;return{hideTplWidget:this.hideTplWidget,properties:t.properties,immutable:t.immutable,isImageEditable:t.isImageEditable,isDeletable:t.isDeletable,isMovable:t.isMovable||false,showImageSelectionButton:t.showImageSelectionButton,showImageEditorButton:t.showImageEditorButton&&!(0,i.isAssetSvg)(a)}},render:function e(){var t=this.templateRenderer.render("view_widgetoverlay",this.overlayData);this.$el.append(t);return this},onGlobalOverlayTouch:function e(){this.isActive&&this._deactivateOverlay()},onTouch:function e(t){var r=n.default.container.SiteDataProvider.get("ecommerce");var i="widget.ecomproductslist"===this.overlayData.properties.type;if(r&&!r.store.live&&i||!r&&i)return;this.trigger("widget:overlayClick",t)},onDeleteTouch:function e(t){t.stopPropagation();this.isActive&&this.trigger("widget:delete")},onParentViewDelete:function e(){}});var s=t["default"]=o},83805:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(31170));var i=r(76021);function a(e){return e&&e.__esModule?e:{default:e}}var o=Backbone.View.extend({className:"widget-overlay js-widget-overlay",events:{click:"onTouch","click .js-settings":"onSettingsTouch","click .js-image-picker":"onImagePickerTouch","click .js-visibility":"onVisibilityTouch","click .js-delete":"onDeleteTouch"},initialize:function e(t){this.templateRenderer=t.templateRenderer;this.hideTplWidget=0===parseInt(t.showTplWidget,10);this.overlayData=this.setOverlayData(t);this.parentView=t.parentView;this.isActive=false;Editor.Events.on("widgetOverlay:touchOverlayClicked",this.onGlobalOverlayTouch.bind(this))},setOverlayData:function e(t){var r,a;var o=null!==(r=null===t||void 0===t||null===(a=t.parentView)||void 0===a?void 0:a.model)&&void 0!==r&&r;var s=t.hasOwnProperty("properties");var l=n.default.container.SiteDataProvider.get("ecommerce");var u=!(l&&!l.store.live&&s&&"widget.ecomproductslist"===t.properties.type||!l&&s&&"widget.ecomproductslist"===t.properties.type)&&t.showSettingsIcon;return{hideTplWidget:this.hideTplWidget,properties:t.properties,immutable:t.immutable,isMovable:t.isMovable,isDeletable:t.isDeletable,showSettingsIcon:u,showImageSelectionButton:t.showImageSelectionButton,showImageEditorButton:t.showImageEditorButton&&!(0,i.isAssetSvg)(o)}},render:function e(){var t=this.templateRenderer.render("view_widgetoverlay",this.overlayData);this.$el.append(t);return this},onGlobalOverlayTouch:function e(){this.isActive&&this._deactivateOverlay()},onTouch:function e(){if(this.isActive)this._deactivateOverlay();else{Editor.Events.trigger("widgetOverlay:touchOverlayClicked",this.parentView);this._activateOverlay()}},onSettingsTouch:function e(t){t.stopPropagation();this.isActive&&this.trigger("widget:settings")},onImagePickerTouch:function e(t){t.stopPropagation();this.isActive&&this.trigger("widget:imagePicker")},onDeleteTouch:function e(t){t.stopPropagation();this.isActive&&this.trigger("widget:delete")},onVisibilityTouch:function e(t){t.stopPropagation();Editor.Events.trigger("visibility:click");if(this.isActive){var r=this._getNewVisibilityState(t.currentTarget);this.parentView.changeVisibility(r);this._setVisibilityDataAttribute(t.currentTarget,r)}},onParentViewDelete:function e(){},_deactivateOverlay:function e(){this.isActive=false;this.el.classList.remove("hover")},_activateOverlay:function e(){this.isActive=true;this.el.classList.add("hover")},_getNewVisibilityState:function e(t){var r=t.getAttribute("data-visibility");if("hidden"===r)return"visible";return"hidden"},_setVisibilityDataAttribute:function e(t,r){t.setAttribute("data-visibility",r)}});var s=t["default"]=o},14651:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=d(r(79440));var a=r(55269);var o=u(r(69464));var s=r(54833);var l=u(r(82049));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(c=function e(n){return n?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function g(e,t,r){t&&p(e.prototype,t);r&&p(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&v(e,t)}function v(e,t){v=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return v(e,t)}function m(e){var t=w();return function r(){var n=_(e),i;if(t){var a=_(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return y(this,i)}}function y(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _(e){_=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return _(e)}function S(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var P=function(e){h(r,e);var t=m(r);function r(){var e;f(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];e=t.call.apply(t,[this].concat(i));S(b(e),"destroy",(function(){e.container&&(0,a.unmountComponentAtNode)(e.container)}));return e}g(r,[{key:"build",value:function e(t){this.container=t;(0,a.render)(i.default.createElement(s.Provider,{store:o.default},i.default.createElement(i.Fragment,null,i.default.createElement(l.default,this.props))),this.container)}}]);return r}(i.Component);var E=t["default"]=P},41561:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=m(r(79440));var a=h(r(76660));var o=r(54833);var s=r(57644);var l=h(r(69464));var u=h(r(13745));var c=h(r(36632));var d=h(r(39222));var f=h(r(99220));var p=h(r(93059));var g=h(r(5323));function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(v=function e(n){return n?r:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function w(e,t,r){t&&b(e.prototype,t);r&&b(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&S(e,t)}function S(e,t){S=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return S(e,t)}function P(e){var t=C();return function r(){var n=O(e),i;if(t){var a=O(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return E(this,i)}}function E(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function O(e){O=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return O(e)}function A(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var T=function(e){_(r,e);var t=P(r);function r(){var e;y(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];e=t.call.apply(t,[this].concat(i));A(k(e),"onStyleSelected",(function(t){var r=t.currentTarget.dataset.style;var n=t.currentTarget.dataset.name;if("image"!==r){e.props.changeRowWidgetStyle({selectedStyleSet:n,selectedStyleType:r});e.props.hideImageBackgroundControlList()}else e.props.showImageBackgroundControlList()}));A(k(e),"onImageControlClicked",(function(t){if(t.currentTarget.classList.contains("is-inactive"))return;e.props.openControlPanel(t.currentTarget.dataset.name);e.hideList()}));A(k(e),"onLayoutControlClicked",(function(){e.props.openControlPanel("change-layout");e.hideList()}));A(k(e),"onShapeDividerControlClicked",(function(){e.props.openControlPanel("change-shape-divider");e.hideList()}));A(k(e),"onScrollEffectsControlClicked",(function(){e.props.openControlPanel("scroll-effects");e.hideList()}));A(k(e),"onAnimationControlClicked",(function(){e.props.openControlPanel("animation");e.hideList()}));A(k(e),"onSectionHeightControlClicked",(function(){e.props.openControlPanel("section-height");e.hideList()}));A(k(e),"onSectionWidthControlClicked",(function(){e.props.openControlPanel("section-width");e.hideList()}));A(k(e),"onSectionGradientControlClicked",(function(){e.props.openControlPanel("section-gradient");e.hideList()}));A(k(e),"onSectionLinkControlClicked",(function(){e.props.openControlPanel("section-link");e.hideList()}));A(k(e),"hideList",(function(){e.props.hideRowWidgetControlList()}));A(k(e),"componentDidUpdate",(function(t,r){e.props.repositionControlList()}));return e}w(r,[{key:"render",value:function e(){var t=(0,u.default)("editor.animation_picker.animation","Animation");var r=(0,u.default)("editor.section_height_picker.section_height","Height");var n=(0,u.default)("editor.section_height_picker.section_width","Width");var a=(0,u.default)("editor.section_gradient_picker.section_gradient","Gradient");var o=(0,u.default)("editor.section_link_picker.section_link","Section link");var s="main"!==l.default.getState().ui.rowWidgetControl.rowType;var h=l.default.getState().user.capabilities.enableStandaloneMode&&s;var v=false!==l.default.getState().ui.rowWidgetControl.showRowWidgetLayoutControlList;return i.default.createElement("div",{className:"row-overlay__control-list"},i.default.createElement("div",{className:"row-overlay__control-list-content"},!v&&i.default.createElement(i.default.Fragment,null,i.default.createElement(c.default,{styleSets:this.props.rowSettings.styleSets,selectedStyleType:this.props.rowSettings.selectedStyleType,selectedStyleSet:this.props.rowSettings.selectedStyleSet,styleSelected:this.onStyleSelected}),("image"===this.props.rowSettings.selectedStyleType||this.props.showImageBackgroundControl)&&i.default.createElement(d.default,{selectedStyleType:this.props.rowSettings.selectedStyleType,scrollEffectsControlClicked:this.onScrollEffectsControlClicked,imageControlClicked:this.onImageControlClicked}),"image"!==this.props.rowSettings.selectedStyleType&&i.default.createElement(g.default,{controlClicked:this.onSectionGradientControlClicked,controlName:"section-gradient",controlLabel:a}),this.props.showShapeDividerControlList&&i.default.createElement(p.default,{shapeDividerControlClicked:this.onShapeDividerControlClicked}),i.default.createElement(g.default,{controlClicked:this.onAnimationControlClicked,controlName:"animation",controlLabel:t})),v&&i.default.createElement(i.default.Fragment,null,this.props.showLayoutControlList&&!h&&i.default.createElement(f.default,{layoutControlClicked:this.onLayoutControlClicked}),i.default.createElement(g.default,{controlClicked:this.onSectionLinkControlClicked,controlName:"section-link",controlLabel:o}),i.default.createElement(g.default,{controlClicked:this.onSectionHeightControlClicked,controlName:"section-height",controlLabel:r}),i.default.createElement(g.default,{controlClicked:this.onSectionWidthControlClicked,controlName:"section-width",controlLabel:n}))))}}]);return r}(i.Component);T.propTypes={rowSettings:a.default.shape({styleSets:a.default.shape({accent:a.default.shape({background:a.default.string.isRequired,foreground:a.default.string.isRequired}),dark:a.default.shape({background:a.default.string.isRequired,foreground:a.default.string.isRequired}),light:a.default.shape({background:a.default.string.isRequired,foreground:a.default.string.isRequired}),spare:a.default.shape({background:a.default.string.isRequired,foreground:a.default.string.isRequired})}),selectedStyleType:a.default.string.isRequired,selectedStyleSet:a.default.string.isRequired,backgroundImageSrc:a.default.string}),showImageBackgroundControl:a.default.bool.isRequired,showLayoutControlList:a.default.bool.isRequired,showShapeDividerControlList:a.default.bool.isRequired,hideRowWidgetControlList:a.default.func.isRequired,changeRowWidgetStyle:a.default.func.isRequired,showImageBackgroundControlList:a.default.func.isRequired,hideImageBackgroundControlList:a.default.func.isRequired,openControlPanel:a.default.func.isRequired,repositionControlList:a.default.func.isRequired};var j=function e(t){var r=t.ui;return{rowSettings:r.rowWidgetControl.settings,showImageBackgroundControl:r.rowWidgetControl.showImageBackgroundControlList,showLayoutControlList:r.rowWidgetControl.showLayoutControlList,showShapeDividerControlList:r.rowWidgetControl.showShapeDividerControlList}};var D=function e(t){return{hideRowWidgetControlList:function e(){return t((0,s.hideRowWidgetControlList)())},changeRowWidgetStyle:function e(r){return t((0,s.changeRowWidgetStyle)(r))},showImageBackgroundControlList:function e(){return t((0,s.showImageBackgroundControlList)())},hideImageBackgroundControlList:function e(){return t((0,s.hideImageBackgroundControlList)())},openControlPanel:function e(r){return t((0,s.openControlPanel)(r))}}};var L=t["default"]=(0,o.connect)(j,D)(T)},82049:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=f(r(79440));var a=c(r(76660));var o=r(54833);var s=r(57644);var l=c(r(41561));var u=c(r(84256));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(d=function e(n){return n?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function h(e,t,r){t&&g(e.prototype,t);r&&g(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}function y(e){var t=_();return function r(){var n=S(e),i;if(t){var a=S(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return b(this,i)}}function b(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function S(e){S=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return S(e)}function P(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var E=function(e){v(r,e);var t=y(r);function r(){var e;p(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];e=t.call.apply(t,[this].concat(i));P(w(e),"repositionControlList",(function(){e.props.setRowWidgetControlRendered(true)}));P(w(e),"componentDidMount",(function(){e.repositionControlList()}));P(w(e),"componentDidUpdate",(function(t,r){e.repositionControlList()}));P(w(e),"showRowWidgetInformation",(function(){return e.props.showRowWidgetControlList&&["header","footer"].includes(e.props.rowType)}));return e}h(r,[{key:"render",value:function e(){return i.default.createElement(i.Fragment,null,this.props.showRowWidgetControlList&&i.default.createElement(l.default,{repositionControlList:this.repositionControlList}),this.showRowWidgetInformation()&&i.default.createElement(u.default,null))}}]);return r}(i.Component);E.propTypes={showRowWidgetControlList:a.default.bool.isRequired,rowType:a.default.string.isRequired,setRowWidgetControlRendered:a.default.func.isRequired};var k=function e(t){var r=t.ui;return{showRowWidgetControlList:r.rowWidgetControl.showRowWidgetControlList,rowType:r.rowWidgetControl.rowType}};var C=function e(t){return{setRowWidgetControlRendered:function e(r){return t((0,s.setRowWidgetControlRendered)(r))}}};var O=t["default"]=(0,o.connect)(k,C)(E)},84256:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=d(r(79440));var a=u(r(76660));var o=r(54833);var s=r(57644);var l=u(r(13745));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(c=function e(n){return n?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function g(e,t,r){t&&p(e.prototype,t);r&&p(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});t&&v(e,t)}function v(e,t){v=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return v(e,t)}function m(e){var t=w();return function r(){var n=_(e),i;if(t){var a=_(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return y(this,i)}}function y(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _(e){_=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return _(e)}function S(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var P=function(e){h(r,e);var t=m(r);function r(){var e;f(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];e=t.call.apply(t,[this].concat(i));S(b(e),"onClicked",(function(){e.props.openControlPanel("more-information");e.props.hideRowWidgetControlList()}));return e}g(r,[{key:"render",value:function e(){var t=(0,l.default)("editor.zone_sharing.info_heading_".concat(this.props.rowType),"Page ".concat(this.props.rowType));var r="shared"===this.props.zoneSharingScope?(0,l.default)("editor.zone_sharing.shared_info_text","Changes applied to all pages"):(0,l.default)("editor.zone_sharing.custom_info_text","Changes applied to just this page");return i.default.createElement("div",{className:"row-overlay__information"},i.default.createElement("div",{className:"row-overlay__information-content"},i.default.createElement("ul",{className:"row-overlay__information-list"},i.default.createElement("li",{className:"row-overlay__information-item row-overlay__control-icon row-overlay__control-icon--information",onClick:this.onClicked},i.default.createElement("div",{className:"row-overlay__information-label"},i.default.createElement("span",{className:"row-overlay__control-item--heading"},t),i.default.createElement("span",{className:"row-overlay__control-item--text"},r)),i.default.createElement("span",{className:"row-overlay__information-icon row-overlay__information-icon--edit"})))))}}]);return r}(i.Component);P.propTypes={rowType:a.default.string.isRequired,zoneSharingScope:a.default.string.isRequired,openControlPanel:a.default.func.isRequired,hideRowWidgetControlList:a.default.func.isRequired};var E=function e(t){var r=t.ui;return{rowType:r.rowWidgetControl.rowType,zoneSharingScope:r.rowWidgetControl.zoneSharingScope}};var k=function e(t){return{openControlPanel:function e(r){return t((0,s.openControlPanel)(r))},hideRowWidgetControlList:function e(){return t((0,s.hideRowWidgetControlList)())}}};var C=t["default"]=(0,o.connect)(E,k)(P)},53140:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(79440));var i=a(r(76660));function a(e){return e&&e.__esModule?e:{default:e}}var o=function e(t){var r=t.colorType,i=t.colorSet,a=t.selectedStyleType,o=t.selectedStyleSet,s=t.styleSelected;var l="row-overlay__control-item js-".concat(r,"-preview");"color"===a&&r===o&&(l="".concat(l," is-current-style"));return n.default.createElement("li",{className:l,"data-name":r,"data-style":"color",onClick:s},n.default.createElement("span",{className:"row-overlay__style-label",style:{backgroundColor:i.background,color:i.background}}))};o.propTypes={colorType:i.default.string.isRequired,colorSet:i.default.shape({background:i.default.string.isRequired,foreground:i.default.string.isRequired}),selectedStyleType:i.default.string.isRequired,selectedStyleSet:i.default.string.isRequired,styleSelected:i.default.func.isRequired};var s=t["default"]=o},39222:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(79440));var i=o(r(76660));var a=o(r(13745));function o(e){return e&&e.__esModule?e:{default:e}}var s=function e(t){var r=t.selectedStyleType,i=t.imageControlClicked,o=t.scrollEffectsControlClicked;var s=(0,a.default)("editor.style_picker.replace_image","Replace image");var l=(0,a.default)("editor.style_picker.overlay","Overlay");var u=(0,a.default)("editor.style_picker.focal_point","Image focal point");var c="row-overlay__control-item row-overlay__control-icon";var d="image"!==r?"is-inactive":"";var f=(0,a.default)("editor.style_picker.scroll_effects","Scroll effects");return n.default.createElement("ul",{className:"row-overlay__style-list--advanced"},n.default.createElement("li",{className:"".concat(c,"\n            row-overlay__control-icon--image-replace js-replace-image-option"),"data-name":"replace-image",onClick:i},n.default.createElement("span",null,s)),n.default.createElement("li",{className:"".concat(c," ").concat(d,"\n            row-overlay__control-icon--overlay js-overlay-option"),"data-name":"overlay",onClick:i},n.default.createElement("span",null,l)),n.default.createElement("li",{className:"".concat(c," ").concat(d,"\n            row-overlay__control-icon--image-focus js-focal-point-option"),"data-name":"focal-point",onClick:i},n.default.createElement("span",null,u)),n.default.createElement("li",{className:"".concat(c," ").concat(d,"\n            row-overlay__control-icon--scroll-effects js-scroll-effects-option"),"data-name":"scroll-effects",onClick:o},n.default.createElement("span",null,f)))};s.propTypes={selectedStyleType:i.default.string.isRequired,imageControlClicked:i.default.func.isRequired,scrollEffectsControlClicked:i.default.func.isRequired};var l=t["default"]=s},36632:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(79440));var i=o(r(76660));var a=o(r(53140));function o(e){return e&&e.__esModule?e:{default:e}}var s=function e(t){var r=t.styleSets,i=t.selectedStyleType,o=t.selectedStyleSet,s=t.styleSelected;var l=["light","accent","dark","spare"];var u="row-overlay__control-item js-image-style-preview";"image"===i&&(u="".concat(u," is-current-style"));var c={};l.forEach((function(e){r[e]&&(c[e]=r[e])}));return n.default.createElement("ul",{className:"row-overlay__style-list"},Object.keys(c).map((function(e){return n.default.createElement(a.default,{key:e,colorType:e,colorSet:r[e],selectedStyleType:i,selectedStyleSet:o,styleSelected:s})})),n.default.createElement("li",{className:u,"data-name":"image","data-style":"image",onClick:s},n.default.createElement("span",{className:"row-overlay__style-label row-overlay__control-icon row-overlay__control-icon--image-control"})))};s.propTypes={styleSets:i.default.shape({spare:i.default.shape({background:i.default.string.isRequired,foreground:i.default.string.isRequired}),accent:i.default.shape({background:i.default.string.isRequired,foreground:i.default.string.isRequired}),dark:i.default.shape({background:i.default.string.isRequired,foreground:i.default.string.isRequired}),light:i.default.shape({background:i.default.string.isRequired,foreground:i.default.string.isRequired})}),selectedStyleType:i.default.string.isRequired,selectedStyleSet:i.default.string.isRequired,styleSelected:i.default.func.isRequired};var l=t["default"]=s},99220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(79440));var i=o(r(76660));var a=o(r(13745));function o(e){return e&&e.__esModule?e:{default:e}}var s=function e(t){var r=t.layoutControlClicked;var i=(0,a.default)("editor.layout_picker.change_layout","Change layout");return n.default.createElement("ul",{className:"row-overlay__layout-list"},n.default.createElement("li",{className:"row-overlay__control-item row-overlay__control-icon row-overlay__control-icon--layout-control js-layout-control","data-name":"replace-image",onClick:r},n.default.createElement("span",null,i)))};s.propTypes={layoutControlClicked:i.default.func.isRequired};var l=t["default"]=s},93059:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(79440));var i=o(r(76660));var a=o(r(13745));function o(e){return e&&e.__esModule?e:{default:e}}var s=function e(t){var r=t.shapeDividerControlClicked;var i=(0,a.default)("editor.shape_divider_picker.shape_dividers","Shape dividers");return n.default.createElement("ul",{className:"row-overlay__shape-divider-list"},n.default.createElement("li",{className:"row-overlay__control-item row-overlay__control-icon row-overlay__control-icon--shape-divider-control js-shape-divider-control","data-name":"shape-divider",onClick:r},n.default.createElement("span",null,i)))};s.propTypes={shapeDividerControlClicked:i.default.func.isRequired};var l=t["default"]=s},5323:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(79440));var i=a(r(76660));function a(e){return e&&e.__esModule?e:{default:e}}var o=function e(t){var r=t.controlClicked,i=t.controlLabel,a=t.controlName;return n.default.createElement("ul",{className:"row-overlay__".concat(a,"-list")},n.default.createElement("li",{className:"row-overlay__control-item row-overlay__control-icon\n        row-overlay__control-icon--".concat(a,"-control js-").concat(a,"-control"),"data-name":a,onClick:r},n.default.createElement("span",null,i)))};o.propTypes={controlClicked:i.default.func.isRequired,controlLabel:i.default.string.isRequired,controlName:i.default.string.isRequired};var s=t["default"]=o},76172:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=new WeakMap;var o=function(){function e(t){r(this,e);this.CollectionClass=t.stdCollectionClass;this.globalEventsHandler=t.globalEventsHandler;this.initialize()}i(e,[{key:"initialize",value:function e(){this.collections={};this._setRegisters();this._setupCollections();this._bindEvents()}},{key:"register",value:function e(t){var r=a.get(this);var n=s(t);r[n]=t;this._addToCollection(t)}},{key:"unregister",value:function e(t){var r=this;var n=this.getByParentId(t);n.length&&n.forEach((function(e){r.unregister(e.uniqueId)}));this.get(t)&&this._removeFromRegister(t)}},{key:"clearRegister",value:function e(){this._setRegisters();this._setupCollections()}},{key:"get",value:function e(t){var r=a.get(this);return r[t]}},{key:"getByParentId",value:function e(t){var r=a.get(this);var n=[];this.getKeys().forEach((function(e){var i=r[e];i.parentUniqueId===t&&n.push(i)}));return n}},{key:"getByAttribute",value:function e(t,r){var n=this;var i=this.getKeys();var a=i.find((function(e){var i=n.get(e);return i.get(t)===r}));return this.get(a)}},{key:"getMainZoneWidget",value:function e(){return this.getByAttribute("uniqueHTMLId","page-zones__main")}},{key:"isWidgetInZone",value:function e(t,r){var n=this.getZone(t);if(n)return n.get("uniqueId")===r;return false}},{key:"getZone",value:function e(t){return this.getByAttribute("uniqueHTMLId","page-zones__".concat(t))}},{key:"getByUniqueHTMLId",value:function e(t){return this.getByAttribute("uniqueHTMLId",t)}},{key:"getParentByUniqueId",value:function e(t){var r=this.get(t);return this.get(r.parentUniqueId)}},{key:"getKeys",value:function e(){return Object.keys(a.get(this))}},{key:"getAll",value:function e(){var t=a.get(this);return t}},{key:"getTemplateWidgetCollection",value:function e(){return this.getCollection("template-widgets")}},{key:"getZoneWidgetCollection",value:function e(){return this.getCollection("main-widgets")}},{key:"getCollection",value:function e(t){var r=a.get(this.collections);return r[t]}},{key:"_bindEvents",value:function e(){this.globalEventsHandler.on("page:change",this.clearRegister.bind(this))}},{key:"_removeFromRegister",value:function e(t){var r=a.get(this);var n=r[t];delete r[t];this._removeFromCollection(n);n.destroy()}},{key:"_setRegisters",value:function e(){a.set(this,{});a.set(this.collections,{})}},{key:"_setupCollections",value:function e(){var t=a.get(this.collections);t["main-widgets"]=new this.CollectionClass;t["template-widgets"]=new this.CollectionClass}},{key:"_addToCollection",value:function e(t){t.isTemplateWidget?this._addToTemplateCollection(t.model):this._addToMainZoneCollection(t.model)}},{key:"_removeFromCollection",value:function e(t){t.isTemplateWidget?this._removeFromTemplateCollection(t.model):this._removeFromMainZoneCollection(t.model)}},{key:"_removeFromMainZoneCollection",value:function e(t){var r=a.get(this.collections);r["main-widgets"].remove(t)}},{key:"_removeFromTemplateCollection",value:function e(t){var r=a.get(this.collections);r["template-widgets"].remove(t)}},{key:"_addToMainZoneCollection",value:function e(t){var r=a.get(this.collections);r["main-widgets"].add(t)}},{key:"_addToTemplateCollection",value:function e(t){var r=a.get(this.collections);r["template-widgets"].add(t)}}]);return e}();function s(e){var t=e.get("fixed")?e.get("uniqueHTMLId"):e.uniqueId;return t}var l=t["default"]=o},52760:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.twig=t.twig}i(e,[{key:"render",value:function e(t){var r=this.twig.render(Twig.templates.widget_responsivecolumnscolumn,{widget:t});return r}}]);return e}();var o=t["default"]=a},91124:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(){r(this,e)}i(e,[{key:"create",value:function e(t){var r=document.createRange();r.selectNode(document.body);var n=r.createContextualFragment(t);return n}}]);return e}();var o=t["default"]=a},33208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(91124));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=function(){function e(t){a(this,e);this.widgetRendererFactory=t.widgetRendererFactory;this.tree=document.createElement("div")}s(e,[{key:"createTreeFromWidgetData",value:function e(t){var r=this;this.tree=document.createElement("div");var i=new n.default;t.forEach((function(e){if(r._canRender(e)){var t=r.widgetRendererFactory.build(e.type);var n=t.render(e);var a=i.create(n.trim());r._insertNodeIntoTree(a,e.parentUniqueId)}}));return this.tree}},{key:"_insertNodeIntoTree",value:function e(t,r){var n=this._getNodeFromTree(r);n=this._setParentElement(n);var i=n||this.tree;i.appendChild(t)}},{key:"_setParentElement",value:function e(t){if(t&&"row"===t.getAttribute("data-name"))return t.querySelector(".js-row-container");if(t&&"responsivecolumns"===t.getAttribute("data-name"))return t.querySelector(".js-responsivecolumns");return t}},{key:"_getNodeFromTree",value:function e(t){return this.tree.querySelector('[data-uniqueid="'.concat(t,'"]'))}},{key:"_canRender",value:function e(t){if("widget.template"===t.type&&"main"===t.name)return false;return false===t.fixed}}]);return e}();var u=t["default"]=l},54296:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(){r(this,e)}i(e,[{key:"insert",value:function e(t){var r=this.getInsertionRoot(t.parent);var n=r.children;var i=n.item(t.position)||null;r.insertBefore(t.node.firstChild,i)}},{key:"getInsertionRoot",value:function e(t){var r=Editor.Site.Dom.window.document.querySelector('[data-uniqueid="'.concat(t,'"]'));if("row"===r.getAttribute("data-name"))return r.querySelector(".js-row-container");return r}}]);return e}();var o=t["default"]=a},16703:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.store=t.store;this.siteDataProvider=t.siteDataProvider;this.pagesProvider=t.pagesProvider;this.envDataProvider=t.envDataProvider;this.sessionProvider=t.sessionProvider;this.twig=t.twig;this.imageAssets=t.assets;this.profile=t.profile;this.formatImageAssetData=t.formatImageAssetData;this.ColumnWidgetRenderer=t.ColumnWidgetRenderer;this.ZoneRenderer=t.ZoneRenderer;this.ZoneWidgetRenderer=t.ZoneWidgetRenderer}i(e,[{key:"build",value:function e(t){if("widget.template"===t)return new this.ZoneRenderer({twig:this.twig});if("widget.columns.column"===t)return new this.ColumnWidgetRenderer({twig:this.twig});return new this.ZoneWidgetRenderer({store:this.store,siteDataProvider:this.siteDataProvider,pagesProvider:this.pagesProvider,sessionProvider:this.sessionProvider,envDataProvider:this.envDataProvider,twig:this.twig,assets:this.imageAssets,profile:this.profile,formatImageAssetData:this.formatImageAssetData})}}]);return e}();var o=t["default"]=a},40266:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e){return o(e)||a(e)||i(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function o(e){if(Array.isArray(e))return s(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function c(e,t,r){t&&u(e.prototype,t);r&&u(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var d=function(){function e(){l(this,e)}c(e,[{key:"replace",value:function e(t){var n=Editor.Site.Dom.window.document.querySelector('[data-uniqueid="'.concat(t.replaces,'"]'));var i=r(t.node.childNodes);Array.prototype.forEach.call(i,(function(e){n.insertAdjacentElement("beforebegin",e)}));n.parentNode.removeChild(n)}}]);return e}();var f=t["default"]=d},98181:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.twig=t.twig}i(e,[{key:"render",value:function e(t){var r=this.twig.render(Twig.templates.widget_zone,{zone:t});return r}}]);return e}();var o=t["default"]=a},38195:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.store=t.store;this.siteDataProvider=t.siteDataProvider;this.pagesProvider=t.pagesProvider;this.envDataProvider=t.envDataProvider;this.sessionProvider=t.sessionProvider;this.twig=t.twig;this.assets=t.assets;this.profile=t.profile;this.formatImageAssetData=t.formatImageAssetData}i(e,[{key:"render",value:function e(t){var r=false;var n=this.siteDataProvider.get("globalValues").find((function(e){return"enablePolicyPages"===e.name}));"undefined"!==typeof n&&(r=n.value);var i=this.siteDataProvider.get("policyPageData");var a=this.twig.render(this.twig.templates.widget_wrapper,{app:this.siteDataProvider.get("app"),googleMapsEmbedKey:this.envDataProvider.get("googleMapsEmbedKey"),widget:t,profile:this.profile.toJSON(),debugMode:true===this.sessionProvider().get("debugMode"),page:this.pagesProvider(this.sessionProvider().get("pageRef")).toJSON(),plugins:{assets:{images:this.formatImageAssetData(this.assets.toJSON())},blog:this.siteDataProvider.get("blog"),ecommerce:this.siteDataProvider.get("ecommerce")},connect:{bookings:this.siteDataProvider.get("connectBookings")},siteLanguages:this.siteDataProvider.getSiteLanguages(),siteDefaultLanguage:this.siteDataProvider.getSiteDefaultLanguage(),enablePolicyPages:r,policyPageData:i,isRTLLanguage:this.store.getState().page.isRTLLanguage});return a}}]);return e}();var o=t["default"]=a},12691:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(81458));function i(e){return e&&e.__esModule?e:{default:e}}var a=Marionette.CollectionView.extend({childView:n.default,initialize:function e(t){this.widgetView=t.widgetView},childViewOptions:function e(t){return{title:t.get("groupTitle"),collection:t.get("collection"),widgetView:this.widgetView}}});var o=t["default"]=a},81458:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(29361));function i(e){return e&&e.__esModule?e:{default:e}}var a=Marionette.CompositeView.extend({template:"view_settings_group",tagName:"fieldset",className:"popup-panel-form__fieldset",childViewContainer:".js-container",childEvents:{"setting:change":"onSettingsChange"},initialize:function e(t){this.title=t.title;this.widgetView=t.widgetView;this.widgetView.listenForSettingsChanges(this)},onSettingsChange:function e(t,r,n){this.trigger(r,n);this.autoSave&&this.widgetView.model.save({widgetName:this.widgetView.properties.name,widgetUniqueId:this.widgetView.properties.uniqueId,fixed:this.widgetView.properties.fixed})},childViewOptions:function e(){return{isRowsEnabled:true}},getChildView:function e(t){return(0,n.default)(t.get("type"))}});var o=t["default"]=a},57538:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(51449));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&o(e.prototype,t);r&&o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var l=function(){function e(t){a(this,e);this.siteDataProvider=t.siteDataProvider}s(e,[{key:"getStyleSettings",value:function e(t){this.widgetType=t.widgetType;this.widgetEl=t.widgetEl;this.fixed=t.fixed;this.model=t.model;this.stylesCollection=this.getStylesCollection();this.templateStylePreprocessorVariableWidgets=this.siteDataProvider.get("templateStylePreprocessorVariableWidgets");var r=this._getAssociatedWidgets(this.widgetEl);return this._combineWidgetsAndStyles(r)}},{key:"hasStyleCollection",value:function e(){return null!==this.getStylesCollection()}},{key:"getStylesCollection",value:function e(){var t=this.siteDataProvider.get("templateData");return t.templateStylePreprocessorVariablesEnabled&&1===t.templateStylePreprocessorVariablesEnabled?BaseKit.Globals.templateStylePreprocessorVariables:null}},{key:"_getWidgetTypeForElementAndChildren",value:function e(t){var r=[];t.find("*").each(function(e,n){var i=$(n);var a=this._getWidgetType(i);void 0!==a&&r.push(a);t=t.parent()}.bind(this));return r}},{key:"_getWidgetType",value:function e(t){if(t)return t.attr("data-widget-type");return this.widgetType}},{key:"_addWidgetTranslations",value:function e(t){return window._.compact(window._.map(t,function(e){if(this.templateStylePreprocessorVariableWidgets&&this.templateStylePreprocessorVariableWidgets[e]){var t=window._.clone(this.templateStylePreprocessorVariableWidgets[e]);t.name=e;return t}}.bind(this)))}},{key:"_setProfileWidgetType",value:function e(t){var r=window._.indexOf(t,"profile");if("-1"===r)return t;t[r]=this.model.get("profileType");return t}},{key:"_getAssociatedWidgets",value:function e(t){var r=[this.widgetType];if(this.fixed){r=r.concat(this._getWidgetTypeForElementAndChildren(t.parent().parent().parent()));(0,n.default)(r);window._.uniq(r)}r=this._setProfileWidgetType(r);r=this._addWidgetTranslations(r);r=window._.indexBy(r,"name");return r}},{key:"_combineWidgetsAndStyles",value:function e(t){var r=this;var n={};Object.keys(t).forEach((function(e){var i=r.stylesCollection.where({widget:t[e].name});if(i.length){n[e]=t[e];n[e].styles=i}}));return n}}]);return e}();var u=t["default"]=l},62047:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.settingsView=t.settingsView;Object.assign(this,Backbone.Events)}i(e,[{key:"isOpen",value:function e(){return this.settingsView.isOpen}},{key:"reset",value:function e(t){var r=this;var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i=t.getWidgetSettings();var a=!!n.enableSave&&n.enableSave;this.off();this.settingsView.viewReset({widgetTitle:i.title,widgetName:t.properties.name,className:t.properties.className||t.properties.type,model:t.model,collection:new Backbone.Collection(i.components),widgetEl:t.$el,widgetElId:t.el.getAttribute("id"),widgetUniqueId:t.el.getAttribute("data-uniqueid"),fixed:t.properties.fixed,profileModel:t.profileModel,previousAttributes:t.previousAttributes,previousProfileAttributes:t.previousProfileAttributes,enableSave:a,emptySettingMessage:i.emptySettingMessage||""});this.listenTo(this.settingsView,"all",(function(){r.trigger.apply(r,arguments)}))}}]);return e}();var o=t["default"]=a},74849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(50154));var i=o(r(2263));var a=o(r(11869));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function u(e,t,r){t&&l(e.prototype,t);r&&l(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var c=function(){function e(t){s(this,e);this.siteDataProvider=t.siteDataProvider;this.widgetStyleSettingsViewFactory=t.widgetStyleSettingsViewFactory;this.styleSettingsProvider=t.styleSettingsProvider;this.settingsComponentProvider=t.settingsComponentProvider;this.rowsEnabled=t.rowsEnabled;this.tracker=t.tracker;this.formEmailVerification=t.formEmailVerification}u(e,[{key:"build",value:function e(){this.formEmailVerification&&Cocktail.mixin(n.default,i.default);return new n.default({el:".js-widget-property-panel",profileModel:(0,a.default)(),widgetStyleSettingsViewFactory:this.widgetStyleSettingsViewFactory,styleSettingsProvider:this.styleSettingsProvider,settingsComponentProvider:this.settingsComponentProvider,rowsEnabled:this.rowsEnabled,tracker:this.tracker})}}]);return e}();var d=t["default"]=c},30530:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(13181));var i=a(r(12691));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function l(e,t,r){t&&s(e.prototype,t);r&&s(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var u=function(){function e(t){o(this,e);this.settingsComponentProvider=t.settingsComponentProvider}l(e,[{key:"build",value:function e(t){var r=t.widgetView.getSettings();if(r.groupInformation&&!t.settingId)return this._buildGroupedSettings(t.widgetView,r.components,r.groupInformation);return new n.default({settingsComponentProvider:this.settingsComponentProvider,widgetView:t.widgetView,settingId:t.settingId||false,autoSave:t.autoSave||false,settingsComponents:r.components,profileModel:t.profileModel})}},{key:"_buildGroupedSettings",value:function e(t,r,n){var a=this._createGroupCollection(n);this._addSettingsToGroups(r,a);return new i.default({collection:a,widgetView:t})}},{key:"_createGroupCollection",value:function e(t){var r=new Backbone.Collection;t.forEach((function(e){var t=new Backbone.Model({collection:new Backbone.Collection,groupId:e.groupId,title:e.groupTitle});r.add(t)}));return r}},{key:"_addSettingsToGroups",value:function e(t,r){t.forEach((function(e){if("label"===e.type)return;var t=r.findWhere({groupId:e.groupId});t.get("collection").add(e)}))}}]);return e}();var c=t["default"]=u},13181:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.CollectionView.extend({childEvents:{"setting:change":"onSettingsChange","setting:click":"onSettingsChange","setting:update":"onSettingsUpdate","setting:reset":"onSettingsReset"},childViewOptions:function e(){return{isRowsEnabled:true,profileModel:this.profileModel}},onSettingsChange:function e(t,r,n){this.trigger(r,n);this.autoSave&&this.widgetView.model.save({widgetName:this.widgetView.properties.name,widgetUniqueId:this.widgetView.properties.uniqueId,fixed:this.widgetView.properties.fixed})},onSettingsButtonClick:function e(t,r,n){this.trigger(r,n)},onSettingsUpdate:function e(t,r,n){this.trigger(r,n)},onSettingsReset:function e(t,r,n){Editor.Events.trigger("widgetSettings:changed",this.widgetView)},initialize:function e(t){this.widgetView=t.widgetView;this.profileModel=t.profileModel;if(!this.widgetView||"function"!==typeof this.widgetView.listenForSettingsChanges){var r;var n;var i="";try{r=JSON.stringify(this)}catch(e){r=JSON.stringify(Object.keys(this));n=JSON.stringify(Object.keys(this.options));i=e.stack}console.error("WidgetView not set correctly: ".concat(r));console.error("".concat(n));console.error(i)}this.settingsComponentProvider=t.settingsComponentProvider;this.settingId=t.settingId;this.autoSave=t.autoSave||false;this.settingsComponents=t.settingsComponents;this.setupCollection();this.widgetView.listenForSettingsChanges(this)},setupCollection:function e(){var t;t=this.settingId?this._getSettingsComponentById(this.settingId):this.settingsComponents;this.collection=this._generateCollection(t)},getChildView:function e(t){return this.settingsComponentProvider(t.get("type"))},_getSettingsComponents:function e(){return this.widgetView.getSettings().components},_getSettingsComponentById:function e(t){var r=this._getSettingsComponents();return r.find((function(e){return e.id===t}))},_generateCollection:function e(t){return new Backbone.Collection(t)}});var n=t["default"]=r},13759:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(5558));var i=a(r(28839));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function l(e,t,r){t&&s(e.prototype,t);r&&s(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var u=function(){function e(t){o(this,e);this.store=t.store;this.styleSettingsProvider=t.styleSettingsProvider;this.envDataProvider=t.envDataProvider;this.rowsEnabled=t.rowsEnabled}l(e,[{key:"build",value:function e(t){return new i.default({el:t.el,styles:this.store.getState().ui.panel.styles,stylesCollection:this.styleSettingsProvider.getStylesCollection(),fontListContents:(0,n.default)(),allGoogleFonts:this.envDataProvider.get("allGoogleFonts"),presetAttributesCollection:BaseKit.Globals.presetAttributes,rowsEnabled:this.rowsEnabled})}}]);return e}();var c=t["default"]=u},29361:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var i=I(r(96735));var a=L(r(31436));var o=L(r(59462));var s=L(r(81940));var l=L(r(10542));var u=L(r(9877));var c=L(r(4135));var d=L(r(36634));var f=L(r(27612));var p=L(r(7713));var g=L(r(1096));var h=L(r(20330));var v=L(r(40001));var m=L(r(19284));var y=L(r(2372));var b=L(r(24307));var w=L(r(64200));var _=L(r(98655));var S=L(r(49656));var P=L(r(10821));var E=L(r(75313));var k=L(r(50373));var C=L(r(55196));var O=L(r(28966));var A=L(r(48890));var T=L(r(2498));var j=L(r(74549));var D=L(r(58765));function L(e){return e&&e.__esModule?e:{default:e}}function R(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap;var r=new WeakMap;return(R=function e(n){return n?r:t})(e)}function I(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=R(t);if(r&&r.has(e))return r.get(e);var i={};var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e;r&&r.set(e,i);return i}var M={advancedtextbox:h.default,button:i.default,visualButton:i.VisualButtonView,buttonset:a.default,radiobutton:o.default,paragraph:s.default,textarea:l.default,text:u.default,select:d.default,datasourcechooser:c.default,slider:f.default,checkbox:p.default,imagedetail:y.default,label:g.default,information:P.default,logo:C.default,"profile-settings":w.default,"link-editor-select":m.default,"file-selector":v.default,"custom-select":_.default,"label-counter":b.default,"style-picker":S.default,"row-layout":E.default,"shape-divider":k.default,animation:O.default,"section-height":A.default,"section-width":T.default,"section-gradient":j.default,"section-link":D.default};var x=function e(t){var r=M[t];if(r)return r;throw new Error("Invalid settings component supplied")};var N=t["default"]=x},20330:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({className:function e(){return this.options.isRowsEnabled?"popup-panel-form__field":"settings-advancedtextbox"},events:{"change .js-input":"inputChanged","change .js-font-size-select":"fontSizeChanged","click .js-bold":"boldButtonClicked","click .js-italic":"italicButtonClicked"},initialize:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isRowsEnabled=t.isRowsEnabled||false;this._setTemplate();return this},_setTemplate:function e(){this.template=this.isRowsEnabled?"settings_advancedtextbox_component_v8r":"view_settings_advancedtextbox"},inputChanged:function e(){this.trigger("setting:change",this.model.get("id"),{type:"text",value:this.el.querySelector(".js-input").value.trim()})},fontSizeChanged:function e(){this.trigger("setting:change",this.model.get("id"),{type:"font",value:this.el.querySelector(".js-font-size-select").value})},boldButtonClicked:function e(){this.el.querySelector(".js-bold").classList.toggle("is-selected");this.trigger("setting:change",this.model.get("id"),{type:"style",value:"bold"})},italicButtonClicked:function e(){this.el.querySelector(".js-italic").classList.toggle("is-selected");this.trigger("setting:change",this.model.get("id"),{type:"style",value:"italic"})}});var n=t["default"]=r},28966:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(78600));function i(e){return e&&e.__esModule?e:{default:e}}var a=Marionette.ItemView.extend({template:"view_settings_animation_picker",initialize:function e(){this.animations=this.model.get("animations");this.currentAnimationEffect=this.model.get("currentAnimationEffect");return this},onRender:function e(){this.openAnimationPanel()},openAnimationPanel:function e(){var t=new n.default({dialogStyle:"dialog__panel-style--green",animations:this.animations,currentAnimationEffect:this.currentAnimationEffect}).render();this.listenTo(t,"animationEffect:change",this._setAnimationEffect.bind(this))},_setAnimationEffect:function e(t){this.trigger("setting:change","row-animation-effect-changed",t);this.currentAnimationEffect=t}});var o=t["default"]=a},31436:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({className:function e(){var e=this.options.isRowsEnabled?"popup-panel-form__field":"settings-buttonset";this.model.get("className")&&(e="".concat(e," ").concat(this.model.get("className")));return e},events:{"click .js-btn":"btnClicked"},initialize:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isRowsEnabled=t.isRowsEnabled||false;this._setTemplate();this.listenTo(this.model,"change",this.render);return this},_setTemplate:function e(){this.template=this.isRowsEnabled?"settings_buttonset_component_v8r":"view_settings_buttonset"},btnClicked:function e(t){var r=t.currentTarget.querySelector(".js-value");var n=r.dataset.attr;this.model.set("value",n);var i=r.dataset.visual;i?this.trigger("setting:click",this.model.get("id"),n):this.trigger("setting:change",this.model.get("id"),n)}});var n=t["default"]=r},96735:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=t.VisualButtonView=void 0;var r=Marionette.ItemView.extend({template:"view_settings_button",className:"settings-button",events:{"click .js-button":"buttonClicked"},initialize:function e(){return this},buttonClicked:function e(){this.trigger("setting:change",this.model.get("id"))}});var n=t["default"]=r;var i=t.VisualButtonView=Marionette.ItemView.extend({template:"view_settings_button",className:"settings-button",events:{"click .js-button":"buttonClicked"},initialize:function e(){return this},buttonClicked:function e(){this.trigger("setting:click",this.model.get("id"))}})},7713:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({className:function e(){return this.options.isRowsEnabled?"popup-panel-form__field":"settings-checkbox"},events:{"change .js-input":"inputChanged"},initialize:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isRowsEnabled=t.isRowsEnabled||false;this._setTemplate();return this},_setTemplate:function e(){this.template=this.isRowsEnabled?"settings_checkbox_component_v8r":"view_settings_checkbox"},inputChanged:function e(){var t=this.el.querySelector(".js-input").checked;this.trigger("setting:change",this.model.get("id"),t)}});var n=t["default"]=r},98655:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(21741));function i(e){return e&&e.__esModule?e:{default:e}}var a=Marionette.ItemView.extend({template:"view_settings_button",className:"settings-customselect",events:{"click .js-button":"openSelectPanel"},openSelectPanel:function e(){var t=new n.default({model:new Backbone.Model({title:this.model.get("searchPanelTitle"),onSearch:this.model.get("onSearch"),helpWords:this.model.get("searchHelpWords"),noSearchResults:this.model.get("noSearchResultsWords"),imageProperty:this.model.get("imageProperty"),idProperty:this.model.get("idProperty"),mainTitleProperty:this.model.get("mainTitleProperty"),secondTitleProperty:this.model.get("secondTitleProperty"),thirdTitleProperty:this.model.get("thirdTitleProperty"),subTitleProperty:this.model.get("subTitleProperty")})}).render();this.listenTo(t,"item:selected",this.itemSelected)},itemSelected:function e(t){this.trigger("setting:change",this.model.get("id"),t)}});var o=t["default"]=a},4135:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=2e3;var n=Marionette.ItemView.extend({className:function e(){return this.options.isRowsEnabled?"popup-panel-form__field":"settings-datasource-chooser"},events:{"change .js-select":"selectChanged","change .js-custom-input":"inputChanged","mouseover .js-tooltip-icon":"showTooltip","mouseout .js-tooltip-icon":"hideTooltip"},initialize:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isRowsEnabled=t.isRowsEnabled||false;this._setTemplate();this.listenTo(this.model,"change",this.render);return this},_setTemplate:function e(){this.template=this.isRowsEnabled?"settings_datachooser_component_v8r":"view_settings_datasourcechooser"},showTooltip:function e(){var t=this.el.querySelector(".js-tooltip");if(!t.hasAttribute("hidden"))return;t.removeAttribute("hidden")},hideTooltip:function e(){var t=this.el.querySelector(".js-tooltip");setTimeout((function(){t.setAttribute("hidden","hidden")}),r)},selectChanged:function e(){var t=this.el.querySelector(".js-select").value.trim();if("custom"!==t){this.model.set("value",t);this.trigger("setting:change",this.model.get("id"),{value:t,source:""})}else{this.model.set("value","");this.trigger("setting:change",this.model.get("id"),{value:"",source:t})}},inputChanged:function e(){var t=this.el.querySelector(".js-custom-input").value.trim();this.model.set("value",t);this.trigger("setting:change",this.model.get("id"),{value:t,source:"custom"})}});var i=t["default"]=n},40001:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({template:"view_settings_fileselector",events:{"click .js-file":"openFileManagement"},initialize:function e(){return this},openFileManagement:function e(){this.filePanelView=new BaseKit.Panels.FilesPanelView({model:new BaseKit.Panels.FilesPanelModel({panel:"upload",title:App.t("shared_components.filespanel.source_title","File source")})}).render();this.listenTo(this.filePanelView,"file:selected",this.updateFileLink);this.listenTo(this.filePanelView,"file:deleted",this.deleteFileLink);this.listenTo(this.filePanelView,"panel:close",this.render)},updateFileLink:function e(t){this.model.set({url:t.url,fileName:t.fileName},{silent:true});this.notifyChanges()},deleteFileLink:function e(t){if(this.model.get("url")===t.url){this.model.set({url:"",fileName:""});this.trigger("setting:change","widget-filedownload-linkeditor-delete",{url:this.model.get("url"),fileName:this.model.get("fileName")})}},notifyChanges:function e(){this.trigger("setting:change",this.model.get("id"),{url:this.model.get("url"),fileName:this.model.get("fileName")})}});var n=t["default"]=r},2372:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(35306));var i=r(55372);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function u(){return"".concat(App.assetBaseUrl(),"/apps/images/mobile/transparent_218x98.png")}var c=Marionette.ItemView.extend({template:"view_settings_imagedetail",className:function e(){var e="settings-imagedetail settings-imagedetail--short js-imagedetail";this.model.get("className")&&(e="".concat(e," ").concat(this.model.get("className")));return e},events:{"click .js-change-image":"chooseRecentClicked","click .js-add-image":"addNewImageClicked"},initialize:function e(){this.previousModel=null;this.model.get("draggable")&&!(0,i.isMobileDevice)()&&(this.isDraggable=true);this.listenTo(this.model,"change:imageSrc",this.render);return this},onRender:function e(){if(!this.isDraggable)return;setTimeout(function(){this.handleImagePositioning()}.bind(this),10)},serializeData:function e(){return Object.assign(this.model.toJSON(),{isDraggable:this.isDraggable,proxySrc:u()})},handleImagePositioning:function e(){var t=this.el.querySelector(".js-image-container").offsetWidth;var r=this.el.querySelector(".js-image-container").offsetHeight;var n=this.model.get("imageNaturalHeight");var i=this.model.get("imageNaturalWidth");var a=n/i*t;var o=a-r;this.setImageContainerHeight();this.setImageDragProxyHeight(o,a);this.attachDragEvent(o)},setImageContainerHeight:function e(){var t=this.el.offsetWidth;var r=t*this.model.get("imageDisplayRadio");this.el.querySelector(".js-image-container").style.height="".concat(r,"px")},setImageDragProxyHeight:function e(t,r){this.el.querySelector(".js-drag-proxy").style.height="".concat(r,"px");if(t){var n=this.model.get("positionTopPercentage")/100*t;this.el.querySelector(".js-drag-proxy").style.top="-".concat(n,"px")}},attachDragEvent:function e(t){var r=this.el.querySelector(".js-image-container");var n=r.getBoundingClientRect();var i=n.top-t;var a=n.top;var o=null;this.$(".js-drag-proxy").draggable({axis:"y",containment:[0,i,0,a],drag:function(e,n){o=-n.position.top/t*100;r.style.backgroundPosition="center ".concat(o,"%");this.model.set("positionTopPercentage",o);this.notifyChanges()}.bind(this)})},openImagePopup:function e(t){this.imagesPanelView=new n.default({model:new BaseKit.Panels.Model(t.model)}).render();this.listenTo(this.imagesPanelView,"asset:change",this.setAsset);this.listenTo(this.imagesPanelView,"asset:reset",this.resetAsset)},addNewImageClicked:function e(){var t=this;this.openImagePopup({model:{panel:"upload",parentPanel:void 0,subPanel:false,isSubPanel:false,showSaveBtn:false,title:App.t("shared_components.imagespanel.source_title","Image source")}});setTimeout((function(){t.imagesPanelView.openFileUpload()}),50)},chooseRecentClicked:function e(){this.openImagePopup({model:{panel:"recentImages",forceHidden:false,parentPanel:void 0,isSubPanel:false,asset:void 0,title:App.t("shared_components.imagespanel.recent_title","Recent")}});this.imagesPanelView.sourceSelected()},notifyChanges:function e(){this.trigger("setting:change",this.model.get("id"),{positionTopPercentage:this.model.get("positionTopPercentage"),src:this.model.get("imageSrc"),url:this.model.get("imageSrc"),fileName:this.model.get("fileName"),fileSize:this.model.get("fileSize"),imageWidth:this.model.get("imageWidth"),imagePxWidth:"".concat(this.model.get("imageWidth"),"px"),imageHeight:this.model.get("imageHeight"),path:this.model.get("path"),imageSize:"".concat(this.model.get("imageWidth")," x ").concat(this.model.get("imageHeight")),description:this.model.get("description"),title:this.model.get("title"),assetRef:this.model.get("ref")})},setAsset:function e(t){this.previousModel=this.model.clone().toJSON();this.model.set({imageSrc:t.url,fileName:t.fileName,fileSize:t.fileSize,imageHeight:t.imageHeight,imageWidth:t.imageWidth,path:t.path,description:"assets",title:"assets",ref:t.ref});this.notifyChanges()},resetAsset:function e(){if(this.previousModel){this.model.set(s({},this.previousModel));this.notifyChanges()}}});var d=t["default"]=c},10821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({template:"view_settings_information",className:"settings_information",events:{"click .js-more-info":"moreInfoClicked"},moreInfoClicked:function e(){this.trigger("setting:change","more-information")}});var n=t["default"]=r},9877:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({className:function e(){return this.options.isRowsEnabled?"popup-panel-form__field":"settings-input"},events:{"change .js-input":"inputChanged"},initialize:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isRowsEnabled=t.isRowsEnabled||false;this._setTemplate();return this},_setTemplate:function e(){this.template=this.isRowsEnabled?"settings_input_component_v8r":"view_settings_input"},inputChanged:function e(){var t=this.el.querySelector(".js-input").value.trim();this.model.set("value",t);this.trigger("setting:change",this.model.get("id"),t)}});var n=t["default"]=r},24307:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({template:"view_settings_label_counter",className:function e(){var e="settings-label-counter";this.model.get("className")&&(e="".concat(e," ").concat(this.model.get("className")));return e}});var n=t["default"]=r},1096:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({template:"view_settings_label",className:function e(){var e="settings-label";this.model.get("className")&&(e="".concat(e," ").concat(this.model.get("className")));return e}});var n=t["default"]=r},19284:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=a(r(31170));var i=r(32637);function a(e){return e&&e.__esModule?e:{default:e}}function o(){return n.default.container.BrandDataProvider.has("fileUpload")}var s=Marionette.ItemView.extend({className:function e(){return this.options.isRowsEnabled?"popup-panel-form__field":"settings-linkeditor-select"},events:{"change .js-link-action":"linkActionChanged","change .js-internal-link":"internalLinkChanged","change .js-external-link":"externalLinkChange","change .js-external-target":"externalLinkTargetChange","click .js-file":"openFileManagement","change .js-email":"emailChanged"},serializeData:function e(){return Object.assign(this.model.toJSON(),{isFileUploadEnabled:o(),pages:(0,i.getActiveLanguageInternalPages)()})},initialize:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isRowsEnabled=t.isRowsEnabled||false;this._setTemplate();this.listenTo(this.model,"change",this.render);return this},_setTemplate:function e(){this.template=this.isRowsEnabled?"settings_link_component_v8r":"view_settings_linkeditorselect"},linkActionChanged:function e(){var t=this.el.querySelector(".js-link-action").value;this.model.set({value:t,url:"",fileName:"",target:"_self"});this.notifyChanges();"file"===t&&this.openFileManagement()},openFileManagement:function e(){this.filePanelView=new BaseKit.Panels.FilesPanelView({model:new BaseKit.Panels.FilesPanelModel({panel:"upload",title:App.t("shared_components.filespanel.source_title","File source")})}).render();this.listenTo(this.filePanelView,"file:selected",this.updateFileLink);this.listenTo(this.filePanelView,"panel:close",this.render)},updateFileLink:function e(t){this.model.set({value:"file",url:t.url,fileName:t.fileName},{silent:true});this.notifyChanges()},internalLinkChanged:function e(){var t=this.el.querySelector(".js-internal-link").value;this.model.set("url",t);this.notifyChanges()},externalLinkChange:function e(){var t=this.el.querySelector(".js-external-link").value.trim();var r=/^((http|ftp|ftps|https):\/\/)?[\u00C0-\u1FFE\u2C00-\uD7FB\w\-_]+(\.[\u00C0-\u1FFE\u2C00-\uD7FB\w\-_]+)+([\u00C0-\u1FFE\u2C00-\uD7FB\w\-\.,@?\^=%&amp;:\/~\+#!]*[\u00C0-\u1FFE\u2C00-\uD7FB\w\-\@?\^=%&amp;\/~\+#])?$/i;var n=/^(http|ftp|ftps|https)$/i;var i=t.match(r);if(r.test(t)){n.test(i[2])||(t="http://".concat(t));this.model.set("url",t);this.notifyChanges();this.model.set("linkError",void 0);this.trigger("save:enable")}else{this.model.set({url:"",linkError:App.t("shared_components.linkeditor.error_invalidllink","Invalid link")});this.trigger("save:disable")}},externalLinkTargetChange:function e(){var t=this.el.querySelector(".js-external-target").value;this.model.set("target",t);this.notifyChanges()},emailChanged:function e(){var t=this.el.querySelector(".js-email").value.trim();var r=/.+@.+/;this.model.set("target","_self");if(r.test(t)){this.model.set("url","mailto:".concat(t));this.notifyChanges();this.model.set("emailError",void 0);this.trigger("save:enable")}else{this.model.set({url:"",emailError:App.t("shared_components.linkeditor.error_invalidEmail","Invalid email address")});this.trigger("save:disable")}},notifyChanges:function e(){this.trigger("setting:change",this.model.get("id"),{target:this.model.get("target"),url:this.model.get("url"),action:this.model.get("value"),fileName:this.model.get("fileName")})}});var l=t["default"]=s},81940:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({template:"view_settings_paragraph",className:"settings-paragraph",initialize:function e(){return this}});var n=t["default"]=r},64080:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=c(r(20330));var i=c(r(19284));var a=c(r(10542));var o=c(r(9877));var s=c(r(36634));var l=c(r(27612));var u=c(r(4135));function c(e){return e&&e.__esModule?e:{default:e}}var d=Marionette.CollectionView.extend({tagName:"div",className:"settings__child",childEvents:{"setting:change":function e(t,r,n){this.trigger("profileSettings:change",{id:r,value:n,childView:t})}},childViewOptions:function e(){return{isRowsEnabled:this.isRowsEnabled}},initialize:function e(t){this.isRowsEnabled=t.isRowsEnabled;return this},getChildView:function e(t){var r=null;switch(t.get("type")){case"advancedtextbox":r=n.default;break;case"link-editor-select":r=i.default;break;case"textarea":r=a.default;break;case"text":r=o.default;break;case"select":r=s.default;break;case"datasourcechooser":r=u.default;break;case"slider":r=l.default;break}return r}});var f=t["default"]=d},64200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(31170));var i=o(r(64080));var a=r(32637);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(){return n.default.container.BrandDataProvider.has("googleServices")}function u(){var e=false;var t=n.default.container.SiteDataProvider.get("globalValues").find((function(e){return"enablePolicyPages"===e.name}));"undefined"!==typeof t&&(e=t.value);return e}var c={"form-email":"e.g. mail@example.com"};var d=Marionette.ItemView.extend({className:"settings-profile settings__child",events:{"change .js-profile-type":"profileTypeChanged"},ui:{settingsContainer:".js-profile-settings-container"},initialize:function e(t){this.isRowsEnabled=t.isRowsEnabled;this._setTemplate();this.previousModel=_.omit(this.model.toJSON(),"profileType");this.profileModel=t.profileModel;this.previousProfileModel=t.profileModel.toJSON();return this},_setTemplate:function e(){this.template=this.isRowsEnabled?"settings_profile_component_v8r":"view_settings_profile"},profileTypeChanged:function e(){var t=this.el.querySelector(".js-profile-type").value.trim();this.model.set("profileType",t);this.trigger("setting:change",this.model.get("id"),t);this.renderSettingsByType();this.trigger("setting:reset",this.model.get("id"),t)},onRender:function e(){this.renderSettingsByType()},countryData:function e(){var t=Editor.Site.Dom.window.Data.countries;var e=[{text:App.t("widgets.companyaddress.choose-country","Choose country"),value:""}];t.forEach((function(t){e.push({text:t.name,value:t.name})}));return e},getAddressTypeSetting:function e(){return[{id:this.model.get("addressSettingId"),label:App.t("widgets.profile.address","Address"),type:"text",value:this.model.get("address")},{id:this.model.get("address1SettingId"),label:App.t("widgets.profile.address1","Address"),type:"text",value:this.model.get("address1")},{id:this.model.get("address2SettingId"),label:App.t("widgets.profile.address2","Address"),type:"text",value:this.model.get("address2")},{id:this.model.get("countrySettingId"),type:"select",label:App.t("widgets.companyaddress.country","Country"),value:this.model.get("country"),data:this.countryData()},{id:this.model.get("postalcodeSettingId"),label:App.t("widgets.profile.postalcode","Postal Code"),type:"text",value:this.model.get("addressPostalCode")}]},getEmailTypeSetting:function e(){return[{id:this.model.get("emailSettingId"),label:App.t("widgets.profile.email","Email"),type:"text",inputType:"email",value:this.model.get("email")}]},getHeadlineTypeSetting:function e(){return[{id:this.model.get("headlineSettingId"),label:App.t("widgets.profile.headline","Headline"),type:"text",autocapitalize:"on",autocorrect:"on",value:this.model.get("headline")}]},getStraplineTypeSetting:function e(){return[{id:this.model.get("straplineSettingId"),label:App.t("widgets.profile.strapline","Strap Line"),type:"text",autocapitalize:"on",autocorrect:"on",value:this.model.get("strapline")}]},getCompanydescriptionTypeSetting:function e(){return[{id:this.model.get("companydescriptionSettingId"),label:App.t("widgets.profile.companydescription","Company Description"),type:"textarea",autocapitalize:"on",autocorrect:"on",value:this.model.get("companydescription")}]},getPhoneTypeSetting:function e(){return[{id:this.model.get("phoneSettingId"),label:App.t("widgets.profile.phone","Phone"),type:"text",value:this.model.get("phone")}]},getBusinessTypeSetting:function e(){return[{id:this.model.get("businessSettingId"),label:App.t("widgets.profile.business","Business"),type:"text",value:this.model.get("business")}]},getCopyrightTypeSetting:function e(){return[{id:this.model.get("copyrightSettingId"),label:App.t("widgets.profile.copyright","Copyright"),type:"textarea",autocapitalize:"on",autocorrect:"on",value:this.model.get("copyright")}]},getTwitterTypeSetting:function e(){return[{id:this.model.get("twitterSettingId"),label:App.t("widgets.profile.latesttweet","Latest Tweet"),type:"text",value:this.model.get("twitter")}]},getMapTypeSetting:function e(){return[{id:this.model.get("mapAddressSettingId"),type:"text",label:App.t("widgets.map.address","Address line 1"),value:this.model.get("mapAddress")},{id:this.model.get("mapAddress1SettingId"),type:"text",label:App.t("widgets.map.address1","Address line 2"),value:this.model.get("mapAddress1")},{id:this.model.get("mapAddress2SettingId"),type:"text",label:App.t("widgets.map.address2","Address line 3"),value:this.model.get("mapAddress2")},{id:this.model.get("mapPostalcodeSettingId"),type:"text",label:App.t("widgets.map.postalcode","Postal Code"),value:this.model.get("mapPostalCode")},{id:this.model.get("mapZoomSettingId"),type:"slider",label:App.t("widgets.map.zoom","Zoom"),minValue:1,maxValue:20,value:this.model.get("mapZoom")},{id:this.model.get("mapHeightSettingId"),type:"slider",label:App.t("shared_views.settings.height","Height"),minValue:100,maxValue:500,units:"px",value:this.model.get("mapHeight")}]},getFormTypeSetting:function e(){var t=[{id:this.model.get("formLabelId"),type:"text",label:App.t("widgets.profile.formtitle_label","Form Title"),value:this.model.get("formLabel")},{id:this.model.get("formTitleSettingId"),type:"text",label:App.t("widgets.contactform.email_title","Email Title"),value:this.model.get("formTitle")},{id:this.model.get("emailPlaceholderSettingId"),type:"text",label:App.t("widgets.signupform.label_placeholder","Email placeholder"),value:this.model.get("emailPlaceholder")},{id:this.model.get("formButtonSettingId"),type:"advancedtextbox",label:App.t("widgets.contactform.btntext","Button Text"),value:this.model.get("formText"),bold:this.model.get("formBold"),italic:this.model.get("formItalic"),size:this.model.get("formFontSize")},{id:this.model.get("formEmailSettingId"),type:"text",inputType:"email",label:App.t("widgets.profile.form_email","Profile Email"),value:this.model.get("email")},{id:this.model.get("goalUrlSettingId"),type:"datasourcechooser",label:App.t("widgets.contactform.goal_label","Success Page"),requireValidation:true,value:this.model.get("goalUrl"),data:(0,a.getActiveLanguageInternalPages)()}];u()&&t.push({id:this.model.get("privacyLabelId"),type:"text",label:App.t("widgets.profile.privacy_label","Privacy Label"),placeholder:App.t("widgets.profile.privacy_label_placeholder","eg. I agree to the use..."),value:this.model.get("privacyLabel")});return t},getSocialiconsTypeSetting:function e(){var t=[{id:this.model.get("socialIconsLinkedinSettingId"),label:App.t("widgets.socialicons.linkedin","LinkedIn"),requireValidation:true,type:"text",placeholder:App.t("widgets.linkedinprofile.profileurl_placeholder","eg. www.linkedin.com/in/yourname"),value:this.model.get("socialIconsLinkedin")},{id:this.model.get("socialIconsTwitterSettingId"),label:App.t("widgets.socialicons.twitter","Twitter"),placeholder:App.t("widgets.twitter.search_placeholder","eg. coffee"),type:"text",value:this.model.get("socialIconsTwitter")},{id:this.model.get("socialIconsInstagramSettingId"),label:App.t("widgets.socialicons.instagram","Instagram"),placeholder:App.t("widgets.instagram.search_placeholder","eg. coffee"),type:"text",value:this.model.get("socialIconsInstagram")},{id:this.model.get("socialIconsPinterestSettingId"),label:App.t("widgets.socialicons.pinterest","Pinterest"),placeholder:App.t("widgets.pinterest.search_placeholder","eg. coffee"),type:"text",value:this.model.get("socialIconsPinterest")},{id:this.model.get("socialIconsFacebookSettingId"),label:App.t("widgets.socialicons.facebook","Facebook"),placeholder:App.t("widgets.profile.facebook_placeholder","eg. www.facebook.com/example"),requireValidation:true,type:"text",value:this.model.get("socialIconsFacebook")},{id:this.model.get("socialIconsRssSettingId"),label:App.t("widgets.socialicons.rss","RSS"),placeholder:App.t("widgets.profile.rss_placeholder","eg. http://www.example.com/rss"),requireValidation:true,type:"text",value:this.model.get("socialIconsRss")},{id:this.model.get("socialIconsVkontakteSettingId"),label:App.t("widgets.socialicons.vkontakte","VKontakte"),placeholder:App.t("widgets.profile.vkontakte_placeholder","eg. www.vk.com/example"),requireValidation:true,type:"text",value:this.model.get("socialIconsVkontakte")},{id:this.model.get("socialIconsXingSettingId"),label:App.t("widgets.socialicons.xing","Xing"),placeholder:App.t("widgets.profile.xing_placeholder","eg. www.xing.com/profile/your_name"),requireValidation:true,type:"text",value:this.model.get("socialIconsXing")}];l()&&t.push({id:this.model.get("socialIconsYoutubeSettingId"),label:App.t("widgets.socialicons.youtube","YouTube"),placeholder:App.t("widgets.profile.youtube_placeholder","eg. www.youtube.com/yourid"),requireValidation:true,type:"text",value:this.model.get("socialIconsYoutube")});return t},getSettings:function e(t){var r=null;switch(t){case"address":r=this.getAddressTypeSetting();break;case"email":r=this.getEmailTypeSetting();break;case"headline":r=this.getHeadlineTypeSetting();break;case"strapline":r=this.getStraplineTypeSetting();break;case"companydescription":r=this.getCompanydescriptionTypeSetting();break;case"phone":r=this.getPhoneTypeSetting();break;case"business":r=this.getBusinessTypeSetting();break;case"copyright":r=this.getCopyrightTypeSetting();break;case"twitter":r=this.getTwitterTypeSetting();break;case"map":r=this.getMapTypeSetting();break;case"form":r=this.getFormTypeSetting();break;case"socialicons":r=this.getSocialiconsTypeSetting();break}return r},renderSettingsByType:function e(){var t=this.getSettings(this.model.get("profileType"));var r=this.profileModel.changedAttributes(this.previousProfileModel);this.model.hasChanged()&&this.model.set(this.previousModel);if(this.settingsView){this.stopListening(this.settingsView,"profileSettings:change",this.settingChanged);this.settingsView.collection=new Backbone.Collection(t)}else this.settingsView=new i.default({collection:new Backbone.Collection(t),isRowsEnabled:this.isRowsEnabled});this.ui.settingsContainer.empty().append(this.settingsView.render().$el);this.listenTo(this.settingsView,"profileSettings:change",this.settingChanged);r&&this.profileModel.set(r)},settingChanged:function e(t){if(!this.isValidate(t))return;if(this.isEmpty(t))return;this.trigger("setting:change",t.id,t.value)},isRequired:function e(t){return Object.keys(c).includes(t)},isEmpty:function e(t){var e=false;var r=t.id.match(/widget-profile-([a-zA-Z-]+)/i)[1];var n="object"===s(t.value)?t.value.value:t.value;var i=this.settingsView.collection.get(t.id);var a=this.settingsView.children.findByModel(i);if(!this.isRequired(r))return false;if(0===n.length){i.set("error",App.t("widgets.profile.error_empty_".concat(r),c[r]));a.render();e=true;this.trigger("save:disable")}else{i.set("error","");a.render();e=false;this.trigger("save:enable")}return e},isValidate:function e(t){var e=true;var r="object"===s(t.value)?t.value.value:t.value;var n=t.id;var i=this.settingsView.collection.get(n);var a=this.settingsView.children.findByModel(i);var o=/^(http|ftp|ftps|https)$/i;var l=/^((http|ftp|ftps|https):\/\/)?[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?\^=%&amp;:\/~\+#]*[\w\-\@?\^=%&amp;\/~\+#])?$/i;if("object"===s(t.value)&&"undefined"!==typeof t.value.source&&"custom"!==t.value.source)return e;if(t.childView.model.get("requireValidation"))if(0===r.length||l.test(r)){0===r.length||o.test(r.match(l)[2])||("object"===s(t.value)?t.value.value="http://".concat(r):t.value="http://".concat(r));i.set("error","");a.render();a.el.querySelector(".js-input").focus();e=true;this.isRowsEnabled?Editor.Events.trigger("setting:save:validate"):this.trigger("save:validate")}else{i.set("error",App.t("widgets.socialicons.error_link","Please enter a URL"));a.render();a.el.querySelector(".js-input").focus();e=false;this.isRowsEnabled?Editor.Events.trigger("setting:save:disable",true):this.trigger("save:disable")}return e}});var f=t["default"]=d},59462:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({template:"view_settings_radiobutton",tagName:function e(){return this.options.isRowsEnabled?"fieldset":"div"},className:function e(){return this.options.isRowsEnabled?"popup-panel-form__field":"settings-radiobutton"},events:{"change input":"inputChanged"},initialize:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isRowsEnabled=t.isRowsEnabled||false;this._setTemplate();return this},_setTemplate:function e(){this.template=this.isRowsEnabled?"settings_radiobutton_component_v8r":"view_settings_radiobutton"},inputChanged:function e(t){this.trigger("setting:change",this.model.get("id"),t.currentTarget.value.trim())}});var n=t["default"]=r},75313:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(31170));function i(e){return e&&e.__esModule?e:{default:e}}var a=Marionette.ItemView.extend({template:"view_settings_row_layout",events:{"click .js-previous-layout":"previousClicked","click .js-next-layout":"nextClicked","change .js-radio-item":"itemChanged"},initialize:function e(){this.layouts=this.model.get("layouts");this.currentIndex=this.layouts.indexOf(this.model.get("currentLayout"));return this},unsetCheckedItem:function e(){var t=this.el.querySelector(".js-radio-item:checked");t.checked=false},checkRadioItem:function e(t){var r=this.el.querySelector(".js-radio-item[value=".concat(t,"]"));r.checked=true},updateLayout:function e(){this.trigger("setting:change","row-layout-changed",{layout:this.layouts[this.currentIndex]});n.default.container.Tracker.track("Section layout updated")},itemChanged:function e(t){this.currentIndex=this.layouts.indexOf(t.currentTarget.value);this.updateLayout()},previousClicked:function e(){this.currentIndex-1<0?this.currentIndex=this.layouts.length-1:this.currentIndex--;this.unsetCheckedItem();this.checkRadioItem(this.layouts[this.currentIndex]);this.updateLayout()},nextClicked:function e(){this.currentIndex+1>this.layouts.length-1?this.currentIndex=0:this.currentIndex++;this.unsetCheckedItem();this.checkRadioItem(this.layouts[this.currentIndex]);this.updateLayout()}});var o=t["default"]=a},74549:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(77527));function i(e){return e&&e.__esModule?e:{default:e}}var a=Marionette.ItemView.extend({template:"view_settings_section_gradient_picker",initialize:function e(){this.sectionGradients=this.model.get("sectionGradients");this.currentSectionGradient=this.model.get("currentSectionGradient");return this},onRender:function e(){this.openSectionGradientPanel()},openSectionGradientPanel:function e(){var t=new n.default({dialogStyle:"dialog__panel-style--green",sectionGradients:this.sectionGradients,currentSectionGradient:this.currentSectionGradient}).render();this.listenTo(t,"gradient:change",this._setSectionGradient.bind(this))},_setSectionGradient:function e(t){this.trigger("setting:change","row-section-gradient-changed",t);this.currentSectionGradient=t}});var o=t["default"]=a},48890:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(74807));function i(e){return e&&e.__esModule?e:{default:e}}var a=Marionette.ItemView.extend({template:"view_settings_section_height_picker",initialize:function e(){this.sectionHeights=this.model.get("sectionHeights");this.currentSectionHeight=this.model.get("currentSectionHeight");return this},onRender:function e(){this.openSectionHeightPanel()},openSectionHeightPanel:function e(){var t=new n.default({dialogStyle:"dialog__panel-style--green",sectionHeights:this.sectionHeights,currentSectionHeight:this.currentSectionHeight}).render();this.listenTo(t,"height:change",this._setSectionHeight.bind(this))},_setSectionHeight:function e(t){this.trigger("setting:change","row-section-height-changed",t);this.currentSectionHeight=t}});var o=t["default"]=a},58765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(10805));function i(e){return e&&e.__esModule?e:{default:e}}var a=Marionette.ItemView.extend({template:"view_settings_section_link_picker",initialize:function e(){this.pageUrl=this.model.get("pageUrl");this.sectionId=this.model.get("sectionId");return this},onRender:function e(){this.openSectionLinkPanel()},openSectionLinkPanel:function e(){var t=new n.default({dialogStyle:"dialog__panel-style--green",pageUrl:this.pageUrl,sectionId:this.sectionId}).render()}});var o=t["default"]=a},2498:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(69863));function i(e){return e&&e.__esModule?e:{default:e}}var a=Marionette.ItemView.extend({template:"view_settings_section_width_picker",initialize:function e(){this.sectionWidths=this.model.get("sectionWidths");this.currentSectionWidth=this.model.get("currentSectionWidth");return this},onRender:function e(){this.openSectionWidthPanel()},openSectionWidthPanel:function e(){var t=new n.default({dialogStyle:"dialog__panel-style--green",sectionWidths:this.sectionWidths,currentSectionWidth:this.currentSectionWidth}).render();this.listenTo(t,"width:change",this._setSectionWidth.bind(this))},_setSectionWidth:function e(t){this.trigger("setting:change","row-section-width-changed",t);this.currentSectionWidth=t}});var o=t["default"]=a},36634:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({className:function e(){var e=this.options.isRowsEnabled?"popup-panel-form__field":"settings-select";this.model.get("className")&&(e="".concat(e," ").concat(this.model.get("className")));return e},events:{"change .js-select":"selectChanged"},initialize:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isRowsEnabled=t.isRowsEnabled||false;this._setTemplate();return this},_setTemplate:function e(){this.template=this.isRowsEnabled?"settings_select_component_v8r":"view_settings_select"},selectChanged:function e(){this.trigger("setting:change",this.model.get("id"),this.el.querySelector(".js-select").value.trim())}});var n=t["default"]=r},50373:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(31170));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return u(e)||l(e)||s(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}function l(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e){if(Array.isArray(e))return c(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d="dark";var f="none";var p=Marionette.ItemView.extend({template:"view_settings_shape_divider",events:{"click .js-shape-divider-item":"shapeDividerClicked","click .js-shape-divider-color-option":"colorClicked"},initialize:function e(){this.shapeDividers=this.model.get("shapeDividers");this.currentShapeDividerIndex=this.shapeDividers.indexOf(this.model.get("currentShapeDivider"));this.currentShapeDividerColor=this.model.get("currentShapeDividerColor");this.styleSets=this.model.get("styleSets");return this},shapeDividerClicked:function e(t){if(this._isSelectedTypeAllowed(t.currentTarget.getAttribute("data-name"))){this.currentShapeDividerIndex=this.shapeDividers.indexOf(t.currentTarget.getAttribute("data-name"));"undefined"===typeof this.currentShapeDividerColor&&(this.currentShapeDividerColor=d);this._clearSelectedShapeDividerClasses();this._addSelectedShapeDividerClass(t.currentTarget);this._updateColorSwitchVisibility(this.shapeDividers[this.currentShapeDividerIndex]);this.updateShapeDivider();n.default.container.Tracker.track("Divider type selected",{shapeDividerType:this.shapeDividers[this.currentShapeDividerIndex]})}},colorClicked:function e(t){if(this._isSelectedColorAllowed(t.currentTarget.getAttribute("data-name"))){this.currentShapeDividerColor=t.currentTarget.getAttribute("data-name");this._clearSelectedColorClasses();this._addSelectedColorClass(t.currentTarget);this.updateShapeDivider();n.default.container.Tracker.track("Divider colour selected",{shapeDividerColour:this.currentShapeDividerColor})}},updateShapeDivider:function e(){this.trigger("setting:change","row-shape-divider-changed",{shapeDivider:this.shapeDividers[this.currentShapeDividerIndex],shapeDividerColor:this.currentShapeDividerColor})},_isSelectedColorAllowed:function e(t){return-1!==Object.keys(this.styleSets).indexOf(t)},_isSelectedTypeAllowed:function e(t){return-1!==this.shapeDividers.indexOf(t)},_clearSelectedShapeDividerClasses:function e(){a(this.el.querySelectorAll(".js-shape-divider-item")).forEach((function(e){e.classList.remove("is-current")}))},_addSelectedShapeDividerClass:function e(t){t.classList.add("is-current")},_clearSelectedColorClasses:function e(){a(this.el.querySelectorAll(".js-shape-divider-color-option")).forEach((function(e){e.classList.remove("is-current-color")}))},_addSelectedColorClass:function e(t){t.classList.add("is-current-color")},_updateColorSwitchVisibility:function e(t){var r=this.el.querySelector(".js-shape-divider-color-switch");t===f?r.setAttribute("hidden","true"):r.removeAttribute("hidden")}});var g=t["default"]=p},55196:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=i(r(35306));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var l=Marionette.ItemView.extend({template:"view_settings_site_logo",events:{"click .js-change-logo":"openImagePicker","click .js-remove-logo":"removeLogo"},initialize:function e(){this.listenTo(this.model,"change:imageSrc",this.render);return this},removeLogo:function e(){this.model.set("imageSrc",null);this.notifyChanges()},openImagePicker:function e(){this.imagesPanelView=new n.default({model:new BaseKit.Panels.Model({panel:"upload",parentPanel:void 0,subPanel:false,isSubPanel:false,showSaveBtn:false,title:App.t("shared_components.imagespanel.source_title","Image source")})}).render();this.listenTo(this.imagesPanelView,"asset:change",this.setAsset);this.listenTo(this.imagesPanelView,"asset:reset",this.resetAsset)},setAsset:function e(t){this.previousModel=this.model.clone().toJSON();this.model.set({imageSrc:t.url,fileName:t.fileName,fileSize:t.fileSize,imageHeight:t.imageHeight,imageWidth:t.imageWidth,path:t.path,description:"assets",title:"assets",ref:t.ref});this.notifyChanges()},resetAsset:function e(){if(this.previousModel){this.model.set(o({},this.previousModel));this.notifyChanges()}},notifyChanges:function e(){this.trigger("setting:change",this.model.get("id"),{positionTopPercentage:this.model.get("positionTopPercentage"),src:this.model.get("imageSrc"),url:this.model.get("imageSrc"),fileName:this.model.get("fileName"),fileSize:this.model.get("fileSize"),imageWidth:this.model.get("imageWidth"),imageHeight:this.model.get("imageHeight"),path:this.model.get("path"),imageSize:"".concat(this.model.get("imageWidth")," x ").concat(this.model.get("imageHeight")),description:this.model.get("description"),title:this.model.get("title"),assetRef:this.model.get("ref")})}});var u=t["default"]=l},27612:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({className:function e(){return this.options.isRowsEnabled?"popup-panel-form__field":"settings-slider"},events:{"change .js-input":"inputChanged"},initialize:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isRowsEnabled=t.isRowsEnabled||false;this._setTemplate();this.listenTo(this.model,"change",this.render);return this},_setTemplate:function e(){this.template=this.isRowsEnabled?"settings_slider_component_v8r":"view_settings_slider"},inputChanged:function e(){var t=this.el.querySelector(".js-input").value.trim();this.model.set("value",t);this.trigger("setting:change",this.model.get("id"),t)}});var n=t["default"]=r},49656:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=l(r(35306));var i=l(r(81960));var a=l(r(23778));var o=l(r(53995));var s=l(r(80377));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return p(e)||f(e)||d(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}function f(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function p(e){if(Array.isArray(e))return g(e)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h="is-selected";var v=Marionette.ItemView.extend({template:"view_settings_stylepicker",className:function e(){var e="settings-stylepicker";this.model.get("className")&&(e="".concat(e," ").concat(this.model.get("className")));return e},events:{"click .js-style-option":"styleClicked","click .js-image-option":"imageClicked","click .js-presets-option":"presetsClicked","click .js-replace-image-option":"replaceImageClicked","click .js-overlay-option":"overlayClicked","click .js-focal-point-option":"focalPointClicked","click .js-scroll-effects-option":"scrollEffectClicked"},initialize:function e(){this.defaultBackgroundPosition={left:"50%",top:"50%"};this.overlayColourType=this.model.get("overlayColourType");this.overlayColour=this.model.get("overlayColour");this.overlayOpacity=this.model.get("overlayOpacity");this.dominantColor=this.model.get("dominantColor");this.backgroundImageRef=this.model.get("backgroundImageRef");this.backgroundImage=this.model.get("backgroundImageSrc");this.backgroundPosition=this.model.get("backgroundPosition")||this.defaultBackgroundPosition;this.scrollEffect=this.model.get("scrollEffect");return this},onRender:function e(){this.cacheElements()},cacheElements:function e(){this.focalPointButton=this.el.querySelector(".js-focal-point-button");this.scrollEffectsButton=this.el.querySelector(".js-scroll-effects-button");this.overlayButton=this.el.querySelector(".js-overlay-button");this.editMode=this.el.querySelector(".js-style-edit-mode");this.presetsMode=this.el.querySelector(".js-style-presets-mode")},styleClicked:function e(t){this._clearSelectedStyleClasses();this._addSelectedStyleClass(t.currentTarget);document.querySelector(".js-section-gradient-tab").closest("li").removeAttribute("hidden");this.trigger("setting:change","row-style-changed",{styleName:t.currentTarget.getAttribute("data-name")});this._disableCustomiseButtons()},replaceImageClicked:function e(){var t=this;this.imagesPanelView=new n.default({model:new i.default({panel:"upload",title:App.t("shared_components.imagespanel.source_title","Image source")})}).render();this.listenTo(this.imagesPanelView,"asset:change",this.setAsset);this.listenTo(this.imagesPanelView,"close:images-panel",(function(){t.backgroundImage||t.presetsClicked()}))},imageClicked:function e(){if(!this._isImageStyleActive()&&this.backgroundImage){var t=this.backgroundPosition;this.setAsset({url:this.backgroundImage,ref:this.backgroundImageRef,dominantColor:this.dominantColor});this.setBackgroundPosition(t)}this._enableEditMode();document.querySelector(".js-section-gradient-tab").closest("li").setAttribute("hidden","");this.backgroundImage||this.replaceImageClicked()},presetsClicked:function e(){this._enablePresetsMode()},overlayClicked:function e(){if(!this._isOverlayButtonEnabled())return;this.overlayColourPanelView=new o.default({styleSets:this.model.get("styleSets"),overlayColour:this.overlayColour,overlayColourType:this.overlayColourType,overlayOpacity:this.overlayOpacity}).render();this.listenTo(this.overlayColourPanelView,"overlay:change",this.setOverlaySettings.bind(this));this.listenTo(this.overlayColourPanelView,"opacity:drag",this.updateOverlayOpacity.bind(this))},focalPointClicked:function e(){if(!this._isFocalPointButtonEnabled())return;this.imageFocusPanelView=new a.default({backgroundImage:this.backgroundImage,backgroundPosition:this.backgroundPosition}).render();this.listenTo(this.imageFocusPanelView,"focus:change",this.setBackgroundPosition)},scrollEffectClicked:function e(){if(!this._isScrollEffectsButtonEnabled())return;this.scrollEffectsPanel=new s.default({dialogStyle:"dialog__panel-style--green",effects:this.model.get("effects"),scrollEffect:this.scrollEffect}).render();this.listenTo(this.scrollEffectsPanel,"scrollEffect:change",this.setScrollEffect.bind(this))},setAsset:function e(t){this._clearSelectedStyleClasses();this._addSelectedStyleClass(this.el.querySelector(".js-image-option"));this.trigger("setting:change","row-image-changed",{asset:t,backgroundPosition:this.defaultBackgroundPosition});this.backgroundImage=t.url;this.backgroundPosition=this.defaultBackgroundPosition;this._enableCustomiseButtons()},setBackgroundPosition:function e(t){this.trigger("setting:change","row-background-position-changed",{backgroundPosition:t});this.backgroundPosition=t},setScrollEffect:function e(t){this.trigger("setting:change","row-scroll-effect-changed",t);this.scrollEffect=t},setOverlaySettings:function e(t){this.trigger("setting:change","row-overlay-changed",{overlayColour:t.overlayColour,overlayColourType:t.overlayColourType,overlayOpacity:t.overlayOpacity});this.overlayColour=t.overlayColour;this.overlayColourType=t.overlayColourType;this.overlayOpacity=t.overlayOpacity},updateOverlayOpacity:function e(t){this.trigger("setting:update","row-overlay-opacity-changed",{overlayOpacity:t});this.overlayOpacity=t},_addSelectedStyleClass:function e(t){t.classList.add(h)},_clearSelectedStyleClasses:function e(){u(this.el.querySelectorAll(".js-style-option, .js-image-option")).forEach((function(e){e.classList.remove(h)}))},_isImageStyleActive:function e(){return this.el.querySelector(".js-image-option").classList.contains("is-selected")},_isFocalPointButtonEnabled:function e(){return!this.focalPointButton.disabled},_isScrollEffectsButtonEnabled:function e(){return!this.scrollEffectsButton.disabled},_isOverlayButtonEnabled:function e(){return!this.overlayButton.disabled},_enableCustomiseButtons:function e(){this.overlayButton.disabled=false;this.focalPointButton.disabled=false;this.scrollEffectsButton.disabled=false},_disableCustomiseButtons:function e(){this.overlayButton.disabled=true;this.focalPointButton.disabled=true;this.scrollEffectsButton.disabled=true},_enableEditMode:function e(){this.presetsMode.setAttribute("hidden","true");this.editMode.removeAttribute("hidden")},_enablePresetsMode:function e(){this.editMode.setAttribute("hidden","true");this.presetsMode.removeAttribute("hidden")}});var m=t["default"]=v},28839:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=o(r(7948));var i=o(r(46345));var a=r(9878);function o(e){return e&&e.__esModule?e:{default:e}}var s=/^@[a-z0-9-_]*$/;var l=Marionette.ItemView.extend({activeItem:null,colourPicker:null,fontPicker:null,stylesCollection:null,events:{"click .js-section-list-button":"sectionListButtonClicked","click .js-back":"closeColourPalette","click .js-font-back":"closeFontOptions"},initialize:function e(t){this.styles=t.styles;this.stylesCollection=t.stylesCollection;this.fontListContents=t.fontListContents;this.allGoogleFonts=t.allGoogleFonts;this.presetAttributesCollection=t.presetAttributesCollection;this.rowsEnabled=t.rowsEnabled;this._setTemplate();return this},_setTemplate:function e(){this.template=this.rowsEnabled?"settings_widget_style_component_v8r":"view_settings_widget_style"},render:function e(){var t=this.convertStyleObjectsToJson();var r={styles:t};var n=Twig.render(Twig.templates[this.template],r);(0,a.emptyElement)(this.el);(0,a.append)(this.el,n);return this},replaceStyleVariablesWithColour:function e(t){var r=this;return t.map((function(e){e.value&&e.value.match(s)&&(e.value=r.getColourFromVariableName(e.value));return e}))},getColourFromVariableName:function e(t){var r="#000";var n;try{r=Editor.Site.Presets.getValueFromLessVar(t)}catch(e){n=this.stylesCollection.findWhere({name:t.substring(1)});if(!n)return r;r=n.get("value").match(s)?this.getColourFromVariableName(n.get("value")):n.get("value")}return r},viewReset:function e(t){this.styles=t.styles;this.stylesCollection=t.stylesCollection;this.fontListContents=t.fontListContents;this.allGoogleFonts=t.allGoogleFonts;return this},convertStyleObjectsToJson:function e(){var t=this;var r=_.clone(this.styles);Object.keys(r).forEach((function(e){r[e].styles=r[e].styles.map((function(e){return e.toJSON()}));r[e].styles=t.replaceStyleVariablesWithColour(r[e].styles);var n=r[e].styles.map((function(e){return e.type}));r[e].hasFont=n.indexOf("font")>-1}));return r},sectionListButtonClicked:function e(t){t.preventDefault();var r=t.currentTarget;var n=r.dataset.sectionName;var i=r.dataset.styleName;var a=r.dataset.styleType;var o=this.stylesCollection.findWhere({name:i});this.activeItem=r;"font"===a?this.showFontOptions(o,this.updateFont.bind(this)):this.showColourPicker(n,i)},getColourModel:function e(t){return this.stylesCollection.findWhere({name:t})},updateSampleColour:function e(t){this.activeItem.querySelector(".js-colour-preview").style.backgroundColor=t},updateFont:function e(){var t={templateStylePreprocessorVariables:this.stylesCollection.toProcessedJSON()};window.parent.fetch("/site-css-template-model/".concat(App.session.get("siteRef")),{credentials:"include",method:"POST",body:JSON.stringify(t),headers:{"X-CSRF-TOKEN":App.frontEndBucket.csrfToken}}).then((function(e){401===e.status&&Editor.Responsive.displaySessionTimeoutDialog();return e.text()})).then((function(e){Editor.Site.Dom.replaceCss(e);Editor.Site.Dom.cleanUpStyles()}))},colourChosen:function e(t,r){this.stylesCollection.findWhere({name:t}).set({value:r});this.stylesCollection.save();this.updateSampleColour(r)},showColourPicker:function e(t,r){var i=this;this.colourPicker=new n.default({el:".js-widget-colour-picker-contents",afterRender:function e(){return i.openColourPalette()},colourChosen:this.colourChosen.bind(this),showColourSet:this.rowsEnabled,colourSet:this.getColourSet()});this.colourPicker.setModel(this.getColourModel(r));this.colourPicker.render()},getColourSet:function e(){var t=this;return this.rowsEnabled?[{name:"light",attr:"@color--light"},{name:"dark",attr:"@color--dark"},{name:"accent",attr:"@color--accent"}].map((function(e){var r=t.presetAttributesCollection.findWhere({name:e.attr});e.background=r.get("value");return e})):[]},showFontOptions:function e(t,r){var n=this;this.fontPicker=new i.default({el:".js-widget-font-picker-contents",fontListContents:this.fontListContents,allGoogleFonts:this.allGoogleFonts,templateStylePreprocessorVariablesEnabled:true,rowsEnabled:this.rowsEnabled,afterRender:function e(){return n.openFontOptions()}});this.fontPicker.setModel(t);this.fontPicker.setFontChosen(r);this.fontPicker.render()},openColourPalette:function e(){var t=this;this.rowsEnabled||document.querySelector(".js-widget-property-panel").classList.remove("is-open");document.querySelector(".js-widget-styles-picker-container").classList.add("is-open");document.querySelector(".js-widget-colour-picker-container").classList.add("is-open");$(".js-widget-colour-picker-container").find(".js-back").off("click").on("click",(function(){return t.closeColourPalette()}));this.bindStylePickerBackstopEvent(this.closeColourPalette.bind(this))},closeColourPalette:function e(){this.rowsEnabled||document.querySelector(".js-widget-property-panel").classList.add("is-open");document.querySelector(".js-widget-styles-picker-container").classList.remove("is-open");document.querySelector(".js-widget-colour-picker-container").classList.remove("is-open");this.colourPicker.setElement(this.$(".js-colour-picker-wrapper"));this.colourPicker.destroy();this.colourPicker=null;this.unbindStylePickerBackstopEvent(this.closeHandler)},openFontOptions:function e(){var t=this;this.rowsEnabled||document.querySelector(".js-widget-property-panel").classList.remove("is-open");document.querySelector(".js-widget-styles-picker-container").classList.add("is-open");document.querySelector(".js-widget-font-picker-container").classList.add("is-open");$(".js-widget-font-picker-container").find(".js-font-back").off("click").on("click",(function(){return t.closeFontOptions()}));this.bindStylePickerBackstopEvent(this.closeFontOptions.bind(this))},closeFontOptions:function e(){this.rowsEnabled||document.querySelector(".js-widget-property-panel").classList.add("is-open");document.querySelector(".js-widget-styles-picker-container").classList.remove("is-open");document.querySelector(".js-widget-font-picker-container").classList.remove("is-open");this.fontPicker.setElement(this.$(".js-font-panel-wrapper"));this.fontPicker.destroy();this.fontPicker=null;this.unbindStylePickerBackstopEvent(this.closeHandler)},bindStylePickerBackstopEvent:function e(t){this.closeHandler=t;document.querySelector(".js-widget-styles-picker-backstop").addEventListener("click",this.closeHandler)},unbindStylePickerBackstopEvent:function e(t){t&&document.querySelector(".js-widget-styles-picker-backstop").removeEventListener("click",t)}});var u=t["default"]=l},10542:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=Marionette.ItemView.extend({className:function e(){return this.options.isRowsEnabled?"popup-panel-form__field":"settings-textarea"},events:{"change textarea":"textareaChanged"},initialize:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isRowsEnabled=t.isRowsEnabled||false;this._setTemplate();return this},_setTemplate:function e(){this.template=this.isRowsEnabled?"settings_textarea_component_v8r":"view_settings_textarea"},textareaChanged:function e(){var t=this.el.querySelector(".js-input").value.trim();this.model.set("value",t);this.trigger("setting:change",this.model.get("id"),t)}});var n=t["default"]=r},59741:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.widgetRegister=t.widgetRegister}i(e,[{key:"observeWidgets",value:function e(t){var r=this;this._createAdaptor();Object.keys(t).forEach((function(e){if(!r.widgets[e])return;Object.keys(t[e]).forEach((function(n){r.widgets[e].on(n,t[e][n])}))}))}},{key:"_createAdaptor",value:function e(){this.widgets={"main-widgets":this.widgetRegister.getZoneWidgetCollection(),"template-widgets":this.widgetRegister.getTemplateWidgetCollection()}}}]);return e}();var o=t["default"]=a},1351:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(7344);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function o(e,t,r){t&&a(e.prototype,t);r&&a(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var s=function(){function e(t){i(this,e);this.StdModelClass=t.StdModelClass}o(e,[{key:"transform",value:function e(t,r){var i=(0,n.getWidgetClass)({widgetType:t,type:"Model",StdClass:this.StdModelClass});if("function"!==typeof i.prototype.transformWidgetData)return r;return i.prototype.transformWidgetData(r)}}]);return e}();var l=t["default"]=s},92735:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=r(7344);var i=r(9709);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function c(e,t,r){t&&u(e.prototype,t);r&&u(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var d=function(){function e(t){l(this,e);this.StdModelClass=t.StdModelClass}c(e,[{key:"getDefaults",value:function e(t){var r;var a=(0,n.getWidgetClass)({widgetType:t,type:"Model",StdClass:this.StdModelClass});r=t.includes("widget.content")?a.prototype.defaults(t):i.AbstractWidgetData[t]?o({},i.AbstractWidgetData[t].defaults):a.prototype.defaults;return r}}]);return e}();var f=t["default"]=d},46415:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.widgetApi=t.widgetApi}i(e,[{key:"cloneZone",value:function e(t){this.widgetApi.cloneZone({name:t.name,pageRef:t.pageRef})}}]);return e}();var o=t["default"]=a},49529:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function i(e,t,r){t&&n(e.prototype,t);r&&n(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}var a=function(){function e(t){r(this,e);this.widgetApi=t.widgetApi}i(e,[{key:"restoreZone",value:function e(t){this.widgetApi.restoreZone({name:t.name,pageRef:t.pageRef})}}]);return e}();var o=t["default"]=a},93676:(e,t,r)=>{"use strict";r(15765);r(86704);r(12464);r(22066);r(15379);r(62396);r(28134);r(6076);r(87281);r(44313);r(72887);r(30978);r(82356);r(35800)},15765:(e,t,r)=>{r(93893);r(90985);r(94747);r(60833);r(69637);r(18426);r(18574);r(1417);r(50308);r(12026);r(24733);r(62259);r(58197);r(54234);r(62334);r(87202);r(68346);r(73505);r(10017);r(17360);r(9998);r(62103);r(31507);r(51636);r(80324);r(60376);r(28001);r(90664);r(75675);r(74353);r(52853);r(65149);r(35229);r(2059);r(59484);r(79491);r(90059);r(94193);r(39978);r(78592);r(77099);r(74056);r(80638);r(24591);r(84384);r(2524);r(93398);r(8319);r(53997);r(86778);r(85529);r(41602);r(27597);r(5567);r(18198);r(91115);r(77273);r(82215);r(84641);r(69689);r(91810);r(59156);r(77490);r(8068);r(56403);r(59081);r(41074);r(40247);r(73933);r(74038);r(2706);r(76164);r(83325);r(13618);r(23087);r(5870);r(93612);r(54248);r(78550);r(89778);r(25628);r(591);r(45264);r(69337);r(6144);r(19190);r(5007);r(46763);r(75888);r(66436);r(12813);r(95858);r(64699);r(84924);r(10134);r(26218);r(24898);r(47484);r(96554);r(22744);r(79970);r(48434);r(29041);r(58656);r(5443);r(74509);r(11894);r(48682);r(31988);r(85190);r(58142);r(57383);r(31670);r(31295);r(94863);r(34503);r(24877);r(40049);r(61953);r(52515);r(99512);r(20994);r(11682);r(91410);r(37382);r(32163);r(35163);r(59076);r(1430);r(63099);r(11962);r(53130);r(35420);r(1438);r(72197);r(14173);r(91585);r(91787);e.exports=r(23311)},12464:(e,t,r)=>{r(13403);e.exports=r(23311).Array.flatMap},86704:(e,t,r)=>{r(8300);e.exports=r(23311).Array.includes},72887:(e,t,r)=>{r(82062);e.exports=r(23311).Object.entries},87281:(e,t,r)=>{r(41733);e.exports=r(23311).Object.getOwnPropertyDescriptors},44313:(e,t,r)=>{r(51326);e.exports=r(23311).Object.values},30978:(e,t,r)=>{"use strict";r(31988);r(24679);e.exports=r(23311).Promise["finally"]},15379:(e,t,r)=>{r(71882);e.exports=r(23311).String.padEnd},22066:(e,t,r)=>{r(29743);e.exports=r(23311).String.padStart},28134:(e,t,r)=>{r(77511);e.exports=r(23311).String.trimRight},62396:(e,t,r)=>{r(17634);e.exports=r(23311).String.trimLeft},6076:(e,t,r)=>{r(78770);e.exports=r(6613).f("asyncIterator")},48306:(e,t,r)=>{r(50718);e.exports=r(60893).global},90013:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},85257:(e,t,r)=>{var n=r(80706);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},60893:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},16520:(e,t,r)=>{var n=r(90013);e.exports=function(e,t,r){n(e);if(void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},62887:(e,t,r)=>{e.exports=!r(4069)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},67256:(e,t,r)=>{var n=r(80706);var i=r(31121).document;var a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},54420:(e,t,r)=>{var n=r(31121);var i=r(60893);var a=r(16520);var o=r(14497);var s=r(8985);var l="prototype";var u=function(e,t,r){var c=e&u.F;var d=e&u.G;var f=e&u.S;var p=e&u.P;var g=e&u.B;var h=e&u.W;var v=d?i:i[t]||(i[t]={});var m=v[l];var y=d?n:f?n[t]:(n[t]||{})[l];var b,w,_;d&&(r=t);for(b in r){w=!c&&y&&void 0!==y[b];if(w&&s(v,b))continue;_=w?y[b]:r[b];v[b]=d&&"function"!=typeof y[b]?r[b]:g&&w?a(_,n):h&&y[b]==_?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};t[l]=e[l];return t}(_):p&&"function"==typeof _?a(Function.call,_):_;if(p){(v.virtual||(v.virtual={}))[b]=_;e&u.R&&m&&!m[b]&&o(m,b,_)}}};u.F=1;u.G=2;u.S=4;u.P=8;u.B=16;u.W=32;u.U=64;u.R=128;e.exports=u},4069:e=>{e.exports=function(e){try{return!!e()}catch(e){return true}}},31121:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},8985:e=>{var t={}.hasOwnProperty;e.exports=function(e,r){return t.call(e,r)}},14497:(e,t,r)=>{var n=r(18626);var i=r(80662);e.exports=r(62887)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){e[t]=r;return e}},17134:(e,t,r)=>{e.exports=!r(62887)&&!r(4069)((function(){return 7!=Object.defineProperty(r(67256)("div"),"a",{get:function(){return 7}}).a}))},80706:e=>{e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},18626:(e,t,r)=>{var n=r(85257);var i=r(17134);var a=r(27554);var o=Object.defineProperty;t.f=r(62887)?Object.defineProperty:function e(t,r,s){n(t);r=a(r,true);n(s);if(i)try{return o(t,r,s)}catch(e){}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");"value"in s&&(t[r]=s.value);return t}},80662:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},27554:(e,t,r)=>{var n=r(80706);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},50718:(e,t,r)=>{var n=r(54420);n(n.G,{global:r(31121)})},98272:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},56774:(e,t,r)=>{var n=r(80934);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},81738:(e,t,r)=>{var n=r(73060)("unscopables");var i=Array.prototype;void 0==i[n]&&r(21098)(i,n,{});e.exports=function(e){i[n][e]=true}},18694:(e,t,r)=>{"use strict";var n=r(66416)(true);e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},17888:e=>{e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},55001:(e,t,r)=>{var n=r(49995);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},30631:(e,t,r)=>{"use strict";var n=r(20233);var i=r(25446);var a=r(41435);e.exports=[].copyWithin||function e(t,r){var o=n(this);var s=a(o.length);var l=i(t,s);var u=i(r,s);var c=arguments.length>2?arguments[2]:void 0;var d=Math.min((void 0===c?s:i(c,s))-u,s-l);var f=1;if(u<l&&l<u+d){f=-1;u+=d-1;l+=d-1}while(d-- >0){u in o?o[l]=o[u]:delete o[l];l+=f;u+=f}return o}},96792:(e,t,r)=>{"use strict";var n=r(20233);var i=r(25446);var a=r(41435);e.exports=function e(t){var r=n(this);var o=a(r.length);var s=arguments.length;var l=i(s>1?arguments[1]:void 0,o);var u=s>2?arguments[2]:void 0;var c=void 0===u?o:i(u,o);while(c>l)r[l++]=t;return r}},93263:(e,t,r)=>{var n=r(65047);var i=r(41435);var a=r(25446);e.exports=function(e){return function(t,r,o){var s=n(t);var l=i(s.length);var u=a(o,l);var c;if(e&&r!=r)while(l>u){c=s[u++];if(c!=c)return true}else for(;l>u;u++)if((e||u in s)&&s[u]===r)return e||u||0;return!e&&-1}}},16754:(e,t,r)=>{var n=r(14975);var i=r(4587);var a=r(20233);var o=r(41435);var s=r(81311);e.exports=function(e,t){var r=1==e;var l=2==e;var u=3==e;var c=4==e;var d=6==e;var f=5==e||d;var p=t||s;return function(t,s,g){var h=a(t);var v=i(h);var m=n(s,g,3);var y=o(v.length);var b=0;var w=r?p(t,y):l?p(t,0):void 0;var _,S;for(;y>b;b++)if(f||b in v){_=v[b];S=m(_,b,h);if(e)if(r)w[b]=S;else if(S)switch(e){case 3:return true;case 5:return _;case 6:return b;case 2:w.push(_)}else if(c)return false}return d?-1:u||c?c:w}}},4120:(e,t,r)=>{var n=r(98272);var i=r(20233);var a=r(4587);var o=r(41435);e.exports=function(e,t,r,s,l){n(t);var u=i(e);var c=a(u);var d=o(u.length);var f=l?d-1:0;var p=l?-1:1;if(r<2)for(;;){if(f in c){s=c[f];f+=p;break}f+=p;if(l?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;l?f>=0:d>f;f+=p)f in c&&(s=t(s,c[f],f,u));return s}},69108:(e,t,r)=>{var n=r(49995);var i=r(21318);var a=r(73060)("species");e.exports=function(e){var t;if(i(e)){t=e.constructor;"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0);if(n(t)){t=t[a];null===t&&(t=void 0)}}return void 0===t?Array:t}},81311:(e,t,r)=>{var n=r(69108);e.exports=function(e,t){return new(n(e))(t)}},93723:(e,t,r)=>{"use strict";var n=r(98272);var i=r(49995);var a=r(13742);var o=[].slice;var s={};var l=function(e,t,r){if(!(t in s)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";s[t]=Function("F,a","return new F("+n.join(",")+")")}return s[t](e,r)};e.exports=Function.bind||function e(t){var r=n(this);var s=o.call(arguments,1);var u=function(){var e=s.concat(o.call(arguments));return this instanceof u?l(r,e.length,e):a(r,e,t)};i(r.prototype)&&(u.prototype=r.prototype);return u}},51787:(e,t,r)=>{var n=r(80934);var i=r(73060)("toStringTag");var a="Arguments"==n(function(){return arguments}());var o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=o(t=Object(e),i))?r:a?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},80934:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},27421:(e,t,r)=>{"use strict";var n=r(68487).f;var i=r(42602);var a=r(92181);var o=r(14975);var s=r(17888);var l=r(5271);var u=r(21866);var c=r(29918);var d=r(68354);var f=r(17536);var p=r(39278).fastKey;var g=r(66756);var h=f?"_s":"size";var v=function(e,t){var r=p(t);var n;if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,r,u){var c=e((function(e,n){s(e,c,t,"_i");e._t=t;e._i=i(null);e._f=void 0;e._l=void 0;e[h]=0;void 0!=n&&l(n,r,e[u],e)}));a(c.prototype,{clear:function e(){for(var r=g(this,t),n=r._i,i=r._f;i;i=i.n){i.r=true;i.p&&(i.p=i.p.n=void 0);delete n[i.i]}r._f=r._l=void 0;r[h]=0},delete:function(e){var r=g(this,t);var n=v(r,e);if(n){var i=n.n;var a=n.p;delete r._i[n.i];n.r=true;a&&(a.n=i);i&&(i.p=a);r._f==n&&(r._f=i);r._l==n&&(r._l=a);r[h]--}return!!n},forEach:function e(r){g(this,t);var n=o(r,arguments.length>1?arguments[1]:void 0,3);var i;while(i=i?i.n:this._f){n(i.v,i.k,this);while(i&&i.r)i=i.p}},has:function e(r){return!!v(g(this,t),r)}});f&&n(c.prototype,"size",{get:function(){return g(this,t)[h]}});return c},def:function(e,t,r){var n=v(e,t);var i,a;if(n)n.v=r;else{e._l=n={i:a=p(t,true),k:t,v:r,p:i=e._l,n:void 0,r:false};e._f||(e._f=n);i&&(i.n=n);e[h]++;"F"!==a&&(e._i[a]=n)}return e},getEntry:v,setStrong:function(e,t,r){u(e,t,(function(e,r){this._t=g(e,t);this._k=r;this._l=void 0}),(function(){var e=this;var t=e._k;var r=e._l;while(r&&r.r)r=r.p;if(!e._t||!(e._l=r=r?r.n:e._t._f)){e._t=void 0;return c(1)}if("keys"==t)return c(0,r.k);if("values"==t)return c(0,r.v);return c(0,[r.k,r.v])}),r?"entries":"values",!r,true);d(t)}}},40062:(e,t,r)=>{"use strict";var n=r(92181);var i=r(39278).getWeak;var a=r(55001);var o=r(49995);var s=r(17888);var l=r(5271);var u=r(16754);var c=r(93817);var d=r(66756);var f=u(5);var p=u(6);var g=0;var h=function(e){return e._l||(e._l=new v)};var v=function(){this.a=[]};var m=function(e,t){return f(e.a,(function(e){return e[0]===t}))};v.prototype={get:function(e){var t=m(this,e);if(t)return t[1]},has:function(e){return!!m(this,e)},set:function(e,t){var r=m(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,(function(t){return t[0]===e}));~t&&this.a.splice(t,1);return!!~t}};e.exports={getConstructor:function(e,t,r,a){var u=e((function(e,n){s(e,u,t,"_i");e._t=t;e._i=g++;e._l=void 0;void 0!=n&&l(n,r,e[a],e)}));n(u.prototype,{delete:function(e){if(!o(e))return false;var r=i(e);if(true===r)return h(d(this,t))["delete"](e);return r&&c(r,this._i)&&delete r[this._i]},has:function e(r){if(!o(r))return false;var n=i(r);if(true===n)return h(d(this,t)).has(r);return n&&c(n,this._i)}});return u},def:function(e,t,r){var n=i(a(t),true);true===n?h(e).set(t,r):n[e._i]=r;return e},ufstore:h}},31960:(e,t,r)=>{"use strict";var n=r(30788);var i=r(6585);var a=r(95728);var o=r(92181);var s=r(39278);var l=r(5271);var u=r(17888);var c=r(49995);var d=r(85195);var f=r(63969);var p=r(20722);var g=r(34490);e.exports=function(e,t,r,h,v,m){var y=n[e];var b=y;var w=v?"set":"add";var _=b&&b.prototype;var S={};var P=function(e){var t=_[e];a(_,e,"delete"==e?function(e){return!(m&&!c(e))&&t.call(this,0===e?0:e)}:"has"==e?function e(r){return!(m&&!c(r))&&t.call(this,0===r?0:r)}:"get"==e?function e(r){return m&&!c(r)?void 0:t.call(this,0===r?0:r)}:"add"==e?function e(r){t.call(this,0===r?0:r);return this}:function e(r,n){t.call(this,0===r?0:r,n);return this})};if("function"==typeof b&&(m||_.forEach&&!d((function(){(new b).entries().next()})))){var E=new b;var k=E[w](m?{}:-0,1)!=E;var C=d((function(){E.has(1)}));var O=f((function(e){new b(e)}));var A=!m&&d((function(){var e=new b;var t=5;while(t--)e[w](t,t);return!e.has(-0)}));if(!O){b=t((function(t,r){u(t,b,e);var n=g(new y,t,b);void 0!=r&&l(r,v,n[w],n);return n}));b.prototype=_;_.constructor=b}if(C||A){P("delete");P("has");v&&P("get")}(A||k)&&P(w);m&&_.clear&&delete _.clear}else{b=h.getConstructor(t,e,v,w);o(b.prototype,r);s.NEED=true}p(b,e);S[e]=b;i(i.G+i.W+i.F*(b!=y),S);m||h.setStrong(b,e,v);return b}},23311:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},21519:(e,t,r)=>{"use strict";var n=r(68487);var i=r(88902);e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},14975:(e,t,r)=>{var n=r(98272);e.exports=function(e,t,r){n(e);if(void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},81658:(e,t,r)=>{"use strict";var n=r(85195);var i=Date.prototype.getTime;var a=Date.prototype.toISOString;var o=function(e){return e>9?e:"0"+e};e.exports=n((function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-50000000000001))}))||!n((function(){a.call(new Date(NaN))}))?function e(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this;var r=t.getUTCFullYear();var n=t.getUTCMilliseconds();var a=r<0?"-":r>9999?"+":"";return a+("00000"+Math.abs(r)).slice(a?-6:-4)+"-"+o(t.getUTCMonth()+1)+"-"+o(t.getUTCDate())+"T"+o(t.getUTCHours())+":"+o(t.getUTCMinutes())+":"+o(t.getUTCSeconds())+"."+(n>99?n:"0"+o(n))+"Z"}:a},68490:(e,t,r)=>{"use strict";var n=r(55001);var i=r(92208);var a="number";e.exports=function(e){if("string"!==e&&e!==a&&"default"!==e)throw TypeError("Incorrect hint");return i(n(this),e!=a)}},10271:e=>{e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},17536:(e,t,r)=>{e.exports=!r(85195)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},19988:(e,t,r)=>{var n=r(49995);var i=r(30788).document;var a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},27831:e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},45938:(e,t,r)=>{var n=r(59557);var i=r(14070);var a=r(73799);e.exports=function(e){var t=n(e);var r=i.f;if(r){var o=r(e);var s=a.f;var l=0;var u;while(o.length>l)s.call(e,u=o[l++])&&t.push(u)}return t}},6585:(e,t,r)=>{var n=r(30788);var i=r(23311);var a=r(21098);var o=r(95728);var s=r(14975);var l="prototype";var u=function(e,t,r){var c=e&u.F;var d=e&u.G;var f=e&u.S;var p=e&u.P;var g=e&u.B;var h=d?n:f?n[t]||(n[t]={}):(n[t]||{})[l];var v=d?i:i[t]||(i[t]={});var m=v[l]||(v[l]={});var y,b,w,_;d&&(r=t);for(y in r){b=!c&&h&&void 0!==h[y];w=(b?h:r)[y];_=g&&b?s(w,n):p&&"function"==typeof w?s(Function.call,w):w;h&&o(h,y,w,e&u.U);v[y]!=w&&a(v,y,_);p&&m[y]!=w&&(m[y]=w)}};n.core=i;u.F=1;u.G=2;u.S=4;u.P=8;u.B=16;u.W=32;u.U=64;u.R=128;e.exports=u},74587:(e,t,r)=>{var n=r(73060)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{t[n]=false;return!"/./"[e](t)}catch(e){}}return true}},85195:e=>{e.exports=function(e){try{return!!e()}catch(e){return true}}},40180:(e,t,r)=>{"use strict";r(48434);var n=r(95728);var i=r(21098);var a=r(85195);var o=r(10271);var s=r(73060);var l=r(73802);var u=s("species");var c=!a((function(){var e=/./;e.exec=function(){var e=[];e.groups={a:"7"};return e};return"7"!=="".replace(e,"$<a>")}));var d=function(){var e=/(?:)/;var t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var f=s(e);var p=!a((function(){var t={};t[f]=function(){return 7};return 7!=""[e](t)}));var g=p?!a((function(){var t=false;var r=/a/;r.exec=function(){t=true;return null};if("split"===e){r.constructor={};r.constructor[u]=function(){return r}}r[f]("");return!t})):void 0;if(!p||!g||"replace"===e&&!c||"split"===e&&!d){var h=/./[f];var v=r(o,f,""[e],(function e(t,r,n,i,a){if(r.exec===l){if(p&&!a)return{done:true,value:h.call(r,n,i)};return{done:true,value:t.call(n,r,i)}}return{done:false}}));var m=v[0];var y=v[1];n(String.prototype,e,m);i(RegExp.prototype,f,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}}},12308:(e,t,r)=>{"use strict";var n=r(55001);e.exports=function(){var e=n(this);var t="";e.global&&(t+="g");e.ignoreCase&&(t+="i");e.multiline&&(t+="m");e.unicode&&(t+="u");e.sticky&&(t+="y");return t}},54455:(e,t,r)=>{"use strict";var n=r(21318);var i=r(49995);var a=r(41435);var o=r(14975);var s=r(73060)("isConcatSpreadable");function l(e,t,r,u,c,d,f,p){var g=c;var h=0;var v=!!f&&o(f,p,3);var m,y;while(h<u){if(h in r){m=v?v(r[h],h,t):r[h];y=false;if(i(m)){y=m[s];y=void 0!==y?!!y:n(m)}if(y&&d>0)g=l(e,t,m,a(m.length),g,d-1)-1;else{if(g>=9007199254740991)throw TypeError();e[g]=m}g++}h++}return g}e.exports=l},5271:(e,t,r)=>{var n=r(14975);var i=r(51934);var a=r(23547);var o=r(55001);var s=r(41435);var l=r(39128);var u={};var c={};var d=e.exports=function(e,t,r,d,f){var p=f?function(){return e}:l(e);var g=n(r,d,t?2:1);var h=0;var v,m,y,b;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(a(p))for(v=s(e.length);v>h;h++){b=t?g(o(m=e[h])[0],m[1]):g(e[h]);if(b===u||b===c)return b}else for(y=p.call(e);!(m=y.next()).done;){b=i(y,g,m.value,t);if(b===u||b===c)return b}};d.BREAK=u;d.RETURN=c},88739:(e,t,r)=>{e.exports=r(5075)("native-function-to-string",Function.toString)},30788:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},93817:e=>{var t={}.hasOwnProperty;e.exports=function(e,r){return t.call(e,r)}},21098:(e,t,r)=>{var n=r(68487);var i=r(88902);e.exports=r(17536)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){e[t]=r;return e}},43865:(e,t,r)=>{var n=r(30788).document;e.exports=n&&n.documentElement},30035:(e,t,r)=>{e.exports=!r(17536)&&!r(85195)((function(){return 7!=Object.defineProperty(r(19988)("div"),"a",{get:function(){return 7}}).a}))},34490:(e,t,r)=>{var n=r(49995);var i=r(10801).set;e.exports=function(e,t,r){var a=t.constructor;var o;a!==r&&"function"==typeof a&&(o=a.prototype)!==r.prototype&&n(o)&&i&&i(e,o);return e}},13742:e=>{e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},4587:(e,t,r)=>{var n=r(80934);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},23547:(e,t,r)=>{var n=r(80798);var i=r(73060)("iterator");var a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},21318:(e,t,r)=>{var n=r(80934);e.exports=Array.isArray||function e(t){return"Array"==n(t)}},17960:(e,t,r)=>{var n=r(49995);var i=Math.floor;e.exports=function e(t){return!n(t)&&isFinite(t)&&i(t)===t}},49995:e=>{e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},24825:(e,t,r)=>{var n=r(49995);var i=r(80934);var a=r(73060)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},51934:(e,t,r)=>{var n=r(55001);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var a=e["return"];void 0!==a&&n(a.call(e));throw t}}},7149:(e,t,r)=>{"use strict";var n=r(42602);var i=r(88902);var a=r(20722);var o={};r(21098)(o,r(73060)("iterator"),(function(){return this}));e.exports=function(e,t,r){e.prototype=n(o,{next:i(1,r)});a(e,t+" Iterator")}},21866:(e,t,r)=>{"use strict";var n=r(73520);var i=r(6585);var a=r(95728);var o=r(21098);var s=r(80798);var l=r(7149);var u=r(20722);var c=r(37e3);var d=r(73060)("iterator");var f=!([].keys&&"next"in[].keys());var p="@@iterator";var g="keys";var h="values";var v=function(){return this};e.exports=function(e,t,r,m,y,b,w){l(r,t,m);var _=function(e){if(!f&&e in k)return k[e];switch(e){case g:return function t(){return new r(this,e)};case h:return function t(){return new r(this,e)}}return function t(){return new r(this,e)}};var S=t+" Iterator";var P=y==h;var E=false;var k=e.prototype;var C=k[d]||k[p]||y&&k[y];var O=C||_(y);var A=y?P?_("entries"):O:void 0;var T="Array"==t&&k.entries||C;var j,D,L;if(T){L=c(T.call(new e));if(L!==Object.prototype&&L.next){u(L,S,true);n||"function"==typeof L[d]||o(L,d,v)}}if(P&&C&&C.name!==h){E=true;O=function e(){return C.call(this)}}n&&!w||!f&&!E&&k[d]||o(k,d,O);s[t]=O;s[S]=v;if(y){j={values:P?O:_(h),keys:b?O:_(g),entries:A};if(w)for(D in j)D in k||a(k,D,j[D]);else i(i.P+i.F*(f||E),t,j)}return j}},63969:(e,t,r)=>{var n=r(73060)("iterator");var i=false;try{var a=[7][n]();a["return"]=function(){i=true};Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return false;var r=false;try{var a=[7];var o=a[n]();o.next=function(){return{done:r=true}};a[n]=function(){return o};e(a)}catch(e){}return r}},29918:e=>{e.exports=function(e,t){return{value:t,done:!!e}}},80798:e=>{e.exports={}},73520:e=>{e.exports=false},50086:e=>{var t=Math.expm1;e.exports=!t||t(10)>22025.465794806718||t(10)<22025.465794806718||-2e-17!=t(-2e-17)?function e(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:t},82787:(e,t,r)=>{var n=r(43533);var i=Math.pow;var a=i(2,-52);var o=i(2,-23);var s=i(2,127)*(2-o);var l=i(2,-126);var u=function(e){return e+1/a-1/a};e.exports=Math.fround||function e(t){var r=Math.abs(t);var i=n(t);var c,d;if(r<l)return i*u(r/l/o)*l*o;c=(1+o/a)*r;d=c-(c-r);if(d>s||d!=d)return Infinity*i;return i*d}},43072:e=>{e.exports=Math.log1p||function e(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},43533:e=>{e.exports=Math.sign||function e(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},39278:(e,t,r)=>{var n=r(12463)("meta");var i=r(49995);var a=r(93817);var o=r(68487).f;var s=0;var l=Object.isExtensible||function(){return true};var u=!r(85195)((function(){return l(Object.preventExtensions({}))}));var c=function(e){o(e,n,{value:{i:"O"+ ++s,w:{}}})};var d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[n].i};var f=function(e,t){if(!a(e,n)){if(!l(e))return true;if(!t)return false;c(e)}return e[n].w};var p=function(e){u&&g.NEED&&l(e)&&!a(e,n)&&c(e);return e};var g=e.exports={KEY:n,NEED:false,fastKey:d,getWeak:f,onFreeze:p}},23943:(e,t,r)=>{var n=r(30788);var i=r(99498).set;var a=n.MutationObserver||n.WebKitMutationObserver;var o=n.process;var s=n.Promise;var l="process"==r(80934)(o);e.exports=function(){var e,t,r;var u=function(){var n,i;l&&(n=o.domain)&&n.exit();while(e){i=e.fn;e=e.next;try{i()}catch(n){e?r():t=void 0;throw n}}t=void 0;n&&n.enter()};if(l)r=function(){o.nextTick(u)};else if(!a||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);r=function(){c.then(u)}}else r=function(){i.call(n,u)};else{var d=true;var f=document.createTextNode("");new a(u).observe(f,{characterData:true});r=function(){f.data=d=!d}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i);if(!e){e=i;r()}t=i}}},54282:(e,t,r)=>{"use strict";var n=r(98272);function i(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e;r=n}));this.resolve=n(t);this.reject=n(r)}e.exports.f=function(e){return new i(e)}},69463:(e,t,r)=>{"use strict";var n=r(17536);var i=r(59557);var a=r(14070);var o=r(73799);var s=r(20233);var l=r(4587);var u=Object.assign;e.exports=!u||r(85195)((function(){var e={};var t={};var r=Symbol();var n="abcdefghijklmnopqrst";e[r]=7;n.split("").forEach((function(e){t[e]=e}));return 7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n}))?function e(t,r){var u=s(t);var c=arguments.length;var d=1;var f=a.f;var p=o.f;while(c>d){var g=l(arguments[d++]);var h=f?i(g).concat(f(g)):i(g);var v=h.length;var m=0;var y;while(v>m){y=h[m++];n&&!p.call(g,y)||(u[y]=g[y])}}return u}:u},42602:(e,t,r)=>{var n=r(55001);var i=r(59097);var a=r(27831);var o=r(69117)("IE_PROTO");var s=function(){};var l="prototype";var u=function(){var e=r(19988)("iframe");var t=a.length;var n="<";var i=">";var o;e.style.display="none";r(43865).appendChild(e);e.src="javascript:";o=e.contentWindow.document;o.open();o.write(n+"script"+i+"document.F=Object"+n+"/script"+i);o.close();u=o.F;while(t--)delete u[l][a[t]];return u()};e.exports=Object.create||function e(t,r){var a;if(null!==t){s[l]=n(t);a=new s;s[l]=null;a[o]=t}else a=u();return void 0===r?a:i(a,r)}},68487:(e,t,r)=>{var n=r(55001);var i=r(30035);var a=r(92208);var o=Object.defineProperty;t.f=r(17536)?Object.defineProperty:function e(t,r,s){n(t);r=a(r,true);n(s);if(i)try{return o(t,r,s)}catch(e){}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");"value"in s&&(t[r]=s.value);return t}},59097:(e,t,r)=>{var n=r(68487);var i=r(55001);var a=r(59557);e.exports=r(17536)?Object.defineProperties:function e(t,r){i(t);var o=a(r);var s=o.length;var l=0;var u;while(s>l)n.f(t,u=o[l++],r[u]);return t}},78534:(e,t,r)=>{var n=r(73799);var i=r(88902);var a=r(65047);var o=r(92208);var s=r(93817);var l=r(30035);var u=Object.getOwnPropertyDescriptor;t.f=r(17536)?u:function e(t,r){t=a(t);r=o(r,true);if(l)try{return u(t,r)}catch(e){}if(s(t,r))return i(!n.f.call(t,r),t[r])}},40731:(e,t,r)=>{var n=r(65047);var i=r(30979).f;var a={}.toString;var o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var s=function(e){try{return i(e)}catch(e){return o.slice()}};e.exports.f=function e(t){return o&&"[object Window]"==a.call(t)?s(t):i(n(t))}},30979:(e,t,r)=>{var n=r(7235);var i=r(27831).concat("length","prototype");t.f=Object.getOwnPropertyNames||function e(t){return n(t,i)}},14070:(e,t)=>{t.f=Object.getOwnPropertySymbols},37e3:(e,t,r)=>{var n=r(93817);var i=r(20233);var a=r(69117)("IE_PROTO");var o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){e=i(e);if(n(e,a))return e[a];if("function"==typeof e.constructor&&e instanceof e.constructor)return e.constructor.prototype;return e instanceof Object?o:null}},7235:(e,t,r)=>{var n=r(93817);var i=r(65047);var a=r(93263)(false);var o=r(69117)("IE_PROTO");e.exports=function(e,t){var r=i(e);var s=0;var l=[];var u;for(u in r)u!=o&&n(r,u)&&l.push(u);while(t.length>s)n(r,u=t[s++])&&(~a(l,u)||l.push(u));return l}},59557:(e,t,r)=>{var n=r(7235);var i=r(27831);e.exports=Object.keys||function e(t){return n(t,i)}},73799:(e,t)=>{t.f={}.propertyIsEnumerable},10501:(e,t,r)=>{var n=r(6585);var i=r(23311);var a=r(85195);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e];var o={};o[e]=t(r);n(n.S+n.F*a((function(){r(1)})),"Object",o)}},81987:(e,t,r)=>{var n=r(17536);var i=r(59557);var a=r(65047);var o=r(73799).f;e.exports=function(e){return function(t){var r=a(t);var s=i(r);var l=s.length;var u=0;var c=[];var d;while(l>u){d=s[u++];n&&!o.call(r,d)||c.push(e?[d,r[d]]:r[d])}return c}}},84671:(e,t,r)=>{var n=r(30979);var i=r(14070);var a=r(55001);var o=r(30788).Reflect;e.exports=o&&o.ownKeys||function e(t){var r=n.f(a(t));var o=i.f;return o?r.concat(o(t)):r}},7168:(e,t,r)=>{var n=r(30788).parseFloat;var i=r(7446).trim;e.exports=1/n(r(9659)+"-0")!==-Infinity?function e(t){var r=i(String(t),3);var a=n(r);return 0===a&&"-"==r.charAt(0)?-0:a}:n},69998:(e,t,r)=>{var n=r(30788).parseInt;var i=r(7446).trim;var a=r(9659);var o=/^[-+]?0[xX]/;e.exports=8!==n(a+"08")||22!==n(a+"0x16")?function e(t,r){var a=i(String(t),3);return n(a,r>>>0||(o.test(a)?16:10))}:n},68459:e=>{e.exports=function(e){try{return{e:false,v:e()}}catch(e){return{e:true,v:e}}}},90769:(e,t,r)=>{var n=r(55001);var i=r(49995);var a=r(54282);e.exports=function(e,t){n(e);if(i(t)&&t.constructor===e)return t;var r=a.f(e);var o=r.resolve;o(t);return r.promise}},88902:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},92181:(e,t,r)=>{var n=r(95728);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},95728:(e,t,r)=>{var n=r(30788);var i=r(21098);var a=r(93817);var o=r(12463)("src");var s=r(88739);var l="toString";var u=(""+s).split(l);r(23311).inspectSource=function(e){return s.call(e)};(e.exports=function(e,t,r,s){var l="function"==typeof r;l&&(a(r,"name")||i(r,"name",t));if(e[t]===r)return;l&&(a(r,o)||i(r,o,e[t]?""+e[t]:u.join(String(t))));if(e===n)e[t]=r;else if(s)e[t]?e[t]=r:i(e,t,r);else{delete e[t];i(e,t,r)}})(Function.prototype,l,(function e(){return"function"==typeof this&&this[o]||s.call(this)}))},81286:(e,t,r)=>{"use strict";var n=r(51787);var i=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var a=r.call(e,t);if("object"!==typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},73802:(e,t,r)=>{"use strict";var n=r(12308);var i=RegExp.prototype.exec;var a=String.prototype.replace;var o=i;var s="lastIndex";var l=function(){var e=/a/,t=/b*/g;i.call(e,"a");i.call(t,"a");return 0!==e[s]||0!==t[s]}();var u=void 0!==/()??/.exec("")[1];var c=l||u;c&&(o=function e(t){var r=this;var o,c,d,f;u&&(c=new RegExp("^"+r.source+"$(?!\\s)",n.call(r)));l&&(o=r[s]);d=i.call(r,t);l&&d&&(r[s]=r.global?d.index+d[0].length:o);u&&d&&d.length>1&&a.call(d[0],c,(function(){for(f=1;f<arguments.length-2;f++)void 0===arguments[f]&&(d[f]=void 0)}));return d});e.exports=o},69892:e=>{e.exports=Object.is||function e(t,r){return t===r?0!==t||1/t===1/r:t!=t&&r!=r}},10801:(e,t,r)=>{var n=r(49995);var i=r(55001);var a=function(e,t){i(e);if(!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(14975)(Function.call,r(78534).f(Object.prototype,"__proto__").set,2);n(e,[]);t=!(e instanceof Array)}catch(e){t=true}return function e(r,i){a(r,i);t?r.__proto__=i:n(r,i);return r}}({},false):void 0),check:a}},68354:(e,t,r)=>{"use strict";var n=r(30788);var i=r(68487);var a=r(17536);var o=r(73060)("species");e.exports=function(e){var t=n[e];a&&t&&!t[o]&&i.f(t,o,{configurable:true,get:function(){return this}})}},20722:(e,t,r)=>{var n=r(68487).f;var i=r(93817);var a=r(73060)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:true,value:t})}},69117:(e,t,r)=>{var n=r(5075)("keys");var i=r(12463);e.exports=function(e){return n[e]||(n[e]=i(e))}},5075:(e,t,r)=>{var n=r(23311);var i=r(30788);var a="__core-js_shared__";var o=i[a]||(i[a]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(73520)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},52646:(e,t,r)=>{var n=r(55001);var i=r(98272);var a=r(73060)("species");e.exports=function(e,t){var r=n(e).constructor;var o;return void 0===r||void 0==(o=n(r)[a])?t:i(o)}},60900:(e,t,r)=>{"use strict";var n=r(85195);e.exports=function(e,t){return!!e&&n((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},66416:(e,t,r)=>{var n=r(40205);var i=r(10271);e.exports=function(e){return function(t,r){var a=String(i(t));var o=n(r);var s=a.length;var l,u;if(o<0||o>=s)return e?"":void 0;l=a.charCodeAt(o);return l<55296||l>56319||o+1===s||(u=a.charCodeAt(o+1))<56320||u>57343?e?a.charAt(o):l:e?a.slice(o,o+2):u-56320+(l-55296<<10)+65536}}},48078:(e,t,r)=>{var n=r(24825);var i=r(10271);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(e))}},27623:(e,t,r)=>{var n=r(6585);var i=r(85195);var a=r(10271);var o=/"/g;var s=function(e,t,r,n){var i=String(a(e));var s="<"+t;""!==r&&(s+=" "+r+'="'+String(n).replace(o,"&quot;")+'"');return s+">"+i+"</"+t+">"};e.exports=function(e,t){var r={};r[e]=t(s);n(n.P+n.F*i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",r)}},7868:(e,t,r)=>{var n=r(41435);var i=r(7994);var a=r(10271);e.exports=function(e,t,r,o){var s=String(a(e));var l=s.length;var u=void 0===r?" ":String(r);var c=n(t);if(c<=l||""==u)return s;var d=c-l;var f=i.call(u,Math.ceil(d/u.length));f.length>d&&(f=f.slice(0,d));return o?f+s:s+f}},7994:(e,t,r)=>{"use strict";var n=r(40205);var i=r(10271);e.exports=function e(t){var r=String(i(this));var a="";var o=n(t);if(o<0||Infinity==o)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(r+=r))1&o&&(a+=r);return a}},7446:(e,t,r)=>{var n=r(6585);var i=r(10271);var a=r(85195);var o=r(9659);var s="["+o+"]";var l="​";var u=RegExp("^"+s+s+"*");var c=RegExp(s+s+"*$");var d=function(e,t,r){var i={};var s=a((function(){return!!o[e]()||l[e]()!=l}));var u=i[e]=s?t(f):o[e];r&&(i[r]=u);n(n.P+n.F*s,"String",i)};var f=d.trim=function(e,t){e=String(i(e));1&t&&(e=e.replace(u,""));2&t&&(e=e.replace(c,""));return e};e.exports=d},9659:e=>{e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},99498:(e,t,r)=>{var n=r(14975);var i=r(13742);var a=r(43865);var o=r(19988);var s=r(30788);var l=s.process;var u=s.setImmediate;var c=s.clearImmediate;var d=s.MessageChannel;var f=s.Dispatch;var p=0;var g={};var h="onreadystatechange";var v,m,y;var b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e];t()}};var w=function(e){b.call(e.data)};if(!u||!c){u=function e(t){var r=[];var n=1;while(arguments.length>n)r.push(arguments[n++]);g[++p]=function(){i("function"==typeof t?t:Function(t),r)};v(p);return p};c=function e(t){delete g[t]};if("process"==r(80934)(l))v=function(e){l.nextTick(n(b,e,1))};else if(f&&f.now)v=function(e){f.now(n(b,e,1))};else if(d){m=new d;y=m.port2;m.port1.onmessage=w;v=n(y.postMessage,y,1)}else if(s.addEventListener&&"function"==typeof postMessage&&!s.importScripts){v=function(e){s.postMessage(e+"","*")};s.addEventListener("message",w,false)}else v=h in o("script")?function(e){a.appendChild(o("script"))[h]=function(){a.removeChild(this);b.call(e)}}:function(e){setTimeout(n(b,e,1),0)}}e.exports={set:u,clear:c}},25446:(e,t,r)=>{var n=r(40205);var i=Math.max;var a=Math.min;e.exports=function(e,t){e=n(e);return e<0?i(e+t,0):a(e,t)}},29532:(e,t,r)=>{var n=r(40205);var i=r(41435);e.exports=function(e){if(void 0===e)return 0;var t=n(e);var r=i(t);if(t!==r)throw RangeError("Wrong length!");return r}},40205:e=>{var t=Math.ceil;var r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},65047:(e,t,r)=>{var n=r(4587);var i=r(10271);e.exports=function(e){return n(i(e))}},41435:(e,t,r)=>{var n=r(40205);var i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},20233:(e,t,r)=>{var n=r(10271);e.exports=function(e){return Object(n(e))}},92208:(e,t,r)=>{var n=r(49995);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},95053:(e,t,r)=>{"use strict";if(r(17536)){var n=r(73520);var i=r(30788);var a=r(85195);var o=r(6585);var s=r(46051);var l=r(27412);var u=r(14975);var c=r(17888);var d=r(88902);var f=r(21098);var p=r(92181);var g=r(40205);var h=r(41435);var v=r(29532);var m=r(25446);var y=r(92208);var b=r(93817);var w=r(51787);var _=r(49995);var S=r(20233);var P=r(23547);var E=r(42602);var k=r(37e3);var C=r(30979).f;var O=r(39128);var A=r(12463);var T=r(73060);var j=r(16754);var D=r(93263);var L=r(52646);var R=r(22744);var I=r(80798);var M=r(63969);var x=r(68354);var N=r(96792);var F=r(30631);var V=r(68487);var B=r(78534);var W=V.f;var G=B.f;var q=i.RangeError;var U=i.TypeError;var H=i.Uint8Array;var z="ArrayBuffer";var $="Shared"+z;var K="BYTES_PER_ELEMENT";var Z="prototype";var Y=Array[Z];var X=l.ArrayBuffer;var J=l.DataView;var Q=j(0);var ee=j(2);var te=j(3);var re=j(4);var ne=j(5);var ie=j(6);var ae=D(true);var oe=D(false);var se=R.values;var le=R.keys;var ue=R.entries;var ce=Y.lastIndexOf;var de=Y.reduce;var fe=Y.reduceRight;var pe=Y.join;var ge=Y.sort;var he=Y.slice;var ve=Y.toString;var me=Y.toLocaleString;var ye=T("iterator");var be=T("toStringTag");var we=A("typed_constructor");var _e=A("def_constructor");var Se=s.CONSTR;var Pe=s.TYPED;var Ee=s.VIEW;var ke="Wrong length!";var Ce=j(1,(function(e,t){return De(L(e,e[_e]),t)}));var Oe=a((function(){return 1===new H(new Uint16Array([1]).buffer)[0]}));var Ae=!!H&&!!H[Z].set&&a((function(){new H(1).set({})}));var Te=function(e,t){var r=g(e);if(r<0||r%t)throw q("Wrong offset!");return r};var je=function(e){if(_(e)&&Pe in e)return e;throw U(e+" is not a typed array!")};var De=function(e,t){if(!(_(e)&&we in e))throw U("It is not a typed array constructor!");return new e(t)};var Le=function(e,t){return Re(L(e,e[_e]),t)};var Re=function(e,t){var r=0;var n=t.length;var i=De(e,n);while(n>r)i[r]=t[r++];return i};var Ie=function(e,t,r){W(e,t,{get:function(){return this._d[r]}})};var Me=function e(t){var r=S(t);var n=arguments.length;var i=n>1?arguments[1]:void 0;var a=void 0!==i;var o=O(r);var s,l,c,d,f,p;if(void 0!=o&&!P(o)){for(p=o.call(r),c=[],s=0;!(f=p.next()).done;s++)c.push(f.value);r=c}a&&n>2&&(i=u(i,arguments[2],2));for(s=0,l=h(r.length),d=De(this,l);l>s;s++)d[s]=a?i(r[s],s):r[s];return d};var xe=function e(){var t=0;var r=arguments.length;var n=De(this,r);while(r>t)n[t]=arguments[t++];return n};var Ne=!!H&&a((function(){me.call(new H(1))}));var Fe=function e(){return me.apply(Ne?he.call(je(this)):je(this),arguments)};var Ve={copyWithin:function e(t,r){return F.call(je(this),t,r,arguments.length>2?arguments[2]:void 0)},every:function e(t){return re(je(this),t,arguments.length>1?arguments[1]:void 0)},fill:function e(t){return N.apply(je(this),arguments)},filter:function e(t){return Le(this,ee(je(this),t,arguments.length>1?arguments[1]:void 0))},find:function e(t){return ne(je(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function e(t){return ie(je(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function e(t){Q(je(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function e(t){return oe(je(this),t,arguments.length>1?arguments[1]:void 0)},includes:function e(t){return ae(je(this),t,arguments.length>1?arguments[1]:void 0)},join:function e(t){return pe.apply(je(this),arguments)},lastIndexOf:function e(t){return ce.apply(je(this),arguments)},map:function e(t){return Ce(je(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function e(t){return de.apply(je(this),arguments)},reduceRight:function e(t){return fe.apply(je(this),arguments)},reverse:function e(){var t=this;var r=je(t).length;var n=Math.floor(r/2);var i=0;var a;while(i<n){a=t[i];t[i++]=t[--r];t[r]=a}return t},some:function e(t){return te(je(this),t,arguments.length>1?arguments[1]:void 0)},sort:function e(t){return ge.call(je(this),t)},subarray:function e(t,r){var n=je(this);var i=n.length;var a=m(t,i);return new(L(n,n[_e]))(n.buffer,n.byteOffset+a*n.BYTES_PER_ELEMENT,h((void 0===r?i:m(r,i))-a))}};var Be=function e(t,r){return Le(this,he.call(je(this),t,r))};var We=function e(t){je(this);var r=Te(arguments[1],1);var n=this.length;var i=S(t);var a=h(i.length);var o=0;if(a+r>n)throw q(ke);while(o<a)this[r+o]=i[o++]};var Ge={entries:function e(){return ue.call(je(this))},keys:function e(){return le.call(je(this))},values:function e(){return se.call(je(this))}};var qe=function(e,t){return _(e)&&e[Pe]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)};var Ue=function e(t,r){return qe(t,r=y(r,true))?d(2,t[r]):G(t,r)};var He=function e(t,r,n){if(qe(t,r=y(r,true))&&_(n)&&b(n,"value")&&!b(n,"get")&&!b(n,"set")&&!n.configurable&&(!b(n,"writable")||n.writable)&&(!b(n,"enumerable")||n.enumerable)){t[r]=n.value;return t}return W(t,r,n)};if(!Se){B.f=Ue;V.f=He}o(o.S+o.F*!Se,"Object",{getOwnPropertyDescriptor:Ue,defineProperty:He});a((function(){ve.call({})}))&&(ve=me=function e(){return pe.call(this)});var ze=p({},Ve);p(ze,Ge);f(ze,ye,Ge.values);p(ze,{slice:Be,set:We,constructor:function(){},toString:ve,toLocaleString:Fe});Ie(ze,"buffer","b");Ie(ze,"byteOffset","o");Ie(ze,"byteLength","l");Ie(ze,"length","e");W(ze,be,{get:function(){return this[Pe]}});e.exports=function(e,t,r,l){l=!!l;var u=e+(l?"Clamped":"")+"Array";var d="get"+e;var p="set"+e;var g=i[u];var m=g||{};var y=g&&k(g);var b=!g||!s.ABV;var S={};var P=g&&g[Z];var O=function(e,r){var n=e._d;return n.v[d](r*t+n.o,Oe)};var A=function(e,r,n){var i=e._d;l&&(n=(n=Math.round(n))<0?0:n>255?255:255&n);i.v[p](r*t+i.o,n,Oe)};var T=function(e,t){W(e,t,{get:function(){return O(this,t)},set:function(e){return A(this,t,e)},enumerable:true})};if(b){g=r((function(e,r,n,i){c(e,g,u,"_d");var a=0;var o=0;var s,l,d,p;if(_(r)){if(!(r instanceof X||(p=w(r))==z||p==$))return Pe in r?Re(g,r):Me.call(g,r);s=r;o=Te(n,t);var m=r.byteLength;if(void 0===i){if(m%t)throw q(ke);l=m-o;if(l<0)throw q(ke)}else{l=h(i)*t;if(l+o>m)throw q(ke)}d=l/t}else{d=v(r);l=d*t;s=new X(l)}f(e,"_d",{b:s,o,l,e:d,v:new J(s)});while(a<d)T(e,a++)}));P=g[Z]=E(ze);f(P,"constructor",g)}else if(!a((function(){g(1)}))||!a((function(){new g(-1)}))||!M((function(e){new g;new g(null);new g(1.5);new g(e)}),true)){g=r((function(e,r,n,i){c(e,g,u);var a;if(!_(r))return new m(v(r));if(r instanceof X||(a=w(r))==z||a==$)return void 0!==i?new m(r,Te(n,t),i):void 0!==n?new m(r,Te(n,t)):new m(r);if(Pe in r)return Re(g,r);return Me.call(g,r)}));Q(y!==Function.prototype?C(m).concat(C(y)):C(m),(function(e){e in g||f(g,e,m[e])}));g[Z]=P;n||(P.constructor=g)}var j=P[ye];var D=!!j&&("values"==j.name||void 0==j.name);var L=Ge.values;f(g,we,true);f(P,Pe,u);f(P,Ee,true);f(P,_e,g);(l?new g(1)[be]==u:be in P)||W(P,be,{get:function(){return u}});S[u]=g;o(o.G+o.W+o.F*(g!=m),S);o(o.S,u,{BYTES_PER_ELEMENT:t});o(o.S+o.F*a((function(){m.of.call(g,1)})),u,{from:Me,of:xe});K in P||f(P,K,t);o(o.P,u,Ve);x(u);o(o.P+o.F*Ae,u,{set:We});o(o.P+o.F*!D,u,Ge);n||P.toString==ve||(P.toString=ve);o(o.P+o.F*a((function(){new g(1).slice()})),u,{slice:Be});o(o.P+o.F*(a((function(){return[1,2].toLocaleString()!=new g([1,2]).toLocaleString()}))||!a((function(){P.toLocaleString.call([1,2])}))),u,{toLocaleString:Fe});I[u]=D?j:L;n||D||f(P,ye,L)}}else e.exports=function(){}},27412:(e,t,r)=>{"use strict";var n=r(30788);var i=r(17536);var a=r(73520);var o=r(46051);var s=r(21098);var l=r(92181);var u=r(85195);var c=r(17888);var d=r(40205);var f=r(41435);var p=r(29532);var g=r(30979).f;var h=r(68487).f;var v=r(96792);var m=r(20722);var y="ArrayBuffer";var b="DataView";var w="prototype";var _="Wrong length!";var S="Wrong index!";var P=n[y];var E=n[b];var k=n.Math;var C=n.RangeError;var O=n.Infinity;var A=P;var T=k.abs;var j=k.pow;var D=k.floor;var L=k.log;var R=k.LN2;var I="buffer";var M="byteLength";var x="byteOffset";var N=i?"_b":I;var F=i?"_l":M;var V=i?"_o":x;function B(e,t,r){var n=new Array(r);var i=8*r-t-1;var a=(1<<i)-1;var o=a>>1;var s=23===t?j(2,-24)-j(2,-77):0;var l=0;var u=e<0||0===e&&1/e<0?1:0;var c,d,f;e=T(e);if(e!=e||e===O){d=e!=e?1:0;c=a}else{c=D(L(e)/R);if(e*(f=j(2,-c))<1){c--;f*=2}e+=c+o>=1?s/f:s*j(2,1-o);if(e*f>=2){c++;f/=2}if(c+o>=a){d=0;c=a}else if(c+o>=1){d=(e*f-1)*j(2,t);c+=o}else{d=e*j(2,o-1)*j(2,t);c=0}}for(;t>=8;n[l++]=255&d,d/=256,t-=8);c=c<<t|d;i+=t;for(;i>0;n[l++]=255&c,c/=256,i-=8);n[--l]|=128*u;return n}function W(e,t,r){var n=8*r-t-1;var i=(1<<n)-1;var a=i>>1;var o=n-7;var s=r-1;var l=e[s--];var u=127&l;var c;l>>=7;for(;o>0;u=256*u+e[s],s--,o-=8);c=u&(1<<-o)-1;u>>=-o;o+=t;for(;o>0;c=256*c+e[s],s--,o-=8);if(0===u)u=1-a;else{if(u===i)return c?NaN:l?-O:O;c+=j(2,t);u-=a}return(l?-1:1)*c*j(2,u-t)}function G(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function q(e){return[255&e]}function U(e){return[255&e,e>>8&255]}function H(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function z(e){return B(e,52,8)}function $(e){return B(e,23,4)}function K(e,t,r){h(e[w],t,{get:function(){return this[r]}})}function Z(e,t,r,n){var i=+r;var a=p(i);if(a+t>e[F])throw C(S);var o=e[N]._b;var s=a+e[V];var l=o.slice(s,s+t);return n?l:l.reverse()}function Y(e,t,r,n,i,a){var o=+r;var s=p(o);if(s+t>e[F])throw C(S);var l=e[N]._b;var u=s+e[V];var c=n(+i);for(var d=0;d<t;d++)l[u+d]=c[a?d:t-d-1]}if(o.ABV){if(!u((function(){P(1)}))||!u((function(){new P(-1)}))||u((function(){new P;new P(1.5);new P(NaN);return P.name!=y}))){P=function e(t){c(this,P);return new A(p(t))};var X=P[w]=A[w];for(var J=g(A),Q=0,ee;J.length>Q;)(ee=J[Q++])in P||s(P,ee,A[ee]);a||(X.constructor=P)}var te=new E(new P(2));var re=E[w].setInt8;te.setInt8(0,2147483648);te.setInt8(1,2147483649);!te.getInt8(0)&&te.getInt8(1)||l(E[w],{setInt8:function e(t,r){re.call(this,t,r<<24>>24)},setUint8:function e(t,r){re.call(this,t,r<<24>>24)}},true)}else{P=function e(t){c(this,P,y);var r=p(t);this._b=v.call(new Array(r),0);this[F]=r};E=function e(t,r,n){c(this,E,b);c(t,P,b);var i=t[F];var a=d(r);if(a<0||a>i)throw C("Wrong offset!");n=void 0===n?i-a:f(n);if(a+n>i)throw C(_);this[N]=t;this[V]=a;this[F]=n};if(i){K(P,M,"_l");K(E,I,"_b");K(E,M,"_l");K(E,x,"_o")}l(E[w],{getInt8:function e(t){return Z(this,1,t)[0]<<24>>24},getUint8:function e(t){return Z(this,1,t)[0]},getInt16:function e(t){var r=Z(this,2,t,arguments[1]);return(r[1]<<8|r[0])<<16>>16},getUint16:function e(t){var r=Z(this,2,t,arguments[1]);return r[1]<<8|r[0]},getInt32:function e(t){return G(Z(this,4,t,arguments[1]))},getUint32:function e(t){return G(Z(this,4,t,arguments[1]))>>>0},getFloat32:function e(t){return W(Z(this,4,t,arguments[1]),23,4)},getFloat64:function e(t){return W(Z(this,8,t,arguments[1]),52,8)},setInt8:function e(t,r){Y(this,1,t,q,r)},setUint8:function e(t,r){Y(this,1,t,q,r)},setInt16:function e(t,r){Y(this,2,t,U,r,arguments[2])},setUint16:function e(t,r){Y(this,2,t,U,r,arguments[2])},setInt32:function e(t,r){Y(this,4,t,H,r,arguments[2])},setUint32:function e(t,r){Y(this,4,t,H,r,arguments[2])},setFloat32:function e(t,r){Y(this,4,t,$,r,arguments[2])},setFloat64:function e(t,r){Y(this,8,t,z,r,arguments[2])}})}m(P,y);m(E,b);s(E[w],o.VIEW,true);t[y]=P;t[b]=E},46051:(e,t,r)=>{var n=r(30788);var i=r(21098);var a=r(12463);var o=a("typed_array");var s=a("view");var l=!!(n.ArrayBuffer&&n.DataView);var u=l;var c=0;var d=9;var f;var p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");while(c<d)if(f=n[p[c++]]){i(f.prototype,o,true);i(f.prototype,s,true)}else u=false;e.exports={ABV:l,CONSTR:u,TYPED:o,VIEW:s}},12463:e=>{var t=0;var r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+r).toString(36))}},94813:(e,t,r)=>{var n=r(30788);var i=n.navigator;e.exports=i&&i.userAgent||""},66756:(e,t,r)=>{var n=r(49995);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},91578:(e,t,r)=>{var n=r(30788);var i=r(23311);var a=r(73520);var o=r(6613);var s=r(68487).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},6613:(e,t,r)=>{t.f=r(73060)},73060:(e,t,r)=>{var n=r(5075)("wks");var i=r(12463);var a=r(30788).Symbol;var o="function"==typeof a;var s=e.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:i)("Symbol."+e))};s.store=n},39128:(e,t,r)=>{var n=r(51787);var i=r(73060)("iterator");var a=r(80798);e.exports=r(23311).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||a[n(e)]}},10134:(e,t,r)=>{var n=r(6585);n(n.P,"Array",{copyWithin:r(30631)});r(81738)("copyWithin")},66436:(e,t,r)=>{"use strict";var n=r(6585);var i=r(16754)(4);n(n.P+n.F*!r(60900)([].every,true),"Array",{every:function e(t){return i(this,t,arguments[1])}})},26218:(e,t,r)=>{var n=r(6585);n(n.P,"Array",{fill:r(96792)});r(81738)("fill")},46763:(e,t,r)=>{"use strict";var n=r(6585);var i=r(16754)(2);n(n.P+n.F*!r(60900)([].filter,true),"Array",{filter:function e(t){return i(this,t,arguments[1])}})},47484:(e,t,r)=>{"use strict";var n=r(6585);var i=r(16754)(6);var a="findIndex";var o=true;a in[]&&Array(1)[a]((function(){o=false}));n(n.P+n.F*o,"Array",{findIndex:function e(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}});r(81738)(a)},24898:(e,t,r)=>{"use strict";var n=r(6585);var i=r(16754)(5);var a="find";var o=true;a in[]&&Array(1)[a]((function(){o=false}));n(n.P+n.F*o,"Array",{find:function e(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}});r(81738)(a)},19190:(e,t,r)=>{"use strict";var n=r(6585);var i=r(16754)(0);var a=r(60900)([].forEach,true);n(n.P+n.F*!a,"Array",{forEach:function e(t){return i(this,t,arguments[1])}})},25628:(e,t,r)=>{"use strict";var n=r(14975);var i=r(6585);var a=r(20233);var o=r(51934);var s=r(23547);var l=r(41435);var u=r(21519);var c=r(39128);i(i.S+i.F*!r(63969)((function(e){Array.from(e)})),"Array",{from:function e(t){var r=a(t);var i="function"==typeof this?this:Array;var d=arguments.length;var f=d>1?arguments[1]:void 0;var p=void 0!==f;var g=0;var h=c(r);var v,m,y,b;p&&(f=n(f,d>2?arguments[2]:void 0,2));if(void 0==h||i==Array&&s(h)){v=l(r.length);for(m=new i(v);v>g;g++)u(m,g,p?f(r[g],g):r[g])}else for(b=h.call(r),m=new i;!(y=b.next()).done;g++)u(m,g,p?o(b,f,[y.value,g],true):y.value);m.length=g;return m}})},64699:(e,t,r)=>{"use strict";var n=r(6585);var i=r(93263)(false);var a=[].indexOf;var o=!!a&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(o||!r(60900)(a)),"Array",{indexOf:function e(t){return o?a.apply(this,arguments)||0:i(this,t,arguments[1])}})},89778:(e,t,r)=>{var n=r(6585);n(n.S,"Array",{isArray:r(21318)})},22744:(e,t,r)=>{"use strict";var n=r(81738);var i=r(29918);var a=r(80798);var o=r(65047);e.exports=r(21866)(Array,"Array",(function(e,t){this._t=o(e);this._i=0;this._k=t}),(function(){var e=this._t;var t=this._k;var r=this._i++;if(!e||r>=e.length){this._t=void 0;return i(1)}if("keys"==t)return i(0,r);if("values"==t)return i(0,e[r]);return i(0,[r,e[r]])}),"values");a.Arguments=a.Array;n("keys");n("values");n("entries")},45264:(e,t,r)=>{"use strict";var n=r(6585);var i=r(65047);var a=[].join;n(n.P+n.F*(r(4587)!=Object||!r(60900)(a)),"Array",{join:function e(t){return a.call(i(this),void 0===t?",":t)}})},84924:(e,t,r)=>{"use strict";var n=r(6585);var i=r(65047);var a=r(40205);var o=r(41435);var s=[].lastIndexOf;var l=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(l||!r(60900)(s)),"Array",{lastIndexOf:function e(t){if(l)return s.apply(this,arguments)||0;var r=i(this);var n=o(r.length);var u=n-1;arguments.length>1&&(u=Math.min(u,a(arguments[1])));u<0&&(u=n+u);for(;u>=0;u--)if(u in r&&r[u]===t)return u||0;return-1}})},5007:(e,t,r)=>{"use strict";var n=r(6585);var i=r(16754)(1);n(n.P+n.F*!r(60900)([].map,true),"Array",{map:function e(t){return i(this,t,arguments[1])}})},591:(e,t,r)=>{"use strict";var n=r(6585);var i=r(21519);n(n.S+n.F*r(85195)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function e(){var t=0;var r=arguments.length;var n=new("function"==typeof this?this:Array)(r);while(r>t)i(n,t,arguments[t++]);n.length=r;return n}})},95858:(e,t,r)=>{"use strict";var n=r(6585);var i=r(4120);n(n.P+n.F*!r(60900)([].reduceRight,true),"Array",{reduceRight:function e(t){return i(this,t,arguments.length,arguments[1],true)}})},12813:(e,t,r)=>{"use strict";var n=r(6585);var i=r(4120);n(n.P+n.F*!r(60900)([].reduce,true),"Array",{reduce:function e(t){return i(this,t,arguments.length,arguments[1],false)}})},69337:(e,t,r)=>{"use strict";var n=r(6585);var i=r(43865);var a=r(80934);var o=r(25446);var s=r(41435);var l=[].slice;n(n.P+n.F*r(85195)((function(){i&&l.call(i)})),"Array",{slice:function e(t,r){var n=s(this.length);var i=a(this);r=void 0===r?n:r;if("Array"==i)return l.call(this,t,r);var u=o(t,n);var c=o(r,n);var d=s(c-u);var f=new Array(d);var p=0;for(;p<d;p++)f[p]="String"==i?this.charAt(u+p):this[u+p];return f}})},75888:(e,t,r)=>{"use strict";var n=r(6585);var i=r(16754)(3);n(n.P+n.F*!r(60900)([].some,true),"Array",{some:function e(t){return i(this,t,arguments[1])}})},6144:(e,t,r)=>{"use strict";var n=r(6585);var i=r(98272);var a=r(20233);var o=r(85195);var s=[].sort;var l=[1,2,3];n(n.P+n.F*(o((function(){l.sort(void 0)}))||!o((function(){l.sort(null)}))||!r(60900)(s)),"Array",{sort:function e(t){return void 0===t?s.call(a(this)):s.call(a(this),i(t))}})},96554:(e,t,r)=>{r(68354)("Array")},23087:(e,t,r)=>{var n=r(6585);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},93612:(e,t,r)=>{var n=r(6585);var i=r(81658);n(n.P+n.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},5870:(e,t,r)=>{"use strict";var n=r(6585);var i=r(20233);var a=r(92208);n(n.P+n.F*r(85195)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function e(t){var r=i(this);var n=a(r);return"number"!=typeof n||isFinite(n)?r.toISOString():null}})},78550:(e,t,r)=>{var n=r(73060)("toPrimitive");var i=Date.prototype;n in i||r(21098)(i,n,r(68490))},54248:(e,t,r)=>{var n=Date.prototype;var i="Invalid Date";var a="toString";var o=n[a];var s=n.getTime;new Date(NaN)+""!=i&&r(95728)(n,a,(function e(){var t=s.call(this);return t===t?o.call(this):i}))},10017:(e,t,r)=>{var n=r(6585);n(n.P,"Function",{bind:r(93723)})},9998:(e,t,r)=>{"use strict";var n=r(49995);var i=r(37e3);var a=r(73060)("hasInstance");var o=Function.prototype;a in o||r(68487).f(o,a,{value:function(e){if("function"!=typeof this||!n(e))return false;if(!n(this.prototype))return e instanceof this;while(e=i(e))if(this.prototype===e)return true;return false}})},17360:(e,t,r)=>{var n=r(68487).f;var i=Function.prototype;var a=/^\s*function ([^ (]*)/;var o="name";o in i||r(17536)&&n(i,o,{configurable:true,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},85190:(e,t,r)=>{"use strict";var n=r(27421);var i=r(66756);var a="Map";e.exports=r(31960)(a,(function(e){return function t(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function e(t){var r=n.getEntry(i(this,a),t);return r&&r.v},set:function e(t,r){return n.def(i(this,a),0===t?0:t,r)}},n,true)},79491:(e,t,r)=>{var n=r(6585);var i=r(43072);var a=Math.sqrt;var o=Math.acosh;n(n.S+n.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&Infinity==o(Infinity)),"Math",{acosh:function e(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+a(t-1)*a(t+1))}})},90059:(e,t,r)=>{var n=r(6585);var i=Math.asinh;function a(e){return isFinite(e=+e)&&0!=e?e<0?-a(-e):Math.log(e+Math.sqrt(e*e+1)):e}n(n.S+n.F*!(i&&1/i(0)>0),"Math",{asinh:a})},94193:(e,t,r)=>{var n=r(6585);var i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function e(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},39978:(e,t,r)=>{var n=r(6585);var i=r(43533);n(n.S,"Math",{cbrt:function e(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},78592:(e,t,r)=>{var n=r(6585);n(n.S,"Math",{clz32:function e(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},77099:(e,t,r)=>{var n=r(6585);var i=Math.exp;n(n.S,"Math",{cosh:function e(t){return(i(t=+t)+i(-t))/2}})},74056:(e,t,r)=>{var n=r(6585);var i=r(50086);n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},80638:(e,t,r)=>{var n=r(6585);n(n.S,"Math",{fround:r(82787)})},24591:(e,t,r)=>{var n=r(6585);var i=Math.abs;n(n.S,"Math",{hypot:function e(t,r){var n=0;var a=0;var o=arguments.length;var s=0;var l,u;while(a<o){l=i(arguments[a++]);if(s<l){u=s/l;n=n*u*u+1;s=l}else if(l>0){u=l/s;n+=u*u}else n+=l}return Infinity===s?Infinity:s*Math.sqrt(n)}})},84384:(e,t,r)=>{var n=r(6585);var i=Math.imul;n(n.S+n.F*r(85195)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function e(t,r){var n=65535;var i=+t;var a=+r;var o=n&i;var s=n&a;return 0|o*s+((n&i>>>16)*s+o*(n&a>>>16)<<16>>>0)}})},2524:(e,t,r)=>{var n=r(6585);n(n.S,"Math",{log10:function e(t){return Math.log(t)*Math.LOG10E}})},93398:(e,t,r)=>{var n=r(6585);n(n.S,"Math",{log1p:r(43072)})},8319:(e,t,r)=>{var n=r(6585);n(n.S,"Math",{log2:function e(t){return Math.log(t)/Math.LN2}})},53997:(e,t,r)=>{var n=r(6585);n(n.S,"Math",{sign:r(43533)})},86778:(e,t,r)=>{var n=r(6585);var i=r(50086);var a=Math.exp;n(n.S+n.F*r(85195)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function e(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(a(t-1)-a(-t-1))*(Math.E/2)}})},85529:(e,t,r)=>{var n=r(6585);var i=r(50086);var a=Math.exp;n(n.S,"Math",{tanh:function e(t){var r=i(t=+t);var n=i(-t);return Infinity==r?1:Infinity==n?-1:(r-n)/(a(t)+a(-t))}})},41602:(e,t,r)=>{var n=r(6585);n(n.S,"Math",{trunc:function e(t){return(t>0?Math.floor:Math.ceil)(t)}})},51636:(e,t,r)=>{"use strict";var n=r(30788);var i=r(93817);var a=r(80934);var o=r(34490);var s=r(92208);var l=r(85195);var u=r(30979).f;var c=r(78534).f;var d=r(68487).f;var f=r(7446).trim;var p="Number";var g=n[p];var h=g;var v=g.prototype;var m=a(r(42602)(v))==p;var y="trim"in String.prototype;var b=function(e){var t=s(e,false);if("string"==typeof t&&t.length>2){t=y?t.trim():f(t,3);var r=t.charCodeAt(0);var n,i,a;if(43===r||45===r){n=t.charCodeAt(2);if(88===n||120===n)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:i=2;a=49;break;case 79:case 111:i=8;a=55;break;default:return+t}for(var o=t.slice(2),l=0,u=o.length,c;l<u;l++){c=o.charCodeAt(l);if(c<48||c>a)return NaN}return parseInt(o,i)}}return+t};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function e(t){var r=arguments.length<1?0:t;var n=this;return n instanceof g&&(m?l((function(){v.valueOf.call(n)})):a(n)!=p)?o(new h(b(r)),n,g):b(r)};for(var w=r(17536)?u(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0,S;w.length>_;_++)i(h,S=w[_])&&!i(g,S)&&d(g,S,c(h,S));g.prototype=v;v.constructor=g;r(95728)(n,p,g)}},28001:(e,t,r)=>{var n=r(6585);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},90664:(e,t,r)=>{var n=r(6585);var i=r(30788).isFinite;n(n.S,"Number",{isFinite:function e(t){return"number"==typeof t&&i(t)}})},75675:(e,t,r)=>{var n=r(6585);n(n.S,"Number",{isInteger:r(17960)})},74353:(e,t,r)=>{var n=r(6585);n(n.S,"Number",{isNaN:function e(t){return t!=t}})},52853:(e,t,r)=>{var n=r(6585);var i=r(17960);var a=Math.abs;n(n.S,"Number",{isSafeInteger:function e(t){return i(t)&&a(t)<=9007199254740991}})},65149:(e,t,r)=>{var n=r(6585);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},35229:(e,t,r)=>{var n=r(6585);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},2059:(e,t,r)=>{var n=r(6585);var i=r(7168);n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},59484:(e,t,r)=>{var n=r(6585);var i=r(69998);n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},80324:(e,t,r)=>{"use strict";var n=r(6585);var i=r(40205);var a=r(56774);var o=r(7994);var s=1..toFixed;var l=Math.floor;var u=[0,0,0,0,0,0];var c="Number.toFixed: incorrect invocation!";var d="0";var f=function(e,t){var r=-1;var n=t;while(++r<6){n+=e*u[r];u[r]=n%1e7;n=l(n/1e7)}};var p=function(e){var t=6;var r=0;while(--t>=0){r+=u[t];u[t]=l(r/e);r=r%e*1e7}};var g=function(){var e=6;var t="";while(--e>=0)if(""!==t||0===e||0!==u[e]){var r=String(u[e]);t=""===t?r:t+o.call(d,7-r.length)+r}return t};var h=function(e,t,r){return 0===t?r:t%2===1?h(e,t-1,r*e):h(e*e,t/2,r)};var v=function(e){var t=0;var r=e;while(r>=4096){t+=12;r/=4096}while(r>=2){t+=1;r/=2}return t};n(n.P+n.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(85195)((function(){s.call({})}))),"Number",{toFixed:function e(t){var r=a(this,c);var n=i(t);var s="";var l=d;var u,m,y,b;if(n<0||n>20)throw RangeError(c);if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return String(r);if(r<0){s="-";r=-r}if(r>1e-21){u=v(r*h(2,69,1))-69;m=u<0?r*h(2,-u,1):r/h(2,u,1);m*=4503599627370496;u=52-u;if(u>0){f(0,m);y=n;while(y>=7){f(1e7,0);y-=7}f(h(10,y,1),0);y=u-1;while(y>=23){p(1<<23);y-=23}p(1<<y);f(1,1);p(2);l=g()}else{f(0,m);f(1<<-u,0);l=g()+o.call(d,n)}}if(n>0){b=l.length;l=s+(b<=n?"0."+o.call(d,n-b)+l:l.slice(0,b-n)+"."+l.slice(b-n))}else l=s+l;return l}})},60376:(e,t,r)=>{"use strict";var n=r(6585);var i=r(85195);var a=r(56774);var o=1..toPrecision;n(n.P+n.F*(i((function(){return"1"!==o.call(1,void 0)}))||!i((function(){o.call({})}))),"Number",{toPrecision:function e(t){var r=a(this,"Number#toPrecision: incorrect invocation!");return void 0===t?o.call(r):o.call(r,t)}})},62334:(e,t,r)=>{var n=r(6585);n(n.S+n.F,"Object",{assign:r(69463)})},90985:(e,t,r)=>{var n=r(6585);n(n.S,"Object",{create:r(42602)})},60833:(e,t,r)=>{var n=r(6585);n(n.S+n.F*!r(17536),"Object",{defineProperties:r(59097)})},94747:(e,t,r)=>{var n=r(6585);n(n.S+n.F*!r(17536),"Object",{defineProperty:r(68487).f})},50308:(e,t,r)=>{var n=r(49995);var i=r(39278).onFreeze;r(10501)("freeze",(function(e){return function t(r){return e&&n(r)?e(i(r)):r}}))},69637:(e,t,r)=>{var n=r(65047);var i=r(78534).f;r(10501)("getOwnPropertyDescriptor",(function(){return function e(t,r){return i(n(t),r)}}))},1417:(e,t,r)=>{r(10501)("getOwnPropertyNames",(function(){return r(40731).f}))},18426:(e,t,r)=>{var n=r(20233);var i=r(37e3);r(10501)("getPrototypeOf",(function(){return function e(t){return i(n(t))}}))},54234:(e,t,r)=>{var n=r(49995);r(10501)("isExtensible",(function(e){return function t(r){return!!n(r)&&(!e||e(r))}}))},62259:(e,t,r)=>{var n=r(49995);r(10501)("isFrozen",(function(e){return function t(r){return!n(r)||!!e&&e(r)}}))},58197:(e,t,r)=>{var n=r(49995);r(10501)("isSealed",(function(e){return function t(r){return!n(r)||!!e&&e(r)}}))},87202:(e,t,r)=>{var n=r(6585);n(n.S,"Object",{is:r(69892)})},18574:(e,t,r)=>{var n=r(20233);var i=r(59557);r(10501)("keys",(function(){return function e(t){return i(n(t))}}))},24733:(e,t,r)=>{var n=r(49995);var i=r(39278).onFreeze;r(10501)("preventExtensions",(function(e){return function t(r){return e&&n(r)?e(i(r)):r}}))},12026:(e,t,r)=>{var n=r(49995);var i=r(39278).onFreeze;r(10501)("seal",(function(e){return function t(r){return e&&n(r)?e(i(r)):r}}))},68346:(e,t,r)=>{var n=r(6585);n(n.S,"Object",{setPrototypeOf:r(10801).set})},73505:(e,t,r)=>{"use strict";var n=r(51787);var i={};i[r(73060)("toStringTag")]="z";i+""!="[object z]"&&r(95728)(Object.prototype,"toString",(function e(){return"[object "+n(this)+"]"}),true)},31507:(e,t,r)=>{var n=r(6585);var i=r(7168);n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},62103:(e,t,r)=>{var n=r(6585);var i=r(69998);n(n.G+n.F*(parseInt!=i),{parseInt:i})},31988:(e,t,r)=>{"use strict";var n=r(73520);var i=r(30788);var a=r(14975);var o=r(51787);var s=r(6585);var l=r(49995);var u=r(98272);var c=r(17888);var d=r(5271);var f=r(52646);var p=r(99498).set;var g=r(23943)();var h=r(54282);var v=r(68459);var m=r(94813);var y=r(90769);var b="Promise";var w=i.TypeError;var _=i.process;var S=_&&_.versions;var P=S&&S.v8||"";var E=i[b];var k="process"==o(_);var C=function(){};var O,A,T,j;var D=A=h.f;var L=!!function(){try{var e=E.resolve(1);var t=(e.constructor={})[r(73060)("species")]=function(e){e(C,C)};return(k||"function"==typeof PromiseRejectionEvent)&&e.then(C)instanceof t&&0!==P.indexOf("6.6")&&-1===m.indexOf("Chrome/66")}catch(e){}}();var R=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t};var I=function(e,t){if(e._n)return;e._n=true;var r=e._c;g((function(){var n=e._v;var i=1==e._s;var a=0;var o=function(t){var r=i?t.ok:t.fail;var a=t.resolve;var o=t.reject;var s=t.domain;var l,u,c;try{if(r){if(!i){2==e._h&&N(e);e._h=1}if(true===r)l=n;else{s&&s.enter();l=r(n);if(s){s.exit();c=true}}l===t.promise?o(w("Promise-chain cycle")):(u=R(l))?u.call(l,a,o):a(l)}else o(n)}catch(e){s&&!c&&s.exit();o(e)}};while(r.length>a)o(r[a++]);e._c=[];e._n=false;t&&!e._h&&M(e)}))};var M=function(e){p.call(i,(function(){var t=e._v;var r=x(e);var n,a,o;if(r){n=v((function(){k?_.emit("unhandledRejection",t,e):(a=i.onunhandledrejection)?a({promise:e,reason:t}):(o=i.console)&&o.error&&o.error("Unhandled promise rejection",t)}));e._h=k||x(e)?2:1}e._a=void 0;if(r&&n.e)throw n.v}))};var x=function(e){return 1!==e._h&&0===(e._a||e._c).length};var N=function(e){p.call(i,(function(){var t;k?_.emit("rejectionHandled",e):(t=i.onrejectionhandled)&&t({promise:e,reason:e._v})}))};var F=function(e){var t=this;if(t._d)return;t._d=true;t=t._w||t;t._v=e;t._s=2;t._a||(t._a=t._c.slice());I(t,true)};var V=function(e){var t=this;var r;if(t._d)return;t._d=true;t=t._w||t;try{if(t===e)throw w("Promise can't be resolved itself");if(r=R(e))g((function(){var n={_w:t,_d:false};try{r.call(e,a(V,n,1),a(F,n,1))}catch(e){F.call(n,e)}}));else{t._v=e;t._s=1;I(t,false)}}catch(e){F.call({_w:t,_d:false},e)}};if(!L){E=function e(t){c(this,E,b,"_h");u(t);O.call(this);try{t(a(V,this,1),a(F,this,1))}catch(e){F.call(this,e)}};O=function e(t){this._c=[];this._a=void 0;this._s=0;this._d=false;this._v=void 0;this._h=0;this._n=false};O.prototype=r(92181)(E.prototype,{then:function e(t,r){var n=D(f(this,E));n.ok="function"!=typeof t||t;n.fail="function"==typeof r&&r;n.domain=k?_.domain:void 0;this._c.push(n);this._a&&this._a.push(n);this._s&&I(this,false);return n.promise},catch:function(e){return this.then(void 0,e)}});T=function(){var e=new O;this.promise=e;this.resolve=a(V,e,1);this.reject=a(F,e,1)};h.f=D=function(e){return e===E||e===j?new T(e):A(e)}}s(s.G+s.W+s.F*!L,{Promise:E});r(20722)(E,b);r(68354)(b);j=r(23311)[b];s(s.S+s.F*!L,b,{reject:function e(t){var r=D(this);var n=r.reject;n(t);return r.promise}});s(s.S+s.F*(n||!L),b,{resolve:function e(t){return y(n&&this===j?E:this,t)}});s(s.S+s.F*!(L&&r(63969)((function(e){E.all(e)["catch"](C)}))),b,{all:function e(t){var r=this;var n=D(r);var i=n.resolve;var a=n.reject;var o=v((function(){var e=[];var n=0;var o=1;d(t,false,(function(t){var s=n++;var l=false;e.push(void 0);o++;r.resolve(t).then((function(t){if(l)return;l=true;e[s]=t;--o||i(e)}),a)}));--o||i(e)}));o.e&&a(o.v);return n.promise},race:function e(t){var r=this;var n=D(r);var i=n.reject;var a=v((function(){d(t,false,(function(e){r.resolve(e).then(n.resolve,i)}))}));a.e&&i(a.v);return n.promise}})},37382:(e,t,r)=>{var n=r(6585);var i=r(98272);var a=r(55001);var o=(r(30788).Reflect||{}).apply;var s=Function.apply;n(n.S+n.F*!r(85195)((function(){o((function(){}))})),"Reflect",{apply:function e(t,r,n){var l=i(t);var u=a(n);return o?o(l,r,u):s.call(l,r,u)}})},32163:(e,t,r)=>{var n=r(6585);var i=r(42602);var a=r(98272);var o=r(55001);var s=r(49995);var l=r(85195);var u=r(93723);var c=(r(30788).Reflect||{}).construct;var d=l((function(){function e(){}return!(c((function(){}),[],e)instanceof e)}));var f=!l((function(){c((function(){}))}));n(n.S+n.F*(d||f),"Reflect",{construct:function e(t,r){a(t);o(r);var n=arguments.length<3?t:a(arguments[2]);if(f&&!d)return c(t,r,n);if(t==n){switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3])}var l=[null];l.push.apply(l,r);return new(u.apply(t,l))}var p=n.prototype;var g=i(s(p)?p:Object.prototype);var h=Function.apply.call(t,g,r);return s(h)?h:g}})},35163:(e,t,r)=>{var n=r(68487);var i=r(6585);var a=r(55001);var o=r(92208);i(i.S+i.F*r(85195)((function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function e(t,r,i){a(t);r=o(r,true);a(i);try{n.f(t,r,i);return true}catch(e){return false}}})},59076:(e,t,r)=>{var n=r(6585);var i=r(78534).f;var a=r(55001);n(n.S,"Reflect",{deleteProperty:function e(t,r){var n=i(a(t),r);return!(n&&!n.configurable)&&delete t[r]}})},1430:(e,t,r)=>{"use strict";var n=r(6585);var i=r(55001);var a=function(e){this._t=i(e);this._i=0;var t=this._k=[];var r;for(r in e)t.push(r)};r(7149)(a,"Object",(function(){var e=this;var t=e._k;var r;do{if(e._i>=t.length)return{value:void 0,done:true}}while(!((r=t[e._i++])in e._t));return{value:r,done:false}}));n(n.S,"Reflect",{enumerate:function e(t){return new a(t)}})},11962:(e,t,r)=>{var n=r(78534);var i=r(6585);var a=r(55001);i(i.S,"Reflect",{getOwnPropertyDescriptor:function e(t,r){return n.f(a(t),r)}})},53130:(e,t,r)=>{var n=r(6585);var i=r(37e3);var a=r(55001);n(n.S,"Reflect",{getPrototypeOf:function e(t){return i(a(t))}})},63099:(e,t,r)=>{var n=r(78534);var i=r(37e3);var a=r(93817);var o=r(6585);var s=r(49995);var l=r(55001);function u(e,t){var r=arguments.length<3?e:arguments[2];var o,c;if(l(e)===r)return e[t];if(o=n.f(e,t))return a(o,"value")?o.value:void 0!==o.get?o.get.call(r):void 0;if(s(c=i(e)))return u(c,t,r)}o(o.S,"Reflect",{get:u})},35420:(e,t,r)=>{var n=r(6585);n(n.S,"Reflect",{has:function e(t,r){return r in t}})},1438:(e,t,r)=>{var n=r(6585);var i=r(55001);var a=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function e(t){i(t);return!a||a(t)}})},72197:(e,t,r)=>{var n=r(6585);n(n.S,"Reflect",{ownKeys:r(84671)})},14173:(e,t,r)=>{var n=r(6585);var i=r(55001);var a=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function e(t){i(t);try{a&&a(t);return true}catch(e){return false}}})},91787:(e,t,r)=>{var n=r(6585);var i=r(10801);i&&n(n.S,"Reflect",{setPrototypeOf:function e(t,r){i.check(t,r);try{i.set(t,r);return true}catch(e){return false}}})},91585:(e,t,r)=>{var n=r(68487);var i=r(78534);var a=r(37e3);var o=r(93817);var s=r(6585);var l=r(88902);var u=r(55001);var c=r(49995);function d(e,t,r){var s=arguments.length<4?e:arguments[3];var f=i.f(u(e),t);var p,g;if(!f){if(c(g=a(e)))return d(g,t,r,s);f=l(0)}if(o(f,"value")){if(false===f.writable||!c(s))return false;if(p=i.f(s,t)){if(p.get||p.set||false===p.writable)return false;p.value=r;n.f(s,t,p)}else n.f(s,t,l(0,r));return true}return void 0!==f.set&&(f.set.call(s,r),true)}s(s.S,"Reflect",{set:d})},79970:(e,t,r)=>{var n=r(30788);var i=r(34490);var a=r(68487).f;var o=r(30979).f;var s=r(24825);var l=r(12308);var u=n.RegExp;var c=u;var d=u.prototype;var f=/a/g;var p=/a/g;var g=new u(f)!==f;if(r(17536)&&(!g||r(85195)((function(){p[r(73060)("match")]=false;return u(f)!=f||u(p)==p||"/a/i"!=u(f,"i")})))){u=function e(t,r){var n=this instanceof u;var a=s(t);var o=void 0===r;return!n&&a&&t.constructor===u&&o?t:i(g?new c(a&&!o?t.source:t,r):c((a=t instanceof u)?t.source:t,a&&o?l.call(t):r),n?this:d,u)};var h=function(e){e in u||a(u,e,{configurable:true,get:function(){return c[e]},set:function(t){c[e]=t}})};for(var v=o(c),m=0;v.length>m;)h(v[m++]);d.constructor=u;u.prototype=d;r(95728)(n,"RegExp",u)}r(68354)("RegExp")},48434:(e,t,r)=>{"use strict";var n=r(73802);r(6585)({target:"RegExp",proto:true,forced:n!==/./.exec},{exec:n})},58656:(e,t,r)=>{r(17536)&&"g"!=/./g.flags&&r(68487).f(RegExp.prototype,"flags",{configurable:true,get:r(12308)})},5443:(e,t,r)=>{"use strict";var n=r(55001);var i=r(41435);var a=r(18694);var o=r(81286);r(40180)("match",1,(function(e,t,r,s){return[function r(n){var i=e(this);var a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,i):new RegExp(n)[t](String(i))},function(e){var t=s(r,e,this);if(t.done)return t.value;var l=n(e);var u=String(this);if(!l.global)return o(l,u);var c=l.unicode;l.lastIndex=0;var d=[];var f=0;var p;while(null!==(p=o(l,u))){var g=String(p[0]);d[f]=g;""===g&&(l.lastIndex=a(u,i(l.lastIndex),c));f++}return 0===f?null:d}]}))},74509:(e,t,r)=>{"use strict";var n=r(55001);var i=r(20233);var a=r(41435);var o=r(40205);var s=r(18694);var l=r(81286);var u=Math.max;var c=Math.min;var d=Math.floor;var f=/\$([$&`']|\d\d?|<[^>]*>)/g;var p=/\$([$&`']|\d\d?)/g;var g=function(e){return void 0===e?e:String(e)};r(40180)("replace",2,(function(e,t,r,h){return[function n(i,a){var o=e(this);var s=void 0==i?void 0:i[t];return void 0!==s?s.call(i,o,a):r.call(String(o),i,a)},function(e,t){var i=h(r,e,this,t);if(i.done)return i.value;var d=n(e);var f=String(this);var p="function"===typeof t;p||(t=String(t));var m=d.global;if(m){var y=d.unicode;d.lastIndex=0}var b=[];while(true){var w=l(d,f);if(null===w)break;b.push(w);if(!m)break;var _=String(w[0]);""===_&&(d.lastIndex=s(f,a(d.lastIndex),y))}var S="";var P=0;for(var E=0;E<b.length;E++){w=b[E];var k=String(w[0]);var C=u(c(o(w.index),f.length),0);var O=[];for(var A=1;A<w.length;A++)O.push(g(w[A]));var T=w.groups;if(p){var j=[k].concat(O,C,f);void 0!==T&&j.push(T);var D=String(t.apply(void 0,j))}else D=v(k,f,C,O,T,t);if(C>=P){S+=f.slice(P,C)+D;P=C+k.length}}return S+f.slice(P)}];function v(e,t,n,a,o,s){var l=n+e.length;var u=a.length;var c=p;if(void 0!==o){o=i(o);c=f}return r.call(s,c,(function(r,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(l);case"<":s=o[i.slice(1,-1)];break;default:var c=+i;if(0===c)return r;if(c>u){var f=d(c/10);if(0===f)return r;if(f<=u)return void 0===a[f-1]?i.charAt(1):a[f-1]+i.charAt(1);return r}s=a[c-1]}return void 0===s?"":s}))}}))},11894:(e,t,r)=>{"use strict";var n=r(55001);var i=r(69892);var a=r(81286);r(40180)("search",1,(function(e,t,r,o){return[function r(n){var i=e(this);var a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,i):new RegExp(n)[t](String(i))},function(e){var t=o(r,e,this);if(t.done)return t.value;var s=n(e);var l=String(this);var u=s.lastIndex;i(u,0)||(s.lastIndex=0);var c=a(s,l);i(s.lastIndex,u)||(s.lastIndex=u);return null===c?-1:c.index}]}))},48682:(e,t,r)=>{"use strict";var n=r(24825);var i=r(55001);var a=r(52646);var o=r(18694);var s=r(41435);var l=r(81286);var u=r(73802);var c=r(85195);var d=Math.min;var f=[].push;var p="split";var g="length";var h="lastIndex";var v=4294967295;var m=!c((function(){RegExp(v,"y")}));r(40180)("split",2,(function(e,t,r,c){var y;y="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[g]||2!="ab"[p](/(?:ab)*/)[g]||4!="."[p](/(.?)(.?)/)[g]||"."[p](/()()/)[g]>1||""[p](/.?/)[g]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!n(e))return r.call(i,e,t);var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"");var s=0;var l=void 0===t?v:t>>>0;var c=new RegExp(e.source,o+"g");var d,p,m;while(d=u.call(c,i)){p=c[h];if(p>s){a.push(i.slice(s,d.index));d[g]>1&&d.index<i[g]&&f.apply(a,d.slice(1));m=d[0][g];s=p;if(a[g]>=l)break}c[h]===d.index&&c[h]++}s===i[g]?!m&&c.test("")||a.push(""):a.push(i.slice(s));return a[g]>l?a.slice(0,l):a}:"0"[p](void 0,0)[g]?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r;return[function r(n,i){var a=e(this);var o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,a,i):y.call(String(a),n,i)},function(e,t){var n=c(y,e,this,t,y!==r);if(n.done)return n.value;var u=i(e);var f=String(this);var p=a(u,RegExp);var g=u.unicode;var h=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(m?"y":"g");var b=new p(m?u:"^(?:"+u.source+")",h);var w=void 0===t?v:t>>>0;if(0===w)return[];if(0===f.length)return null===l(b,f)?[f]:[];var _=0;var S=0;var P=[];while(S<f.length){b.lastIndex=m?S:0;var E=l(b,m?f:f.slice(S));var k;if(null===E||(k=d(s(b.lastIndex+(m?0:S)),f.length))===_)S=o(f,S,g);else{P.push(f.slice(_,S));if(P.length===w)return P;for(var C=1;C<=E.length-1;C++){P.push(E[C]);if(P.length===w)return P}S=_=k}}P.push(f.slice(_));return P}]}))},29041:(e,t,r)=>{"use strict";r(58656);var n=r(55001);var i=r(12308);var a=r(17536);var o="toString";var s=/./[o];var l=function(e){r(95728)(RegExp.prototype,o,e,true)};r(85195)((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?l((function e(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!a&&t instanceof RegExp?i.call(t):void 0)})):s.name!=o&&l((function e(){return s.call(this)}))},58142:(e,t,r)=>{"use strict";var n=r(27421);var i=r(66756);var a="Set";e.exports=r(31960)(a,(function(e){return function t(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function e(t){return n.def(i(this,a),t=0===t?0:t,t)}},n)},59156:(e,t,r)=>{"use strict";r(27623)("anchor",(function(e){return function t(r){return e(this,"a","name",r)}}))},77490:(e,t,r)=>{"use strict";r(27623)("big",(function(e){return function t(){return e(this,"big","","")}}))},8068:(e,t,r)=>{"use strict";r(27623)("blink",(function(e){return function t(){return e(this,"blink","","")}}))},56403:(e,t,r)=>{"use strict";r(27623)("bold",(function(e){return function t(){return e(this,"b","","")}}))},77273:(e,t,r)=>{"use strict";var n=r(6585);var i=r(66416)(false);n(n.P,"String",{codePointAt:function e(t){return i(this,t)}})},82215:(e,t,r)=>{"use strict";var n=r(6585);var i=r(41435);var a=r(48078);var o="endsWith";var s=""[o];n(n.P+n.F*r(74587)(o),"String",{endsWith:function e(t){var r=a(this,t,o);var n=arguments.length>1?arguments[1]:void 0;var l=i(r.length);var u=void 0===n?l:Math.min(i(n),l);var c=String(t);return s?s.call(r,c,u):r.slice(u-c.length,u)===c}})},59081:(e,t,r)=>{"use strict";r(27623)("fixed",(function(e){return function t(){return e(this,"tt","","")}}))},41074:(e,t,r)=>{"use strict";r(27623)("fontcolor",(function(e){return function t(r){return e(this,"font","color",r)}}))},40247:(e,t,r)=>{"use strict";r(27623)("fontsize",(function(e){return function t(r){return e(this,"font","size",r)}}))},27597:(e,t,r)=>{var n=r(6585);var i=r(25446);var a=String.fromCharCode;var o=String.fromCodePoint;n(n.S+n.F*(!!o&&1!=o.length),"String",{fromCodePoint:function e(t){var r=[];var n=arguments.length;var o=0;var s;while(n>o){s=+arguments[o++];if(i(s,1114111)!==s)throw RangeError(s+" is not a valid code point");r.push(s<65536?a(s):a(55296+((s-=65536)>>10),s%1024+56320))}return r.join("")}})},84641:(e,t,r)=>{"use strict";var n=r(6585);var i=r(48078);var a="includes";n(n.P+n.F*r(74587)(a),"String",{includes:function e(t){return!!~i(this,t,a).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},73933:(e,t,r)=>{"use strict";r(27623)("italics",(function(e){return function t(){return e(this,"i","","")}}))},91115:(e,t,r)=>{"use strict";var n=r(66416)(true);r(21866)(String,"String",(function(e){this._t=String(e);this._i=0}),(function(){var e=this._t;var t=this._i;var r;if(t>=e.length)return{value:void 0,done:true};r=n(e,t);this._i+=r.length;return{value:r,done:false}}))},74038:(e,t,r)=>{"use strict";r(27623)("link",(function(e){return function t(r){return e(this,"a","href",r)}}))},5567:(e,t,r)=>{var n=r(6585);var i=r(65047);var a=r(41435);n(n.S,"String",{raw:function e(t){var r=i(t.raw);var n=a(r.length);var o=arguments.length;var s=[];var l=0;while(n>l){s.push(String(r[l++]));l<o&&s.push(String(arguments[l]))}return s.join("")}})},69689:(e,t,r)=>{var n=r(6585);n(n.P,"String",{repeat:r(7994)})},2706:(e,t,r)=>{"use strict";r(27623)("small",(function(e){return function t(){return e(this,"small","","")}}))},91810:(e,t,r)=>{"use strict";var n=r(6585);var i=r(41435);var a=r(48078);var o="startsWith";var s=""[o];n(n.P+n.F*r(74587)(o),"String",{startsWith:function e(t){var r=a(this,t,o);var n=i(Math.min(arguments.length>1?arguments[1]:void 0,r.length));var l=String(t);return s?s.call(r,l,n):r.slice(n,n+l.length)===l}})},76164:(e,t,r)=>{"use strict";r(27623)("strike",(function(e){return function t(){return e(this,"strike","","")}}))},83325:(e,t,r)=>{"use strict";r(27623)("sub",(function(e){return function t(){return e(this,"sub","","")}}))},13618:(e,t,r)=>{"use strict";r(27623)("sup",(function(e){return function t(){return e(this,"sup","","")}}))},18198:(e,t,r)=>{"use strict";r(7446)("trim",(function(e){return function t(){return e(this,3)}}))},93893:(e,t,r)=>{"use strict";var n=r(30788);var i=r(93817);var a=r(17536);var o=r(6585);var s=r(95728);var l=r(39278).KEY;var u=r(85195);var c=r(5075);var d=r(20722);var f=r(12463);var p=r(73060);var g=r(6613);var h=r(91578);var v=r(45938);var m=r(21318);var y=r(55001);var b=r(49995);var w=r(20233);var _=r(65047);var S=r(92208);var P=r(88902);var E=r(42602);var k=r(40731);var C=r(78534);var O=r(14070);var A=r(68487);var T=r(59557);var j=C.f;var D=A.f;var L=k.f;var R=n.Symbol;var I=n.JSON;var M=I&&I.stringify;var x="prototype";var N=p("_hidden");var F=p("toPrimitive");var V={}.propertyIsEnumerable;var B=c("symbol-registry");var W=c("symbols");var G=c("op-symbols");var q=Object[x];var U="function"==typeof R&&!!O.f;var H=n.QObject;var z=!H||!H[x]||!H[x].findChild;var $=a&&u((function(){return 7!=E(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=j(q,t);n&&delete q[t];D(e,t,r);n&&e!==q&&D(q,t,n)}:D;var K=function(e){var t=W[e]=E(R[x]);t._k=e;return t};var Z=U&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R};var Y=function e(t,r,n){t===q&&Y(G,r,n);y(t);r=S(r,true);y(n);if(i(W,r)){if(n.enumerable){i(t,N)&&t[N][r]&&(t[N][r]=false);n=E(n,{enumerable:P(0,false)})}else{i(t,N)||D(t,N,P(1,{}));t[N][r]=true}return $(t,r,n)}return D(t,r,n)};var X=function e(t,r){y(t);var n=v(r=_(r));var i=0;var a=n.length;var o;while(a>i)Y(t,o=n[i++],r[o]);return t};var J=function e(t,r){return void 0===r?E(t):X(E(t),r)};var Q=function e(t){var r=V.call(this,t=S(t,true));if(this===q&&i(W,t)&&!i(G,t))return false;return!(r||!i(this,t)||!i(W,t)||i(this,N)&&this[N][t])||r};var ee=function e(t,r){t=_(t);r=S(r,true);if(t===q&&i(W,r)&&!i(G,r))return;var n=j(t,r);!n||!i(W,r)||i(t,N)&&t[N][r]||(n.enumerable=true);return n};var te=function e(t){var r=L(_(t));var n=[];var a=0;var o;while(r.length>a)i(W,o=r[a++])||o==N||o==l||n.push(o);return n};var re=function e(t){var r=t===q;var n=L(r?G:_(t));var a=[];var o=0;var s;while(n.length>o)!i(W,s=n[o++])||r&&!i(q,s)||a.push(W[s]);return a};if(!U){R=function e(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0);var r=function(e){this===q&&r.call(G,e);i(this,N)&&i(this[N],t)&&(this[N][t]=false);$(this,t,P(1,e))};a&&z&&$(q,t,{configurable:true,set:r});return K(t)};s(R[x],"toString",(function e(){return this._k}));C.f=ee;A.f=Y;r(30979).f=k.f=te;r(73799).f=Q;O.f=re;a&&!r(73520)&&s(q,"propertyIsEnumerable",Q,true);g.f=function(e){return K(p(e))}}o(o.G+o.W+o.F*!U,{Symbol:R});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;ne.length>ie;)p(ne[ie++]);for(var ae=T(p.store),oe=0;ae.length>oe;)h(ae[oe++]);o(o.S+o.F*!U,"Symbol",{for:function(e){return i(B,e+="")?B[e]:B[e]=R(e)},keyFor:function e(t){if(!Z(t))throw TypeError(t+" is not a symbol!");for(var r in B)if(B[r]===t)return r},useSetter:function(){z=true},useSimple:function(){z=false}});o(o.S+o.F*!U,"Object",{create:J,defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:re});var se=u((function(){O.f(1)}));o(o.S+o.F*se,"Object",{getOwnPropertySymbols:function e(t){return O.f(w(t))}});I&&o(o.S+o.F*(!U||u((function(){var e=R();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))}))),"JSON",{stringify:function e(t){var r=[t];var n=1;var i,a;while(arguments.length>n)r.push(arguments[n++]);a=i=r[1];if(!b(i)&&void 0===t||Z(t))return;m(i)||(i=function(e,t){"function"==typeof a&&(t=a.call(this,e,t));if(!Z(t))return t});r[1]=i;return M.apply(I,r)}});R[x][F]||r(21098)(R[x],F,R[x].valueOf);d(R,"Symbol");d(Math,"Math",true);d(n.JSON,"JSON",true)},31295:(e,t,r)=>{"use strict";var n=r(6585);var i=r(46051);var a=r(27412);var o=r(55001);var s=r(25446);var l=r(41435);var u=r(49995);var c=r(30788).ArrayBuffer;var d=r(52646);var f=a.ArrayBuffer;var p=a.DataView;var g=i.ABV&&c.isView;var h=f.prototype.slice;var v=i.VIEW;var m="ArrayBuffer";n(n.G+n.W+n.F*(c!==f),{ArrayBuffer:f});n(n.S+n.F*!i.CONSTR,m,{isView:function e(t){return g&&g(t)||u(t)&&v in t}});n(n.P+n.U+n.F*r(85195)((function(){return!new f(2).slice(1,void 0).byteLength})),m,{slice:function e(t,r){if(void 0!==h&&void 0===r)return h.call(o(this),t);var n=o(this).byteLength;var i=s(t,n);var a=s(void 0===r?n:r,n);var u=new(d(this,f))(l(a-i));var c=new p(this);var g=new p(u);var v=0;while(i<a)g.setUint8(v++,c.getUint8(i++));return u}});r(68354)(m)},94863:(e,t,r)=>{var n=r(6585);n(n.G+n.W+n.F*!r(46051).ABV,{DataView:r(27412).DataView})},11682:(e,t,r)=>{r(95053)("Float32",4,(function(e){return function t(r,n,i){return e(this,r,n,i)}}))},91410:(e,t,r)=>{r(95053)("Float64",8,(function(e){return function t(r,n,i){return e(this,r,n,i)}}))},61953:(e,t,r)=>{r(95053)("Int16",2,(function(e){return function t(r,n,i){return e(this,r,n,i)}}))},99512:(e,t,r)=>{r(95053)("Int32",4,(function(e){return function t(r,n,i){return e(this,r,n,i)}}))},34503:(e,t,r)=>{r(95053)("Int8",1,(function(e){return function t(r,n,i){return e(this,r,n,i)}}))},52515:(e,t,r)=>{r(95053)("Uint16",2,(function(e){return function t(r,n,i){return e(this,r,n,i)}}))},20994:(e,t,r)=>{r(95053)("Uint32",4,(function(e){return function t(r,n,i){return e(this,r,n,i)}}))},24877:(e,t,r)=>{r(95053)("Uint8",1,(function(e){return function t(r,n,i){return e(this,r,n,i)}}))},40049:(e,t,r)=>{r(95053)("Uint8",1,(function(e){return function t(r,n,i){return e(this,r,n,i)}}),true)},57383:(e,t,r)=>{"use strict";var n=r(30788);var i=r(16754)(0);var a=r(95728);var o=r(39278);var s=r(69463);var l=r(40062);var u=r(49995);var c=r(66756);var d=r(66756);var f=!n.ActiveXObject&&"ActiveXObject"in n;var p="WeakMap";var g=o.getWeak;var h=Object.isExtensible;var v=l.ufstore;var m;var y=function(e){return function t(){return e(this,arguments.length>0?arguments[0]:void 0)}};var b={get:function e(t){if(u(t)){var r=g(t);if(true===r)return v(c(this,p)).get(t);return r?r[this._i]:void 0}},set:function e(t,r){return l.def(c(this,p),t,r)}};var w=e.exports=r(31960)(p,y,b,l,true,true);if(d&&f){m=l.getConstructor(y,p);s(m.prototype,b);o.NEED=true;i(["delete","has","get","set"],(function(e){var t=w.prototype;var r=t[e];a(t,e,(function(t,n){if(u(t)&&!h(t)){this._f||(this._f=new m);var i=this._f[e](t,n);return"set"==e?this:i}return r.call(this,t,n)}))}))}},31670:(e,t,r)=>{"use strict";var n=r(40062);var i=r(66756);var a="WeakSet";r(31960)(a,(function(e){return function t(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function e(t){return n.def(i(this,a),t,true)}},n,false,true)},13403:(e,t,r)=>{"use strict";var n=r(6585);var i=r(54455);var a=r(20233);var o=r(41435);var s=r(98272);var l=r(81311);n(n.P,"Array",{flatMap:function e(t){var r=a(this);var n,u;s(t);n=o(r.length);u=l(r,0);i(u,r,r,n,0,1,t,arguments[1]);return u}});r(81738)("flatMap")},8300:(e,t,r)=>{"use strict";var n=r(6585);var i=r(93263)(true);n(n.P,"Array",{includes:function e(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}});r(81738)("includes")},82062:(e,t,r)=>{var n=r(6585);var i=r(81987)(true);n(n.S,"Object",{entries:function e(t){return i(t)}})},41733:(e,t,r)=>{var n=r(6585);var i=r(84671);var a=r(65047);var o=r(78534);var s=r(21519);n(n.S,"Object",{getOwnPropertyDescriptors:function e(t){var r=a(t);var n=o.f;var l=i(r);var u={};var c=0;var d,f;while(l.length>c){f=n(r,d=l[c++]);void 0!==f&&s(u,d,f)}return u}})},51326:(e,t,r)=>{var n=r(6585);var i=r(81987)(false);n(n.S,"Object",{values:function e(t){return i(t)}})},24679:(e,t,r)=>{"use strict";var n=r(6585);var i=r(23311);var a=r(30788);var o=r(52646);var s=r(90769);n(n.P+n.R,"Promise",{finally:function(e){var t=o(this,i.Promise||a.Promise);var r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then((function(){return r}))}:e,r?function(r){return s(t,e()).then((function(){throw r}))}:e)}})},71882:(e,t,r)=>{"use strict";var n=r(6585);var i=r(7868);var a=r(94813);var o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);n(n.P+n.F*o,"String",{padEnd:function e(t){return i(this,t,arguments.length>1?arguments[1]:void 0,false)}})},29743:(e,t,r)=>{"use strict";var n=r(6585);var i=r(7868);var a=r(94813);var o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);n(n.P+n.F*o,"String",{padStart:function e(t){return i(this,t,arguments.length>1?arguments[1]:void 0,true)}})},17634:(e,t,r)=>{"use strict";r(7446)("trimLeft",(function(e){return function t(){return e(this,1)}}),"trimStart")},77511:(e,t,r)=>{"use strict";r(7446)("trimRight",(function(e){return function t(){return e(this,2)}}),"trimEnd")},78770:(e,t,r)=>{r(91578)("asyncIterator")},37359:(e,t,r)=>{var n=r(22744);var i=r(59557);var a=r(95728);var o=r(30788);var s=r(21098);var l=r(80798);var u=r(73060);var c=u("iterator");var d=u("toStringTag");var f=l.Array;var p={CSSRuleList:true,CSSStyleDeclaration:false,CSSValueList:false,ClientRectList:false,DOMRectList:false,DOMStringList:false,DOMTokenList:true,DataTransferItemList:false,FileList:false,HTMLAllCollection:false,HTMLCollection:false,HTMLFormElement:false,HTMLSelectElement:false,MediaList:true,MimeTypeArray:false,NamedNodeMap:false,NodeList:true,PaintRequestList:false,Plugin:false,PluginArray:false,SVGLengthList:false,SVGNumberList:false,SVGPathSegList:false,SVGPointList:false,SVGStringList:false,SVGTransformList:false,SourceBufferList:false,StyleSheetList:true,TextTrackCueList:false,TextTrackList:false,TouchList:false};for(var g=i(p),h=0;h<g.length;h++){var v=g[h];var m=p[v];var y=o[v];var b=y&&y.prototype;var w;if(b){b[c]||s(b,c,f);b[d]||s(b,d,v);l[v]=f;if(m)for(w in n)b[w]||a(b,w,n[w],true)}}},46653:(e,t,r)=>{var n=r(6585);var i=r(99498);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},30347:(e,t,r)=>{var n=r(30788);var i=r(6585);var a=r(94813);var o=[].slice;var s=/MSIE .\./.test(a);var l=function(e){return function(t,r){var n=arguments.length>2;var i=!!n&&o.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,r)}};i(i.G+i.B+i.F*s,{setTimeout:l(n.setTimeout),setInterval:l(n.setInterval)})},82356:(e,t,r)=>{r(30347);r(46653);r(37359);e.exports=r(23311)},35800:e=>{var t=function(e){"use strict";var t=Object.prototype;var r=t.hasOwnProperty;var n=Object.defineProperty||function(e,t,r){e[t]=r.value};var i;var a="function"===typeof Symbol?Symbol:{};var o=a.iterator||"@@iterator";var s=a.asyncIterator||"@@asyncIterator";var l=a.toStringTag||"@@toStringTag";function u(e,t,r){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true});return e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var a=t&&t.prototype instanceof m?t:m;var o=Object.create(a.prototype);var s=new j(i||[]);n(o,"_invoke",{value:C(e,r,s)});return o}e.wrap=c;function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}var f="suspendedStart";var p="suspendedYield";var g="executing";var h="completed";var v={};function m(){}function y(){}function b(){}var w={};u(w,o,(function(){return this}));var _=Object.getPrototypeOf;var S=_&&_(_(D([])));S&&S!==t&&r.call(S,o)&&(w=S);var P=b.prototype=m.prototype=Object.create(w);y.prototype=b;n(P,"constructor",{value:b,configurable:true});n(b,"constructor",{value:y,configurable:true});y.displayName=u(b,l,"GeneratorFunction");function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))};e.mark=function(e){if(Object.setPrototypeOf)Object.setPrototypeOf(e,b);else{e.__proto__=b;u(e,l,"GeneratorFunction")}e.prototype=Object.create(P);return e};e.awrap=function(e){return{__await:e}};function k(e,t){function i(n,a,o,s){var l=d(e[n],e,a);if("throw"!==l.type){var u=l.arg;var c=u.value;if(c&&"object"===typeof c&&r.call(c,"__await"))return t.resolve(c.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)}));return t.resolve(c).then((function(e){u.value=e;o(u)}),(function(e){return i("throw",e,o,s)}))}s(l.arg)}var a;function o(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}n(this,"_invoke",{value:o})}E(k.prototype);u(k.prototype,s,(function(){return this}));e.AsyncIterator=k;e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new k(c(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))};function C(e,t,r){var n=f;return function i(a,o){if(n===g)throw new Error("Generator is already running");if(n===h){if("throw"===a)throw o;return L()}r.method=a;r.arg=o;while(true){var s=r.delegate;if(s){var l=O(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f){n=h;throw r.arg}r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=g;var u=d(e,t,r);if("normal"===u.type){n=r.done?h:p;if(u.arg===v)continue;return{value:u.arg,done:r.done}}if("throw"===u.type){n=h;r.method="throw";r.arg=u.arg}}}}function O(e,t){var r=t.method;var n=e.iterator[r];if(n===i){t.delegate=null;if("throw"===r&&e.iterator["return"]){t.method="return";t.arg=i;O(e,t);if("throw"===t.method)return v}if("return"!==r){t.method="throw";t.arg=new TypeError("The iterator does not provide a '"+r+"' method")}return v}var a=d(n,e.iterator,t.arg);if("throw"===a.type){t.method="throw";t.arg=a.arg;t.delegate=null;return v}var o=a.arg;if(!o){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return v}if(!o.done)return o;t[e.resultName]=o.value;t.next=e.nextLoc;if("return"!==t.method){t.method="next";t.arg=i}t.delegate=null;return v}E(P);u(P,l,"Generator");u(P,o,(function(){return this}));u(P,"toString",(function(){return"[object Generator]"}));function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]);if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(A,this);this.reset(true)}e.keys=function(e){var t=Object(e);var r=[];for(var n in t)r.push(n);r.reverse();return function e(){while(r.length){var n=r.pop();if(n in t){e.value=n;e.done=false;return e}}e.done=true;return e}};function D(e){if(e){var t=e[o];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){while(++n<e.length)if(r.call(e,n)){t.value=e[n];t.done=false;return t}t.value=i;t.done=true;return t};return a.next=a}}return{next:L}}e.values=D;function L(){return{value:i,done:true}}j.prototype={constructor:j,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=i;this.done=false;this.delegate=null;this.method="next";this.arg=i;this.tryEntries.forEach(T);if(!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=i)},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){s.type="throw";s.arg=e;t.next=r;if(n){t.method="next";t.arg=i}return!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];var s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc");var u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,true);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,true)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};o.type=e;o.arg=t;if(a){this.method="next";this.next=a.finallyLoc;return v}return this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;if("break"===e.type||"continue"===e.type)this.next=e.arg;else if("return"===e.type){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else"normal"===e.type&&t&&(this.next=t);return v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e){this.complete(r.completion,r.afterLoc);T(r);return v}}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){this.delegate={iterator:D(e),resultName:t,nextLoc:r};"next"===this.method&&(this.arg=i);return v}};return e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},93725:e=>{!function(t,r){e.exports=r()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n={};function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){a(e,t,r[t])}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(n),r.d(n,"on",(function(){return o})),r.d(n,"off",(function(){return s})),r.d(n,"createElementFromString",(function(){return u})),r.d(n,"removeAttribute",(function(){return c})),r.d(n,"createFromTemplate",(function(){return d})),r.d(n,"eventPath",(function(){return f})),r.d(n,"adjustableInputNumbers",(function(){return p}));const o=l.bind(null,"addEventListener"),s=l.bind(null,"removeEventListener");function l(e,t,r,n,a={}){t instanceof HTMLCollection||t instanceof NodeList?t=Array.from(t):Array.isArray(t)||(t=[t]),Array.isArray(r)||(r=[r]);for(const o of t)for(const t of r)o[e](t,n,i({capture:!1},a));return Array.prototype.slice.call(arguments,1)}function u(e){const t=document.createElement("div");return t.innerHTML=e.trim(),t.firstElementChild}function c(e,t){const r=e.getAttribute(t);return e.removeAttribute(t),r}function d(e){return function e(t,r={}){const n=c(t,"data-con"),i=c(t,"data-key");i&&(r[i]=t);const a=n?r[n]={}:r;for(let r of Array.from(t.children)){const t=c(r,"data-arr");t?(a[t]||(a[t]=[])).push(r):e(r,a)}return r}(u(e))}function f(e){let t=e.path||e.composedPath&&e.composedPath();if(t)return t;let r=e.target.parentElement;for(t=[e.target,r];r=r.parentElement;)t.push(r);return t.push(document,window),t}function p(e,t=(e=>e)){function r(r){const n=[.001,.01,.1][Number(r.shiftKey||2*r.ctrlKey)]*(r.deltaY<0?1:-1);let i=0,a=e.selectionStart;e.value=e.value.replace(/[\d.]+/g,((e,r)=>r<=a&&r+e.length>=a?(a=r,t(Number(e),n,i)):(i++,e))),e.focus(),e.setSelectionRange(a,a),r.preventDefault(),e.dispatchEvent(new Event("input"))}o(e,"focus",(()=>o(window,"wheel",r,{passive:!1}))),o(e,"blur",(()=>s(window,"wheel",r)))}const{min:g,max:h,floor:v,round:m}=Math;function y(e,t,r){t/=100,r/=100;let n=v(e=e/360*6),i=e-n,a=r*(1-t),o=r*(1-i*t),s=r*(1-(1-i)*t),l=n%6;return[255*[r,o,a,a,s,r][l],255*[s,r,r,o,a,a][l],255*[a,a,s,r,r,o][l]]}function b(e,t,r){let n,i,a;const o=g(e/=255,t/=255,r/=255),s=h(e,t,r),l=s-o;if(0===l)n=i=0;else{i=l/s;let a=((s-e)/6+l/2)/l,o=((s-t)/6+l/2)/l,u=((s-r)/6+l/2)/l;e===s?n=u-o:t===s?n=1/3+a-u:r===s&&(n=2/3+o-a),n<0?n+=1:n>1&&(n-=1)}return[360*n,100*i,100*(a=s)]}function w(e,t,r,n){return t/=100,r/=100,[...b(255*(1-g(1,(e/=100)*(1-(n/=100))+n)),255*(1-g(1,t*(1-n)+n)),255*(1-g(1,r*(1-n)+n)))]}function _(e,t,r){return t/=100,[e,2*(t*=(r/=100)<.5?r:1-r)/(r+t)*100,100*(r+t)]}function S(e){return b(...e.match(/.{2}/g).map((e=>parseInt(e,16))))}function P(e){e=e.match(/^[a-zA-Z]+$/)?function(e){const t=document.createElement("canvas").getContext("2d");return t.fillStyle=e,t.fillStyle}(e):e;const t={cmyk:/^cmyk[\D]+(\d+)[\D]+(\d+)[\D]+(\d+)[\D]+(\d+)/i,rgba:/^(rgb|rgba)[\D]+(\d+)[\D]+(\d+)[\D]+(\d+)[\D]*?([\d.]+|$)/i,hsla:/^(hsl|hsla)[\D]+(\d+)[\D]+(\d+)[\D]+(\d+)[\D]*?([\d.]+|$)/i,hsva:/^(hsv|hsva)[\D]+(\d+)[\D]+(\d+)[\D]+(\d+)[\D]*?([\d.]+|$)/i,hex:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},r=e=>e.map((e=>/^(|\d+)\.\d+|\d+$/.test(e)?Number(e):void 0));let n;for(const i in t)if(n=t[i].exec(e))switch(i){case"cmyk":{let[,e,t,a,o]=r(n);if(e>100||t>100||a>100||o>100)break;return{values:[...w(e,t,a,o),1],type:i}}case"rgba":{let[,,e,t,a,o=1]=r(n);if(e>255||t>255||a>255||o<0||o>1)break;return{values:[...b(e,t,a),o],type:i}}case"hex":{const e=(e,t)=>[e.substring(0,t),e.substring(t,e.length)];let t,[,r]=n;return 3===r.length?r+="F":6===r.length&&(r+="FF"),4===r.length?[r,t]=e(r,3).map((e=>e+e)):8===r.length&&([r,t]=e(r,6)),t=parseInt(t,16)/255,{values:[...S(r),t],type:i}}case"hsla":{let[,,e,t,a,o=1]=r(n);if(e>360||t>100||a>100||o<0||o>1)break;return{values:[..._(e,t,a),o],type:i}}case"hsva":{let[,,e,t,a,o=1]=r(n);if(e>360||t>100||a>100||o<0||o>1)break;return{values:[e,t,a,o],type:i}}}return{values:null,type:null}}function E(e=0,t=0,r=0,n=1){const{ceil:i}=Math,a={h:e,s:t,v:r,a:n,toHSVA(){const e=[a.h,a.s,a.v],t=e.map(i);return e.push(a.a),e.toString=()=>"hsva(".concat(t[0],", ").concat(t[1],"%, ").concat(t[2],"%, ").concat(a.a.toFixed(1),")"),e},toHSLA(){const e=function(e,t,r){let n=(2-(t/=100))*(r/=100)/2;return 0!==n&&(t=1===n?0:n<.5?t*r/(2*n):t*r/(2-2*n)),[e,100*t,100*n]}(a.h,a.s,a.v),t=e.map(i);return e.push(a.a),e.toString=()=>"hsla(".concat(t[0],", ").concat(t[1],"%, ").concat(t[2],"%, ").concat(a.a.toFixed(1),")"),e},toRGBA(){const e=y(a.h,a.s,a.v),t=e.map(i);return e.push(a.a),e.toString=()=>"rgba(".concat(t[0],", ").concat(t[1],", ").concat(t[2],", ").concat(a.a.toFixed(1),")"),e},toCMYK(){const e=function(e,t,r){const n=y(e,t,r),i=n[0]/255,a=n[1]/255,o=n[2]/255;let s,l,u,c;return[100*(l=1===(s=g(1-i,1-a,1-o))?0:(1-i-s)/(1-s)),100*(u=1===s?0:(1-a-s)/(1-s)),100*(c=1===s?0:(1-o-s)/(1-s)),100*s]}(a.h,a.s,a.v),t=e.map(i);return e.toString=()=>"cmyk(".concat(t[0],"%, ").concat(t[1],"%, ").concat(t[2],"%, ").concat(t[3],"%)"),e},toHEXA(){const e=function(e,t,r){return y(e,t,r).map((e=>m(e).toString(16).padStart(2,"0")))}(a.h,a.s,a.v);return e.toString=()=>{const t=a.a>=1?"":Number((255*a.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return"#".concat(e.join("").toUpperCase()+t)},e},clone:()=>E(a.h,a.s,a.v,a.a)};return a}const k=e=>Math.max(Math.min(e,1),0);function C(e){const t={options:Object.assign({lock:null,onchange:()=>0},e),_tapstart(e){o(document,["mouseup","touchend","touchcancel"],t._tapstop),o(document,["mousemove","touchmove"],t._tapmove),e.preventDefault(),t._tapmove(e)},_tapmove(e){const{options:{lock:n},cache:i}=t,{element:a,wrapper:o}=r,s=o.getBoundingClientRect();let l=0,u=0;if(e){const t=e&&e.touches&&e.touches[0];l=e?(t||e).clientX:0,u=e?(t||e).clientY:0,l<s.left?l=s.left:l>s.left+s.width&&(l=s.left+s.width),u<s.top?u=s.top:u>s.top+s.height&&(u=s.top+s.height),l-=s.left,u-=s.top}else i&&(l=i.x*s.width,u=i.y*s.height);"h"!==n&&(a.style.left="calc(".concat(l/s.width*100,"% - ").concat(a.offsetWidth/2,"px)")),"v"!==n&&(a.style.top="calc(".concat(u/s.height*100,"% - ").concat(a.offsetHeight/2,"px)")),t.cache={x:l/s.width,y:u/s.height};const c=k(l/o.offsetWidth),d=k(u/o.offsetHeight);switch(n){case"v":return r.onchange(c);case"h":return r.onchange(d);default:return r.onchange(c,d)}},_tapstop(){s(document,["mouseup","touchend","touchcancel"],t._tapstop),s(document,["mousemove","touchmove"],t._tapmove)},trigger(){t._tapmove()},update(e=0,r=0){const{left:n,top:i,width:a,height:o}=t.options.wrapper.getBoundingClientRect();t._tapmove({clientX:n+a*e,clientY:i+o*r})},destroy(){const{options:e,_tapstart:r}=t;s([e.wrapper,e.element],"mousedown",r),s([e.wrapper,e.element],"touchstart",r,{passive:!1})}},{options:r,_tapstart:n}=t;return o([r.wrapper,r.element],"mousedown",n),o([r.wrapper,r.element],"touchstart",n,{passive:!1}),t}function O(e={}){e=Object.assign({onchange:()=>0,className:"",elements:[]},e);const t=o(e.elements,"click",(t=>{e.elements.forEach((r=>r.classList[t.target===r?"add":"remove"](e.className))),e.onchange(t)}));return{destroy:()=>s(...t)}}var A=({components:e,strings:t,useAsButton:r,inline:n,appClass:i})=>{const a=e=>e?"":'style="display:none" hidden',o=d('\n      <div data-key="root" class="pickr">\n\n        '.concat(r?"":'<button type="button" data-key="button" class="pcr-button"></button>','\n\n        <div data-key="app" class="pcr-app ').concat(i||"",'" ').concat(n?'style="position: unset"':"",'>\n          <div class="pcr-selection" ').concat(a(e.palette),'>\n            <div data-con="preview" class="pcr-color-preview" ').concat(a(e.preview),'>\n              <button type="button" data-key="lastColor" class="pcr-last-color"></button>\n              <div data-key="currentColor" class="pcr-current-color"></div>\n            </div>\n\n            <div data-con="palette" class="pcr-color-palette">\n              <div data-key="picker" class="pcr-picker"></div>\n              <div data-key="palette" class="pcr-palette"></div>\n            </div>\n\n            <div data-con="hue" class="pcr-color-chooser" ').concat(a(e.hue),'>\n              <div data-key="picker" class="pcr-picker"></div>\n              <div data-key="slider" class="pcr-hue pcr-slider"></div>\n            </div>\n\n            <div data-con="opacity" class="pcr-color-opacity" ').concat(a(e.opacity),'>\n              <div data-key="picker" class="pcr-picker"></div>\n              <div data-key="slider" class="pcr-opacity pcr-slider"></div>\n            </div>\n          </div>\n\n          <div class="pcr-swatches ').concat(e.palette?"":" pcr-last",'" data-key="swatches"></div> \n\n          <div data-con="interaction" class="pcr-interaction" ').concat(a(Object.keys(e.interaction).length),'>\n            <input data-key="result" class="pcr-result" type="text" spellcheck="false" ').concat(a(e.interaction.input),'>\n\n            <input data-arr="options" class="pcr-type" data-type="HEXA" value="HEXA" type="button" ').concat(a(e.interaction.hex),'>\n            <input data-arr="options" class="pcr-type" data-type="RGBA" value="RGBA" type="button" ').concat(a(e.interaction.rgba),'>\n            <input data-arr="options" class="pcr-type" data-type="HSLA" value="HSLA" type="button" ').concat(a(e.interaction.hsla),'>\n            <input data-arr="options" class="pcr-type" data-type="HSVA" value="HSVA" type="button" ').concat(a(e.interaction.hsva),'>\n            <input data-arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ').concat(a(e.interaction.cmyk),'>\n\n            <input data-key="save" class="pcr-save" value="').concat(t.save||"Save",'" type="button" ').concat(a(e.interaction.save),'>\n            <input data-key="clear" class="pcr-clear" value="').concat(t.clear||"Clear",'" type="button" ').concat(a(e.interaction.clear),">\n          </div>\n        </div>\n      </div>\n    ")),s=o.interaction;return s.options.find((e=>!e.hidden&&!e.classList.add("active"))),s.type=()=>s.options.find((e=>e.classList.contains("active"))),o};function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class j{constructor(e){T(this,"_initializingActive",!0),T(this,"_recalc",!0),T(this,"_color",E()),T(this,"_lastColor",E()),T(this,"_swatchColors",[]),T(this,"_eventListener",{swatchselect:[],change:[],save:[],init:[]}),this.options=e=Object.assign({appClass:null,useAsButton:!1,disabled:!1,comparison:!0,closeOnScroll:!1,components:{interaction:{}},strings:{},swatches:null,inline:!1,sliders:"v",default:"#42445A",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"},e);const{swatches:t,inline:r,components:n}=e;n.interaction||(n.interaction={});const{preview:i,opacity:a,hue:o,palette:s}=n;n.palette=s||i||a||o,r&&(e.showAlways=!0),this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),t&&t.length&&t.forEach((e=>this.addSwatch(e))),this._nanopop=function({el:e,reference:t,padding:r=8}){const n={start:"sme",middle:"mse",end:"ems"},i={top:"tb",right:"rl",bottom:"bt",left:"lr"},a=((e={})=>(t,r=e[t])=>{if(r)return r;const[n,i="middle"]=t.split("-"),a="top"===n||"bottom"===n;return e[t]={position:n,variant:i,isVertical:a}})();return{update(o){const{position:s,variant:l,isVertical:u}=a(o),c=t.getBoundingClientRect(),d=e.getBoundingClientRect(),f=((e,t=0)=>{for(;e=e.parentElement;)t+=e.scrollTop;return t})(e),p=u?{t:c.top-d.height-r,b:c.bottom+r+f}:{r:c.right+r,l:c.left-d.width-r},g=u?{s:c.left+c.width-d.width,m:-d.width/2+(c.left+c.width/2),e:c.left}:{s:c.bottom-d.height,m:c.bottom-c.height/2-d.height/2,e:c.bottom-c.height};function h(t,r,n){const i="top"===n,a=i?d.height:d.width,o=window[i?"innerHeight":"innerWidth"];for(const i of t){const t=r[i];if(t>0&&t+a<o)return e.style[n]="".concat(t,"px"),!0}return!1}const v=h(n[l],g,u?"left":"top"),m=h(i[s],p,u?"top":"left");v&&m?e.style.margin="inherit":Object.assign(e.style,{top:"".concat(r,"px"),left:0,right:0,margin:"auto"})}}}({reference:this._root.button,el:this._root.app});const{button:l}=this._root,u=this;requestAnimationFrame((function t(){if(null===l.offsetParent&&l!==document.body)return requestAnimationFrame(t);u.setColor(e.default),u._rePositioningPicker(),e.defaultRepresentation&&(u._representation=e.defaultRepresentation,u.setColorRepresentation(u._representation)),e.showAlways&&u.show(),u._initializingActive=!1,u._emit("init")}))}_preBuild(){const e=this.options;"string"==typeof e.el&&(e.el=e.el.split(/>>/g).reduce(((e,t,r,n)=>(e=e.querySelector(t),r<n.length-1?e.shadowRoot:e)),document)),this._root=A(e),e.useAsButton&&(this._root.button=e.el),document.body.appendChild(this._root.root)}_finalBuild(){const e=this.options,t=this._root;if(document.body.removeChild(t.root),e.inline){const{parentElement:r}=e.el;r.lastChild===e.el?r.appendChild(t.app):r.insertBefore(t.app,e.el.nextSibling)}else document.body.appendChild(t.app);e.useAsButton||e.el.parentNode.replaceChild(t.root,e.el),e.disabled&&this.disable(),e.comparison||(t.button.style.transition="none",e.useAsButton||(t.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const e=this,t=this.options.components,[r,n]=(()=>{const{sliders:t}=e.options;let r="v",n="v";t.match(/^[vh]+$/g)&&(t.length>1?[r,n]=t:r=n=t);const i={v:"h",h:"v"};return[i[r],i[n]]})(),i={palette:C({element:e._root.palette.picker,wrapper:e._root.palette.palette,onchange(r,n){if(!t.palette)return;const{_color:i,_root:a,options:o}=e;i.s=100*r,i.v=100-100*n,i.v<0&&(i.v=0);const s=i.toRGBA().toString();this.element.style.background=s,this.wrapper.style.background="\n                        linear-gradient(to top, rgba(0, 0, 0, ".concat(i.a,"), transparent),\n                        linear-gradient(to left, hsla(").concat(i.h,", 100%, 50%, ").concat(i.a,"), rgba(255, 255, 255, ").concat(i.a,"))\n                    "),o.comparison||(a.button.style.color=s,o.useAsButton||(a.preview.lastColor.style.color=s)),a.preview.currentColor.style.color=s,e._recalc&&e._updateOutput(),e.options.comparison||a.button.classList.remove("clear")}}),hue:C({lock:n,element:e._root.hue.picker,wrapper:e._root.hue.slider,onchange(r){t.hue&&t.palette&&(e._color.h=360*r,this.element.style.backgroundColor="hsl(".concat(e._color.h,", 100%, 50%)"),i.palette.trigger())}}),opacity:C({lock:r,element:e._root.opacity.picker,wrapper:e._root.opacity.slider,onchange(r){t.opacity&&t.palette&&(e._color.a=Math.round(100*r)/100,this.element.style.background="rgba(0, 0, 0, ".concat(e._color.a,")"),e.components.palette.trigger())}}),selectable:O({elements:e._root.interaction.options,className:"active",onchange(t){e._representation=t.target.getAttribute("data-type").toUpperCase(),e._updateOutput()}})};this.components=i}_bindEvents(){const{_root:e,options:t}=this,r=[o(e.interaction.clear,"click",(()=>this._clearColor())),o(e.preview.lastColor,"click",(()=>this.setHSVA(...this._lastColor.toHSVA()))),o(e.interaction.save,"click",(()=>{!this.applyColor()&&!t.showAlways&&this.hide()})),o(e.interaction.result,["keyup","input"],(e=>{this._recalc=!1,this.setColor(e.target.value,!0)&&!this._initializingActive&&this._emit("change",this._color),e.stopImmediatePropagation()})),o([e.palette.palette,e.palette.picker,e.hue.slider,e.hue.picker,e.opacity.slider,e.opacity.picker],["mousedown","touchstart"],(()=>this._recalc=!0))];if(!t.showAlways){const n=t.closeWithKey;r.push(o(e.button,"click",(()=>this.isOpen()?this.hide():this.show())),o(document,"keyup",(e=>this.isOpen()&&(e.key===n||e.code===n)&&this.hide())),o(document,["touchstart","mousedown"],(t=>{this.isOpen()&&!f(t).some((t=>t===e.app||t===e.button))&&this.hide()}),{capture:!0}))}if(t.adjustableNumbers){const t={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};p(e.interaction.result,((e,r,n)=>{const i=t[this.getColorRepresentation().toLowerCase()];if(i){const t=i[n],a=e+(t>=100?1e3*r:r);return a<=0?0:Number((a<t?a:t).toPrecision(3))}return e}))}if(!t.inline){let e=null;const n=this;r.push(o(window,["scroll","resize"],(()=>{n.isOpen()&&(t.closeOnScroll&&n.hide(),null===e?(e=setTimeout((()=>e=null),100),requestAnimationFrame((function t(){n._rePositioningPicker(),null!==e&&requestAnimationFrame(t)}))):(clearTimeout(e),e=setTimeout((()=>e=null),100)))}),{capture:!0}))}this._eventBindings=r}_rePositioningPicker(){const{options:e}=this;e.inline||this._nanopop.update(e.position)}_updateOutput(){if(this._root.interaction.type()){const e="to".concat(this._root.interaction.type().getAttribute("data-type"));this._root.interaction.result.value="function"==typeof this._color[e]?this._color[e]().toString():""}this._initializingActive||this._emit("change",this._color)}_clearColor(){const{_root:e,options:t}=this;t.useAsButton||(e.button.style.color="rgba(0, 0, 0, 0.15)"),e.button.classList.add("clear"),t.showAlways||this.hide(),this._initializingActive||this._emit("save",null)}_emit(e,...t){this._eventListener[e].forEach((e=>e(...t,this)))}on(e,t){return"function"==typeof t&&"string"==typeof e&&e in this._eventListener&&this._eventListener[e].push(t),this}off(e,t){const r=this._eventListener[e];if(r){const e=r.indexOf(t);~e&&r.splice(e,1)}return this}addSwatch(e){const{values:t}=P(e);if(t){const{_swatchColors:e,_root:r}=this,n=E(...t),i=u('<button type="button" style="color: '.concat(n.toRGBA(),'"></button>'));return r.swatches.appendChild(i),e.push({element:i,hsvaColorObject:n}),this._eventBindings.push(o(i,"click",(()=>{this.setHSVA(...n.toHSVA(),!0),this._emit("swatchselect",n)}))),!0}return!1}removeSwatch(e){if("number"==typeof e){const t=this._swatchColors[e];if(t){const{element:r}=t;return this._root.swatches.removeChild(r),this._swatchColors.splice(e,1),!0}}return!1}applyColor(e=!1){const{preview:t,button:r}=this._root,n=this._color.toRGBA().toString();t.lastColor.style.color=n,this.options.useAsButton||(r.style.color=n),r.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||e||this._emit("save",this._color)}destroy(){this._eventBindings.forEach((e=>s(...e))),Object.keys(this.components).forEach((e=>this.components[e].destroy()))}destroyAndRemove(){this.destroy();const e=this._root.root;e.parentElement.removeChild(e);const t=this._root.app;t.parentElement.removeChild(t);const r=this;Object.keys(r).forEach((e=>r[e]=null))}hide(){return this._root.app.classList.remove("visible"),this}show(){if(!this.options.disabled)return this._root.app.classList.add("visible"),this._rePositioningPicker(),this}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(e=360,t=0,r=0,n=1,i=!1){const a=this._recalc;if(this._recalc=!1,e<0||e>360||t<0||t>100||r<0||r>100||n<0||n>1)return!1;this._color=E(e,t,r,n);const{hue:o,opacity:s,palette:l}=this.components;return o.update(0,e/360),s.update(0,n),l.update(t/100,1-r/100),this._recalc=a,this._recalc&&this._updateOutput(),i||this.applyColor(),!0}setColor(e,t=!1){if(null===e)return this._clearColor(),!0;const{values:r,type:n}=P(e);if(r){const e=n.toUpperCase(),{options:i}=this._root.interaction,a=i.find((t=>t.getAttribute("data-type").startsWith(e)));if(a&&!a.hidden)for(const e of i)e.classList[e===a?"add":"remove"]("active");return this.setHSVA(...r,t)}}setColorRepresentation(e){return e=e.toUpperCase(),!!this._root.interaction.options.find((t=>t.getAttribute("data-type").startsWith(e)&&!t.click()))}getColorRepresentation(){return this._representation}getColor(){return this._color}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}}j.utils=n,j.create=e=>new j(e),j.version="0.6.6";t.default=j}]).default}))},41351:function(e,t,r){e=r.nmd(e);var n;(function(i){"use strict";var a;var o=".";var s="function";var l="string";var u="__global__";var c="Provider";var d=0;var f=Array.prototype.slice;var p=function e(t,r){var n=t[r];if(n===i&&a.config.strict)throw new Error("Bottle was unable to resolve a service.  `"+r+"` is undefined.");return n};var g=function e(t){var r;if(!this.nested[t]){r=a.pop();this.nested[t]=r;this.factory(t,(function e(){return r.container}))}return this.nested[t]};var h=function e(t){return t.split(o).reduce(p,this)};var v=function e(t,r,n,i){var a={configurable:true,enumerable:true};if(t.length)a.get=function e(){var r=0;var i=function e(a){if(a)throw a;t[r]&&t[r++](n,i)};i();return n};else{a.value=n;a.writable=true}Object.defineProperty(i,r,a);return i[r]};var m=function e(t,r){var n,i;if(typeof t===s){r=t;t=u}n=t.split(o);i=n.shift();if(n.length)g.call(this,i).middleware(n.join(o),r);else{this.middlewares[i]||(this.middlewares[i]=[]);this.middlewares[i].push(r)}return this};var y=function e(t,r){return r(t)};var b=function e(t,r){return(t[r]||[]).concat(t.__global__||[])};var w=function e(t,r){var n,a,o,s,l,u;s=this.id;o=this.container;l=this.decorators;u=this.middlewares;n=t+c;a=Object.create(null);a[n]={configurable:true,enumerable:true,get:function e(){var t=new r;delete o[n];o[n]=t;return t}};a[t]={configurable:true,enumerable:true,get:function e(){var r=o[n];var a;if(r){a=b(l,t).reduce(y,r.$get(o));delete o[n];delete o[t]}return a===i?a:v(b(u,t),t,a,o)}};Object.defineProperties(o,a);return this};var _=function e(t,r){var n,i;n=t.split(o);if(this.providerMap[t]&&1===n.length&&!this.container[t+c])return console.error(t+" provider already instantiated.");this.originalProviders[t]=r;this.providerMap[t]=true;i=n.shift();if(n.length){g.call(this,i).provider(n.join(o),r);return this}return w.call(this,i,r)};var S=function e(t,r){return _.call(this,t,(function e(){this.$get=r}))};var P=function e(t,r,n){var i=arguments.length>3?f.call(arguments,3):[];var a=this;return S.call(this,t,(function e(){var t=r;var o=i.map(h,a.container);if(!n)return t.apply(null,o);return new(r.bind.apply(r,[null].concat(o)))}))};var E=function e(t,r){return P.apply(this,[t,r,true].concat(f.call(arguments,2)))};var k=function e(t,r){return P.apply(this,[t,r,false].concat(f.call(arguments,2)))};var C=function e(t,r){Object.defineProperty(this,t,{configurable:true,enumerable:true,value:r,writable:true})};var O=function e(t,r){var n=t[r];if(!n){n={};C.call(t,r,n)}return n};var A=function e(t,r){var n;n=t.split(o);t=n.pop();C.call(n.reduce(O,this.container),t,r);return this};var T=function e(t,r){Object.defineProperty(this,t,{configurable:false,enumerable:true,value:r,writable:false})};var j=function e(t,r){var n=t.split(o);t=n.pop();T.call(n.reduce(O,this.container),t,r);return this};var D=function e(t,r){var n,i;if(typeof t===s){r=t;t=u}n=t.split(o);i=n.shift();if(n.length)g.call(this,i).decorator(n.join(o),r);else{this.decorators[i]||(this.decorators[i]=[]);this.decorators[i].push(r)}return this};var L=function e(t){this.deferred.push(t);return this};var R=function e(t){return(t||[]).map(h,this.container)};var I=function e(t,r){return S.call(this,t,(function e(t){return{instance:r.bind(r,t)}}))};var M=function e(t){return!/^\$(?:decorator|register|list)$|Provider$/.test(t)};var x=function e(t){return Object.keys(t||this.container||{}).filter(M)};var N={};var F=function e(t){var r;if(typeof t===l){r=N[t];if(!r){N[t]=r=new a;r.constant("BOTTLE_NAME",t)}return r}return new a};var V=function e(t){typeof t===l?delete N[t]:N={}};var B=function e(t){var r=t.$value===i?t:t.$value;return this[t.$type||"service"].apply(this,[t.$name,r].concat(t.$inject||[]))};var W=function e(t){delete this.providerMap[t];delete this.container[t];delete this.container[t+c]};var G=function e(t){var r=this.originalProviders;var n=Array.isArray(t);Object.keys(this.originalProviders).forEach((function e(i){if(n&&-1===t.indexOf(i))return;var a=i.split(o);a.length>1&&a.forEach(W,g.call(this,a[0]));W.call(this,i);this.provider(i,r[i])}),this)};var q=function e(t){this.deferred.forEach((function e(r){r(t)}));return this};a=function e(t){if(!(this instanceof e))return e.pop(t);this.id=d++;this.decorators={};this.middlewares={};this.nested={};this.providerMap={};this.originalProviders={};this.deferred=[];this.container={$decorator:D.bind(this),$register:B.bind(this),$list:x.bind(this)}};a.prototype={constant:j,decorator:D,defer:L,digest:R,factory:S,instanceFactory:I,list:x,middleware:m,provider:_,resetProviders:G,register:B,resolve:q,service:E,serviceFactory:k,value:A};a.pop=F;a.clear=V;a.list=x;a.config={strict:false};var U={function:true,object:true};(function o(l){var u=U[typeof t]&&t&&!t.nodeType&&t;var c=U["object"]&&e&&!e.nodeType&&e;var d=c&&c.exports===u&&u;var f=U[typeof r.g]&&r.g;!f||f.global!==f&&f.window!==f||(l=f);if("function"===s&&r.amdO){l.Bottle=a;!(n=function(){return a}.call(t,r,t,e),n!==i&&(e.exports=n))}else u&&c?d?(c.exports=a).Bottle=a:u.Bottle=a:l.Bottle=a})(U[typeof window]&&window||this)}).call(this)},16086:(e,t)=>{var r,n;(function(){"use strict";var i={}.hasOwnProperty;var a="[native code]";function o(){var e=[];for(var t=0;t<arguments.length;t++){var r=arguments[t];if(!r)continue;var n=typeof r;if("string"===n||"number"===n)e.push(r);else if(Array.isArray(r)){if(r.length){var a=o.apply(null,r);a&&e.push(a)}}else if("object"===n){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var s in r)i.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}if(true,e.exports){o.default=o;e.exports=o}else{true;!(r=[],n=function(){return o}.apply(t,r),void 0!==n&&(e.exports=n))}})()},87625:(e,t,r)=>{"use strict";var n=r(95001);var i={childContextTypes:true,contextType:true,contextTypes:true,defaultProps:true,displayName:true,getDefaultProps:true,getDerivedStateFromError:true,getDerivedStateFromProps:true,mixins:true,propTypes:true,type:true};var a={name:true,length:true,prototype:true,caller:true,callee:true,arguments:true,arity:true};var o={$$typeof:true,render:true,defaultProps:true,displayName:true,propTypes:true};var s={$$typeof:true,compare:true,defaultProps:true,displayName:true,propTypes:true,type:true};var l={};l[n.ForwardRef]=o;l[n.Memo]=s;function u(e){if(n.isMemo(e))return s;return l[e["$$typeof"]]||i}var c=Object.defineProperty;var d=Object.getOwnPropertyNames;var f=Object.getOwnPropertySymbols;var p=Object.getOwnPropertyDescriptor;var g=Object.getPrototypeOf;var h=Object.prototype;function v(e,t,r){if("string"!==typeof t){if(h){var n=g(t);n&&n!==h&&v(e,n,r)}var i=d(t);f&&(i=i.concat(f(t)));var o=u(e);var s=u(t);for(var l=0;l<i.length;++l){var m=i[l];if(!a[m]&&!(r&&r[m])&&!(s&&s[m])&&!(o&&o[m])){var y=p(t,m);try{c(e,m,y)}catch(e){}}}}return e}e.exports=v},52287:(e,t,r)=>{"use strict";var n=r(25694);function i(){}function a(){}a.resetWarningCache=i;e.exports=function(){function e(e,t,r,i,a,o){if(o===n)return;var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");s.name="Invariant Violation";throw s}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};r.PropTypes=r;return r}},76660:(e,t,r)=>{var n,i;false;e.exports=r(52287)()},25694:e=>{"use strict";var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=t},79582:(e,t,r)=>{"use strict";var n=r(79440),i=r(43959);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t);u(e+"Capture",t)}function u(e,t){s[e]=t;for(e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function h(e){if(d.call(g,e))return!0;if(d.call(p,e))return!1;if(f.test(e))return g[e]=!0;p[e]=!0;return!1}function v(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":if(n)return!1;if(null!==r)return!r.acceptsBooleans;e=e.toLowerCase().slice(0,5);return"data-"!==e&&"aria-"!==e;default:return!1}}function m(e,t,r,n){if(null===t||"undefined"===typeof t||v(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function y(e,t,r,n,i,a,o){this.acceptsBooleans=2===t||3===t||4===t;this.attributeName=n;this.attributeNamespace=i;this.mustUseProperty=r;this.propertyName=e;this.type=t;this.sanitizeURL=a;this.removeEmptyString=o}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){b[e]=new y(e,0,!1,e,null,!1,!1)}));[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];b[t]=new y(t,1,!1,e[1],null,!1,!1)}));["contentEditable","draggable","spellCheck","value"].forEach((function(e){b[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)}));["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){b[e]=new y(e,2,!1,e,null,!1,!1)}));"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){b[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)}));["checked","multiple","muted","selected"].forEach((function(e){b[e]=new y(e,3,!0,e,null,!1,!1)}));["capture","download"].forEach((function(e){b[e]=new y(e,4,!1,e,null,!1,!1)}));["cols","rows","size","span"].forEach((function(e){b[e]=new y(e,6,!1,e,null,!1,!1)}));["rowSpan","start"].forEach((function(e){b[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var w=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(w,_);b[t]=new y(t,1,!1,e,null,!1,!1)}));"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(w,_);b[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}));["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(w,_);b[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}));["tabIndex","crossOrigin"].forEach((function(e){b[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)}));b.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach((function(e){b[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));function S(e,t,r,n){var i=b.hasOwnProperty(t)?b[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(m(t,r,i,n)&&(r=null),n||null===i?h(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(i=i.type,r=3===i||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var P=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),k=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),j=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var x=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var N=Symbol.iterator;function F(e){if(null===e||"object"!==typeof e)return null;e=N&&e[N]||e["@@iterator"];return"function"===typeof e?e:null}var V=Object.assign,B;function W(e){if(void 0===B)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var G=!1;function q(e,t){if(!e||G)return"";G=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var n=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){n=e}e.call(t.prototype)}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"===typeof t.stack){for(var i=t.stack.split("\n"),a=n.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,s--,0>s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName));return l}}while(1<=o&&0<=s);break}}}finally{G=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?W(e):""}function U(e){switch(e.tag){case 5:return W(e.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1),e;case 11:return e=q(e.type.render,!1),e;case 1:return e=q(e.type,!0),e;default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case k:return"Portal";case A:return"Profiler";case O:return"StrictMode";case L:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case j:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case D:var t=e.render;e=e.displayName;e||(e=t.displayName||t.name||"",e=""!==e?"ForwardRef("+e+")":"ForwardRef");return e;case I:return t=e.displayName||null,null!==t?t:H(e.type)||"Memo";case M:t=e._payload;e=e._init;try{return H(e(t))}catch(e){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Z(e){var t=K(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,a=r.set;Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e;a.call(this,e)}});Object.defineProperty(e,t,{enumerable:r.enumerable});return{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null;delete e[t]}}}}function Y(e){e._valueTracker||(e._valueTracker=Z(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue();var n="";e&&(n=K(e)?e.checked?"true":"false":e.value);e=n;return e!==r&&(t.setValue(e),!0)}function J(e){e=e||("undefined"!==typeof document?document:void 0);if("undefined"===typeof e)return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var r=t.checked;return V({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function ee(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=$(null!=t.value?t.value:r);e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){t=t.checked;null!=t&&S(e,"checked",t,!1)}function re(e,t){te(e,t);var r=$(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n){e.removeAttribute("value");return}t.hasOwnProperty("value")?ie(e,t.type,r):t.hasOwnProperty("defaultValue")&&ie(e,t.type,$(t.defaultValue));null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ne(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue;r||t===e.value||(e.value=t);e.defaultValue=t}r=e.name;""!==r&&(e.name="");e.defaultChecked=!!e._wrapperState.initialChecked;""!==r&&(e.name=r)}function ie(e,t,r){"number"===t&&J(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ae=Array.isArray;function oe(e,t,r,n){e=e.options;if(t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{r=""+$(r);t=null;for(i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0;n&&(e[i].defaultSelected=!0);return}null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return V({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var r=t.value;if(null==r){r=t.children;t=t.defaultValue;if(null!=r){if(null!=t)throw Error(a(92));if(ae(r)){if(1<r.length)throw Error(a(93));r=r[0]}t=r}null==t&&(t="");r=t}e._wrapperState={initialValue:$(r)}}function ue(e,t){var r=$(t.value),n=$(t.defaultValue);null!=r&&(r=""+r,r!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r));null!=n&&(e.defaultValue=""+n)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,ge=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction((function(){return e(t,r,n,i)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{pe=pe||document.createElement("div");pe.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";for(t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType){r.nodeValue=t;return}}e.textContent=t}var ve={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];Object.keys(ve).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1);ve[t]=ve[e]}))}));function ye(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function be(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=ye(r,t[r],n);"float"===r&&(r="cssFloat");n?e.setProperty(r,i):e[r]=i}}var we=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(we[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pe=null;function Ee(e){e=e.target||e.srcElement||window;e.correspondingUseElement&&(e=e.correspondingUseElement);return 3===e.nodeType?e.parentNode:e}var ke=null,Ce=null,Oe=null;function Ae(e){if(e=Wi(e)){if("function"!==typeof ke)throw Error(a(280));var t=e.stateNode;t&&(t=qi(t),ke(e.stateNode,e.type,t))}}function Te(e){Ce?Oe?Oe.push(e):Oe=[e]:Ce=e}function je(){if(Ce){var e=Ce,t=Oe;Oe=Ce=null;Ae(e);if(t)for(e=0;e<t.length;e++)Ae(t[e])}}function De(e,t){return e(t)}function Le(){}var Re=!1;function Ie(e,t,r){if(Re)return e(t,r);Re=!0;try{return De(e,t,r)}finally{(Re=!1,null!==Ce||null!==Oe)&&(Le(),je())}}function Me(e,t){var r=e.stateNode;if(null===r)return null;var n=qi(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!("button"===e||"input"===e||"select"===e||"textarea"===e));e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(a(231,t,typeof r));return r}var xe=!1;if(c)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){xe=!0}});window.addEventListener("test",Ne,Ne);window.removeEventListener("test",Ne,Ne)}catch(e){xe=!1}function Fe(e,t,r,n,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(e){this.onError(e)}}var Ve=!1,Be=null,We=!1,Ge=null,qe={onError:function(e){Ve=!0;Be=e}};function Ue(e,t,r,n,i,a,o,s,l){Ve=!1;Be=null;Fe.apply(qe,arguments)}function He(e,t,r,n,i,o,s,l,u){Ue.apply(this,arguments);if(Ve){if(!Ve)throw Error(a(198));var c=Be;Ve=!1;Be=null;We||(We=!0,Ge=c)}}function ze(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{t=e,0!==(4098&t.flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function $e(e){if(13===e.tag){var t=e.memoizedState;null===t&&(e=e.alternate,null!==e&&(t=e.memoizedState));if(null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ze(e){var t=e.alternate;if(!t){t=ze(e);if(null===t)throw Error(a(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var o=i.alternate;if(null===o){n=i.return;if(null!==n){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return Ke(i),e;if(o===n)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,l=i.child;l;){if(l===r){s=!0;r=i;n=o;break}if(l===n){s=!0;n=i;r=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===r){s=!0;r=o;n=i;break}if(l===n){s=!0;n=o;r=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(r.alternate!==n)throw Error(a(190))}if(3!==r.tag)throw Error(a(188));return r.stateNode.current===r?e:t}function Ye(e){e=Ze(e);return null!==e?Xe(e):null}function Xe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Xe(e);if(null!==t)return t;e=e.sibling}return null}var Je=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,et=i.unstable_shouldYield,tt=i.unstable_requestPaint,rt=i.unstable_now,nt=i.unstable_getCurrentPriorityLevel,it=i.unstable_ImmediatePriority,at=i.unstable_UserBlockingPriority,ot=i.unstable_NormalPriority,st=i.unstable_LowPriority,lt=i.unstable_IdlePriority,ut=null,ct=null;function dt(e){if(ct&&"function"===typeof ct.onCommitFiberRoot)try{ct.onCommitFiberRoot(ut,e,void 0,128===(128&e.current.flags))}catch(e){}}var ft=Math.clz32?Math.clz32:ht,pt=Math.log,gt=Math.LN2;function ht(e){e>>>=0;return 0===e?32:31-(pt(e)/gt|0)|0}var vt=64,mt=4194304;function yt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&r;if(0!==o){var s=o&~i;0!==s?n=yt(s):(a&=o,0!==a&&(n=yt(a)))}else o=r&~i,0!==o?n=yt(o):0!==a&&(n=yt(a));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&i)&&(i=n&-n,a=t&-t,i>=a||16===i&&0!==(4194240&a)))return t;0!==(4&n)&&(n|=16&r);t=e.entangledLanes;if(0!==t)for(e=e.entanglements,t&=n;0<t;)r=31-ft(t),i=1<<r,n|=e[r],t&=~i;return n}function wt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _t(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ft(a),s=1<<o,l=i[o];-1===l?0!==(s&r)&&0===(s&n)||(i[o]=wt(s,t)):l<=t&&(e.expiredLanes|=s);a&=~s}}function St(e){e=-1073741825&e.pendingLanes;return 0!==e?e:1073741824&e?1073741824:0}function Pt(){var e=vt;vt<<=1;0===(4194240&vt)&&(vt=64);return e}function Et(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function kt(e,t,r){e.pendingLanes|=t;536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0);e=e.eventTimes;t=31-ft(t);e[t]=r}function Ct(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t;e.suspendedLanes=0;e.pingedLanes=0;e.expiredLanes&=t;e.mutableReadLanes&=t;e.entangledLanes&=t;t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ft(r),a=1<<i;t[i]=0;n[i]=-1;e[i]=-1;r&=~a}}function Ot(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ft(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t);r&=~i}}var At=0;function Tt(e){e&=-e;return 1<e?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,Dt,Lt,Rt,It,Mt=!1,xt=[],Nt=null,Ft=null,Vt=null,Bt=new Map,Wt=new Map,Gt=[],qt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ut(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Ft=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":Bt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wt.delete(t.pointerId)}}function Ht(e,t,r,n,i,a){if(null===e||e.nativeEvent!==a)return e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},null!==t&&(t=Wi(t),null!==t&&Dt(t)),e;e.eventSystemFlags|=n;t=e.targetContainers;null!==i&&-1===t.indexOf(i)&&t.push(i);return e}function zt(e,t,r,n,i){switch(t){case"focusin":return Nt=Ht(Nt,e,t,r,n,i),!0;case"dragenter":return Ft=Ht(Ft,e,t,r,n,i),!0;case"mouseover":return Vt=Ht(Vt,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;Bt.set(a,Ht(Bt.get(a)||null,e,t,r,n,i));return!0;case"gotpointercapture":return a=i.pointerId,Wt.set(a,Ht(Wt.get(a)||null,e,t,r,n,i)),!0}return!1}function $t(e){var t=Bi(e.target);if(null!==t){var r=ze(t);if(null!==r)if(t=r.tag,13===t){if(t=$e(r),null!==t){e.blockedOn=t;It(e.priority,(function(){Lt(r)}));return}}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=3===r.tag?r.stateNode.containerInfo:null;return}}e.blockedOn=null}function Kt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=ar(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return t=Wi(r),null!==t&&Dt(t),e.blockedOn=r,!1;r=e.nativeEvent;var n=new r.constructor(r.type,r);Pe=n;r.target.dispatchEvent(n);Pe=null;t.shift()}return!0}function Zt(e,t,r){Kt(e)&&r.delete(t)}function Yt(){Mt=!1;null!==Nt&&Kt(Nt)&&(Nt=null);null!==Ft&&Kt(Ft)&&(Ft=null);null!==Vt&&Kt(Vt)&&(Vt=null);Bt.forEach(Zt);Wt.forEach(Zt)}function Xt(e,t){e.blockedOn===t&&(e.blockedOn=null,Mt||(Mt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Yt)))}function Jt(e){function t(t){return Xt(t,e)}if(0<xt.length){Xt(xt[0],e);for(var r=1;r<xt.length;r++){var n=xt[r];n.blockedOn===e&&(n.blockedOn=null)}}null!==Nt&&Xt(Nt,e);null!==Ft&&Xt(Ft,e);null!==Vt&&Xt(Vt,e);Bt.forEach(t);Wt.forEach(t);for(r=0;r<Gt.length;r++)n=Gt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Gt.length&&(r=Gt[0],null===r.blockedOn);)$t(r),null===r.blockedOn&&Gt.shift()}var Qt=P.ReactCurrentBatchConfig,er=!0;function tr(e,t,r,n){var i=At,a=Qt.transition;Qt.transition=null;try{At=1,nr(e,t,r,n)}finally{At=i,Qt.transition=a}}function rr(e,t,r,n){var i=At,a=Qt.transition;Qt.transition=null;try{At=4,nr(e,t,r,n)}finally{At=i,Qt.transition=a}}function nr(e,t,r,n){if(er){var i=ar(e,t,r,n);if(null===i)fi(e,t,n,ir,r),Ut(e,n);else if(zt(i,e,t,r,n))n.stopPropagation();else if(Ut(e,n),4&t&&-1<qt.indexOf(e)){for(;null!==i;){var a=Wi(i);null!==a&&jt(a);a=ar(e,t,r,n);null===a&&fi(e,t,n,ir,r);if(a===i)break;i=a}null!==i&&n.stopPropagation()}else fi(e,t,n,null,r)}}var ir=null;function ar(e,t,r,n){ir=null;e=Ee(n);e=Bi(e);if(null!==e)if(t=ze(e),null===t)e=null;else if(r=t.tag,13===r){e=$e(t);if(null!==e)return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);ir=e;return null}function or(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nt()){case it:return 1;case at:return 4;case ot:case st:return 16;case lt:return 536870912;default:return 16}default:return 16}}var sr=null,lr=null,ur=null;function cr(){if(ur)return ur;var e,t=lr,r=t.length,n,i="value"in sr?sr.value:sr.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[a-n];n++);return ur=i.slice(e,1<n?1-n:void 0)}function dr(e){var t=e.keyCode;"charCode"in e?(e=e.charCode,0===e&&13===t&&(e=13)):e=t;10===e&&(e=13);return 32<=e||13===e?e:0}function fr(){return!0}function pr(){return!1}function gr(e){function t(t,r,n,i,a){this._reactName=t;this._targetInst=n;this.type=r;this.nativeEvent=i;this.target=a;this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?fr:pr;this.isPropagationStopped=pr;return this}V(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=fr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=fr)},persist:function(){},isPersistent:fr});return t}var hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vr=gr(hr),mr=V({},hr,{view:0,detail:0}),yr=gr(mr),br,wr,_r,Sr=V({},mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){if("movementX"in e)return e.movementX;e!==_r&&(_r&&"mousemove"===e.type?(br=e.screenX-_r.screenX,wr=e.screenY-_r.screenY):wr=br=0,_r=e);return br},movementY:function(e){return"movementY"in e?e.movementY:wr}}),Pr=gr(Sr),Er=V({},Sr,{dataTransfer:0}),kr=gr(Er),Cr=V({},mr,{relatedTarget:0}),Or=gr(Cr),Ar=V({},hr,{animationName:0,elapsedTime:0,pseudoElement:0}),Tr=gr(Ar),jr=V({},hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dr=gr(jr),Lr=V({},hr,{data:0}),Rr=gr(Lr),Ir={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xr[e])&&!!t[e]}function Fr(){return Nr}var Vr=V({},mr,{key:function(e){if(e.key){var t=Ir[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=dr(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?Mr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fr,charCode:function(e){return"keypress"===e.type?dr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?dr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Br=gr(Vr),Wr=V({},Sr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gr=gr(Wr),qr=V({},mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fr}),Ur=gr(qr),Hr=V({},hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),zr=gr(Hr),$r=V({},Sr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kr=gr($r),Zr=[9,13,27,32],Yr=c&&"CompositionEvent"in window,Xr=null;c&&"documentMode"in document&&(Xr=document.documentMode);var Jr=c&&"TextEvent"in window&&!Xr,Qr=c&&(!Yr||Xr&&8<Xr&&11>=Xr),en=String.fromCharCode(32),tn=!1;function rn(e,t){switch(e){case"keyup":return-1!==Zr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nn(e){e=e.detail;return"object"===typeof e&&"data"in e?e.data:null}var an=!1;function on(e,t){switch(e){case"compositionend":return nn(t);case"keypress":if(32!==t.which)return null;tn=!0;return en;case"textInput":return e=t.data,e===en&&tn?null:e;default:return null}}function sn(e,t){if(an)return"compositionend"===e||!Yr&&rn(e,t)?(e=cr(),ur=lr=sr=null,an=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qr&&"ko"!==t.locale?null:t.data;default:return null}}var ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ln[e.type]:"textarea"===t}function cn(e,t,r,n){Te(n);t=gi(t,"onChange");0<t.length&&(r=new vr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var dn=null,fn=null;function pn(e){oi(e,0)}function gn(e){var t=Gi(e);if(X(t))return e}function hn(e,t){if("change"===e)return t}var vn=!1;if(c){var mn;if(c){var yn="oninput"in document;if(!yn){var bn=document.createElement("div");bn.setAttribute("oninput","return;");yn="function"===typeof bn.oninput}mn=yn}else mn=!1;vn=mn&&(!document.documentMode||9<document.documentMode)}function wn(){dn&&(dn.detachEvent("onpropertychange",_n),fn=dn=null)}function _n(e){if("value"===e.propertyName&&gn(fn)){var t=[];cn(t,fn,e,Ee(e));Ie(pn,t)}}function Sn(e,t,r){"focusin"===e?(wn(),dn=t,fn=r,dn.attachEvent("onpropertychange",_n)):"focusout"===e&&wn()}function Pn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return gn(fn)}function En(e,t){if("click"===e)return gn(t)}function kn(e,t){if("input"===e||"change"===e)return gn(t)}function Cn(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}var On="function"===typeof Object.is?Object.is:Cn;function An(e,t){if(On(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!d.call(t,i)||!On(e[i],t[i]))return!1}return!0}function Tn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jn(e,t){var r=Tn(e);e=0;for(var n;r;){if(3===r.nodeType){n=e+r.textContent.length;if(e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Tn(r)}}function Dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Ln(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;e=t.contentWindow;t=J(e.document)}return t}function Rn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function In(e){var t=Ln(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Dn(r.ownerDocument.documentElement,r)){if(null!==n&&Rn(r))if(t=n.start,e=n.end,void 0===e&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=void 0===n.end?a:Math.min(n.end,i);!e.extend&&a>n&&(i=n,n=a,a=i);i=jn(r,a);var o=jn(r,n);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}t=[];for(e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});"function"===typeof r.focus&&r.focus();for(r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Mn=c&&"documentMode"in document&&11>=document.documentMode,xn=null,Nn=null,Fn=null,Vn=!1;function Bn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;Vn||null==xn||xn!==J(n)||(n=xn,"selectionStart"in n&&Rn(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Fn&&An(Fn,n)||(Fn=n,n=gi(Nn,"onSelect"),0<n.length&&(t=new vr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=xn)))}function Wn(e,t){var r={};r[e.toLowerCase()]=t.toLowerCase();r["Webkit"+e]="webkit"+t;r["Moz"+e]="moz"+t;return r}var Gn={animationend:Wn("Animation","AnimationEnd"),animationiteration:Wn("Animation","AnimationIteration"),animationstart:Wn("Animation","AnimationStart"),transitionend:Wn("Transition","TransitionEnd")},qn={},Un={};c&&(Un=document.createElement("div").style,"AnimationEvent"in window||(delete Gn.animationend.animation,delete Gn.animationiteration.animation,delete Gn.animationstart.animation),"TransitionEvent"in window||delete Gn.transitionend.transition);function Hn(e){if(qn[e])return qn[e];if(!Gn[e])return e;var t=Gn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Un)return qn[e]=t[r];return e}var zn=Hn("animationend"),$n=Hn("animationiteration"),Kn=Hn("animationstart"),Zn=Hn("transitionend"),Yn=new Map,Xn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jn(e,t){Yn.set(e,t);l(t,[e])}for(var Qn=0;Qn<Xn.length;Qn++){var ei=Xn[Qn],ti=ei.toLowerCase(),ri=ei[0].toUpperCase()+ei.slice(1);Jn(ti,"on"+ri)}Jn(zn,"onAnimationEnd");Jn($n,"onAnimationIteration");Jn(Kn,"onAnimationStart");Jn("dblclick","onDoubleClick");Jn("focusin","onFocus");Jn("focusout","onBlur");Jn(Zn,"onTransitionEnd");u("onMouseEnter",["mouseout","mouseover"]);u("onMouseLeave",["mouseout","mouseover"]);u("onPointerEnter",["pointerout","pointerover"]);u("onPointerLeave",["pointerout","pointerover"]);l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));l("onBeforeInput",["compositionend","keypress","textInput","paste"]);l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ii=new Set("cancel close invalid load scroll toggle".split(" ").concat(ni));function ai(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r;He(n,t,void 0,e);e.currentTarget=null}function oi(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;s=s.listener;if(l!==a&&i.isPropagationStopped())break e;ai(i,s,u);a=l}else for(o=0;o<n.length;o++){s=n[o];l=s.instance;u=s.currentTarget;s=s.listener;if(l!==a&&i.isPropagationStopped())break e;ai(i,s,u);a=l}}}if(We)throw e=Ge,We=!1,Ge=null,e}function si(e,t){var r=t[Ni];void 0===r&&(r=t[Ni]=new Set);var n=e+"__bubble";r.has(n)||(di(t,e,2,!1),r.add(n))}function li(e,t,r){var n=0;t&&(n|=4);di(r,e,n,t)}var ui="_reactListening"+Math.random().toString(36).slice(2);function ci(e){if(!e[ui]){e[ui]=!0;o.forEach((function(t){"selectionchange"!==t&&(ii.has(t)||li(t,!1,e),li(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ui]||(t[ui]=!0,li("selectionchange",!1,t))}}function di(e,t,r,n){switch(or(t)){case 1:var i=tr;break;case 4:i=rr;break;default:i=nr}r=i.bind(null,t,r,e);i=void 0;!xe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0);n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function fi(e,t,r,n,i){var a=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var s=n.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=n.return;null!==o;){var l=o.tag;if((3===l||4===l)&&(l=o.stateNode.containerInfo,l===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){o=Bi(s);if(null===o)return;l=o.tag;if(5===l||6===l){n=a=o;continue e}s=s.parentNode}}n=n.return}Ie((function(){var n=a,i=Ee(r),o=[];e:{var s=Yn.get(e);if(void 0!==s){var l=vr,u=e;switch(e){case"keypress":if(0===dr(r))break e;case"keydown":case"keyup":l=Br;break;case"focusin":u="focus";l=Or;break;case"focusout":u="blur";l=Or;break;case"beforeblur":case"afterblur":l=Or;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=Pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=kr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ur;break;case zn:case $n:case Kn:l=Tr;break;case Zn:l=zr;break;case"scroll":l=yr;break;case"wheel":l=Kr;break;case"copy":case"cut":case"paste":l=Dr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Gr}var c=0!==(4&t),d=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var p=n,g;null!==p;){g=p;var h=g.stateNode;5===g.tag&&null!==h&&(g=h,null!==f&&(h=Me(p,f),null!=h&&c.push(pi(p,h,g))));if(d)break;p=p.return}0<c.length&&(s=new l(s,u,null,r,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){e:{s="mouseover"===e||"pointerover"===e;l="mouseout"===e||"pointerout"===e;if(s&&r!==Pe&&(u=r.relatedTarget||r.fromElement)&&(Bi(u)||u[xi]))break e;if(l||s){s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window;l?(u=r.relatedTarget||r.toElement,l=n,u=u?Bi(u):null,null!==u&&(d=ze(u),u!==d||5!==u.tag&&6!==u.tag))&&(u=null):(l=null,u=n);if(l!==u){c=Pr;h="onMouseLeave";f="onMouseEnter";p="mouse";"pointerout"!==e&&"pointerover"!==e||(c=Gr,h="onPointerLeave",f="onPointerEnter",p="pointer");d=null==l?s:Gi(l);g=null==u?s:Gi(u);s=new c(h,p+"leave",l,r,i);s.target=d;s.relatedTarget=g;h=null;Bi(i)===n&&(c=new c(f,p+"enter",u,r,i),c.target=g,c.relatedTarget=d,h=c);d=h;if(l&&u)t:{c=l;f=u;p=0;for(g=c;g;g=hi(g))p++;g=0;for(h=f;h;h=hi(h))g++;for(;0<p-g;)c=hi(c),p--;for(;0<g-p;)f=hi(f),g--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break t;c=hi(c);f=hi(f)}c=null}else c=null;null!==l&&vi(o,s,l,c,!1);null!==u&&null!==d&&vi(o,d,u,c,!0)}}}e:{s=n?Gi(n):window;l=s.nodeName&&s.nodeName.toLowerCase();if("select"===l||"input"===l&&"file"===s.type)var v=hn;else if(un(s))if(vn)v=kn;else{v=Pn;var m=Sn}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=En);if(v&&(v=v(e,n))){cn(o,v,r,i);break e}m&&m(e,s,n);"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ie(s,"number",s.value)}m=n?Gi(n):window;switch(e){case"focusin":(un(m)||"true"===m.contentEditable)&&(xn=m,Nn=n,Fn=null);break;case"focusout":Fn=Nn=xn=null;break;case"mousedown":Vn=!0;break;case"contextmenu":case"mouseup":case"dragend":Vn=!1;Bn(o,r,i);break;case"selectionchange":if(Mn)break;case"keydown":case"keyup":Bn(o,r,i)}var y;if(Yr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else an?rn(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Qr&&"ko"!==r.locale&&(an||"onCompositionStart"!==b?"onCompositionEnd"===b&&an&&(y=cr()):(sr=i,lr="value"in sr?sr.value:sr.textContent,an=!0)),m=gi(n,b),0<m.length&&(b=new Rr(b,e,null,r,i),o.push({event:b,listeners:m}),y?b.data=y:(y=nn(r),null!==y&&(b.data=y))));(y=Jr?on(e,r):sn(e,r))&&(n=gi(n,"onBeforeInput"),0<n.length&&(i=new Rr("onBeforeInput","beforeinput",null,r,i),o.push({event:i,listeners:n}),i.data=y))}oi(o,t)}))}function pi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function gi(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,a=Me(e,r),null!=a&&n.unshift(pi(e,a,i)),a=Me(e,t),null!=a&&n.push(pi(e,a,i)));e=e.return}return n}function hi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function vi(e,t,r,n,i){for(var a=t._reactName,o=[];null!==r&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==u&&(s=u,i?(l=Me(r,a),null!=l&&o.unshift(pi(r,l,s))):i||(l=Me(r,a),null!=l&&o.push(pi(r,l,s))));r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var mi=/\r\n?/g,yi=/\u0000|\uFFFD/g;function bi(e){return("string"===typeof e?e:""+e).replace(mi,"\n").replace(yi,"")}function wi(e,t,r){t=bi(t);if(bi(e)!==t&&r)throw Error(a(425))}function _i(){}var Si=null,Pi=null;function Ei(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ki="function"===typeof setTimeout?setTimeout:void 0,Ci="function"===typeof clearTimeout?clearTimeout:void 0,Oi="function"===typeof Promise?Promise:void 0,Ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Oi?function(e){return Oi.resolve(null).then(e).catch(Ti)}:ki;function Ti(e){setTimeout((function(){throw e}))}function ji(e,t){var r=t,n=0;do{var i=r.nextSibling;e.removeChild(r);if(i&&8===i.nodeType)if(r=i.data,"/$"===r){if(0===n){e.removeChild(i);Jt(t);return}n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);Jt(t)}function Di(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){t=e.data;if("$"===t||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function Li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var Ri=Math.random().toString(36).slice(2),Ii="__reactFiber$"+Ri,Mi="__reactProps$"+Ri,xi="__reactContainer$"+Ri,Ni="__reactEvents$"+Ri,Fi="__reactListeners$"+Ri,Vi="__reactHandles$"+Ri;function Bi(e){var t=e[Ii];if(t)return t;for(var r=e.parentNode;r;){if(t=r[xi]||r[Ii]){r=t.alternate;if(null!==t.child||null!==r&&null!==r.child)for(e=Li(e);null!==e;){if(r=e[Ii])return r;e=Li(e)}return t}e=r;r=e.parentNode}return null}function Wi(e){e=e[Ii]||e[xi];return!e||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Gi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function qi(e){return e[Mi]||null}var Ui=[],Hi=-1;function zi(e){return{current:e}}function $i(e){0>Hi||(e.current=Ui[Hi],Ui[Hi]=null,Hi--)}function Ki(e,t){Hi++;Ui[Hi]=e.current;e.current=t}var Zi={},Yi=zi(Zi),Xi=zi(!1),Ji=Zi;function Qi(e,t){var r=e.type.contextTypes;if(!r)return Zi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i);return i}function ea(e){e=e.childContextTypes;return null!==e&&void 0!==e}function ta(){$i(Xi);$i(Yi)}function ra(e,t,r){if(Yi.current!==Zi)throw Error(a(168));Ki(Yi,t);Ki(Xi,r)}function na(e,t,r){var n=e.stateNode;t=t.childContextTypes;if("function"!==typeof n.getChildContext)return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return V({},r,n)}function ia(e){e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Zi;Ji=Yi.current;Ki(Yi,e);Ki(Xi,Xi.current);return!0}function aa(e,t,r){var n=e.stateNode;if(!n)throw Error(a(169));r?(e=na(e,t,Ji),n.__reactInternalMemoizedMergedChildContext=e,$i(Xi),$i(Yi),Ki(Yi,e)):$i(Xi);Ki(Xi,r)}var oa=null,sa=!1,la=!1;function ua(e){null===oa?oa=[e]:oa.push(e)}function ca(e){sa=!0;ua(e)}function da(){if(!la&&null!==oa){la=!0;var e=0,t=At;try{var r=oa;for(At=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}oa=null;sa=!1}catch(t){throw null!==oa&&(oa=oa.slice(e+1)),Je(it,da),t}finally{At=t,la=!1}}return null}var fa=[],pa=0,ga=null,ha=0,va=[],ma=0,ya=null,ba=1,wa="";function _a(e,t){fa[pa++]=ha;fa[pa++]=ga;ga=e;ha=t}function Sa(e,t,r){va[ma++]=ba;va[ma++]=wa;va[ma++]=ya;ya=e;var n=ba;e=wa;var i=32-ft(n)-1;n&=~(1<<i);r+=1;var a=32-ft(t)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32);n>>=o;i-=o;ba=1<<32-ft(t)+i|r<<i|n;wa=a+e}else ba=1<<a|r<<i|n,wa=e}function Pa(e){null!==e.return&&(_a(e,1),Sa(e,1,0))}function Ea(e){for(;e===ga;)ga=fa[--pa],fa[pa]=null,ha=fa[--pa],fa[pa]=null;for(;e===ya;)ya=va[--ma],va[ma]=null,wa=va[--ma],va[ma]=null,ba=va[--ma],va[ma]=null}var ka=null,Ca=null,Oa=!1,Aa=null;function Ta(e,t){var r=oc(5,null,null,0);r.elementType="DELETED";r.stateNode=t;r.return=e;t=e.deletions;null===t?(e.deletions=[r],e.flags|=16):t.push(r)}function ja(e,t){switch(e.tag){case 5:var r=e.type;t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t;return null!==t&&(e.stateNode=t,ka=e,Ca=Di(t.firstChild),!0);case 6:return t=""===e.pendingProps||3!==t.nodeType?null:t,null!==t&&(e.stateNode=t,ka=e,Ca=null,!0);case 13:return t=8!==t.nodeType?null:t,null!==t&&(r=null!==ya?{id:ba,overflow:wa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=oc(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ka=e,Ca=null,!0);default:return!1}}function Da(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function La(e){if(Oa){var t=Ca;if(t){var r=t;if(!ja(e,t)){if(Da(e))throw Error(a(418));t=Di(r.nextSibling);var n=ka;t&&ja(e,t)?Ta(n,r):(e.flags=-4097&e.flags|2,Oa=!1,ka=e)}}else{if(Da(e))throw Error(a(418));e.flags=-4097&e.flags|2;Oa=!1;ka=e}}}function Ra(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ka=e}function Ia(e){if(e!==ka)return!1;if(!Oa)return Ra(e),Oa=!0,!1;var t;(t=3!==e.tag)&&!(t=5!==e.tag)&&(t=e.type,t="head"!==t&&"body"!==t&&!Ei(e.type,e.memoizedProps));if(t&&(t=Ca)){if(Da(e))throw Ma(),Error(a(418));for(;t;)Ta(e,t),t=Di(t.nextSibling)}Ra(e);if(13===e.tag){e=e.memoizedState;e=null!==e?e.dehydrated:null;if(!e)throw Error(a(317));e:{e=e.nextSibling;for(t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){Ca=Di(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}Ca=null}}else Ca=ka?Di(e.stateNode.nextSibling):null;return!0}function Ma(){for(var e=Ca;e;)e=Di(e.nextSibling)}function xa(){Ca=ka=null;Oa=!1}function Na(e){null===Aa?Aa=[e]:Aa.push(e)}var Fa=P.ReactCurrentBatchConfig;function Va(e,t){if(e&&e.defaultProps){t=V({},t);e=e.defaultProps;for(var r in e)void 0===t[r]&&(t[r]=e[r]);return t}return t}var Ba=zi(null),Wa=null,Ga=null,qa=null;function Ua(){qa=Ga=Wa=null}function Ha(e){var t=Ba.current;$i(Ba);e._currentValue=t}function za(e,t,r){for(;null!==e;){var n=e.alternate;(e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t);if(e===r)break;e=e.return}}function $a(e,t){Wa=e;qa=Ga=null;e=e.dependencies;null!==e&&null!==e.firstContext&&(0!==(e.lanes&t)&&(qs=!0),e.firstContext=null)}function Ka(e){var t=e._currentValue;if(qa!==e)if(e={context:e,memoizedValue:t,next:null},null===Ga){if(null===Wa)throw Error(a(308));Ga=e;Wa.dependencies={lanes:0,firstContext:e}}else Ga=Ga.next=e;return t}var Za=null;function Ya(e){null===Za?Za=[e]:Za.push(e)}function Xa(e,t,r,n){var i=t.interleaved;null===i?(r.next=r,Ya(t)):(r.next=i.next,i.next=r);t.interleaved=r;return Ja(e,n)}function Ja(e,t){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t);r=e;for(e=e.return;null!==e;)e.childLanes|=t,r=e.alternate,null!==r&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Qa=!1;function eo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function to(e,t){e=e.updateQueue;t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ro(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function no(e,t,r){var n=e.updateQueue;if(null===n)return null;n=n.shared;if(0!==(2&eu)){var i=n.pending;null===i?t.next=t:(t.next=i.next,i.next=t);n.pending=t;return Ja(e,r)}i=n.interleaved;null===i?(t.next=t,Ya(n)):(t.next=i.next,i.next=t);n.interleaved=t;return Ja(e,r)}function io(e,t,r){t=t.updateQueue;if(null!==t&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;n&=e.pendingLanes;r|=n;t.lanes=r;Ot(e,r)}}function ao(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&(n=n.updateQueue,r===n)){var i=null,a=null;r=r.firstBaseUpdate;if(null!==r){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?i=a=o:a=a.next=o;r=r.next}while(null!==r);null===a?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects};e.updateQueue=r;return}e=r.lastBaseUpdate;null===e?r.firstBaseUpdate=t:e.next=t;r.lastBaseUpdate=t}function oo(e,t,r,n){var i=e.updateQueue;Qa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null;null===o?a=u:o.next=u;o=l;var c=e.alternate;null!==c&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;o=0;c=u=l=null;s=a;do{var f=s.lane,p=s.eventTime;if((n&f)===f){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=e,h=s;f=t;p=r;switch(h.tag){case 1:g=h.payload;if("function"===typeof g){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:g=h.payload;f="function"===typeof g?g.call(p,d,f):g;if(null===f||void 0===f)break e;d=V({},d,f);break e;case 2:Qa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,f=i.effects,null===f?i.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,o|=f;s=s.next;if(null===s){if(s=i.shared.pending,null===s)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);null===c&&(l=d);i.baseState=l;i.firstBaseUpdate=u;i.lastBaseUpdate=c;t=i.shared.interleaved;if(null!==t){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);lu|=o;e.lanes=o;e.memoizedState=d}}function so(e,t,r){e=t.effects;t.effects=null;if(null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){n.callback=null;n=r;if("function"!==typeof i)throw Error(a(191,i));i.call(n)}}}var lo=(new n.Component).refs;function uo(e,t,r,n){t=e.memoizedState;r=r(n,t);r=null===r||void 0===r?t:V({},t,r);e.memoizedState=r;0===e.lanes&&(e.updateQueue.baseState=r)}var co={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Cu(),i=Ou(e),a=ro(n,i);a.payload=t;void 0!==r&&null!==r&&(a.callback=r);t=no(e,a,i);null!==t&&(Au(t,e,i,n),io(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Cu(),i=Ou(e),a=ro(n,i);a.tag=1;a.payload=t;void 0!==r&&null!==r&&(a.callback=r);t=no(e,a,i);null!==t&&(Au(t,e,i,n),io(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Cu(),n=Ou(e),i=ro(r,n);i.tag=2;void 0!==t&&null!==t&&(i.callback=t);t=no(e,i,n);null!==t&&(Au(t,e,n,r),io(t,e,n))}};function fo(e,t,r,n,i,a,o){e=e.stateNode;return"function"===typeof e.shouldComponentUpdate?e.shouldComponentUpdate(n,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!An(r,n)||!An(i,a))}function po(e,t,r){var n=!1,i=Zi;var a=t.contextType;"object"===typeof a&&null!==a?a=Ka(a):(i=ea(t)?Ji:Yi.current,n=t.contextTypes,a=(n=null!==n&&void 0!==n)?Qi(e,i):Zi);t=new t(r,a);e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null;t.updater=co;e.stateNode=t;t._reactInternals=e;n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a);return t}function go(e,t,r,n){e=t.state;"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n);"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n);t.state!==e&&co.enqueueReplaceState(t,t.state,null)}function ho(e,t,r,n){var i=e.stateNode;i.props=r;i.state=e.memoizedState;i.refs=lo;eo(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ka(a):(a=ea(t)?Ji:Yi.current,i.context=Qi(e,a));i.state=e.memoizedState;a=t.getDerivedStateFromProps;"function"===typeof a&&(uo(e,t,a,r),i.state=e.memoizedState);"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&co.enqueueReplaceState(i,i.state,null),oo(e,r,i,n),i.state=e.memoizedState);"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function vo(e,t,r){e=r.ref;if(null!==e&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){r=r._owner;if(r){if(1!==r.tag)throw Error(a(309));var n=r.stateNode}if(!n)throw Error(a(147,e));var i=n,o=""+e;if(null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o)return t.ref;t=function(e){var t=i.refs;t===lo&&(t=i.refs={});null===e?delete t[o]:t[o]=e};t._stringRef=o;return t}if("string"!==typeof e)throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function mo(e,t){e=Object.prototype.toString.call(t);throw Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yo(e){var t=e._init;return t(e._payload)}function bo(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){e=uc(e,t);e.index=0;e.sibling=null;return e}function o(t,r,n){t.index=n;if(!e)return t.flags|=1048576,r;n=t.alternate;if(null!==n)return n=n.index,n<r?(t.flags|=2,r):n;t.flags|=2;return r}function s(t){e&&null===t.alternate&&(t.flags|=2);return t}function l(e,t,r,n){if(null===t||6!==t.tag)return t=pc(r,e.mode,n),t.return=e,t;t=i(t,r);t.return=e;return t}function u(e,t,r,n){var a=r.type;if(a===C)return d(e,t,r.props.children,n,r.key);if(null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===M&&yo(a)===t.type))return n=i(t,r.props),n.ref=vo(e,t,r),n.return=e,n;n=cc(r.type,r.key,r.props,null,e.mode,n);n.ref=vo(e,t,r);n.return=e;return n}function c(e,t,r,n){if(null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation)return t=gc(r,e.mode,n),t.return=e,t;t=i(t,r.children||[]);t.return=e;return t}function d(e,t,r,n,a){if(null===t||7!==t.tag)return t=dc(r,e.mode,n,a),t.return=e,t;t=i(t,r);t.return=e;return t}function f(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return t=pc(""+t,e.mode,r),t.return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case E:return r=cc(t.type,t.key,t.props,null,e.mode,r),r.ref=vo(e,null,t),r.return=e,r;case k:return t=gc(t,e.mode,r),t.return=e,t;case M:var n=t._init;return f(e,n(t._payload),r)}if(ae(t)||F(t))return t=dc(t,e.mode,r,null),t.return=e,t;mo(e,t)}return null}function p(e,t,r,n){var i=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==i?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return r.key===i?u(e,t,r,n):null;case k:return r.key===i?c(e,t,r,n):null;case M:return i=r._init,p(e,t,i(r._payload),n)}if(ae(r)||F(r))return null!==i?null:d(e,t,r,n,null);mo(e,r)}return null}function g(e,t,r,n,i){if("string"===typeof n&&""!==n||"number"===typeof n)return e=e.get(r)||null,l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return e=e.get(null===n.key?r:n.key)||null,u(t,e,n,i);case k:return e=e.get(null===n.key?r:n.key)||null,c(t,e,n,i);case M:var a=n._init;return g(e,t,r,a(n._payload),i)}if(ae(n)||F(n))return e=e.get(r)||null,d(t,e,n,i,null);mo(t,n)}return null}function h(i,a,s,l){for(var u=null,c=null,d=a,h=a=0,v=null;null!==d&&h<s.length;h++){d.index>h?(v=d,d=null):v=d.sibling;var m=p(i,d,s[h],l);if(null===m){null===d&&(d=v);break}e&&d&&null===m.alternate&&t(i,d);a=o(m,a,h);null===c?u=m:c.sibling=m;c=m;d=v}if(h===s.length)return r(i,d),Oa&&_a(i,h),u;if(null===d){for(;h<s.length;h++)d=f(i,s[h],l),null!==d&&(a=o(d,a,h),null===c?u=d:c.sibling=d,c=d);Oa&&_a(i,h);return u}for(d=n(i,d);h<s.length;h++)v=g(d,i,h,s[h],l),null!==v&&(e&&null!==v.alternate&&d.delete(null===v.key?h:v.key),a=o(v,a,h),null===c?u=v:c.sibling=v,c=v);e&&d.forEach((function(e){return t(i,e)}));Oa&&_a(i,h);return u}function v(i,s,l,u){var c=F(l);if("function"!==typeof c)throw Error(a(150));l=c.call(l);if(null==l)throw Error(a(151));for(var d=c=null,h=s,v=s=0,m=null,y=l.next();null!==h&&!y.done;v++,y=l.next()){h.index>v?(m=h,h=null):m=h.sibling;var b=p(i,h,y.value,u);if(null===b){null===h&&(h=m);break}e&&h&&null===b.alternate&&t(i,h);s=o(b,s,v);null===d?c=b:d.sibling=b;d=b;h=m}if(y.done)return r(i,h),Oa&&_a(i,v),c;if(null===h){for(;!y.done;v++,y=l.next())y=f(i,y.value,u),null!==y&&(s=o(y,s,v),null===d?c=y:d.sibling=y,d=y);Oa&&_a(i,v);return c}for(h=n(i,h);!y.done;v++,y=l.next())y=g(h,i,v,y.value,u),null!==y&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),s=o(y,s,v),null===d?c=y:d.sibling=y,d=y);e&&h.forEach((function(e){return t(i,e)}));Oa&&_a(i,v);return c}function m(e,n,a,o){"object"===typeof a&&null!==a&&a.type===C&&null===a.key&&(a=a.props.children);if("object"===typeof a&&null!==a){switch(a.$$typeof){case E:e:{for(var l=a.key,u=n;null!==u;){if(u.key===l){l=a.type;if(l===C){if(7===u.tag){r(e,u.sibling);n=i(u,a.props.children);n.return=e;e=n;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===M&&yo(l)===u.type){r(e,u.sibling);n=i(u,a.props);n.ref=vo(e,u,a);n.return=e;e=n;break e}r(e,u);break}t(e,u);u=u.sibling}a.type===C?(n=dc(a.props.children,e.mode,o,a.key),n.return=e,e=n):(o=cc(a.type,a.key,a.props,null,e.mode,o),o.ref=vo(e,n,a),o.return=e,e=o)}return s(e);case k:e:{for(u=a.key;null!==n;){if(n.key===u){if(4===n.tag&&n.stateNode.containerInfo===a.containerInfo&&n.stateNode.implementation===a.implementation){r(e,n.sibling);n=i(n,a.children||[]);n.return=e;e=n;break e}r(e,n);break}t(e,n);n=n.sibling}n=gc(a,e.mode,o);n.return=e;e=n}return s(e);case M:return u=a._init,m(e,n,u(a._payload),o)}if(ae(a))return h(e,n,a,o);if(F(a))return v(e,n,a,o);mo(e,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==n&&6===n.tag?(r(e,n.sibling),n=i(n,a),n.return=e,e=n):(r(e,n),n=pc(a,e.mode,o),n.return=e,e=n),s(e)):r(e,n)}return m}var wo=bo(!0),_o=bo(!1),So={},Po=zi(So),Eo=zi(So),ko=zi(So);function Co(e){if(e===So)throw Error(a(174));return e}function Oo(e,t){Ki(ko,t);Ki(Eo,e);Ki(Po,So);e=t.nodeType;switch(e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:e=8===e?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fe(t,e)}$i(Po);Ki(Po,t)}function Ao(){$i(Po);$i(Eo);$i(ko)}function To(e){Co(ko.current);var t=Co(Po.current);var r=fe(t,e.type);t!==r&&(Ki(Eo,e),Ki(Po,r))}function jo(e){Eo.current===e&&($i(Po),$i(Eo))}var Do=zi(0);function Lo(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(r=r.dehydrated,null===r||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t;t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return;t=t.sibling}return null}var Ro=[];function Io(){for(var e=0;e<Ro.length;e++)Ro[e]._workInProgressVersionPrimary=null;Ro.length=0}var Mo=P.ReactCurrentDispatcher,xo=P.ReactCurrentBatchConfig,No=0,Fo=null,Vo=null,Bo=null,Wo=!1,Go=!1,qo=0,Uo=0;function Ho(){throw Error(a(321))}function zo(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!On(e[r],t[r]))return!1;return!0}function $o(e,t,r,n,i,o){No=o;Fo=t;t.memoizedState=null;t.updateQueue=null;t.lanes=0;Mo.current=null===e||null===e.memoizedState?js:Ds;e=r(n,i);if(Go){o=0;do{Go=!1;qo=0;if(25<=o)throw Error(a(301));o+=1;Bo=Vo=null;t.updateQueue=null;Mo.current=Ls;e=r(n,i)}while(Go)}Mo.current=Ts;t=null!==Vo&&null!==Vo.next;No=0;Bo=Vo=Fo=null;Wo=!1;if(t)throw Error(a(300));return e}function Ko(){var e=0!==qo;qo=0;return e}function Zo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===Bo?Fo.memoizedState=Bo=e:Bo=Bo.next=e;return Bo}function Yo(){if(null===Vo){var e=Fo.alternate;e=null!==e?e.memoizedState:null}else e=Vo.next;var t=null===Bo?Fo.memoizedState:Bo.next;if(null!==t)Bo=t,Vo=e;else{if(null===e)throw Error(a(310));Vo=e;e={memoizedState:Vo.memoizedState,baseState:Vo.baseState,baseQueue:Vo.baseQueue,queue:Vo.queue,next:null};null===Bo?Fo.memoizedState=Bo=e:Bo=Bo.next=e}return Bo}function Xo(e,t){return"function"===typeof t?t(e):t}function Jo(e){var t=Yo(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=Vo,i=n.baseQueue,o=r.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next;o.next=s}n.baseQueue=i=o;r.pending=null}if(null!==i){o=i.next;n=n.baseState;var l=s=null,u=null,c=o;do{var d=c.lane;if((No&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=f,s=n):u=u.next=f;Fo.lanes|=d;lu|=d}c=c.next}while(null!==c&&c!==o);null===u?s=n:u.next=l;On(n,t.memoizedState)||(qs=!0);t.memoizedState=n;t.baseState=s;t.baseQueue=u;r.lastRenderedState=n}e=r.interleaved;if(null!==e){i=e;do{o=i.lane,Fo.lanes|=o,lu|=o,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Qo(e){var t=Yo(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);On(o,t.memoizedState)||(qs=!0);t.memoizedState=o;null===t.baseQueue&&(t.baseState=o);r.lastRenderedState=o}return[o,n]}function es(){}function ts(e,t){var r=Fo,n=Yo(),i=t(),o=!On(n.memoizedState,i);o&&(n.memoizedState=i,qs=!0);n=n.queue;ps(is.bind(null,r,n,e),[e]);if(n.getSnapshot!==t||o||null!==Bo&&1&Bo.memoizedState.tag){r.flags|=2048;ls(9,ns.bind(null,r,n,i,t),void 0,null);if(null===tu)throw Error(a(349));0!==(30&No)||rs(r,t,i)}return i}function rs(e,t,r){e.flags|=16384;e={getSnapshot:t,value:r};t=Fo.updateQueue;null===t?(t={lastEffect:null,stores:null},Fo.updateQueue=t,t.stores=[e]):(r=t.stores,null===r?t.stores=[e]:r.push(e))}function ns(e,t,r,n){t.value=r;t.getSnapshot=n;as(t)&&os(e)}function is(e,t,r){return r((function(){as(t)&&os(e)}))}function as(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!On(e,r)}catch(e){return!0}}function os(e){var t=Ja(e,1);null!==t&&Au(t,e,1,-1)}function ss(e){var t=Zo();"function"===typeof e&&(e=e());t.memoizedState=t.baseState=e;e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:e};t.queue=e;e=e.dispatch=ks.bind(null,Fo,e);return[t.memoizedState,e]}function ls(e,t,r,n){e={tag:e,create:t,destroy:r,deps:n,next:null};t=Fo.updateQueue;null===t?(t={lastEffect:null,stores:null},Fo.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,null===r?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e));return e}function us(){return Yo().memoizedState}function cs(e,t,r,n){var i=Zo();Fo.flags|=e;i.memoizedState=ls(1|t,r,void 0,void 0===n?null:n)}function ds(e,t,r,n){var i=Yo();n=void 0===n?null:n;var a=void 0;if(null!==Vo){var o=Vo.memoizedState;a=o.destroy;if(null!==n&&zo(n,o.deps)){i.memoizedState=ls(t,r,a,n);return}}Fo.flags|=e;i.memoizedState=ls(1|t,r,a,n)}function fs(e,t){return cs(8390656,8,e,t)}function ps(e,t){return ds(2048,8,e,t)}function gs(e,t){return ds(4,2,e,t)}function hs(e,t){return ds(4,4,e,t)}function vs(e,t){if("function"===typeof t)return e=e(),t(e),function(){t(null)};if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ms(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null;return ds(4,4,vs.bind(null,t,e),r)}function ys(){}function bs(e,t){var r=Yo();t=void 0===t?null:t;var n=r.memoizedState;if(null!==n&&null!==t&&zo(t,n[1]))return n[0];r.memoizedState=[e,t];return e}function ws(e,t){var r=Yo();t=void 0===t?null:t;var n=r.memoizedState;if(null!==n&&null!==t&&zo(t,n[1]))return n[0];e=e();r.memoizedState=[e,t];return e}function _s(e,t,r){if(0===(21&No))return e.baseState&&(e.baseState=!1,qs=!0),e.memoizedState=r;On(r,t)||(r=Pt(),Fo.lanes|=r,lu|=r,e.baseState=!0);return t}function Ss(e,t){var r=At;At=0!==r&&4>r?r:4;e(!0);var n=xo.transition;xo.transition={};try{e(!1),t()}finally{At=r,xo.transition=n}}function Ps(){return Yo().memoizedState}function Es(e,t,r){var n=Ou(e);r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Cs(e))Os(t,r);else if(r=Xa(e,t,r,n),null!==r){var i=Cu();Au(r,e,n,i);As(r,t,n)}}function ks(e,t,r){var n=Ou(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Cs(e))Os(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&(a=t.lastRenderedReducer,null!==a))try{var o=t.lastRenderedState,s=a(o,r);i.hasEagerState=!0;i.eagerState=s;if(On(s,o)){var l=t.interleaved;null===l?(i.next=i,Ya(t)):(i.next=l.next,l.next=i);t.interleaved=i;return}}catch(e){}r=Xa(e,t,i,n);null!==r&&(i=Cu(),Au(r,e,n,i),As(r,t,n))}}function Cs(e){var t=e.alternate;return e===Fo||null!==t&&t===Fo}function Os(e,t){Go=Wo=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t);e.pending=t}function As(e,t,r){if(0!==(4194240&r)){var n=t.lanes;n&=e.pendingLanes;r|=n;t.lanes=r;Ot(e,r)}}var Ts={readContext:Ka,useCallback:Ho,useContext:Ho,useEffect:Ho,useImperativeHandle:Ho,useInsertionEffect:Ho,useLayoutEffect:Ho,useMemo:Ho,useReducer:Ho,useRef:Ho,useState:Ho,useDebugValue:Ho,useDeferredValue:Ho,useTransition:Ho,useMutableSource:Ho,useSyncExternalStore:Ho,useId:Ho,unstable_isNewReconciler:!1},js={readContext:Ka,useCallback:function(e,t){Zo().memoizedState=[e,void 0===t?null:t];return e},useContext:Ka,useEffect:fs,useImperativeHandle:function(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null;return cs(4194308,4,vs.bind(null,t,e),r)},useLayoutEffect:function(e,t){return cs(4194308,4,e,t)},useInsertionEffect:function(e,t){return cs(4,2,e,t)},useMemo:function(e,t){var r=Zo();t=void 0===t?null:t;e=e();r.memoizedState=[e,t];return e},useReducer:function(e,t,r){var n=Zo();t=void 0!==r?r(t):t;n.memoizedState=n.baseState=t;e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t};n.queue=e;e=e.dispatch=Es.bind(null,Fo,e);return[n.memoizedState,e]},useRef:function(e){var t=Zo();e={current:e};return t.memoizedState=e},useState:ss,useDebugValue:ys,useDeferredValue:function(e){return Zo().memoizedState=e},useTransition:function(){var e=ss(!1),t=e[0];e=Ss.bind(null,e[1]);Zo().memoizedState=e;return[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Fo,i=Zo();if(Oa){if(void 0===r)throw Error(a(407));r=r()}else{r=t();if(null===tu)throw Error(a(349));0!==(30&No)||rs(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};i.queue=o;fs(is.bind(null,n,o,e),[e]);n.flags|=2048;ls(9,ns.bind(null,n,o,r,t),void 0,null);return r},useId:function(){var e=Zo(),t=tu.identifierPrefix;if(Oa){var r=wa;var n=ba;r=(n&~(1<<32-ft(n)-1)).toString(32)+r;t=":"+t+"R"+r;r=qo++;0<r&&(t+="H"+r.toString(32));t+=":"}else r=Uo++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ds={readContext:Ka,useCallback:bs,useContext:Ka,useEffect:ps,useImperativeHandle:ms,useInsertionEffect:gs,useLayoutEffect:hs,useMemo:ws,useReducer:Jo,useRef:us,useState:function(){return Jo(Xo)},useDebugValue:ys,useDeferredValue:function(e){var t=Yo();return _s(t,Vo.memoizedState,e)},useTransition:function(){var e=Jo(Xo)[0],t=Yo().memoizedState;return[e,t]},useMutableSource:es,useSyncExternalStore:ts,useId:Ps,unstable_isNewReconciler:!1},Ls={readContext:Ka,useCallback:bs,useContext:Ka,useEffect:ps,useImperativeHandle:ms,useInsertionEffect:gs,useLayoutEffect:hs,useMemo:ws,useReducer:Qo,useRef:us,useState:function(){return Qo(Xo)},useDebugValue:ys,useDeferredValue:function(e){var t=Yo();return null===Vo?t.memoizedState=e:_s(t,Vo.memoizedState,e)},useTransition:function(){var e=Qo(Xo)[0],t=Yo().memoizedState;return[e,t]},useMutableSource:es,useSyncExternalStore:ts,useId:Ps,unstable_isNewReconciler:!1};function Rs(e,t){try{var r="",n=t;do{r+=U(n),n=n.return}while(n);var i=r}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function Is(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function Ms(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var xs="function"===typeof WeakMap?WeakMap:Map;function Ns(e,t,r){r=ro(-1,r);r.tag=3;r.payload={element:null};var n=t.value;r.callback=function(){vu||(vu=!0,mu=n);Ms(e,t)};return r}function Fs(e,t,r){r=ro(-1,r);r.tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var i=t.value;r.payload=function(){return n(i)};r.callback=function(){Ms(e,t)}}var a=e.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(r.callback=function(){Ms(e,t);"function"!==typeof n&&(null===yu?yu=new Set([this]):yu.add(this));var r=t.stack;this.componentDidCatch(t.value,{componentStack:null!==r?r:""})});return r}function Vs(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new xs;var i=new Set;n.set(t,i)}else i=n.get(t),void 0===i&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Qu.bind(null,e,t,r),t.then(e,e))}function Bs(e){do{var t;(t=13===e.tag)&&(t=e.memoizedState,t=null===t||null!==t.dehydrated);if(t)return e;e=e.return}while(null!==e);return null}function Ws(e,t,r,n,i){if(0===(1&e.mode))return e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:(t=ro(-1,1),t.tag=2,no(r,t,1))),r.lanes|=1),e;e.flags|=65536;e.lanes=i;return e}var Gs=P.ReactCurrentOwner,qs=!1;function Us(e,t,r,n){t.child=null===e?_o(t,null,r,n):wo(t,e.child,r,n)}function Hs(e,t,r,n,i){r=r.render;var a=t.ref;$a(t,i);n=$o(e,t,r,n,a,i);r=Ko();if(null!==e&&!qs)return t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,dl(e,t,i);Oa&&r&&Pa(t);t.flags|=1;Us(e,t,n,i);return t.child}function zs(e,t,r,n,i){if(null===e){var a=r.type;if("function"===typeof a&&!sc(a)&&void 0===a.defaultProps&&null===r.compare&&void 0===r.defaultProps)return t.tag=15,t.type=a,$s(e,t,a,n,i);e=cc(r.type,null,n,t,t.mode,i);e.ref=t.ref;e.return=t;return t.child=e}a=e.child;if(0===(e.lanes&i)){var o=a.memoizedProps;r=r.compare;r=null!==r?r:An;if(r(o,n)&&e.ref===t.ref)return dl(e,t,i)}t.flags|=1;e=uc(a,n);e.ref=t.ref;e.return=t;return t.child=e}function $s(e,t,r,n,i){if(null!==e){var a=e.memoizedProps;if(An(a,n)&&e.ref===t.ref){if(qs=!1,t.pendingProps=n=a,0===(e.lanes&i))return t.lanes=e.lanes,dl(e,t,i);0!==(131072&e.flags)&&(qs=!0)}}return Ys(e,t,r,n,i)}function Ks(e,t,r){var n=t.pendingProps,i=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ki(au,iu),iu|=r;else{if(0===(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ki(au,iu),iu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null};n=null!==a?a.baseLanes:r;Ki(au,iu);iu|=n}else null!==a?(n=a.baseLanes|r,t.memoizedState=null):n=r,Ki(au,iu),iu|=n;Us(e,t,i,r);return t.child}function Zs(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ys(e,t,r,n,i){var a=ea(r)?Ji:Yi.current;a=Qi(t,a);$a(t,i);r=$o(e,t,r,n,a,i);n=Ko();if(null!==e&&!qs)return t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,dl(e,t,i);Oa&&n&&Pa(t);t.flags|=1;Us(e,t,r,i);return t.child}function Xs(e,t,r,n,i){if(ea(r)){var a=!0;ia(t)}else a=!1;$a(t,i);if(null===t.stateNode)cl(e,t),po(t,r,n),ho(t,r,n,i),n=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=r.contextType;"object"===typeof u&&null!==u?u=Ka(u):(u=ea(r)?Ji:Yi.current,u=Qi(t,u));var c=r.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==n||l!==u)&&go(t,o,n,u);Qa=!1;var f=t.memoizedState;o.state=f;oo(t,n,o,i);l=t.memoizedState;s!==n||f!==l||Xi.current||Qa?("function"===typeof c&&(uo(t,r,c,n),l=t.memoizedState),(s=Qa||fo(t,r,s,n,f,l,u))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),n=!1)}else{o=t.stateNode;to(e,t);s=t.memoizedProps;u=t.type===t.elementType?s:Va(t.type,s);o.props=u;d=t.pendingProps;f=o.context;l=r.contextType;"object"===typeof l&&null!==l?l=Ka(l):(l=ea(r)?Ji:Yi.current,l=Qi(t,l));var p=r.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||f!==l)&&go(t,o,n,l);Qa=!1;f=t.memoizedState;o.state=f;oo(t,n,o,i);var g=t.memoizedState;s!==d||f!==g||Xi.current||Qa?("function"===typeof p&&(uo(t,r,p,n),g=t.memoizedState),(u=Qa||fo(t,r,u,n,f,g,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(n,g,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,g,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=l,n=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Js(e,t,r,n,a,i)}function Js(e,t,r,n,i,a){Zs(e,t);var o=0!==(128&t.flags);if(!n&&!o)return i&&aa(t,r,!1),dl(e,t,a);n=t.stateNode;Gs.current=t;var s=o&&"function"!==typeof r.getDerivedStateFromError?null:n.render();t.flags|=1;null!==e&&o?(t.child=wo(t,e.child,null,a),t.child=wo(t,null,s,a)):Us(e,t,s,a);t.memoizedState=n.state;i&&aa(t,r,!0);return t.child}function Qs(e){var t=e.stateNode;t.pendingContext?ra(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ra(e,t.context,!1);Oo(e,t.containerInfo)}function el(e,t,r,n,i){xa();Na(i);t.flags|=256;Us(e,t,r,n);return t.child}var tl={dehydrated:null,treeContext:null,retryLane:0};function rl(e){return{baseLanes:e,cachePool:null,transitions:null}}function nl(e,t,r){var n=t.pendingProps,i=Do.current,a=!1,o=0!==(128&t.flags),s;(s=o)||(s=(null===e||null!==e.memoizedState)&&0!==(2&i));s?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1);Ki(Do,1&i);if(null===e){La(t);e=t.memoizedState;if(null!==e&&(e=e.dehydrated,null!==e))return 0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null;o=n.children;e=n.fallback;return a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},0===(1&n)&&null!==a?(a.childLanes=0,a.pendingProps=o):a=fc(o,n,0,null),e=dc(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=rl(r),t.memoizedState=tl,e):il(t,o)}i=e.memoizedState;if(null!==i&&(s=i.dehydrated,null!==s))return ol(e,t,o,n,s,i,r);if(a){a=n.fallback;o=t.mode;i=e.child;s=i.sibling;var l={mode:"hidden",children:n.children};0===(1&o)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=uc(i,l),n.subtreeFlags=14680064&i.subtreeFlags);null!==s?a=uc(s,a):(a=dc(a,o,r,null),a.flags|=2);a.return=t;n.return=t;n.sibling=a;t.child=n;n=a;a=t.child;o=e.child.memoizedState;o=null===o?rl(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions};a.memoizedState=o;a.childLanes=e.childLanes&~r;t.memoizedState=tl;return n}a=e.child;e=a.sibling;n=uc(a,{mode:"visible",children:n.children});0===(1&t.mode)&&(n.lanes=r);n.return=t;n.sibling=null;null!==e&&(r=t.deletions,null===r?(t.deletions=[e],t.flags|=16):r.push(e));t.child=n;t.memoizedState=null;return n}function il(e,t){t=fc({mode:"visible",children:t},e.mode,0,null);t.return=e;return e.child=t}function al(e,t,r,n){null!==n&&Na(n);wo(t,e.child,null,r);e=il(t,t.pendingProps.children);e.flags|=2;t.memoizedState=null;return e}function ol(e,t,r,n,i,o,s){if(r){if(256&t.flags)return t.flags&=-257,n=Is(Error(a(422))),al(e,t,s,n);if(null!==t.memoizedState)return t.child=e.child,t.flags|=128,null;o=n.fallback;i=t.mode;n=fc({mode:"visible",children:n.children},i,0,null);o=dc(o,i,s,null);o.flags|=2;n.return=t;o.return=t;n.sibling=o;t.child=n;0!==(1&t.mode)&&wo(t,e.child,null,s);t.child.memoizedState=rl(s);t.memoizedState=tl;return o}if(0===(1&t.mode))return al(e,t,s,null);if("$!"===i.data){n=i.nextSibling&&i.nextSibling.dataset;if(n)var l=n.dgst;n=l;o=Error(a(419));n=Is(o,n,void 0);return al(e,t,s,n)}l=0!==(s&e.childLanes);if(qs||l){n=tu;if(null!==n){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=0!==(i&(n.suspendedLanes|s))?0:i;0!==i&&i!==o.retryLane&&(o.retryLane=i,Ja(e,i),Au(n,e,i,-1))}Gu();n=Is(Error(a(421)));return al(e,t,s,n)}if("$?"===i.data)return t.flags|=128,t.child=e.child,t=tc.bind(null,e),i._reactRetry=t,null;e=o.treeContext;Ca=Di(i.nextSibling);ka=t;Oa=!0;Aa=null;null!==e&&(va[ma++]=ba,va[ma++]=wa,va[ma++]=ya,ba=e.id,wa=e.overflow,ya=t);t=il(t,n.children);t.flags|=4096;return t}function sl(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t);za(e.return,t,r)}function ll(e,t,r,n,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function ul(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;Us(e,t,n.children,r);n=Do.current;if(0!==(2&n))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&sl(e,r,t);else if(19===e.tag)sl(e,r,t);else if(null!==e.child){e.child.return=e;e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return;e=e.sibling}n&=1}Ki(Do,n);if(0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":r=t.child;for(i=null;null!==r;)e=r.alternate,null!==e&&null===Lo(e)&&(i=r),r=r.sibling;r=i;null===r?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null);ll(t,!1,i,r,a);break;case"backwards":r=null;i=t.child;for(t.child=null;null!==i;){e=i.alternate;if(null!==e&&null===Lo(e)){t.child=i;break}e=i.sibling;i.sibling=r;r=i;i=e}ll(t,!0,r,null,a);break;case"together":ll(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cl(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function dl(e,t,r){null!==e&&(t.dependencies=e.dependencies);lu|=t.lanes;if(0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){e=t.child;r=uc(e,e.pendingProps);t.child=r;for(r.return=t;null!==e.sibling;)e=e.sibling,r=r.sibling=uc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function fl(e,t,r){switch(t.tag){case 3:Qs(t);xa();break;case 5:To(t);break;case 1:ea(t.type)&&ia(t);break;case 4:Oo(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ki(Ba,n._currentValue);n._currentValue=i;break;case 13:n=t.memoizedState;if(null!==n){if(null!==n.dehydrated)return Ki(Do,1&Do.current),t.flags|=128,null;if(0!==(r&t.child.childLanes))return nl(e,t,r);Ki(Do,1&Do.current);e=dl(e,t,r);return null!==e?e.sibling:null}Ki(Do,1&Do.current);break;case 19:n=0!==(r&t.childLanes);if(0!==(128&e.flags)){if(n)return ul(e,t,r);t.flags|=128}i=t.memoizedState;null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null);Ki(Do,Do.current);if(n)break;return null;case 22:case 23:return t.lanes=0,Ks(e,t,r)}return dl(e,t,r)}var pl,gl,hl,vl;pl=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r;r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return;r=r.sibling}};gl=function(){};hl=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode;Co(Po.current);var a=null;switch(r){case"input":i=Q(e,i);n=Q(e,n);a=[];break;case"select":i=V({},i,{value:void 0});n=V({},n,{value:void 0});a=[];break;case"textarea":i=se(e,i);n=se(e,n);a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof n.onClick&&(e.onclick=_i)}_e(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var u=n[c];l=null!=i?i[c]:void 0;if(n.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(a||(a=[]),a.push(c,r)),r=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&si("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}r&&(a=a||[]).push("style",r);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};vl=function(e,t,r,n){r!==n&&(t.flags|=4)};function ml(e,t){if(!Oa)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function yl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;e.subtreeFlags|=n;e.childLanes=r;return t}function bl(e,t,r){var n=t.pendingProps;Ea(t);switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yl(t),null;case 1:return ea(t.type)&&ta(),yl(t),null;case 3:n=t.stateNode;Ao();$i(Xi);$i(Yi);Io();n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null);null!==e&&null!==e.child||(Ia(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Aa&&(Lu(Aa),Aa=null)));gl(e,t);yl(t);return null;case 5:jo(t);var i=Co(ko.current);r=t.type;if(null!==e&&null!=t.stateNode)hl(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(a(166));yl(t);return null}e=Co(Po.current);if(Ia(t)){n=t.stateNode;r=t.type;var o=t.memoizedProps;n[Ii]=t;n[Mi]=o;e=0!==(1&t.mode);switch(r){case"dialog":si("cancel",n);si("close",n);break;case"iframe":case"object":case"embed":si("load",n);break;case"video":case"audio":for(i=0;i<ni.length;i++)si(ni[i],n);break;case"source":si("error",n);break;case"img":case"image":case"link":si("error",n);si("load",n);break;case"details":si("toggle",n);break;case"input":ee(n,o);si("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple};si("invalid",n);break;case"textarea":le(n,o),si("invalid",n)}_e(r,o);i=null;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?n.textContent!==u&&(!0!==o.suppressHydrationWarning&&wi(n.textContent,u,e),i=["children",u]):"number"===typeof u&&n.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&wi(n.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&si("scroll",n)}switch(r){case"input":Y(n);ne(n,o,!0);break;case"textarea":Y(n);ce(n);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(n.onclick=_i)}n=i;t.updateQueue=n;null!==n&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument;"http://www.w3.org/1999/xhtml"===e&&(e=de(r));"http://www.w3.org/1999/xhtml"===e?"script"===r?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r);e[Ii]=t;e[Mi]=n;pl(e,t,!1,!1);t.stateNode=e;e:{l=Se(r,n);switch(r){case"dialog":si("cancel",e);si("close",e);i=n;break;case"iframe":case"object":case"embed":si("load",e);i=n;break;case"video":case"audio":for(i=0;i<ni.length;i++)si(ni[i],e);i=n;break;case"source":si("error",e);i=n;break;case"img":case"image":case"link":si("error",e);si("load",e);i=n;break;case"details":si("toggle",e);i=n;break;case"input":ee(e,n);i=Q(e,n);si("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple};i=V({},n,{value:void 0});si("invalid",e);break;case"textarea":le(e,n);i=se(e,n);si("invalid",e);break;default:i=n}_e(r,i);u=i;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?be(e,c):"dangerouslySetInnerHTML"===o?(c=c?c.__html:void 0,null!=c&&ge(e,c)):"children"===o?"string"===typeof c?("textarea"!==r||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&si("scroll",e):null!=c&&S(e,o,c,l))}switch(r){case"input":Y(e);ne(e,n,!1);break;case"textarea":Y(e);ce(e);break;case"option":null!=n.value&&e.setAttribute("value",""+$(n.value));break;case"select":e.multiple=!!n.multiple;o=n.value;null!=o?oe(e,!!n.multiple,o,!1):null!=n.defaultValue&&oe(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=_i)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}yl(t);return null;case 6:if(e&&null!=t.stateNode)vl(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(a(166));r=Co(ko.current);Co(Po.current);if(Ia(t)){n=t.stateNode;r=t.memoizedProps;n[Ii]=t;if((o=n.nodeValue!==r)&&(e=ka,null!==e))switch(e.tag){case 3:wi(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&wi(n.nodeValue,r,0!==(1&e.mode))}o&&(t.flags|=4)}else n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n),n[Ii]=t,t.stateNode=n}yl(t);return null;case 13:$i(Do);n=t.memoizedState;if(null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(Oa&&null!==Ca&&0!==(1&t.mode)&&0===(128&t.flags))Ma(),xa(),t.flags|=98560,o=!1;else if(o=Ia(t),null!==n&&null!==n.dehydrated){if(null===e){if(!o)throw Error(a(318));o=t.memoizedState;o=null!==o?o.dehydrated:null;if(!o)throw Error(a(317));o[Ii]=t}else xa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;yl(t);o=!1}else null!==Aa&&(Lu(Aa),Aa=null),o=!0;if(!o)return 65536&t.flags?t:null}if(0!==(128&t.flags))return t.lanes=r,t;n=null!==n;n!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Do.current)?0===ou&&(ou=3):Gu()));null!==t.updateQueue&&(t.flags|=4);yl(t);return null;case 4:return Ao(),gl(e,t),null===e&&ci(t.stateNode.containerInfo),yl(t),null;case 10:return Ha(t.type._context),yl(t),null;case 17:return ea(t.type)&&ta(),yl(t),null;case 19:$i(Do);o=t.memoizedState;if(null===o)return yl(t),null;n=0!==(128&t.flags);l=o.rendering;if(null===l)if(n)ml(o,!1);else{if(0!==ou||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){l=Lo(e);if(null!==l){t.flags|=128;ml(o,!1);n=l.updateQueue;null!==n&&(t.updateQueue=n,t.flags|=4);t.subtreeFlags=0;n=r;for(r=t.child;null!==r;)o=r,e=n,o.flags&=14680066,l=o.alternate,null===l?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;Ki(Do,1&Do.current|2);return t.child}e=e.sibling}null!==o.tail&&rt()>gu&&(t.flags|=128,n=!0,ml(o,!1),t.lanes=4194304)}else{if(!n)if(e=Lo(l),null!==e){if(t.flags|=128,n=!0,r=e.updateQueue,null!==r&&(t.updateQueue=r,t.flags|=4),ml(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!Oa)return yl(t),null}else 2*rt()-o.renderingStartTime>gu&&1073741824!==r&&(t.flags|=128,n=!0,ml(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(r=o.last,null!==r?r.sibling=l:t.child=l,o.last=l)}if(null!==o.tail)return t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=rt(),t.sibling=null,r=Do.current,Ki(Do,n?1&r|2:1&r),t;yl(t);return null;case 22:case 23:return Fu(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&iu)&&(yl(t),6&t.subtreeFlags&&(t.flags|=8192)):yl(t),null;case 24:return null;case 25:return null}throw Error(a(156,t.tag))}function wl(e,t){Ea(t);switch(t.tag){case 1:return ea(t.type)&&ta(),e=t.flags,65536&e?(t.flags=-65537&e|128,t):null;case 3:return Ao(),$i(Xi),$i(Yi),Io(),e=t.flags,0!==(65536&e)&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return jo(t),null;case 13:$i(Do);e=t.memoizedState;if(null!==e&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));xa()}e=t.flags;return 65536&e?(t.flags=-65537&e|128,t):null;case 19:return $i(Do),null;case 4:return Ao(),null;case 10:return Ha(t.type._context),null;case 22:case 23:return Fu(),null;case 24:return null;default:return null}}var _l=!1,Sl=!1,Pl="function"===typeof WeakSet?WeakSet:Set,El=null;function kl(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(r){Ju(e,t,r)}else r.current=null}function Cl(e,t,r){try{r()}catch(r){Ju(e,t,r)}}var Ol=!1;function Al(e,t){Si=er;e=Ln();if(Rn(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch(e){r=null;break e}var s=0,l=-1,u=-1,c=0,d=0,f=e,p=null;t:for(;;){for(var g;;){f!==r||0!==i&&3!==f.nodeType||(l=s+i);f!==o||0!==n&&3!==f.nodeType||(u=s+n);3===f.nodeType&&(s+=f.nodeValue.length);if(null===(g=f.firstChild))break;p=f;f=g}for(;;){if(f===e)break t;p===r&&++c===i&&(l=s);p===o&&++d===n&&(u=s);if(null!==(g=f.nextSibling))break;f=p;p=f.parentNode}f=g}r=-1===l||-1===u?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;Pi={focusedElem:e,selectionRange:r};er=!1;for(El=t;null!==El;)if(t=El,e=t.child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,El=e;else for(;null!==El;){t=El;try{var h=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:break;case 1:if(null!==h){var v=h.memoizedProps,m=h.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:Va(t.type,v),m);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(e){Ju(t,t.return,e)}e=t.sibling;if(null!==e){e.return=t.return;El=e;break}El=t.return}h=Ol;Ol=!1;return h}function Tl(e,t,r){var n=t.updateQueue;n=null!==n?n.lastEffect:null;if(null!==n){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0;void 0!==a&&Cl(t,r,a)}i=i.next}while(i!==n)}}function jl(e,t){t=t.updateQueue;t=null!==t?t.lastEffect:null;if(null!==t){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Dl(e){var t=e.ref;if(null!==t){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}"function"===typeof t?t(e):t.current=e}}function Ll(e){var t=e.alternate;null!==t&&(e.alternate=null,Ll(t));e.child=null;e.deletions=null;e.sibling=null;5===e.tag&&(t=e.stateNode,null!==t&&(delete t[Ii],delete t[Mi],delete t[Ni],delete t[Fi],delete t[Vi]));e.stateNode=null;e.return=null;e.dependencies=null;e.memoizedProps=null;e.memoizedState=null;e.pendingProps=null;e.stateNode=null;e.updateQueue=null}function Rl(e){return 5===e.tag||3===e.tag||4===e.tag}function Il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Rl(e.return))return null;e=e.return}e.sibling.return=e.return;for(e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Ml(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,null!==r&&void 0!==r||null!==t.onclick||(t.onclick=_i));else if(4!==n&&(e=e.child,null!==e))for(Ml(e,t,r),e=e.sibling;null!==e;)Ml(e,t,r),e=e.sibling}function xl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&(e=e.child,null!==e))for(xl(e,t,r),e=e.sibling;null!==e;)xl(e,t,r),e=e.sibling}var Nl=null,Fl=!1;function Vl(e,t,r){for(r=r.child;null!==r;)Bl(e,t,r),r=r.sibling}function Bl(e,t,r){if(ct&&"function"===typeof ct.onCommitFiberUnmount)try{ct.onCommitFiberUnmount(ut,r)}catch(e){}switch(r.tag){case 5:Sl||kl(r,t);case 6:var n=Nl,i=Fl;Nl=null;Vl(e,t,r);Nl=n;Fl=i;null!==Nl&&(Fl?(e=Nl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):Nl.removeChild(r.stateNode));break;case 18:null!==Nl&&(Fl?(e=Nl,r=r.stateNode,8===e.nodeType?ji(e.parentNode,r):1===e.nodeType&&ji(e,r),Jt(e)):ji(Nl,r.stateNode));break;case 4:n=Nl;i=Fl;Nl=r.stateNode.containerInfo;Fl=!0;Vl(e,t,r);Nl=n;Fl=i;break;case 0:case 11:case 14:case 15:if(!Sl&&(n=r.updateQueue,null!==n&&(n=n.lastEffect,null!==n))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag;void 0!==o&&(0!==(2&a)||0!==(4&a))&&Cl(r,t,o);i=i.next}while(i!==n)}Vl(e,t,r);break;case 1:if(!Sl&&(kl(r,t),n=r.stateNode,"function"===typeof n.componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(e){Ju(r,t,e)}Vl(e,t,r);break;case 21:Vl(e,t,r);break;case 22:1&r.mode?(Sl=(n=Sl)||null!==r.memoizedState,Vl(e,t,r),Sl=n):Vl(e,t,r);break;default:Vl(e,t,r)}}function Wl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Pl);t.forEach((function(t){var n=rc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function Gl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:Nl=l.stateNode;Fl=!1;break e;case 3:Nl=l.stateNode.containerInfo;Fl=!0;break e;case 4:Nl=l.stateNode.containerInfo;Fl=!0;break e}l=l.return}if(null===Nl)throw Error(a(160));Bl(o,s,i);Nl=null;Fl=!1;var u=i.alternate;null!==u&&(u.return=null);i.return=null}catch(e){Ju(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ql(t,e),t=t.sibling}function ql(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Gl(t,e);Ul(e);if(4&n){try{Tl(3,e,e.return),jl(3,e)}catch(t){Ju(e,e.return,t)}try{Tl(5,e,e.return)}catch(t){Ju(e,e.return,t)}}break;case 1:Gl(t,e);Ul(e);512&n&&null!==r&&kl(r,r.return);break;case 5:Gl(t,e);Ul(e);512&n&&null!==r&&kl(r,r.return);if(32&e.flags){var i=e.stateNode;try{he(i,"")}catch(t){Ju(e,e.return,t)}}if(4&n&&(i=e.stateNode,null!=i)){var o=e.memoizedProps,s=null!==r?r.memoizedProps:o,l=e.type,u=e.updateQueue;e.updateQueue=null;if(null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&te(i,o);Se(l,s);var c=Se(l,o);for(s=0;s<u.length;s+=2){var d=u[s],f=u[s+1];"style"===d?be(i,f):"dangerouslySetInnerHTML"===d?ge(i,f):"children"===d?he(i,f):S(i,d,f,c)}switch(l){case"input":re(i,o);break;case"textarea":ue(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;null!=g?oe(i,!!o.multiple,g,!1):p!==!!o.multiple&&(null!=o.defaultValue?oe(i,!!o.multiple,o.defaultValue,!0):oe(i,!!o.multiple,o.multiple?[]:"",!1))}i[Mi]=o}catch(t){Ju(e,e.return,t)}}break;case 6:Gl(t,e);Ul(e);if(4&n){if(null===e.stateNode)throw Error(a(162));i=e.stateNode;o=e.memoizedProps;try{i.nodeValue=o}catch(t){Ju(e,e.return,t)}}break;case 3:Gl(t,e);Ul(e);if(4&n&&null!==r&&r.memoizedState.isDehydrated)try{Jt(t.containerInfo)}catch(t){Ju(e,e.return,t)}break;case 4:Gl(t,e);Ul(e);break;case 13:Gl(t,e);Ul(e);i=e.child;8192&i.flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(pu=rt()));4&n&&Wl(e);break;case 22:d=null!==r&&null!==r.memoizedState;1&e.mode?(Sl=(c=Sl)||d,Gl(t,e),Sl=c):Gl(t,e);Ul(e);if(8192&n){c=null!==e.memoizedState;if((e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(El=e,d=e.child;null!==d;){for(f=El=d;null!==El;){p=El;g=p.child;switch(p.tag){case 0:case 11:case 14:case 15:Tl(4,p,p.return);break;case 1:kl(p,p.return);var h=p.stateNode;if("function"===typeof h.componentWillUnmount){n=p;r=p.return;try{t=n,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(e){Ju(n,r,e)}}break;case 5:kl(p,p.return);break;case 22:if(null!==p.memoizedState){Kl(f);continue}}null!==g?(g.return=p,El=g):Kl(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{i=f.stateNode,c?(o=i.style,"function"===typeof o.setProperty?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,u=f.memoizedProps.style,s=void 0!==u&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ye("display",s))}catch(t){Ju(e,e.return,t)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(t){Ju(e,e.return,t)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f;f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null);f=f.return}d===f&&(d=null);f.sibling.return=f.return;f=f.sibling}}break;case 19:Gl(t,e);Ul(e);4&n&&Wl(e);break;case 21:break;default:Gl(t,e),Ul(e)}}function Ul(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(Rl(r)){var n=r;break e}r=r.return}throw Error(a(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(he(i,""),n.flags&=-33);var o=Il(e);xl(e,o,i);break;case 3:case 4:var s=n.stateNode.containerInfo,l=Il(e);Ml(e,l,s);break;default:throw Error(a(161))}}catch(t){Ju(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Hl(e,t,r){El=e;zl(e,t,r)}function zl(e,t,r){for(var n=0!==(1&e.mode);null!==El;){var i=El,a=i.child;if(22===i.tag&&n){var o=null!==i.memoizedState||_l;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Sl;s=_l;var u=Sl;_l=o;if((Sl=l)&&!u)for(El=i;null!==El;)o=El,l=o.child,22===o.tag&&null!==o.memoizedState?Zl(i):null!==l?(l.return=o,El=l):Zl(i);for(;null!==a;)El=a,zl(a,t,r),a=a.sibling;El=i;_l=s;Sl=u}$l(e,t,r)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,El=a):$l(e,t,r)}}function $l(e){for(;null!==El;){var t=El;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Sl||jl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Sl)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Va(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&so(t,o,n);break;case 3:var s=t.updateQueue;if(null!==s){r=null;if(null!==t.child)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}so(t,s,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Jt(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}Sl||512&t.flags&&Dl(t)}catch(e){Ju(t,t.return,e)}}if(t===e){El=null;break}r=t.sibling;if(null!==r){r.return=t.return;El=r;break}El=t.return}}function Kl(e){for(;null!==El;){var t=El;if(t===e){El=null;break}var r=t.sibling;if(null!==r){r.return=t.return;El=r;break}El=t.return}}function Zl(e){for(;null!==El;){var t=El;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{jl(4,t)}catch(e){Ju(t,r,e)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(e){Ju(t,i,e)}}var a=t.return;try{Dl(t)}catch(e){Ju(t,a,e)}break;case 5:var o=t.return;try{Dl(t)}catch(e){Ju(t,o,e)}}}catch(e){Ju(t,t.return,e)}if(t===e){El=null;break}var s=t.sibling;if(null!==s){s.return=t.return;El=s;break}El=t.return}}var Yl=Math.ceil,Xl=P.ReactCurrentDispatcher,Jl=P.ReactCurrentOwner,Ql=P.ReactCurrentBatchConfig,eu=0,tu=null,ru=null,nu=0,iu=0,au=zi(0),ou=0,su=null,lu=0,uu=0,cu=0,du=null,fu=null,pu=0,gu=Infinity,hu=null,vu=!1,mu=null,yu=null,bu=!1,wu=null,_u=0,Su=0,Pu=null,Eu=-1,ku=0;function Cu(){return 0!==(6&eu)?rt():-1!==Eu?Eu:Eu=rt()}function Ou(e){if(0===(1&e.mode))return 1;if(0!==(2&eu)&&0!==nu)return nu&-nu;if(null!==Fa.transition)return 0===ku&&(ku=Pt()),ku;e=At;if(0!==e)return e;e=window.event;e=void 0===e?16:or(e.type);return e}function Au(e,t,r,n){if(50<Su)throw Su=0,Pu=null,Error(a(185));kt(e,r,n);0!==(2&eu)&&e===tu||(e===tu&&(0===(2&eu)&&(uu|=r),4===ou&&Iu(e,nu)),Tu(e,n),1===r&&0===eu&&0===(1&t.mode)&&(gu=rt()+500,sa&&da()))}function Tu(e,t){var r=e.callbackNode;_t(e,t);var n=bt(e,e===tu?nu:0);if(0===n)null!==r&&Qe(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){null!=r&&Qe(r);if(1===t)0===e.tag?ca(Mu.bind(null,e)):ua(Mu.bind(null,e)),Ai((function(){0===(6&eu)&&da()})),r=null;else{switch(Tt(n)){case 1:r=it;break;case 4:r=at;break;case 16:r=ot;break;case 536870912:r=lt;break;default:r=ot}r=ic(r,ju.bind(null,e))}e.callbackPriority=t;e.callbackNode=r}}function ju(e,t){Eu=-1;ku=0;if(0!==(6&eu))throw Error(a(327));var r=e.callbackNode;if(Yu()&&e.callbackNode!==r)return null;var n=bt(e,e===tu?nu:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=qu(e,n);else{t=n;var i=eu;eu|=2;var o=Wu();tu===e&&nu===t||(hu=null,gu=rt()+500,Vu(e,t));do{try{Hu();break}catch(t){Bu(e,t)}}while(1);Ua();Xl.current=o;eu=i;null!==ru?t=0:(tu=null,nu=0,t=ou)}if(0!==t){2===t&&(i=St(e),0!==i&&(n=i,t=Du(e,i)));if(1===t)throw r=su,Vu(e,0),Iu(e,n),Tu(e,rt()),r;if(6===t)Iu(e,n);else{i=e.current.alternate;if(0===(30&n)&&!Ru(i)&&(t=qu(e,n),2===t&&(o=St(e),0!==o&&(n=o,t=Du(e,o))),1===t))throw r=su,Vu(e,0),Iu(e,n),Tu(e,rt()),r;e.finishedWork=i;e.finishedLanes=n;switch(t){case 0:case 1:throw Error(a(345));case 2:Ku(e,fu,hu);break;case 3:Iu(e,n);if((130023424&n)===n&&(t=pu+500-rt(),10<t)){if(0!==bt(e,0))break;i=e.suspendedLanes;if((i&n)!==n){Cu();e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ki(Ku.bind(null,e,fu,hu),t);break}Ku(e,fu,hu);break;case 4:Iu(e,n);if((4194240&n)===n)break;t=e.eventTimes;for(i=-1;0<n;){var s=31-ft(n);o=1<<s;s=t[s];s>i&&(i=s);n&=~o}n=i;n=rt()-n;n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Yl(n/1960))-n;if(10<n){e.timeoutHandle=ki(Ku.bind(null,e,fu,hu),n);break}Ku(e,fu,hu);break;case 5:Ku(e,fu,hu);break;default:throw Error(a(329))}}}Tu(e,rt());return e.callbackNode===r?ju.bind(null,e):null}function Du(e,t){var r=du;e.current.memoizedState.isDehydrated&&(Vu(e,t).flags|=256);e=qu(e,t);2!==e&&(t=fu,fu=r,null!==t&&Lu(t));return e}function Lu(e){null===fu?fu=e:fu.push.apply(fu,e)}function Ru(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&(r=r.stores,null!==r))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!On(a(),i))return!1}catch(e){return!1}}}r=t.child;if(16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return;t=t.sibling}}return!0}function Iu(e,t){t&=~cu;t&=~uu;e.suspendedLanes|=t;e.pingedLanes&=~t;for(e=e.expirationTimes;0<t;){var r=31-ft(t),n=1<<r;e[r]=-1;t&=~n}}function Mu(e){if(0!==(6&eu))throw Error(a(327));Yu();var t=bt(e,0);if(0===(1&t))return Tu(e,rt()),null;var r=qu(e,t);if(0!==e.tag&&2===r){var n=St(e);0!==n&&(t=n,r=Du(e,n))}if(1===r)throw r=su,Vu(e,0),Iu(e,t),Tu(e,rt()),r;if(6===r)throw Error(a(345));e.finishedWork=e.current.alternate;e.finishedLanes=t;Ku(e,fu,hu);Tu(e,rt());return null}function xu(e,t){var r=eu;eu|=1;try{return e(t)}finally{eu=r,0===eu&&(gu=rt()+500,sa&&da())}}function Nu(e){null!==wu&&0===wu.tag&&0===(6&eu)&&Yu();var t=eu;eu|=1;var r=Ql.transition,n=At;try{if(Ql.transition=null,At=1,e)return e()}finally{At=n,Ql.transition=r,eu=t,0===(6&eu)&&da()}}function Fu(){iu=au.current;$i(au)}function Vu(e,t){e.finishedWork=null;e.finishedLanes=0;var r=e.timeoutHandle;-1!==r&&(e.timeoutHandle=-1,Ci(r));if(null!==ru)for(r=ru.return;null!==r;){var n=r;Ea(n);switch(n.tag){case 1:n=n.type.childContextTypes;null!==n&&void 0!==n&&ta();break;case 3:Ao();$i(Xi);$i(Yi);Io();break;case 5:jo(n);break;case 4:Ao();break;case 13:$i(Do);break;case 19:$i(Do);break;case 10:Ha(n.type._context);break;case 22:case 23:Fu()}r=r.return}tu=e;ru=e=uc(e.current,null);nu=iu=t;ou=0;su=null;cu=uu=lu=0;fu=du=null;if(null!==Za){for(t=0;t<Za.length;t++)if(r=Za[t],n=r.interleaved,null!==n){r.interleaved=null;var i=n.next,a=r.pending;if(null!==a){var o=a.next;a.next=i;n.next=o}r.pending=n}Za=null}return e}function Bu(e,t){do{var r=ru;try{Ua();Mo.current=Ts;if(Wo){for(var n=Fo.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null);n=n.next}Wo=!1}No=0;Bo=Vo=Fo=null;Go=!1;qo=0;Jl.current=null;if(null===r||null===r.return){ou=1;su=t;ru=null;break}e:{var o=e,s=r.return,l=r,u=t;t=nu;l.flags|=32768;if(null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Bs(s);if(null!==g){g.flags&=-257;Ws(g,s,l,o,t);1&g.mode&&Vs(o,c,t);t=g;u=c;var h=t.updateQueue;if(null===h){var v=new Set;v.add(u);t.updateQueue=v}else h.add(u);break e}if(0===(1&t)){Vs(o,c,t);Gu();break e}u=Error(a(426))}else if(Oa&&1&l.mode){var m=Bs(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256);Ws(m,s,l,o,t);Na(Rs(u,l));break e}}o=u=Rs(u,l);4!==ou&&(ou=2);null===du?du=[o]:du.push(o);o=s;do{switch(o.tag){case 3:o.flags|=65536;t&=-t;o.lanes|=t;var y=Ns(o,u,t);ao(o,y);break e;case 1:l=u;var b=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof b.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===yu||!yu.has(w)))){o.flags|=65536;t&=-t;o.lanes|=t;var _=Fs(o,l,t);ao(o,_);break e}}o=o.return}while(null!==o)}$u(r)}catch(e){t=e;ru===r&&null!==r&&(ru=r=r.return);continue}break}while(1)}function Wu(){var e=Xl.current;Xl.current=Ts;return null===e?Ts:e}function Gu(){0!==ou&&3!==ou&&2!==ou||(ou=4);null===tu||0===(268435455&lu)&&0===(268435455&uu)||Iu(tu,nu)}function qu(e,t){var r=eu;eu|=2;var n=Wu();tu===e&&nu===t||(hu=null,Vu(e,t));do{try{Uu();break}catch(t){Bu(e,t)}}while(1);Ua();eu=r;Xl.current=n;if(null!==ru)throw Error(a(261));tu=null;nu=0;return ou}function Uu(){for(;null!==ru;)zu(ru)}function Hu(){for(;null!==ru&&!et();)zu(ru)}function zu(e){var t=nc(e.alternate,e,iu);e.memoizedProps=e.pendingProps;null===t?$u(e):ru=t;Jl.current=null}function $u(e){var t=e;do{var r=t.alternate;e=t.return;if(0===(32768&t.flags)){if(r=bl(r,t,iu),null!==r){ru=r;return}}else{r=wl(r,t);if(null!==r){r.flags&=32767;ru=r;return}if(null===e){ou=6;ru=null;return}e.flags|=32768,e.subtreeFlags=0,e.deletions=null}t=t.sibling;if(null!==t){ru=t;return}ru=t=e}while(null!==t);0===ou&&(ou=5)}function Ku(e,t,r){var n=At,i=Ql.transition;try{Ql.transition=null,At=1,Zu(e,t,r,n)}finally{Ql.transition=i,At=n}return null}function Zu(e,t,r,n){do{Yu()}while(null!==wu);if(0!==(6&eu))throw Error(a(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;e.finishedWork=null;e.finishedLanes=0;if(r===e.current)throw Error(a(177));e.callbackNode=null;e.callbackPriority=0;var o=r.lanes|r.childLanes;Ct(e,o);e===tu&&(ru=tu=null,nu=0);0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||bu||(bu=!0,ic(ot,(function(){Yu();return null})));o=0!==(15990&r.flags);if(0!==(15990&r.subtreeFlags)||o){o=Ql.transition;Ql.transition=null;var s=At;At=1;var l=eu;eu|=4;Jl.current=null;Al(e,r);ql(r,e);In(Pi);er=!!Si;Pi=Si=null;e.current=r;Hl(r,e,i);tt();eu=l;At=s;Ql.transition=o}else e.current=r;bu&&(bu=!1,wu=e,_u=i);o=e.pendingLanes;0===o&&(yu=null);dt(r.stateNode,n);Tu(e,rt());if(null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(vu)throw vu=!1,e=mu,mu=null,e;0!==(1&_u)&&0!==e.tag&&Yu();o=e.pendingLanes;0!==(1&o)?e===Pu?Su++:(Su=0,Pu=e):Su=0;da();return null}function Yu(){if(null!==wu){var e=Tt(_u),t=Ql.transition,r=At;try{Ql.transition=null;At=16>e?16:e;if(null===wu)var n=!1;else{e=wu;wu=null;_u=0;if(0!==(6&eu))throw Error(a(331));var i=eu;eu|=4;for(El=e.current;null!==El;){var o=El,s=o.child;if(0!==(16&El.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(El=c;null!==El;){var d=El;switch(d.tag){case 0:case 11:case 15:Tl(8,d,o)}var f=d.child;if(null!==f)f.return=d,El=f;else for(;null!==El;){d=El;var p=d.sibling,g=d.return;Ll(d);if(d===c){El=null;break}if(null!==p){p.return=g;El=p;break}El=g}}}var h=o.alternate;if(null!==h){var v=h.child;if(null!==v){h.child=null;do{var m=v.sibling;v.sibling=null;v=m}while(null!==v)}}El=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,El=s;else e:for(;null!==El;){o=El;if(0!==(2048&o.flags))switch(o.tag){case 0:case 11:case 15:Tl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return;El=y;break e}El=o.return}}var b=e.current;for(El=b;null!==El;){s=El;var w=s.child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,El=w;else e:for(s=b;null!==El;){l=El;if(0!==(2048&l.flags))try{switch(l.tag){case 0:case 11:case 15:jl(9,l)}}catch(e){Ju(l,l.return,e)}if(l===s){El=null;break e}var _=l.sibling;if(null!==_){_.return=l.return;El=_;break e}El=l.return}}eu=i;da();if(ct&&"function"===typeof ct.onPostCommitFiberRoot)try{ct.onPostCommitFiberRoot(ut,e)}catch(e){}n=!0}return n}finally{At=r,Ql.transition=t}}return!1}function Xu(e,t,r){t=Rs(r,t);t=Ns(e,t,1);e=no(e,t,1);t=Cu();null!==e&&(kt(e,1,t),Tu(e,t))}function Ju(e,t,r){if(3===e.tag)Xu(e,e,r);else for(;null!==t;){if(3===t.tag){Xu(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===yu||!yu.has(n))){e=Rs(r,e);e=Fs(t,e,1);t=no(t,e,1);e=Cu();null!==t&&(kt(t,1,e),Tu(t,e));break}}t=t.return}}function Qu(e,t,r){var n=e.pingCache;null!==n&&n.delete(t);t=Cu();e.pingedLanes|=e.suspendedLanes&r;tu===e&&(nu&r)===r&&(4===ou||3===ou&&(130023424&nu)===nu&&500>rt()-pu?Vu(e,0):cu|=r);Tu(e,t)}function ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=mt,mt<<=1,0===(130023424&mt)&&(mt=4194304)));var r=Cu();e=Ja(e,t);null!==e&&(kt(e,t,r),Tu(e,r))}function tc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane);ec(e,r)}function rc(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode;var i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(a(314))}null!==n&&n.delete(t);ec(e,r)}var nc;nc=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Xi.current)qs=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return qs=!1,fl(e,t,r);qs=0!==(131072&e.flags)}else qs=!1,Oa&&0!==(1048576&t.flags)&&Sa(t,ha,t.index);t.lanes=0;switch(t.tag){case 2:var n=t.type;cl(e,t);e=t.pendingProps;var i=Qi(t,Yi.current);$a(t,r);i=$o(null,t,n,e,i,r);var o=Ko();t.flags|=1;"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ea(n)?(o=!0,ia(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,eo(t),i.updater=co,t.stateNode=i,i._reactInternals=t,ho(t,n,e,r),t=Js(null,t,n,!0,o,r)):(t.tag=0,Oa&&o&&Pa(t),Us(null,t,i,r),t=t.child);return t;case 16:n=t.elementType;e:{cl(e,t);e=t.pendingProps;i=n._init;n=i(n._payload);t.type=n;i=t.tag=lc(n);e=Va(n,e);switch(i){case 0:t=Ys(null,t,n,e,r);break e;case 1:t=Xs(null,t,n,e,r);break e;case 11:t=Hs(null,t,n,e,r);break e;case 14:t=zs(null,t,n,Va(n.type,e),r);break e}throw Error(a(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Va(n,i),Ys(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Va(n,i),Xs(e,t,n,i,r);case 3:e:{Qs(t);if(null===e)throw Error(a(387));n=t.pendingProps;o=t.memoizedState;i=o.element;to(e,t);oo(t,n,null,r);var s=t.memoizedState;n=s.element;if(o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){i=Rs(Error(a(423)),t);t=el(e,t,n,r,i);break e}if(n!==i){i=Rs(Error(a(424)),t);t=el(e,t,n,r,i);break e}for(Ca=Di(t.stateNode.containerInfo.firstChild),ka=t,Oa=!0,Aa=null,r=_o(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{xa();if(n===i){t=dl(e,t,r);break e}Us(e,t,n,r)}t=t.child}return t;case 5:return To(t),null===e&&La(t),n=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Ei(n,i)?s=null:null!==o&&Ei(n,o)&&(t.flags|=32),Zs(e,t),Us(e,t,s,r),t.child;case 6:return null===e&&La(t),null;case 13:return nl(e,t,r);case 4:return Oo(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=wo(t,null,n,r):Us(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Va(n,i),Hs(e,t,n,i,r);case 7:return Us(e,t,t.pendingProps,r),t.child;case 8:return Us(e,t,t.pendingProps.children,r),t.child;case 12:return Us(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context;i=t.pendingProps;o=t.memoizedProps;s=i.value;Ki(Ba,n._currentValue);n._currentValue=s;if(null!==o)if(On(o.value,s)){if(o.children===i.children&&!Xi.current){t=dl(e,t,r);break e}}else for(o=t.child,null!==o&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===n){if(1===o.tag){u=ro(-1,r&-r);u.tag=2;var c=o.updateQueue;if(null!==c){c=c.shared;var d=c.pending;null===d?u.next=u:(u.next=d.next,d.next=u);c.pending=u}}o.lanes|=r;u=o.alternate;null!==u&&(u.lanes|=r);za(o.return,r,t);l.lanes|=r;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){s=o.return;if(null===s)throw Error(a(341));s.lanes|=r;l=s.alternate;null!==l&&(l.lanes|=r);za(s,r,t);s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}o=s.sibling;if(null!==o){o.return=s.return;s=o;break}s=s.return}o=s}Us(e,t,i.children,r);t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,$a(t,r),i=Ka(i),n=n(i),t.flags|=1,Us(e,t,n,r),t.child;case 14:return n=t.type,i=Va(n,t.pendingProps),i=Va(n.type,i),zs(e,t,n,i,r);case 15:return $s(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Va(n,i),cl(e,t),t.tag=1,ea(n)?(e=!0,ia(t)):e=!1,$a(t,r),po(t,n,i),ho(t,n,i,r),Js(null,t,n,!0,e,r);case 19:return ul(e,t,r);case 22:return Ks(e,t,r)}throw Error(a(156,t.tag))};function ic(e,t){return Je(e,t)}function ac(e,t,r,n){this.tag=e;this.key=r;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=t;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=n;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function oc(e,t,r,n){return new ac(e,t,r,n)}function sc(e){e=e.prototype;return!(!e||!e.isReactComponent)}function lc(e){if("function"===typeof e)return sc(e)?1:0;if(void 0!==e&&null!==e){e=e.$$typeof;if(e===D)return 11;if(e===I)return 14}return 2}function uc(e,t){var r=e.alternate;null===r?(r=oc(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null);r.flags=14680064&e.flags;r.childLanes=e.childLanes;r.lanes=e.lanes;r.child=e.child;r.memoizedProps=e.memoizedProps;r.memoizedState=e.memoizedState;r.updateQueue=e.updateQueue;t=e.dependencies;r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext};r.sibling=e.sibling;r.index=e.index;r.ref=e.ref;return r}function cc(e,t,r,n,i,o){var s=2;n=e;if("function"===typeof e)sc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case C:return dc(r.children,i,o,t);case O:s=8;i|=8;break;case A:return e=oc(12,r,t,2|i),e.elementType=A,e.lanes=o,e;case L:return e=oc(13,r,t,i),e.elementType=L,e.lanes=o,e;case R:return e=oc(19,r,t,i),e.elementType=R,e.lanes=o,e;case x:return fc(r,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case j:s=9;break e;case D:s=11;break e;case I:s=14;break e;case M:s=16;n=null;break e}throw Error(a(130,null==e?e:typeof e,""))}t=oc(s,r,t,i);t.elementType=e;t.type=n;t.lanes=o;return t}function dc(e,t,r,n){e=oc(7,e,n,t);e.lanes=r;return e}function fc(e,t,r,n){e=oc(22,e,n,t);e.elementType=x;e.lanes=r;e.stateNode={isHidden:!1};return e}function pc(e,t,r){e=oc(6,e,null,t);e.lanes=r;return e}function gc(e,t,r){t=oc(4,null!==e.children?e.children:[],e.key,t);t.lanes=r;t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation};return t}function hc(e,t,r,n,i){this.tag=t;this.containerInfo=e;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=0;this.eventTimes=Et(0);this.expirationTimes=Et(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=Et(0);this.identifierPrefix=n;this.onRecoverableError=i;this.mutableSourceEagerHydrationData=null}function vc(e,t,r,n,i,a,o,s,l){e=new hc(e,t,r,s,l);1===t?(t=1,!0===a&&(t|=8)):t=0;a=oc(3,null,null,t);e.current=a;a.stateNode=e;a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null};eo(a);return e}function mc(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function yc(e){if(!e)return Zi;e=e._reactInternals;e:{if(ze(e)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ea(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var r=e.type;if(ea(r))return na(e,r,t)}return t}function bc(e,t,r,n,i,a,o,s,l){e=vc(r,n,!0,e,i,a,o,s,l);e.context=yc(null);r=e.current;n=Cu();i=Ou(r);a=ro(n,i);a.callback=void 0!==t&&null!==t?t:null;no(r,a,i);e.current.lanes=i;kt(e,i,n);Tu(e,n);return e}function wc(e,t,r,n){var i=t.current,a=Cu(),o=Ou(i);r=yc(r);null===t.context?t.context=r:t.pendingContext=r;t=ro(a,o);t.payload={element:e};n=void 0===n?null:n;null!==n&&(t.callback=n);e=no(i,t,o);null!==e&&(Au(e,i,o,a),io(e,i,o));return o}function _c(e){e=e.current;if(!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sc(e,t){e=e.memoizedState;if(null!==e&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Pc(e,t){Sc(e,t);(e=e.alternate)&&Sc(e,t)}function Ec(){return null}var kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Cc(e){this._internalRoot=e}Oc.prototype.render=Cc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));wc(e,t,null,null)};Oc.prototype.unmount=Cc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Nu((function(){wc(null,e,null,null)}));t[xi]=null}};function Oc(e){this._internalRoot=e}Oc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Rt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Gt.length&&0!==t&&t<Gt[r].priority;r++);Gt.splice(r,0,e);0===r&&$t(e)}};function Ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Tc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function jc(){}function Dc(e,t,r,n,i){if(i){if("function"===typeof n){var a=n;n=function(){var e=_c(o);a.call(e)}}var o=bc(t,n,e,0,null,!1,!1,"",jc);e._reactRootContainer=o;e[xi]=o.current;ci(8===e.nodeType?e.parentNode:e);Nu();return o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof n){var s=n;n=function(){var e=_c(l);s.call(e)}}var l=vc(e,0,!1,null,null,!1,!1,"",jc);e._reactRootContainer=l;e[xi]=l.current;ci(8===e.nodeType?e.parentNode:e);Nu((function(){wc(t,l,r,n)}));return l}function Lc(e,t,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=_c(o);s.call(e)}}wc(t,o,e,i)}else o=Dc(r,t,e,i,n);return _c(o)}jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=yt(t.pendingLanes);0!==r&&(Ot(t,1|r),Tu(t,rt()),0===(6&eu)&&(gu=rt()+500,da()))}break;case 13:Nu((function(){var t=Ja(e,1);if(null!==t){var r=Cu();Au(t,e,1,r)}})),Pc(e,1)}};Dt=function(e){if(13===e.tag){var t=Ja(e,134217728);if(null!==t){var r=Cu();Au(t,e,134217728,r)}Pc(e,134217728)}};Lt=function(e){if(13===e.tag){var t=Ou(e),r=Ja(e,t);if(null!==r){var n=Cu();Au(r,e,t,n)}Pc(e,t)}};Rt=function(){return At};It=function(e,t){var r=At;try{return At=e,t()}finally{At=r}};ke=function(e,t,r){switch(t){case"input":re(e,r);t=r.name;if("radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]');for(t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=qi(n);if(!i)throw Error(a(90));X(n);re(n,i)}}}break;case"textarea":ue(e,r);break;case"select":t=r.value,null!=t&&oe(e,!!r.multiple,t,!1)}};De=xu;Le=Nu;var Rc={usingClientEntryPoint:!1,Events:[Wi,Gi,qi,Te,je,xu]},Ic={findFiberByHostInstance:Bi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"};var Mc={bundleType:Ic.bundleType,version:Ic.version,rendererPackageName:Ic.rendererPackageName,rendererConfig:Ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){e=Ye(e);return null===e?null:e.stateNode},findFiberByHostInstance:Ic.findFiberByHostInstance||Ec,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xc.isDisabled&&xc.supportsFiber)try{ut=xc.inject(Mc),ct=xc}catch(e){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rc;t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ac(t))throw Error(a(200));return mc(e,t,null,r)};t.createRoot=function(e,t){if(!Ac(e))throw Error(a(299));var r=!1,n="",i=kc;null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError));t=vc(e,1,!1,null,null,r,!1,n,i);e[xi]=t.current;ci(8===e.nodeType?e.parentNode:e);return new Cc(t)};t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));e=Object.keys(e).join(",");throw Error(a(268,e))}e=Ye(t);e=null===e?null:e.stateNode;return e};t.flushSync=function(e){return Nu(e)};t.hydrate=function(e,t,r){if(!Tc(t))throw Error(a(200));return Lc(null,e,t,!0,r)};t.hydrateRoot=function(e,t,r){if(!Ac(e))throw Error(a(405));var n=null!=r&&r.hydratedSources||null,i=!1,o="",s=kc;null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(o=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError));t=bc(t,null,e,1,null!=r?r:null,i,!1,o,s);e[xi]=t.current;ci(e);if(n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Oc(t)};t.render=function(e,t,r){if(!Tc(t))throw Error(a(200));return Lc(null,e,t,!1,r)};t.unmountComponentAtNode=function(e){if(!Tc(e))throw Error(a(40));return!!e._reactRootContainer&&(Nu((function(){Lc(null,null,e,!1,(function(){e._reactRootContainer=null;e[xi]=null}))})),!0)};t.unstable_batchedUpdates=xu;t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Tc(r))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Lc(e,t,r,!1,n)};t.version="18.2.0-next-9e3b772b8-20220608"},55269:(e,t,r)=>{"use strict";function n(){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__||"function"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)return;false;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}true;n();e.exports=r(79582)},16618:(e,t)=>{"use strict";var r="function"===typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,c=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.suspense_list"):60120,h=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,m=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type,e){case c:case d:case a:case s:case o:case p:return e;default:switch(e=e&&e.$$typeof,e){case u:case f:case v:case h:case l:return e;default:return t}}case i:return t}}}function S(e){return _(e)===d}t.AsyncMode=c;t.ConcurrentMode=d;t.ContextConsumer=u;t.ContextProvider=l;t.Element=n;t.ForwardRef=f;t.Fragment=a;t.Lazy=v;t.Memo=h;t.Portal=i;t.Profiler=s;t.StrictMode=o;t.Suspense=p;t.isAsyncMode=function(e){return S(e)||_(e)===c};t.isConcurrentMode=S;t.isContextConsumer=function(e){return _(e)===u};t.isContextProvider=function(e){return _(e)===l};t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n};t.isForwardRef=function(e){return _(e)===f};t.isFragment=function(e){return _(e)===a};t.isLazy=function(e){return _(e)===v};t.isMemo=function(e){return _(e)===h};t.isPortal=function(e){return _(e)===i};t.isProfiler=function(e){return _(e)===s};t.isStrictMode=function(e){return _(e)===o};t.isSuspense=function(e){return _(e)===p};t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===d||e===s||e===o||e===p||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===h||e.$$typeof===l||e.$$typeof===u||e.$$typeof===f||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===m)};t.typeOf=_},95001:(e,t,r)=>{"use strict";true;e.exports=r(16618)},54833:(e,t,r)=>{"use strict";r.r(t);r.d(t,{Provider:()=>ce,ReactReduxContext:()=>g,batch:()=>a.unstable_batchedUpdates,connect:()=>le,createDispatchHook:()=>pe,createSelectorHook:()=>S,createStoreHook:()=>de,shallowEqual:()=>K,useDispatch:()=>ge,useSelector:()=>P,useStore:()=>fe});var n=r(12556);var i=r(5034);var a=r(55269);function o(e){e()}let s=o;const l=e=>s=e;const u=()=>s;var c=r(79440);const d=Symbol.for("react-redux-context");const f="undefined"!==typeof globalThis?globalThis:{};function p(){var e;if(!c.createContext)return{};const t=null!=(e=f[d])?e:f[d]=new Map;let r=t.get(c.createContext);if(!r){r=c.createContext(null);false;t.set(c.createContext,r)}return r}const g=p();const h=null;function v(e=g){return function t(){const r=(0,c.useContext)(e);false;return r}}const m=v();const y=()=>{throw new Error("uSES not initialized!")};let b=y;const w=e=>{b=e};const _=(e,t)=>e===t;function S(e=g){const t=e===g?m:v(e);return function e(r,n={}){const{equalityFn:i=_,stabilityCheck:a,noopCheck:o}="function"===typeof n?{equalityFn:n}:n;false;const{store:s,subscription:l,getServerState:u,stabilityCheck:d,noopCheck:f}=t();const p=(0,c.useRef)(true);const g=(0,c.useCallback)({[r.name](e){const t=r(e);false;return t}}[r.name],[r,d,a]);const h=b(l.addNestedSub,s.getState,u||s.getState,g,i);(0,c.useDebugValue)(h);return h}}const P=S();function E(){E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return E.apply(this,arguments)}function k(e,t){if(null==e)return{};var r={};var n=Object.keys(e);var i,a;for(a=0;a<n.length;a++){i=n[a];if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}var C=r(87625);var O=r.n(C);var A=r(21013);const T=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function j(e,t,r,n,{areStatesEqual:i,areOwnPropsEqual:a,areStatePropsEqual:o}){let s=false;let l;let u;let c;let d;let f;function p(i,a){l=i;u=a;c=e(l,u);d=t(n,u);f=r(c,d,u);s=true;return f}function g(){c=e(l,u);t.dependsOnOwnProps&&(d=t(n,u));f=r(c,d,u);return f}function h(){e.dependsOnOwnProps&&(c=e(l,u));t.dependsOnOwnProps&&(d=t(n,u));f=r(c,d,u);return f}function v(){const t=e(l,u);const n=!o(t,c);c=t;n&&(f=r(c,d,u));return f}function m(e,t){const r=!a(t,u);const n=!i(e,l,t,u);l=e;u=t;if(r&&n)return g();if(r)return h();if(n)return v();return f}return function e(t,r){return s?m(t,r):p(t,r)}}function D(e,t){let{initMapStateToProps:r,initMapDispatchToProps:n,initMergeProps:i}=t,a=k(t,T);const o=r(e,a);const s=n(e,a);const l=i(e,a);false;return j(o,s,l,e,a)}function L(e,t){const r={};for(const n in e){const i=e[n];"function"===typeof i&&(r[n]=(...e)=>t(i(...e)))}return r}function R(e){return function t(r){const n=e(r);function i(){return n}i.dependsOnOwnProps=false;return i}}function I(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function M(e,t){return function t(r,{displayName:n}){const i=function e(t,r){return i.dependsOnOwnProps?i.mapToProps(t,r):i.mapToProps(t,void 0)};i.dependsOnOwnProps=true;i.mapToProps=function t(r,n){i.mapToProps=e;i.dependsOnOwnProps=I(e);let a=i(r,n);if("function"===typeof a){i.mapToProps=a;i.dependsOnOwnProps=I(a);a=i(r,n)}false;return a};return i}}function x(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function N(e){return e&&"object"===typeof e?R((t=>L(e,t))):e?"function"===typeof e?M(e,"mapDispatchToProps"):x(e,"mapDispatchToProps"):R((e=>({dispatch:e})))}function F(e){return e?"function"===typeof e?M(e,"mapStateToProps"):x(e,"mapStateToProps"):R((()=>({})))}function V(e,t,r){return E({},r,e,t)}function B(e){return function t(r,{displayName:n,areMergedPropsEqual:i}){let a=false;let o;return function t(r,n,s){const l=e(r,n,s);if(a)i(l,o)||(o=l);else{a=true;o=l;false}return o}}}function W(e){return e?"function"===typeof e?B(e):x(e,"mergeProps"):()=>V}function G(){const e=u();let t=null;let r=null;return{clear(){t=null;r=null},notify(){e((()=>{let e=t;while(e){e.callback();e=e.next}}))},get(){let e=[];let r=t;while(r){e.push(r);r=r.next}return e},subscribe(e){let n=true;let i=r={callback:e,next:null,prev:r};i.prev?i.prev.next=i:t=i;return function e(){if(!n||null===t)return;n=false;i.next?i.next.prev=i.prev:r=i.prev;i.prev?i.prev.next=i.next:t=i.next}}}}const q={notify(){},get:()=>[]};function U(e,t){let r;let n=q;let i=0;let a=false;function o(e){c();const t=n.subscribe(e);let r=false;return()=>{if(!r){r=true;t();d()}}}function s(){n.notify()}function l(){g.onStateChange&&g.onStateChange()}function u(){return a}function c(){i++;if(!r){r=t?t.addNestedSub(l):e.subscribe(l);n=G()}}function d(){i--;if(r&&0===i){r();r=void 0;n.clear();n=q}}function f(){if(!a){a=true;c()}}function p(){if(a){a=false;d()}}const g={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:l,isSubscribed:u,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>n};return g}const H=!!("undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement);const z=H?c.useLayoutEffect:c.useEffect;function $(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function K(e,t){if($(e,t))return true;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return false;const r=Object.keys(e);const n=Object.keys(t);if(r.length!==n.length)return false;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!$(e[r[n]],t[r[n]]))return false;return true}const Z=["reactReduxForwardedRef"];let Y=y;const X=e=>{Y=e};const J=null;const Q=[null,null];const ee=e=>{try{return JSON.stringify(e)}catch(t){return String(e)}};function te(e,t,r){z((()=>e(...t)),r)}function re(e,t,r,n,i,a){e.current=n;r.current=false;if(i.current){i.current=null;a()}}function ne(e,t,r,n,i,a,o,s,l,u,c){if(!e)return()=>{};let d=false;let f=null;const p=()=>{if(d||!s.current)return;const e=t.getState();let r,p;try{r=n(e,i.current)}catch(e){p=e;f=e}p||(f=null);if(r===a.current)o.current||u();else{a.current=r;l.current=r;o.current=true;c()}};r.onStateChange=p;r.trySubscribe();p();const g=()=>{d=true;r.tryUnsubscribe();r.onStateChange=null;if(f)throw f};return g}const ie=()=>J;function ae(e,t){return e===t}let oe=false;function se(e,t,r,{pure:n,areStatesEqual:i=ae,areOwnPropsEqual:a=K,areStatePropsEqual:o=K,areMergedPropsEqual:s=K,forwardRef:l=false,context:u=g}={}){false;const d=u;const f=F(e);const p=N(t);const h=W(r);const v=Boolean(e);const m=e=>{false;const t=e.displayName||e.name||"Component";const r=`Connect(${t})`;const n={shouldHandleStateChanges:v,displayName:r,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:f,initMapDispatchToProps:p,initMergeProps:h,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:a,areMergedPropsEqual:s};function u(t){const[r,i,a]=c.useMemo((()=>{const{reactReduxForwardedRef:e}=t,r=k(t,Z);return[t.context,e,r]}),[t]);const o=c.useMemo((()=>r&&r.Consumer&&(0,A.isContextConsumer)(c.createElement(r.Consumer,null))?r:d),[r,d]);const s=c.useContext(o);const l=Boolean(t.store)&&Boolean(t.store.getState)&&Boolean(t.store.dispatch);const u=Boolean(s)&&Boolean(s.store);false;const f=l?t.store:s.store;const p=u?s.getServerState:f.getState;const g=c.useMemo((()=>D(f.dispatch,n)),[f]);const[h,m]=c.useMemo((()=>{if(!v)return Q;const e=U(f,l?void 0:s.subscription);const t=e.notifyNestedSubs.bind(e);return[e,t]}),[f,l,s]);const y=c.useMemo((()=>{if(l)return s;return E({},s,{subscription:h})}),[l,s,h]);const b=c.useRef();const w=c.useRef(a);const _=c.useRef();const S=c.useRef(false);const P=c.useRef(false);const C=c.useRef(false);const O=c.useRef();z((()=>{C.current=true;return()=>{C.current=false}}),[]);const T=c.useMemo((()=>{const e=()=>{if(_.current&&a===w.current)return _.current;return g(f.getState(),a)};return e}),[f,a]);const j=c.useMemo((()=>{const e=e=>{if(!h)return()=>{};return ne(v,f,h,g,w,b,S,C,_,m,e)};return e}),[h]);te(re,[w,b,S,a,_,m]);let L;try{L=Y(j,T,p?()=>g(p(),a):T)}catch(e){O.current&&(e.message+=`\nThe error may be correlated with this previous error:\n${O.current.stack}\n\n`);throw e}z((()=>{O.current=void 0;_.current=void 0;b.current=L}));const R=c.useMemo((()=>c.createElement(e,E({},L,{ref:i}))),[i,e,L]);const I=c.useMemo((()=>{if(v)return c.createElement(o.Provider,{value:y},R);return R}),[o,R,y]);return I}const g=c.memo(u);const m=g;m.WrappedComponent=e;m.displayName=u.displayName=r;if(l){const t=c.forwardRef((function e(t,r){return c.createElement(m,E({},t,{reactReduxForwardedRef:r}))}));const n=t;n.displayName=r;n.WrappedComponent=e;return O()(n,e)}return O()(m,e)};return m}const le=se;function ue({store:e,context:t,children:r,serverState:n,stabilityCheck:i="once",noopCheck:a="once"}){const o=c.useMemo((()=>{const t=U(e);return{store:e,subscription:t,getServerState:n?()=>n:void 0,stabilityCheck:i,noopCheck:a}}),[e,n,i,a]);const s=c.useMemo((()=>e.getState()),[e]);z((()=>{const{subscription:t}=o;t.onStateChange=t.notifyNestedSubs;t.trySubscribe();s!==e.getState()&&t.notifyNestedSubs();return()=>{t.tryUnsubscribe();t.onStateChange=void 0}}),[o,s]);const l=t||g;return c.createElement(l.Provider,{value:o},r)}const ce=ue;function de(e=g){const t=e===g?m:v(e);return function e(){const{store:r}=t();return r}}const fe=de();function pe(e=g){const t=e===g?fe:de(e);return function e(){const r=t();return r.dispatch}}const ge=pe();w(i.useSyncExternalStoreWithSelector);X(n.useSyncExternalStore);l(a.unstable_batchedUpdates)},61101:(e,t)=>{"use strict";var r;var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),m;m=Symbol.for("react.module.reference");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type,e){case a:case s:case o:case f:case p:return e;default:switch(e=e&&e.$$typeof,e){case c:case u:case d:case h:case g:case l:return e;default:return t}}case i:return t}}}r=u;r=l;r=n;r=d;r=a;r=h;r=g;r=i;r=s;r=o;r=f;r=p;r=function(){return!1};r=function(){return!1};t.isContextConsumer=function(e){return y(e)===u};r=function(e){return y(e)===l};r=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n};r=function(e){return y(e)===d};r=function(e){return y(e)===a};r=function(e){return y(e)===h};r=function(e){return y(e)===g};r=function(e){return y(e)===i};r=function(e){return y(e)===s};r=function(e){return y(e)===o};r=function(e){return y(e)===f};r=function(e){return y(e)===p};r=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===s||e===o||e===f||e===p||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===g||e.$$typeof===l||e.$$typeof===u||e.$$typeof===d||e.$$typeof===m||void 0!==e.getModuleId)};r=y},21013:(e,t,r)=>{"use strict";true;e.exports=r(61101)},34888:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function g(e){if(null===e||"object"!==typeof e)return null;e=p&&e[p]||e["@@iterator"];return"function"===typeof e?e:null}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,r){this.props=e;this.context=t;this.refs=m;this.updater=r||h}y.prototype.isReactComponent={};y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function b(){}b.prototype=y.prototype;function w(e,t,r){this.props=e;this.context=t;this.refs=m;this.updater=r||h}var _=w.prototype=new b;_.constructor=w;v(_,y.prototype);_.isPureReactComponent=!0;var S=Array.isArray,P=Object.prototype.hasOwnProperty,E={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)P.call(t,i)&&!k.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps,l)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:r,type:e,key:o,ref:s,props:a,_owner:E.current}}function O(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}function T(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}var j=/\/+/g;function D(e,t){return"object"===typeof e&&null!==e&&null!=e.key?T(""+e.key):t.toString(36)}function L(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return l=e,o=o(l),e=""===a?"."+D(l,0):a,S(o)?(i="",null!=e&&(i=e.replace(j,"$&/")+"/"),L(o,t,i,"",(function(e){return e}))):null!=o&&(A(o)&&(o=O(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(j,"$&/")+"/")+e)),t.push(o)),1;l=0;a=""===a?".":a+":";if(S(e))for(var u=0;u<e.length;u++){s=e[u];var c=a+D(s,u);l+=L(s,t,i,c,o)}else if(c=g(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)s=s.value,c=a+D(s,u++),l+=L(s,t,i,c,o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,r){if(null==e)return e;var n=[],i=0;L(e,n,"","",(function(e){return t.call(r,e,i++)}));return n}function I(e){if(-1===e._status){var t=e._result;t=t();t.then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}));-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},x={transition:null},N={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:x,ReactCurrentOwner:E};t.Children={map:R,forEach:function(e,t,r){R(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;R(e,(function(){t++}));return t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Component=y;t.Fragment=i;t.Profiler=o;t.PureComponent=w;t.StrictMode=a;t.Suspense=c;t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N;t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){void 0!==t.ref&&(o=t.ref,s=E.current);void 0!==t.key&&(a=""+t.key);if(e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)P.call(t,u)&&!k.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:r,type:e.type,key:a,ref:o,props:i,_owner:s}};t.createContext=function(e){e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};e.Provider={$$typeof:s,_context:e};return e.Consumer=e};t.createElement=C;t.createFactory=function(e){var t=C.bind(null,e);t.type=e;return t};t.createRef=function(){return{current:null}};t.forwardRef=function(e){return{$$typeof:u,render:e}};t.isValidElement=A;t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:I}};t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}};t.startTransition=function(e){var t=x.transition;x.transition={};try{e()}finally{x.transition=t}};t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};t.useCallback=function(e,t){return M.current.useCallback(e,t)};t.useContext=function(e){return M.current.useContext(e)};t.useDebugValue=function(){};t.useDeferredValue=function(e){return M.current.useDeferredValue(e)};t.useEffect=function(e,t){return M.current.useEffect(e,t)};t.useId=function(){return M.current.useId()};t.useImperativeHandle=function(e,t,r){return M.current.useImperativeHandle(e,t,r)};t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)};t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)};t.useMemo=function(e,t){return M.current.useMemo(e,t)};t.useReducer=function(e,t,r){return M.current.useReducer(e,t,r)};t.useRef=function(e){return M.current.useRef(e)};t.useState=function(e){return M.current.useState(e)};t.useSyncExternalStore=function(e,t,r){return M.current.useSyncExternalStore(e,t,r)};t.useTransition=function(){return M.current.useTransition()};t.version="18.2.0"},79440:(e,t,r)=>{"use strict";true;e.exports=r(34888)},7784:e=>{var t=function(e){"use strict";var t=Object.prototype;var r=t.hasOwnProperty;var n=Object.defineProperty||function(e,t,r){e[t]=r.value};var i;var a="function"===typeof Symbol?Symbol:{};var o=a.iterator||"@@iterator";var s=a.asyncIterator||"@@asyncIterator";var l=a.toStringTag||"@@toStringTag";function u(e,t,r){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true});return e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var a=t&&t.prototype instanceof m?t:m;var o=Object.create(a.prototype);var s=new j(i||[]);n(o,"_invoke",{value:C(e,r,s)});return o}e.wrap=c;function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}var f="suspendedStart";var p="suspendedYield";var g="executing";var h="completed";var v={};function m(){}function y(){}function b(){}var w={};u(w,o,(function(){return this}));var _=Object.getPrototypeOf;var S=_&&_(_(D([])));S&&S!==t&&r.call(S,o)&&(w=S);var P=b.prototype=m.prototype=Object.create(w);y.prototype=b;n(P,"constructor",{value:b,configurable:true});n(b,"constructor",{value:y,configurable:true});y.displayName=u(b,l,"GeneratorFunction");function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))};e.mark=function(e){if(Object.setPrototypeOf)Object.setPrototypeOf(e,b);else{e.__proto__=b;u(e,l,"GeneratorFunction")}e.prototype=Object.create(P);return e};e.awrap=function(e){return{__await:e}};function k(e,t){function i(n,a,o,s){var l=d(e[n],e,a);if("throw"!==l.type){var u=l.arg;var c=u.value;if(c&&"object"===typeof c&&r.call(c,"__await"))return t.resolve(c.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)}));return t.resolve(c).then((function(e){u.value=e;o(u)}),(function(e){return i("throw",e,o,s)}))}s(l.arg)}var a;function o(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}n(this,"_invoke",{value:o})}E(k.prototype);u(k.prototype,s,(function(){return this}));e.AsyncIterator=k;e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new k(c(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))};function C(e,t,r){var n=f;return function i(a,o){if(n===g)throw new Error("Generator is already running");if(n===h){if("throw"===a)throw o;return L()}r.method=a;r.arg=o;while(true){var s=r.delegate;if(s){var l=O(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f){n=h;throw r.arg}r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=g;var u=d(e,t,r);if("normal"===u.type){n=r.done?h:p;if(u.arg===v)continue;return{value:u.arg,done:r.done}}if("throw"===u.type){n=h;r.method="throw";r.arg=u.arg}}}}function O(e,t){var r=t.method;var n=e.iterator[r];if(n===i){t.delegate=null;if("throw"===r&&e.iterator["return"]){t.method="return";t.arg=i;O(e,t);if("throw"===t.method)return v}if("return"!==r){t.method="throw";t.arg=new TypeError("The iterator does not provide a '"+r+"' method")}return v}var a=d(n,e.iterator,t.arg);if("throw"===a.type){t.method="throw";t.arg=a.arg;t.delegate=null;return v}var o=a.arg;if(!o){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return v}if(!o.done)return o;t[e.resultName]=o.value;t.next=e.nextLoc;if("return"!==t.method){t.method="next";t.arg=i}t.delegate=null;return v}E(P);u(P,l,"Generator");u(P,o,(function(){return this}));u(P,"toString",(function(){return"[object Generator]"}));function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]);if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(A,this);this.reset(true)}e.keys=function(e){var t=Object(e);var r=[];for(var n in t)r.push(n);r.reverse();return function e(){while(r.length){var n=r.pop();if(n in t){e.value=n;e.done=false;return e}}e.done=true;return e}};function D(e){if(e||""===e){var t=e[o];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){while(++n<e.length)if(r.call(e,n)){t.value=e[n];t.done=false;return t}t.value=i;t.done=true;return t};return a.next=a}}throw new TypeError(typeof e+" is not iterable")}e.values=D;function L(){return{value:i,done:true}}j.prototype={constructor:j,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=i;this.done=false;this.delegate=null;this.method="next";this.arg=i;this.tryEntries.forEach(T);if(!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=i)},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){s.type="throw";s.arg=e;t.next=r;if(n){t.method="next";t.arg=i}return!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];var s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc");var u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,true);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,true)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};o.type=e;o.arg=t;if(a){this.method="next";this.next=a.finallyLoc;return v}return this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;if("break"===e.type||"continue"===e.type)this.next=e.arg;else if("return"===e.type){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else"normal"===e.type&&t&&(this.next=t);return v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e){this.complete(r.completion,r.afterLoc);T(r);return v}}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){this.delegate={iterator:D(e),resultName:t,nextLoc:r};"next"===this.method&&(this.arg=i);return v}};return e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},54600:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<a(i,t)))break e;e[n]=t,e[r]=i,r=n}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,o=i>>>1;n<o;){var s=2*(n+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,r))u<i&&0>a(c,l)?(e[n]=c,e[u]=r,n=u):(e[n]=l,e[s]=r,n=s);else{if(!(u<i&&0>a(c,r)))break e;e[n]=c,e[u]=r,n=u}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,f=null,p=3,g=!1,h=!1,v=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(e){for(var t=n(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,r(u,t)}t=n(c)}}function _(e){v=!1;w(e);if(!h)if(null!==n(u))h=!0,R(S);else{var t=n(c);null!==t&&I(_,t.startTime-e)}}function S(e,r){h=!1;v&&(v=!1,y(k),k=-1);g=!0;var a=p;try{w(r);for(f=n(u);null!==f&&(!(f.expirationTime>r)||e&&!A());){var o=f.callback;if("function"===typeof o){f.callback=null;p=f.priorityLevel;var s=o(f.expirationTime<=r);r=t.unstable_now();"function"===typeof s?f.callback=s:f===n(u)&&i(u);w(r)}else i(u);f=n(u)}if(null!==f)var l=!0;else{var d=n(c);null!==d&&I(_,d.startTime-r);l=!1}return l}finally{f=null,p=a,g=!1}}var P=!1,E=null,k=-1,C=5,O=-1;function A(){return!(t.unstable_now()-O<C)}function T(){if(null!==E){var e=t.unstable_now();O=e;var r=!0;try{r=E(!0,e)}finally{r?j():(P=!1,E=null)}}else P=!1}var j;if("function"===typeof b)j=function(){b(T)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,L=D.port2;D.port1.onmessage=T;j=function(){L.postMessage(null)}}else j=function(){m(T,0)};function R(e){E=e;P||(P=!0,j())}function I(e,r){k=m((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5;t.unstable_ImmediatePriority=1;t.unstable_LowPriority=4;t.unstable_NormalPriority=3;t.unstable_Profiling=null;t.unstable_UserBlockingPriority=2;t.unstable_cancelCallback=function(e){e.callback=null};t.unstable_continueExecution=function(){h||g||(h=!0,R(S))};t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5};t.unstable_getCurrentPriorityLevel=function(){return p};t.unstable_getFirstCallbackNode=function(){return n(u)};t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}};t.unstable_pauseExecution=function(){};t.unstable_requestPaint=function(){};t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}};t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();"object"===typeof a&&null!==a?(a=a.delay,a="number"===typeof a&&0<a?o+a:o):a=o;switch(e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}s=a+s;e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s,sortIndex:-1};a>o?(e.sortIndex=a,r(c,e),null===n(u)&&e===n(c)&&(v?(y(k),k=-1):v=!0,I(_,a-o))):(e.sortIndex=s,r(u,e),h||g||(h=!0,R(S)));return e};t.unstable_shouldYield=A;t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},43959:(e,t,r)=>{"use strict";true;e.exports=r(54600)},36354:(e,t,r)=>{"use strict";r.r(t);r.d(t,{MultiDrag:()=>qt,Sortable:()=>rt,Swap:()=>Dt,default:()=>$t});function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),true).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return a(e)}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function s(){s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return s.apply(this,arguments)}function l(e,t){if(null==e)return{};var r={};var n=Object.keys(e);var i,a;for(a=0;a<n.length;a++){i=n[a];if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function u(e,t){if(null==e)return{};var r=l(e,t);var n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++){n=a[i];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function c(e){return d(e)||f(e)||p(e)||h()}function d(e){if(Array.isArray(e))return g(e)}function f(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function p(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var v="1.15.0";function m(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var y=m(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i);var b=m(/Edge/i);var w=m(/firefox/i);var _=m(/safari/i)&&!m(/chrome/i)&&!m(/android/i);var S=m(/iP(ad|od|hone)/i);var P=m(/chrome/i)&&m(/android/i);var E={capture:false,passive:false};function k(e,t,r){e.addEventListener(t,r,!y&&E)}function C(e,t,r){e.removeEventListener(t,r,!y&&E)}function O(e,t){if(!t)return;">"===t[0]&&(t=t.substring(1));if(e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return false}return false}function A(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function T(e,t,r,n){if(e){r=r||document;do{if(null!=t&&(">"===t[0]?e.parentNode===r&&O(e,t):O(e,t))||n&&e===r)return e;if(e===r)break}while(e=A(e))}return null}var j=/\s+/g;function D(e,t,r){if(e&&t)if(e.classList)e.classList[r?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(j," ").replace(" "+t+" "," ");e.className=(n+(r?" "+t:"")).replace(j," ")}}function L(e,t,r){var n=e&&e.style;if(n){if(void 0===r){document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(r=e.currentStyle);return void 0===t?r:r[t]}t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t);n[t]=r+("string"===typeof r?"":"px")}}function R(e,t){var r="";if("string"===typeof e)r=e;else do{var n=L(e,"transform");n&&"none"!==n&&(r=n+" "+r)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(r)}function I(e,t,r){if(e){var n=e.getElementsByTagName(t),i=0,a=n.length;if(r)for(;i<a;i++)r(n[i],i);return n}return[]}function M(){var e=document.scrollingElement;return e||document.documentElement}function x(e,t,r,n,i){if(!e.getBoundingClientRect&&e!==window)return;var a,o,s,l,u,c,d;if(e!==window&&e.parentNode&&e!==M()){a=e.getBoundingClientRect();o=a.top;s=a.left;l=a.bottom;u=a.right;c=a.height;d=a.width}else{o=0;s=0;l=window.innerHeight;u=window.innerWidth;c=window.innerHeight;d=window.innerWidth}if((t||r)&&e!==window){i=i||e.parentNode;if(!y)do{if(i&&i.getBoundingClientRect&&("none"!==L(i,"transform")||r&&"static"!==L(i,"position"))){var f=i.getBoundingClientRect();o-=f.top+parseInt(L(i,"border-top-width"));s-=f.left+parseInt(L(i,"border-left-width"));l=o+a.height;u=s+a.width;break}}while(i=i.parentNode)}if(n&&e!==window){var p=R(i||e),g=p&&p.a,h=p&&p.d;if(p){o/=h;s/=g;d/=g;c/=h;l=o+c;u=s+d}}return{top:o,left:s,bottom:l,right:u,width:d,height:c}}function N(e,t,r){var n=q(e,true),i=x(e)[t];while(n){var a=x(n)[r],o=void 0;o="top"===r||"left"===r?i>=a:i<=a;if(!o)return n;if(n===M())break;n=q(n,false)}return false}function F(e,t,r,n){var i=0,a=0,o=e.children;while(a<o.length){if("none"!==o[a].style.display&&o[a]!==rt.ghost&&(n||o[a]!==rt.dragged)&&T(o[a],r.draggable,e,false)){if(i===t)return o[a];i++}a++}return null}function V(e,t){var r=e.lastElementChild;while(r&&(r===rt.ghost||"none"===L(r,"display")||t&&!O(r,t)))r=r.previousElementSibling;return r||null}function B(e,t){var r=0;if(!e||!e.parentNode)return-1;while(e=e.previousElementSibling)"TEMPLATE"===e.nodeName.toUpperCase()||e===rt.clone||t&&!O(e,t)||r++;return r}function W(e){var t=0,r=0,n=M();if(e)do{var i=R(e),a=i.a,o=i.d;t+=e.scrollLeft*a;r+=e.scrollTop*o}while(e!==n&&(e=e.parentNode));return[t,r]}function G(e,t){for(var r in e){if(!e.hasOwnProperty(r))continue;for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[r][n])return Number(r)}return-1}function q(e,t){if(!e||!e.getBoundingClientRect)return M();var r=e;var n=false;do{if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var i=L(r);if(r.clientWidth<r.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||r.clientHeight<r.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!r.getBoundingClientRect||r===document.body)return M();if(n||t)return r;n=true}}}while(r=r.parentNode);return M()}function U(e,t){if(e&&t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function H(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var z;function $(e,t){return function(){if(!z){var r=arguments,n=this;1===r.length?e.call(n,r[0]):e.apply(n,r);z=setTimeout((function(){z=void 0}),t)}}}function K(){clearTimeout(z);z=void 0}function Z(e,t,r){e.scrollLeft+=t;e.scrollTop+=r}function Y(e){var t=window.Polymer;var r=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(true):r?r(e).clone(true)[0]:e.cloneNode(true)}function X(e,t){L(e,"position","absolute");L(e,"top",t.top);L(e,"left",t.left);L(e,"width",t.width);L(e,"height",t.height)}function J(e){L(e,"position","");L(e,"top","");L(e,"left","");L(e,"width","");L(e,"height","")}var Q="Sortable"+(new Date).getTime();function ee(){var e=[],t;return{captureAnimationState:function t(){e=[];if(!this.options.animation)return;var r=[].slice.call(this.el.children);r.forEach((function(t){if("none"===L(t,"display")||t===rt.ghost)return;e.push({target:t,rect:x(t)});var r=i({},e[e.length-1].rect);if(t.thisAnimationDuration){var n=R(t,true);if(n){r.top-=n.f;r.left-=n.e}}t.fromRect=r}))},addAnimationState:function t(r){e.push(r)},removeAnimationState:function t(r){e.splice(G(e,{target:r}),1)},animateAll:function r(n){var i=this;if(!this.options.animation){clearTimeout(t);"function"===typeof n&&n();return}var a=false,o=0;e.forEach((function(e){var t=0,r=e.target,n=r.fromRect,s=x(r),l=r.prevFromRect,u=r.prevToRect,c=e.rect,d=R(r,true);if(d){s.top-=d.f;s.left-=d.e}r.toRect=s;r.thisAnimationDuration&&H(l,s)&&!H(n,s)&&(c.top-s.top)/(c.left-s.left)===(n.top-s.top)/(n.left-s.left)&&(t=re(c,l,u,i.options));if(!H(s,n)){r.prevFromRect=n;r.prevToRect=s;t||(t=i.options.animation);i.animate(r,c,s,t)}if(t){a=true;o=Math.max(o,t);clearTimeout(r.animationResetTimer);r.animationResetTimer=setTimeout((function(){r.animationTime=0;r.prevFromRect=null;r.fromRect=null;r.prevToRect=null;r.thisAnimationDuration=null}),t);r.thisAnimationDuration=t}}));clearTimeout(t);a?t=setTimeout((function(){"function"===typeof n&&n()}),o):"function"===typeof n&&n();e=[]},animate:function e(t,r,n,i){if(i){L(t,"transition","");L(t,"transform","");var a=R(this.el),o=a&&a.a,s=a&&a.d,l=(r.left-n.left)/(o||1),u=(r.top-n.top)/(s||1);t.animatingX=!!l;t.animatingY=!!u;L(t,"transform","translate3d("+l+"px,"+u+"px,0)");this.forRepaintDummy=te(t);L(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:""));L(t,"transform","translate3d(0,0,0)");"number"===typeof t.animated&&clearTimeout(t.animated);t.animated=setTimeout((function(){L(t,"transition","");L(t,"transform","");t.animated=false;t.animatingX=false;t.animatingY=false}),i)}}}}function te(e){return e.offsetWidth}function re(e,t,r,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-r.top,2)+Math.pow(t.left-r.left,2))*n.animation}var ne=[];var ie={initializeByDefault:true};var ae={mount:function e(t){for(var r in ie)ie.hasOwnProperty(r)&&!(r in t)&&(t[r]=ie[r]);ne.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}));ne.push(t)},pluginEvent:function e(t,r,n){var a=this;this.eventCanceled=false;n.cancel=function(){a.eventCanceled=true};var o=t+"Global";ne.forEach((function(e){if(!r[e.pluginName])return;r[e.pluginName][o]&&r[e.pluginName][o](i({sortable:r},n));r.options[e.pluginName]&&r[e.pluginName][t]&&r[e.pluginName][t](i({sortable:r},n))}))},initializePlugins:function e(t,r,n,i){ne.forEach((function(e){var i=e.pluginName;if(!t.options[i]&&!e.initializeByDefault)return;var a=new e(t,r,t.options);a.sortable=t;a.options=t.options;t[i]=a;s(n,a.defaults)}));for(var a in t.options){if(!t.options.hasOwnProperty(a))continue;var o=this.modifyOption(t,a,t.options[a]);"undefined"!==typeof o&&(t.options[a]=o)}},getEventProperties:function e(t,r){var n={};ne.forEach((function(e){if("function"!==typeof e.eventProperties)return;s(n,e.eventProperties.call(r[e.pluginName],t))}));return n},modifyOption:function e(t,r,n){var i;ne.forEach((function(e){if(!t[e.pluginName])return;e.optionListeners&&"function"===typeof e.optionListeners[r]&&(i=e.optionListeners[r].call(t[e.pluginName],n))}));return i}};function oe(e){var t=e.sortable,r=e.rootEl,n=e.name,a=e.targetEl,o=e.cloneEl,s=e.toEl,l=e.fromEl,u=e.oldIndex,c=e.newIndex,d=e.oldDraggableIndex,f=e.newDraggableIndex,p=e.originalEvent,g=e.putSortable,h=e.extraEventProperties;t=t||r&&r[Q];if(!t)return;var v,m=t.options,w="on"+n.charAt(0).toUpperCase()+n.substr(1);if(!window.CustomEvent||y||b){v=document.createEvent("Event");v.initEvent(n,true,true)}else v=new CustomEvent(n,{bubbles:true,cancelable:true});v.to=s||r;v.from=l||r;v.item=a||r;v.clone=o;v.oldIndex=u;v.newIndex=c;v.oldDraggableIndex=d;v.newDraggableIndex=f;v.originalEvent=p;v.pullMode=g?g.lastPutMode:void 0;var _=i(i({},h),ae.getEventProperties(n,t));for(var S in _)v[S]=_[S];r&&r.dispatchEvent(v);m[w]&&m[w].call(t,v)}var se=["evt"];var le=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.evt,o=u(n,se);ae.pluginEvent.bind(rt)(t,r,i({dragEl:ce,parentEl:de,ghostEl:fe,rootEl:pe,nextEl:ge,lastDownEl:he,cloneEl:ve,cloneHidden:me,dragStarted:Re,putSortable:Pe,activeSortable:rt.active,originalEvent:a,oldIndex:ye,oldDraggableIndex:we,newIndex:be,newDraggableIndex:_e,hideGhostForTarget:Je,unhideGhostForTarget:Qe,cloneNowHidden:function e(){me=true},cloneNowShown:function e(){me=false},dispatchSortableEvent:function e(t){ue({sortable:r,name:t,originalEvent:a})}},o))};function ue(e){oe(i({putSortable:Pe,cloneEl:ve,targetEl:ce,rootEl:pe,oldIndex:ye,oldDraggableIndex:we,newIndex:be,newDraggableIndex:_e},e))}var ce,de,fe,pe,ge,he,ve,me,ye,be,we,_e,Se,Pe,Ee=false,ke=false,Ce=[],Oe,Ae,Te,je,De,Le,Re,Ie,Me,xe=false,Ne=false,Fe,Ve,Be=[],We=false,Ge=[];var qe="undefined"!==typeof document,Ue=S,He=b||y?"cssFloat":"float",ze=qe&&!P&&!S&&"draggable"in document.createElement("div"),$e=function(){if(!qe)return;if(y)return false;var e=document.createElement("x");e.style.cssText="pointer-events:auto";return"auto"===e.style.pointerEvents}(),Ke=function e(t,r){var n=L(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=F(t,0,r),o=F(t,1,r),s=a&&L(a),l=o&&L(o),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+x(a).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+x(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&s["float"]&&"none"!==s["float"]){var d="left"===s["float"]?"left":"right";return!o||"both"!==l.clear&&l.clear!==d?"horizontal":"vertical"}return a&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||u>=i&&"none"===n[He]||o&&"none"===n[He]&&u+c>i)?"vertical":"horizontal"},Ze=function e(t,r,n){var i=n?t.left:t.top,a=n?t.right:t.bottom,o=n?t.width:t.height,s=n?r.left:r.top,l=n?r.right:r.bottom,u=n?r.width:r.height;return i===s||a===l||i+o/2===s+u/2},Ye=function e(t,r){var n;Ce.some((function(e){var i=e[Q].options.emptyInsertThreshold;if(!i||V(e))return;var a=x(e),o=t>=a.left-i&&t<=a.right+i,s=r>=a.top-i&&r<=a.bottom+i;if(o&&s)return n=e}));return n},Xe=function e(t){function r(e,t){return function(n,i,a,o){var s=n.options.group.name&&i.options.group.name&&n.options.group.name===i.options.group.name;if(null==e&&(t||s))return true;if(null==e||false===e)return false;if(t&&"clone"===e)return e;if("function"===typeof e)return r(e(n,i,a,o),t)(n,i,a,o);var l=(t?n:i).options.group.name;return true===e||"string"===typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={};var i=t.group;i&&"object"==a(i)||(i={name:i});n.name=i.name;n.checkPull=r(i.pull,true);n.checkPut=r(i.put);n.revertClone=i.revertClone;t.group=n},Je=function e(){!$e&&fe&&L(fe,"display","none")},Qe=function e(){!$e&&fe&&L(fe,"display","")};qe&&!P&&document.addEventListener("click",(function(e){if(ke){e.preventDefault();e.stopPropagation&&e.stopPropagation();e.stopImmediatePropagation&&e.stopImmediatePropagation();ke=false;return false}}),true);var et=function e(t){if(ce){t=t.touches?t.touches[0]:t;var r=Ye(t.clientX,t.clientY);if(r){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=r;n.preventDefault=void 0;n.stopPropagation=void 0;r[Q]._onDragOver(n)}}};var tt=function e(t){ce&&ce.parentNode[Q]._isOutsideThisEl(t.target)};function rt(e,t){if(!(e&&e.nodeType&&1===e.nodeType))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e;this.options=t=s({},t);e[Q]=this;var r={group:null,sort:true,disabled:false,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:false,invertedSwapThreshold:null,removeCloneOnHide:true,direction:function t(){return Ke(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:true,animation:0,easing:null,setData:function e(t,r){t.setData("Text",r.textContent)},dropBubble:false,dragoverBubble:false,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:false,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:false,fallbackClass:"sortable-fallback",fallbackOnBody:false,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:false!==rt.supportPointer&&"PointerEvent"in window&&!_,emptyInsertThreshold:5};ae.initializePlugins(this,e,r);for(var n in r)!(n in t)&&(t[n]=r[n]);Xe(t);for(var i in this)"_"===i.charAt(0)&&"function"===typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&ze;this.nativeDraggable&&(this.options.touchStartThreshold=1);if(t.supportPointer)k(e,"pointerdown",this._onTapStart);else{k(e,"mousedown",this._onTapStart);k(e,"touchstart",this._onTapStart)}if(this.nativeDraggable){k(e,"dragover",this);k(e,"dragenter",this)}Ce.push(this.el);t.store&&t.store.get&&this.sort(t.store.get(this)||[]);s(this,ee())}rt.prototype={constructor:rt,_isOutsideThisEl:function e(t){this.el.contains(t)||t===this.el||(Ie=null)},_getDirection:function e(t,r){return"function"===typeof this.options.direction?this.options.direction.call(this,t,r,ce):this.options.direction},_onTapStart:function e(t){if(!t.cancelable)return;var r=this,n=this.el,i=this.options,a=i.preventOnFilter,o=t.type,s=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,l=(s||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,c=i.filter;ft(n);if(ce)return;if(/mousedown|pointerdown/.test(o)&&0!==t.button||i.disabled)return;if(u.isContentEditable)return;if(!this.nativeDraggable&&_&&l&&"SELECT"===l.tagName.toUpperCase())return;l=T(l,i.draggable,n,false);if(l&&l.animated)return;if(he===l)return;ye=B(l);we=B(l,i.draggable);if("function"===typeof c){if(c.call(this,t,l,this)){ue({sortable:r,rootEl:u,name:"filter",targetEl:l,toEl:n,fromEl:n});le("filter",r,{evt:t});a&&t.cancelable&&t.preventDefault();return}}else if(c){c=c.split(",").some((function(e){e=T(u,e.trim(),n,false);if(e){ue({sortable:r,rootEl:e,name:"filter",targetEl:l,fromEl:n,toEl:n});le("filter",r,{evt:t});return true}}));if(c){a&&t.cancelable&&t.preventDefault();return}}if(i.handle&&!T(u,i.handle,n,false))return;this._prepareDragStart(t,s,l)},_prepareDragStart:function e(t,r,n){var i=this,a=i.el,o=i.options,s=a.ownerDocument,l;if(n&&!ce&&n.parentNode===a){var u=x(n);pe=a;ce=n;de=ce.parentNode;ge=ce.nextSibling;he=n;Se=o.group;rt.dragged=ce;Oe={target:ce,clientX:(r||t).clientX,clientY:(r||t).clientY};De=Oe.clientX-u.left;Le=Oe.clientY-u.top;this._lastX=(r||t).clientX;this._lastY=(r||t).clientY;ce.style["will-change"]="all";l=function e(){le("delayEnded",i,{evt:t});if(rt.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents();!w&&i.nativeDraggable&&(ce.draggable=true);i._triggerDragStart(t,r);ue({sortable:i,name:"choose",originalEvent:t});D(ce,o.chosenClass,true)};o.ignore.split(",").forEach((function(e){I(ce,e.trim(),at)}));k(s,"dragover",et);k(s,"mousemove",et);k(s,"touchmove",et);k(s,"mouseup",i._onDrop);k(s,"touchend",i._onDrop);k(s,"touchcancel",i._onDrop);if(w&&this.nativeDraggable){this.options.touchStartThreshold=4;ce.draggable=true}le("delayStart",this,{evt:t});if(!o.delay||o.delayOnTouchOnly&&!r||this.nativeDraggable&&(b||y))l();else{if(rt.eventCanceled){this._onDrop();return}k(s,"mouseup",i._disableDelayedDrag);k(s,"touchend",i._disableDelayedDrag);k(s,"touchcancel",i._disableDelayedDrag);k(s,"mousemove",i._delayedDragTouchMoveHandler);k(s,"touchmove",i._delayedDragTouchMoveHandler);o.supportPointer&&k(s,"pointermove",i._delayedDragTouchMoveHandler);i._dragStartTimer=setTimeout(l,o.delay)}}},_delayedDragTouchMoveHandler:function e(t){var r=t.touches?t.touches[0]:t;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function e(){ce&&at(ce);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function e(){var t=this.el.ownerDocument;C(t,"mouseup",this._disableDelayedDrag);C(t,"touchend",this._disableDelayedDrag);C(t,"touchcancel",this._disableDelayedDrag);C(t,"mousemove",this._delayedDragTouchMoveHandler);C(t,"touchmove",this._delayedDragTouchMoveHandler);C(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function e(t,r){r=r||"touch"==t.pointerType&&t;if(!this.nativeDraggable||r)this.options.supportPointer?k(document,"pointermove",this._onTouchMove):k(document,r?"touchmove":"mousemove",this._onTouchMove);else{k(ce,"dragend",this);k(pe,"dragstart",this._onDragStart)}try{document.selection?pt((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function e(t,r){Ee=false;if(pe&&ce){le("dragStarted",this,{evt:r});this.nativeDraggable&&k(document,"dragover",tt);var n=this.options;!t&&D(ce,n.dragClass,false);D(ce,n.ghostClass,true);rt.active=this;t&&this._appendGhost();ue({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function e(){if(Ae){this._lastX=Ae.clientX;this._lastY=Ae.clientY;Je();var t=document.elementFromPoint(Ae.clientX,Ae.clientY);var r=t;while(t&&t.shadowRoot){t=t.shadowRoot.elementFromPoint(Ae.clientX,Ae.clientY);if(t===r)break;r=t}ce.parentNode[Q]._isOutsideThisEl(t);if(r)do{if(r[Q]){var n=void 0;n=r[Q]._onDragOver({clientX:Ae.clientX,clientY:Ae.clientY,target:t,rootEl:r});if(n&&!this.options.dragoverBubble)break}t=r}while(r=r.parentNode);Qe()}},_onTouchMove:function e(t){if(Oe){var r=this.options,n=r.fallbackTolerance,i=r.fallbackOffset,a=t.touches?t.touches[0]:t,o=fe&&R(fe,true),s=fe&&o&&o.a,l=fe&&o&&o.d,u=Ue&&Ve&&W(Ve),c=(a.clientX-Oe.clientX+i.x)/(s||1)+(u?u[0]-Be[0]:0)/(s||1),d=(a.clientY-Oe.clientY+i.y)/(l||1)+(u?u[1]-Be[1]:0)/(l||1);if(!rt.active&&!Ee){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(t,true)}if(fe){if(o){o.e+=c-(Te||0);o.f+=d-(je||0)}else o={a:1,b:0,c:0,d:1,e:c,f:d};var f="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");L(fe,"webkitTransform",f);L(fe,"mozTransform",f);L(fe,"msTransform",f);L(fe,"transform",f);Te=c;je=d;Ae=a}t.cancelable&&t.preventDefault()}},_appendGhost:function e(){if(!fe){var t=this.options.fallbackOnBody?document.body:pe,r=x(ce,true,Ue,true,t),n=this.options;if(Ue){Ve=t;while("static"===L(Ve,"position")&&"none"===L(Ve,"transform")&&Ve!==document)Ve=Ve.parentNode;if(Ve!==document.body&&Ve!==document.documentElement){Ve===document&&(Ve=M());r.top+=Ve.scrollTop;r.left+=Ve.scrollLeft}else Ve=M();Be=W(Ve)}fe=ce.cloneNode(true);D(fe,n.ghostClass,false);D(fe,n.fallbackClass,true);D(fe,n.dragClass,true);L(fe,"transition","");L(fe,"transform","");L(fe,"box-sizing","border-box");L(fe,"margin",0);L(fe,"top",r.top);L(fe,"left",r.left);L(fe,"width",r.width);L(fe,"height",r.height);L(fe,"opacity","0.8");L(fe,"position",Ue?"absolute":"fixed");L(fe,"zIndex","100000");L(fe,"pointerEvents","none");rt.ghost=fe;t.appendChild(fe);L(fe,"transform-origin",De/parseInt(fe.style.width)*100+"% "+Le/parseInt(fe.style.height)*100+"%")}},_onDragStart:function e(t,r){var n=this;var i=t.dataTransfer;var a=n.options;le("dragStart",this,{evt:t});if(rt.eventCanceled){this._onDrop();return}le("setupClone",this);if(!rt.eventCanceled){ve=Y(ce);ve.removeAttribute("id");ve.draggable=false;ve.style["will-change"]="";this._hideClone();D(ve,this.options.chosenClass,false);rt.clone=ve}n.cloneId=pt((function(){le("clone",n);if(rt.eventCanceled)return;n.options.removeCloneOnHide||pe.insertBefore(ve,ce);n._hideClone();ue({sortable:n,name:"clone"})}));!r&&D(ce,a.dragClass,true);if(r){ke=true;n._loopId=setInterval(n._emulateDragOver,50)}else{C(document,"mouseup",n._onDrop);C(document,"touchend",n._onDrop);C(document,"touchcancel",n._onDrop);if(i){i.effectAllowed="move";a.setData&&a.setData.call(n,i,ce)}k(document,"drop",n);L(ce,"transform","translateZ(0)")}Ee=true;n._dragStartId=pt(n._dragStarted.bind(n,r,t));k(document,"selectstart",n);Re=true;_&&L(document.body,"user-select","none")},_onDragOver:function e(t){var r=this.el,n=t.target,a,o,s,l=this.options,u=l.group,c=rt.active,d=Se===u,f=l.sort,p=Pe||c,g,h=this,v=false;if(We)return;function m(e,l){le(e,h,i({evt:t,isOwner:d,axis:g?"vertical":"horizontal",revert:s,dragRect:a,targetRect:o,canSort:f,fromSortable:p,target:n,completed:b,onMove:function e(n,i){return it(pe,r,ce,a,n,x(n),t,i)},changed:w},l))}function y(){m("dragOverAnimationCapture");h.captureAnimationState();h!==p&&p.captureAnimationState()}function b(e){m("dragOverCompleted",{insertion:e});if(e){d?c._hideClone():c._showClone(h);if(h!==p){D(ce,Pe?Pe.options.ghostClass:c.options.ghostClass,false);D(ce,l.ghostClass,true)}Pe!==h&&h!==rt.active?Pe=h:h===rt.active&&Pe&&(Pe=null);p===h&&(h._ignoreWhileAnimating=n);h.animateAll((function(){m("dragOverAnimationComplete");h._ignoreWhileAnimating=null}));if(h!==p){p.animateAll();p._ignoreWhileAnimating=null}}(n===ce&&!ce.animated||n===r&&!n.animated)&&(Ie=null);if(!l.dragoverBubble&&!t.rootEl&&n!==document){ce.parentNode[Q]._isOutsideThisEl(t.target);!e&&et(t)}!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation();return v=true}function w(){be=B(ce);_e=B(ce,l.draggable);ue({sortable:h,name:"change",toEl:r,newIndex:be,newDraggableIndex:_e,originalEvent:t})}void 0!==t.preventDefault&&t.cancelable&&t.preventDefault();n=T(n,l.draggable,r,true);m("dragOver");if(rt.eventCanceled)return v;if(ce.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||h._ignoreWhileAnimating===n)return b(false);ke=false;if(c&&!l.disabled&&(d?f||(s=de!==pe):Pe===this||(this.lastPutMode=Se.checkPull(this,c,ce,t))&&u.checkPut(this,c,ce,t))){g="vertical"===this._getDirection(t,n);a=x(ce);m("dragOverValid");if(rt.eventCanceled)return v;if(s){de=pe;y();this._hideClone();m("revert");rt.eventCanceled||(ge?pe.insertBefore(ce,ge):pe.appendChild(ce));return b(true)}var _=V(r,l.draggable);if(!_||lt(t,g,this)&&!_.animated){if(_===ce)return b(false);_&&r===t.target&&(n=_);n&&(o=x(n));if(false!==it(pe,r,ce,a,n,o,t,!!n)){y();_&&_.nextSibling?r.insertBefore(ce,_.nextSibling):r.appendChild(ce);de=r;w();return b(true)}}else if(_&&st(t,g,this)){var S=F(r,0,l,true);if(S===ce)return b(false);n=S;o=x(n);if(false!==it(pe,r,ce,a,n,o,t,false)){y();r.insertBefore(ce,S);de=r;w();return b(true)}}else if(n.parentNode===r){o=x(n);var P=0,E,k=ce.parentNode!==r,C=!Ze(ce.animated&&ce.toRect||a,n.animated&&n.toRect||o,g),O=g?"top":"left",A=N(n,"top","top")||N(ce,"top","top"),j=A?A.scrollTop:void 0;if(Ie!==n){E=o[O];xe=false;Ne=!C&&l.invertSwap||k}P=ut(t,n,o,g,C?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Ne,Ie===n);var R;if(0!==P){var I=B(ce);do{I-=P;R=de.children[I]}while(R&&("none"===L(R,"display")||R===fe))}if(0===P||R===n)return b(false);Ie=n;Me=P;var M=n.nextElementSibling,W=false;W=1===P;var G=it(pe,r,ce,a,n,o,t,W);if(false!==G){1!==G&&-1!==G||(W=1===G);We=true;setTimeout(ot,30);y();W&&!M?r.appendChild(ce):n.parentNode.insertBefore(ce,W?M:n);A&&Z(A,0,j-A.scrollTop);de=ce.parentNode;void 0===E||Ne||(Fe=Math.abs(E-x(n)[O]));w();return b(true)}}if(r.contains(ce))return b(false)}return false},_ignoreWhileAnimating:null,_offMoveEvents:function e(){C(document,"mousemove",this._onTouchMove);C(document,"touchmove",this._onTouchMove);C(document,"pointermove",this._onTouchMove);C(document,"dragover",et);C(document,"mousemove",et);C(document,"touchmove",et)},_offUpEvents:function e(){var t=this.el.ownerDocument;C(t,"mouseup",this._onDrop);C(t,"touchend",this._onDrop);C(t,"pointerup",this._onDrop);C(t,"touchcancel",this._onDrop);C(document,"selectstart",this)},_onDrop:function e(t){var r=this.el,n=this.options;be=B(ce);_e=B(ce,n.draggable);le("drop",this,{evt:t});de=ce&&ce.parentNode;be=B(ce);_e=B(ce,n.draggable);if(rt.eventCanceled){this._nulling();return}Ee=false;Ne=false;xe=false;clearInterval(this._loopId);clearTimeout(this._dragStartTimer);gt(this.cloneId);gt(this._dragStartId);if(this.nativeDraggable){C(document,"drop",this);C(r,"dragstart",this._onDragStart)}this._offMoveEvents();this._offUpEvents();_&&L(document.body,"user-select","");L(ce,"transform","");if(t){if(Re){t.cancelable&&t.preventDefault();!n.dropBubble&&t.stopPropagation()}fe&&fe.parentNode&&fe.parentNode.removeChild(fe);(pe===de||Pe&&"clone"!==Pe.lastPutMode)&&ve&&ve.parentNode&&ve.parentNode.removeChild(ve);if(ce){this.nativeDraggable&&C(ce,"dragend",this);at(ce);ce.style["will-change"]="";Re&&!Ee&&D(ce,Pe?Pe.options.ghostClass:this.options.ghostClass,false);D(ce,this.options.chosenClass,false);ue({sortable:this,name:"unchoose",toEl:de,newIndex:null,newDraggableIndex:null,originalEvent:t});if(pe!==de){if(be>=0){ue({rootEl:de,name:"add",toEl:de,fromEl:pe,originalEvent:t});ue({sortable:this,name:"remove",toEl:de,originalEvent:t});ue({rootEl:de,name:"sort",toEl:de,fromEl:pe,originalEvent:t});ue({sortable:this,name:"sort",toEl:de,originalEvent:t})}Pe&&Pe.save()}else if(be!==ye&&be>=0){ue({sortable:this,name:"update",toEl:de,originalEvent:t});ue({sortable:this,name:"sort",toEl:de,originalEvent:t})}if(rt.active){if(null==be||-1===be){be=ye;_e=we}ue({sortable:this,name:"end",toEl:de,originalEvent:t});this.save()}}}this._nulling()},_nulling:function e(){le("nulling",this);pe=ce=de=fe=ge=ve=he=me=Oe=Ae=Re=be=_e=ye=we=Ie=Me=Pe=Se=rt.dragged=rt.ghost=rt.clone=rt.active=null;Ge.forEach((function(e){e.checked=true}));Ge.length=Te=je=0},handleEvent:function e(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":if(ce){this._onDragOver(t);nt(t)}break;case"selectstart":t.preventDefault();break}},toArray:function e(){var t=[],r,n=this.el.children,i=0,a=n.length,o=this.options;for(;i<a;i++){r=n[i];T(r,o.draggable,this.el,false)&&t.push(r.getAttribute(o.dataIdAttr)||dt(r))}return t},sort:function e(t,r){var n={},i=this.el;this.toArray().forEach((function(e,t){var r=i.children[t];T(r,this.options.draggable,i,false)&&(n[e]=r)}),this);r&&this.captureAnimationState();t.forEach((function(e){if(n[e]){i.removeChild(n[e]);i.appendChild(n[e])}}));r&&this.animateAll()},save:function e(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function e(t,r){return T(t,r||this.options.draggable,this.el,false)},option:function e(t,r){var n=this.options;if(void 0===r)return n[t];var i=ae.modifyOption(this,t,r);n[t]="undefined"!==typeof i?i:r;"group"===t&&Xe(n)},destroy:function e(){le("destroy",this);var t=this.el;t[Q]=null;C(t,"mousedown",this._onTapStart);C(t,"touchstart",this._onTapStart);C(t,"pointerdown",this._onTapStart);if(this.nativeDraggable){C(t,"dragover",this);C(t,"dragenter",this)}Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")}));this._onDrop();this._disableDelayedDragEvents();Ce.splice(Ce.indexOf(this.el),1);this.el=t=null},_hideClone:function e(){if(!me){le("hideClone",this);if(rt.eventCanceled)return;L(ve,"display","none");this.options.removeCloneOnHide&&ve.parentNode&&ve.parentNode.removeChild(ve);me=true}},_showClone:function e(t){if("clone"!==t.lastPutMode){this._hideClone();return}if(me){le("showClone",this);if(rt.eventCanceled)return;ce.parentNode!=pe||this.options.group.revertClone?ge?pe.insertBefore(ve,ge):pe.appendChild(ve):pe.insertBefore(ve,ce);this.options.group.revertClone&&this.animate(ce,ve);L(ve,"display","");me=false}}};function nt(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}function it(e,t,r,n,i,a,o,s){var l,u=e[Q],c=u.options.onMove,d;if(!window.CustomEvent||y||b){l=document.createEvent("Event");l.initEvent("move",true,true)}else l=new CustomEvent("move",{bubbles:true,cancelable:true});l.to=t;l.from=e;l.dragged=r;l.draggedRect=n;l.related=i||t;l.relatedRect=a||x(t);l.willInsertAfter=s;l.originalEvent=o;e.dispatchEvent(l);c&&(d=c.call(u,l,o));return d}function at(e){e.draggable=false}function ot(){We=false}function st(e,t,r){var n=x(F(r.el,0,r.options,true));var i=10;return t?e.clientX<n.left-i||e.clientY<n.top&&e.clientX<n.right:e.clientY<n.top-i||e.clientY<n.bottom&&e.clientX<n.left}function lt(e,t,r){var n=x(V(r.el,r.options.draggable));var i=10;return t?e.clientX>n.right+i||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+i}function ut(e,t,r,n,i,a,o,s){var l=n?e.clientY:e.clientX,u=n?r.height:r.width,c=n?r.top:r.left,d=n?r.bottom:r.right,f=false;if(!o)if(s&&Fe<u*i){!xe&&(1===Me?l>c+u*a/2:l<d-u*a/2)&&(xe=true);if(xe)f=true;else if(1===Me?l<c+Fe:l>d-Fe)return-Me}else if(l>c+u*(1-i)/2&&l<d-u*(1-i)/2)return ct(t);f=f||o;if(f&&(l<c+u*a/2||l>d-u*a/2))return l>c+u/2?1:-1;return 0}function ct(e){return B(ce)<B(e)?1:-1}function dt(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,r=t.length,n=0;while(r--)n+=t.charCodeAt(r);return n.toString(36)}function ft(e){Ge.length=0;var t=e.getElementsByTagName("input");var r=t.length;while(r--){var n=t[r];n.checked&&Ge.push(n)}}function pt(e){return setTimeout(e,0)}function gt(e){return clearTimeout(e)}qe&&k(document,"touchmove",(function(e){(rt.active||Ee)&&e.cancelable&&e.preventDefault()}));rt.utils={on:k,off:C,css:L,find:I,is:function e(t,r){return!!T(t,r,t,false)},extend:U,throttle:$,closest:T,toggleClass:D,clone:Y,index:B,nextTick:pt,cancelNextTick:gt,detectDirection:Ke,getChild:F};rt.get=function(e){return e[Q]};rt.mount=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t[0].constructor===Array&&(t=t[0]);t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(rt.utils=i(i({},rt.utils),e.utils));ae.mount(e)}))};rt.create=function(e,t){return new rt(e,t)};rt.version=v;var ht=[],vt,mt,yt=false,bt,wt,_t,St;function Pt(){function e(){this.defaults={scroll:true,forceAutoScrollFallback:false,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:true};for(var e in this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}e.prototype={dragStarted:function e(t){var r=t.originalEvent;this.sortable.nativeDraggable?k(document,"dragover",this._handleAutoScroll):this.options.supportPointer?k(document,"pointermove",this._handleFallbackAutoScroll):r.touches?k(document,"touchmove",this._handleFallbackAutoScroll):k(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function e(t){var r=t.originalEvent;this.options.dragOverBubble||r.rootEl||this._handleAutoScroll(r)},drop:function e(){if(this.sortable.nativeDraggable)C(document,"dragover",this._handleAutoScroll);else{C(document,"pointermove",this._handleFallbackAutoScroll);C(document,"touchmove",this._handleFallbackAutoScroll);C(document,"mousemove",this._handleFallbackAutoScroll)}kt();Et();K()},nulling:function e(){_t=mt=vt=yt=St=bt=wt=null;ht.length=0},_handleFallbackAutoScroll:function e(t){this._handleAutoScroll(t,true)},_handleAutoScroll:function e(t,r){var n=this;var i=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(i,a);_t=t;if(r||this.options.forceAutoScrollFallback||b||y||_){Ct(t,this.options,o,r);var s=q(o,true);if(yt&&(!St||i!==bt||a!==wt)){St&&kt();St=setInterval((function(){var e=q(document.elementFromPoint(i,a),true);if(e!==s){s=e;Et()}Ct(t,n.options,e,r)}),10);bt=i;wt=a}}else{if(!this.options.bubbleScroll||q(o,true)===M()){Et();return}Ct(t,this.options,q(o,false),false)}}};return s(e,{pluginName:"scroll",initializeByDefault:true})}function Et(){ht.forEach((function(e){clearInterval(e.pid)}));ht=[]}function kt(){clearInterval(St)}var Ct=$((function(e,t,r,n){if(!t.scroll)return;var i=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,o=t.scrollSensitivity,s=t.scrollSpeed,l=M();var u=false,c;if(mt!==r){mt=r;Et();vt=t.scroll;c=t.scrollFn;true===vt&&(vt=q(r,true))}var d=0;var f=vt;do{var p=f,g=x(p),h=g.top,v=g.bottom,m=g.left,y=g.right,b=g.width,w=g.height,_=void 0,S=void 0,P=p.scrollWidth,E=p.scrollHeight,k=L(p),C=p.scrollLeft,O=p.scrollTop;if(p===l){_=b<P&&("auto"===k.overflowX||"scroll"===k.overflowX||"visible"===k.overflowX);S=w<E&&("auto"===k.overflowY||"scroll"===k.overflowY||"visible"===k.overflowY)}else{_=b<P&&("auto"===k.overflowX||"scroll"===k.overflowX);S=w<E&&("auto"===k.overflowY||"scroll"===k.overflowY)}var A=_&&(Math.abs(y-i)<=o&&C+b<P)-(Math.abs(m-i)<=o&&!!C);var T=S&&(Math.abs(v-a)<=o&&O+w<E)-(Math.abs(h-a)<=o&&!!O);if(!ht[d])for(var j=0;j<=d;j++)ht[j]||(ht[j]={});if(ht[d].vx!=A||ht[d].vy!=T||ht[d].el!==p){ht[d].el=p;ht[d].vx=A;ht[d].vy=T;clearInterval(ht[d].pid);if(0!=A||0!=T){u=true;ht[d].pid=setInterval(function(){n&&0===this.layer&&rt.active._onTouchMove(_t);var t=ht[this.layer].vy?ht[this.layer].vy*s:0;var r=ht[this.layer].vx?ht[this.layer].vx*s:0;if("function"===typeof c&&"continue"!==c.call(rt.dragged.parentNode[Q],r,t,e,_t,ht[this.layer].el))return;Z(ht[this.layer].el,r,t)}.bind({layer:d}),24)}}d++}while(t.bubbleScroll&&f!==l&&(f=q(f,false)));yt=u}),30);var Ot=function e(t){var r=t.originalEvent,n=t.putSortable,i=t.dragEl,a=t.activeSortable,o=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(!r)return;var u=n||a;s();var c=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r;var d=document.elementFromPoint(c.clientX,c.clientY);l();if(u&&!u.el.contains(d)){o("spill");this.onSpill({dragEl:i,putSortable:n})}};function At(){}At.prototype={startIndex:null,dragStart:function e(t){var r=t.oldDraggableIndex;this.startIndex=r},onSpill:function e(t){var r=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState();n&&n.captureAnimationState();var i=F(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(r,i):this.sortable.el.appendChild(r);this.sortable.animateAll();n&&n.animateAll()},drop:Ot};s(At,{pluginName:"revertOnSpill"});function Tt(){}Tt.prototype={onSpill:function e(t){var r=t.dragEl,n=t.putSortable;var i=n||this.sortable;i.captureAnimationState();r.parentNode&&r.parentNode.removeChild(r);i.animateAll()},drop:Ot};s(Tt,{pluginName:"removeOnSpill"});var jt;function Dt(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}e.prototype={dragStart:function e(t){var r=t.dragEl;jt=r},dragOverValid:function e(t){var r=t.completed,n=t.target,i=t.onMove,a=t.activeSortable,o=t.changed,s=t.cancel;if(!a.options.swap)return;var l=this.sortable.el,u=this.options;if(n&&n!==l){var c=jt;if(false!==i(n)){D(n,u.swapClass,true);jt=n}else jt=null;c&&c!==jt&&D(c,u.swapClass,false)}o();r(true);s()},drop:function e(t){var r=t.activeSortable,n=t.putSortable,i=t.dragEl;var a=n||this.sortable;var o=this.options;jt&&D(jt,o.swapClass,false);if(jt&&(o.swap||n&&n.options.swap)&&i!==jt){a.captureAnimationState();a!==r&&r.captureAnimationState();Lt(i,jt);a.animateAll();a!==r&&r.animateAll()}},nulling:function e(){jt=null}};return s(e,{pluginName:"swap",eventProperties:function e(){return{swapItem:jt}}})}function Lt(e,t){var r=e.parentNode,n=t.parentNode,i,a;if(!r||!n||r.isEqualNode(t)||n.isEqualNode(e))return;i=B(e);a=B(t);r.isEqualNode(n)&&i<a&&a++;r.insertBefore(t,r.children[i]);n.insertBefore(e,n.children[a])}var Rt=[],It=[],Mt,xt,Nt=false,Ft=false,Vt=false,Bt,Wt,Gt;function qt(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"===typeof this[t]&&(this[t]=this[t].bind(this));if(!e.options.avoidImplicitDeselect)if(e.options.supportPointer)k(document,"pointerup",this._deselectMultiDrag);else{k(document,"mouseup",this._deselectMultiDrag);k(document,"touchend",this._deselectMultiDrag)}k(document,"keydown",this._checkKeyDown);k(document,"keyup",this._checkKeyUp);this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:false,setData:function t(r,n){var i="";Rt.length&&xt===e?Rt.forEach((function(e,t){i+=(t?", ":"")+e.textContent})):i=n.textContent;r.setData("Text",i)}}}e.prototype={multiDragKeyDown:false,isMultiDrag:false,delayStartGlobal:function e(t){var r=t.dragEl;Bt=r},delayEnded:function e(){this.isMultiDrag=~Rt.indexOf(Bt)},setupClone:function e(t){var r=t.sortable,n=t.cancel;if(!this.isMultiDrag)return;for(var i=0;i<Rt.length;i++){It.push(Y(Rt[i]));It[i].sortableIndex=Rt[i].sortableIndex;It[i].draggable=false;It[i].style["will-change"]="";D(It[i],this.options.selectedClass,false);Rt[i]===Bt&&D(It[i],this.options.chosenClass,false)}r._hideClone();n()},clone:function e(t){var r=t.sortable,n=t.rootEl,i=t.dispatchSortableEvent,a=t.cancel;if(!this.isMultiDrag)return;if(!this.options.removeCloneOnHide&&Rt.length&&xt===r){Ht(true,n);i("clone");a()}},showClone:function e(t){var r=t.cloneNowShown,n=t.rootEl,i=t.cancel;if(!this.isMultiDrag)return;Ht(false,n);It.forEach((function(e){L(e,"display","")}));r();Gt=false;i()},hideClone:function e(t){var r=this;var n=t.sortable,i=t.cloneNowHidden,a=t.cancel;if(!this.isMultiDrag)return;It.forEach((function(e){L(e,"display","none");r.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)}));i();Gt=true;a()},dragStartGlobal:function e(t){var r=t.sortable;!this.isMultiDrag&&xt&&xt.multiDrag._deselectMultiDrag();Rt.forEach((function(e){e.sortableIndex=B(e)}));Rt=Rt.sort((function(e,t){return e.sortableIndex-t.sortableIndex}));Vt=true},dragStarted:function e(t){var r=this;var n=t.sortable;if(!this.isMultiDrag)return;if(this.options.sort){n.captureAnimationState();if(this.options.animation){Rt.forEach((function(e){if(e===Bt)return;L(e,"position","absolute")}));var i=x(Bt,false,true,true);Rt.forEach((function(e){if(e===Bt)return;X(e,i)}));Ft=true;Nt=true}}n.animateAll((function(){Ft=false;Nt=false;r.options.animation&&Rt.forEach((function(e){J(e)}));r.options.sort&&zt()}))},dragOver:function e(t){var r=t.target,n=t.completed,i=t.cancel;if(Ft&&~Rt.indexOf(r)){n(false);i()}},revert:function e(t){var r=t.fromSortable,n=t.rootEl,i=t.sortable,a=t.dragRect;if(Rt.length>1){Rt.forEach((function(e){i.addAnimationState({target:e,rect:Ft?x(e):a});J(e);e.fromRect=a;r.removeAnimationState(e)}));Ft=false;Ut(!this.options.removeCloneOnHide,n)}},dragOverCompleted:function e(t){var r=t.sortable,n=t.isOwner,i=t.insertion,a=t.activeSortable,o=t.parentEl,s=t.putSortable;var l=this.options;if(i){n&&a._hideClone();Nt=false;if(l.animation&&Rt.length>1&&(Ft||!n&&!a.options.sort&&!s)){var u=x(Bt,false,true,true);Rt.forEach((function(e){if(e===Bt)return;X(e,u);o.appendChild(e)}));Ft=true}if(!n){Ft||zt();if(Rt.length>1){var c=Gt;a._showClone(r);a.options.animation&&!Gt&&c&&It.forEach((function(e){a.addAnimationState({target:e,rect:Wt});e.fromRect=Wt;e.thisAnimationDuration=null}))}else a._showClone(r)}}},dragOverAnimationCapture:function e(t){var r=t.dragRect,n=t.isOwner,i=t.activeSortable;Rt.forEach((function(e){e.thisAnimationDuration=null}));if(i.options.animation&&!n&&i.multiDrag.isMultiDrag){Wt=s({},r);var a=R(Bt,true);Wt.top-=a.f;Wt.left-=a.e}},dragOverAnimationComplete:function e(){if(Ft){Ft=false;zt()}},drop:function e(t){var r=t.originalEvent,n=t.rootEl,i=t.parentEl,a=t.sortable,o=t.dispatchSortableEvent,s=t.oldIndex,l=t.putSortable;var u=l||this.sortable;if(!r)return;var c=this.options,d=i.children;if(!Vt){c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag();D(Bt,c.selectedClass,!~Rt.indexOf(Bt));if(~Rt.indexOf(Bt)){Rt.splice(Rt.indexOf(Bt),1);Mt=null;oe({sortable:a,rootEl:n,name:"deselect",targetEl:Bt,originalEvent:r})}else{Rt.push(Bt);oe({sortable:a,rootEl:n,name:"select",targetEl:Bt,originalEvent:r});if(r.shiftKey&&Mt&&a.el.contains(Mt)){var f=B(Mt),p=B(Bt);if(~f&&~p&&f!==p){var g,h;if(p>f){h=f;g=p}else{h=p;g=f+1}for(;h<g;h++){if(~Rt.indexOf(d[h]))continue;D(d[h],c.selectedClass,true);Rt.push(d[h]);oe({sortable:a,rootEl:n,name:"select",targetEl:d[h],originalEvent:r})}}}else Mt=Bt;xt=u}}if(Vt&&this.isMultiDrag){Ft=false;if((i[Q].options.sort||i!==n)&&Rt.length>1){var v=x(Bt),m=B(Bt,":not(."+this.options.selectedClass+")");!Nt&&c.animation&&(Bt.thisAnimationDuration=null);u.captureAnimationState();if(!Nt){if(c.animation){Bt.fromRect=v;Rt.forEach((function(e){e.thisAnimationDuration=null;if(e!==Bt){var t=Ft?x(e):v;e.fromRect=t;u.addAnimationState({target:e,rect:t})}}))}zt();Rt.forEach((function(e){d[m]?i.insertBefore(e,d[m]):i.appendChild(e);m++}));if(s===B(Bt)){var y=false;Rt.forEach((function(e){if(e.sortableIndex!==B(e)){y=true;return}}));y&&o("update")}}Rt.forEach((function(e){J(e)}));u.animateAll()}xt=u}(n===i||l&&"clone"!==l.lastPutMode)&&It.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))},nullingGlobal:function e(){this.isMultiDrag=Vt=false;It.length=0},destroyGlobal:function e(){this._deselectMultiDrag();C(document,"pointerup",this._deselectMultiDrag);C(document,"mouseup",this._deselectMultiDrag);C(document,"touchend",this._deselectMultiDrag);C(document,"keydown",this._checkKeyDown);C(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function e(t){if("undefined"!==typeof Vt&&Vt)return;if(xt!==this.sortable)return;if(t&&T(t.target,this.options.draggable,this.sortable.el,false))return;if(t&&0!==t.button)return;while(Rt.length){var r=Rt[0];D(r,this.options.selectedClass,false);Rt.shift();oe({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r,originalEvent:t})}},_checkKeyDown:function e(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=true)},_checkKeyUp:function e(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=false)}};return s(e,{pluginName:"multiDrag",utils:{select:function e(t){var r=t.parentNode[Q];if(!r||!r.options.multiDrag||~Rt.indexOf(t))return;if(xt&&xt!==r){xt.multiDrag._deselectMultiDrag();xt=r}D(t,r.options.selectedClass,true);Rt.push(t)},deselect:function e(t){var r=t.parentNode[Q],n=Rt.indexOf(t);if(!r||!r.options.multiDrag||!~n)return;D(t,r.options.selectedClass,false);Rt.splice(n,1)}},eventProperties:function e(){var t=this;var r=[],n=[];Rt.forEach((function(e){r.push({multiDragElement:e,index:e.sortableIndex});var i;i=Ft&&e!==Bt?-1:Ft?B(e,":not(."+t.options.selectedClass+")"):B(e);n.push({multiDragElement:e,index:i})}));return{items:c(Rt),clones:[].concat(It),oldIndicies:r,newIndicies:n}},optionListeners:{multiDragKey:function e(t){t=t.toLowerCase();"ctrl"===t?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1));return t}}})}function Ut(e,t){Rt.forEach((function(r,n){var i=t.children[r.sortableIndex+(e?Number(n):0)];i?t.insertBefore(r,i):t.appendChild(r)}))}function Ht(e,t){It.forEach((function(r,n){var i=t.children[r.sortableIndex+(e?Number(n):0)];i?t.insertBefore(r,i):t.appendChild(r)}))}function zt(){Rt.forEach((function(e){if(e===Bt)return;e.parentNode&&e.parentNode.removeChild(e)}))}rt.mount(new Pt);rt.mount(Tt,At);const $t=rt},61061:(e,t,r)=>{var n;(function(i){var a=/^\s+/,o=/\s+$/,s=0,l=i.round,u=i.min,c=i.max,d=i.random;function f(e,t){e=e||"";t=t||{};if(e instanceof f)return e;if(!(this instanceof f))return new f(e,t);var r=p(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=l(100*this._a)/100,this._format=t.format||r.format;this._gradientType=t.gradientType;this._r<1&&(this._r=l(this._r));this._g<1&&(this._g=l(this._g));this._b<1&&(this._b=l(this._b));this._ok=r.ok;this._tc_id=s++}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e=this.toRgb();var t,r,n,a,o,s;t=e.r/255;r=e.g/255;n=e.b/255;a=t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4);o=r<=.03928?r/12.92:i.pow((r+.055)/1.055,2.4);s=n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4);return.2126*a+.7152*o+.0722*s},setAlpha:function(e){this._a=F(e);this._roundA=l(100*this._a)/100;return this},toHsv:function(){var e=m(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=m(this._r,this._g,this._b);var t=l(360*e.h),r=l(100*e.s),n=l(100*e.v);return 1==this._a?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=h(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=h(this._r,this._g,this._b);var t=l(360*e.h),r=l(100*e.s),n=l(100*e.l);return 1==this._a?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return b(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return w(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*V(this._r,255))+"%",g:l(100*V(this._g,255))+"%",b:l(100*V(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*V(this._r,255))+"%, "+l(100*V(this._g,255))+"%, "+l(100*V(this._b,255))+"%)":"rgba("+l(100*V(this._r,255))+"%, "+l(100*V(this._g,255))+"%, "+l(100*V(this._b,255))+"%, "+this._roundA+")"},toName:function(){if(0===this._a)return"transparent";if(this._a<1)return false;return x[b(this._r,this._g,this._b,true)]||false},toFilter:function(e){var t="#"+_(this._r,this._g,this._b,this._a);var r=t;var n=this._gradientType?"GradientType = 1, ":"";if(e){var i=f(e);r="#"+_(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=false;var n=this._a<1&&this._a>=0;var i=!t&&n&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e);if(i){if("name"===e&&0===this._a)return this.toName();return this.toRgbString()}"rgb"===e&&(r=this.toRgbString());"prgb"===e&&(r=this.toPercentageRgbString());"hex"!==e&&"hex6"!==e||(r=this.toHexString());"hex3"===e&&(r=this.toHexString(true));"hex4"===e&&(r=this.toHex8String(true));"hex8"===e&&(r=this.toHex8String());"name"===e&&(r=this.toName());"hsl"===e&&(r=this.toHslString());"hsv"===e&&(r=this.toHsvString());return r||this.toHexString()},clone:function(){return f(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));this._r=r._r;this._g=r._g;this._b=r._b;this.setAlpha(r._a);return this},lighten:function(){return this._applyModification(k,arguments)},brighten:function(){return this._applyModification(C,arguments)},darken:function(){return this._applyModification(O,arguments)},desaturate:function(){return this._applyModification(S,arguments)},saturate:function(){return this._applyModification(P,arguments)},greyscale:function(){return this._applyModification(E,arguments)},spin:function(){return this._applyModification(A,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(R,arguments)},complement:function(){return this._applyCombination(T,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(L,arguments)},triad:function(){return this._applyCombination(j,arguments)},tetrad:function(){return this._applyCombination(D,arguments)}};f.fromRatio=function(e,t){if("object"==typeof e){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]="a"===n?e[n]:H(e[n]));e=r}return f(e,t)};function p(e){var t={r:0,g:0,b:0};var r=1;var n=null;var i=null;var a=null;var o=false;var s=false;"string"==typeof e&&(e=Y(e));if("object"==typeof e){if(Z(e.r)&&Z(e.g)&&Z(e.b)){t=g(e.r,e.g,e.b);o=true;s="%"===String(e.r).substr(-1)?"prgb":"rgb"}else if(Z(e.h)&&Z(e.s)&&Z(e.v)){n=H(e.s);i=H(e.v);t=y(e.h,n,i);o=true;s="hsv"}else if(Z(e.h)&&Z(e.s)&&Z(e.l)){n=H(e.s);a=H(e.l);t=v(e.h,n,a);o=true;s="hsl"}e.hasOwnProperty("a")&&(r=e.a)}r=F(r);return{ok:o,format:e.format||s,r:u(255,c(t.r,0)),g:u(255,c(t.g,0)),b:u(255,c(t.b,0)),a:r}}function g(e,t,r){return{r:255*V(e,255),g:255*V(t,255),b:255*V(r,255)}}function h(e,t,r){e=V(e,255);t=V(t,255);r=V(r,255);var n=c(e,t,r),i=u(e,t,r);var a,o,s=(n+i)/2;if(n==i)a=o=0;else{var l=n-i;o=s>.5?l/(2-n-i):l/(n+i);switch(n){case e:a=(t-r)/l+(t<r?6:0);break;case t:a=(r-e)/l+2;break;case r:a=(e-t)/l+4;break}a/=6}return{h:a,s:o,l:s}}function v(e,t,r){var n,i,a;e=V(e,360);t=V(t,100);r=V(r,100);function o(e,t,r){r<0&&(r+=1);r>1&&(r-=1);if(r<1/6)return e+6*(t-e)*r;if(r<.5)return t;if(r<2/3)return e+(t-e)*(2/3-r)*6;return e}if(0===t)n=i=a=r;else{var s=r<.5?r*(1+t):r+t-r*t;var l=2*r-s;n=o(l,s,e+1/3);i=o(l,s,e);a=o(l,s,e-1/3)}return{r:255*n,g:255*i,b:255*a}}function m(e,t,r){e=V(e,255);t=V(t,255);r=V(r,255);var n=c(e,t,r),i=u(e,t,r);var a,o,s=n;var l=n-i;o=0===n?0:l/n;if(n==i)a=0;else{switch(n){case e:a=(t-r)/l+(t<r?6:0);break;case t:a=(r-e)/l+2;break;case r:a=(e-t)/l+4;break}a/=6}return{h:a,s:o,v:s}}function y(e,t,r){e=6*V(e,360);t=V(t,100);r=V(r,100);var n=i.floor(e),a=e-n,o=r*(1-t),s=r*(1-a*t),l=r*(1-(1-a)*t),u=n%6,c=[r,s,o,o,l,r][u],d=[l,r,r,s,o,o][u],f=[o,o,l,r,r,s][u];return{r:255*c,g:255*d,b:255*f}}function b(e,t,r,n){var i=[U(l(e).toString(16)),U(l(t).toString(16)),U(l(r).toString(16))];if(n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1))return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0);return i.join("")}function w(e,t,r,n,i){var a=[U(l(e).toString(16)),U(l(t).toString(16)),U(l(r).toString(16)),U(z(n))];if(i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}function _(e,t,r,n){var i=[U(z(n)),U(l(e).toString(16)),U(l(t).toString(16)),U(l(r).toString(16))];return i.join("")}f.equals=function(e,t){if(!e||!t)return false;return f(e).toRgbString()==f(t).toRgbString()};f.random=function(){return f.fromRatio({r:d(),g:d(),b:d()})};function S(e,t){t=0===t?0:t||10;var r=f(e).toHsl();r.s-=t/100;r.s=B(r.s);return f(r)}function P(e,t){t=0===t?0:t||10;var r=f(e).toHsl();r.s+=t/100;r.s=B(r.s);return f(r)}function E(e){return f(e).desaturate(100)}function k(e,t){t=0===t?0:t||10;var r=f(e).toHsl();r.l+=t/100;r.l=B(r.l);return f(r)}function C(e,t){t=0===t?0:t||10;var r=f(e).toRgb();r.r=c(0,u(255,r.r-l(-t/100*255)));r.g=c(0,u(255,r.g-l(-t/100*255)));r.b=c(0,u(255,r.b-l(-t/100*255)));return f(r)}function O(e,t){t=0===t?0:t||10;var r=f(e).toHsl();r.l-=t/100;r.l=B(r.l);return f(r)}function A(e,t){var r=f(e).toHsl();var n=(r.h+t)%360;r.h=n<0?360+n:n;return f(r)}function T(e){var t=f(e).toHsl();t.h=(t.h+180)%360;return f(t)}function j(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+120)%360,s:t.s,l:t.l}),f({h:(r+240)%360,s:t.s,l:t.l})]}function D(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+90)%360,s:t.s,l:t.l}),f({h:(r+180)%360,s:t.s,l:t.l}),f({h:(r+270)%360,s:t.s,l:t.l})]}function L(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+72)%360,s:t.s,l:t.l}),f({h:(r+216)%360,s:t.s,l:t.l})]}function R(e,t,r){t=t||6;r=r||30;var n=f(e).toHsl();var i=360/r;var a=[f(e)];for(n.h=(n.h-(i*t>>1)+720)%360;--t;){n.h=(n.h+i)%360;a.push(f(n))}return a}function I(e,t){t=t||6;var r=f(e).toHsv();var n=r.h,i=r.s,a=r.v;var o=[];var s=1/t;while(t--){o.push(f({h:n,s:i,v:a}));a=(a+s)%1}return o}f.mix=function(e,t,r){r=0===r?0:r||50;var n=f(e).toRgb();var i=f(t).toRgb();var a=r/100;var o={r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a};return f(o)};f.readability=function(e,t){var r=f(e);var n=f(t);return(i.max(r.getLuminance(),n.getLuminance())+.05)/(i.min(r.getLuminance(),n.getLuminance())+.05)};f.isReadable=function(e,t,r){var n=f.readability(e,t);var i,a;a=false;i=X(r);switch(i.level+i.size){case"AAsmall":case"AAAlarge":a=n>=4.5;break;case"AAlarge":a=n>=3;break;case"AAAsmall":a=n>=7;break}return a};f.mostReadable=function(e,t,r){var n=null;var i=0;var a;var o,s,l;r=r||{};o=r.includeFallbackColors;s=r.level;l=r.size;for(var u=0;u<t.length;u++){a=f.readability(e,t[u]);if(a>i){i=a;n=f(t[u])}}if(f.isReadable(e,n,{level:s,size:l})||!o)return n;r.includeFallbackColors=false;return f.mostReadable(e,["#fff","#000"],r)};var M=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var x=f.hexNames=N(M);function N(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function F(e){e=parseFloat(e);(isNaN(e)||e<0||e>1)&&(e=1);return e}function V(e,t){G(e)&&(e="100%");var r=q(e);e=u(t,c(0,parseFloat(e)));r&&(e=parseInt(e*t,10)/100);if(i.abs(e-t)<1e-6)return 1;return e%t/parseFloat(t)}function B(e){return u(1,c(0,e))}function W(e){return parseInt(e,16)}function G(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function q(e){return"string"===typeof e&&-1!=e.indexOf("%")}function U(e){return 1==e.length?"0"+e:""+e}function H(e){e<=1&&(e=100*e+"%");return e}function z(e){return i.round(255*parseFloat(e)).toString(16)}function $(e){return W(e)/255}var K=function(){var e="[-\\+]?\\d+%?";var t="[-\\+]?\\d*\\.\\d+%?";var r="(?:"+t+")|(?:"+e+")";var n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";var i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Z(e){return!!K.CSS_UNIT.exec(e)}function Y(e){e=e.replace(a,"").replace(o,"").toLowerCase();var t=false;if(M[e]){e=M[e];t=true}else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var r;if(r=K.rgb.exec(e))return{r:r[1],g:r[2],b:r[3]};if(r=K.rgba.exec(e))return{r:r[1],g:r[2],b:r[3],a:r[4]};if(r=K.hsl.exec(e))return{h:r[1],s:r[2],l:r[3]};if(r=K.hsla.exec(e))return{h:r[1],s:r[2],l:r[3],a:r[4]};if(r=K.hsv.exec(e))return{h:r[1],s:r[2],v:r[3]};if(r=K.hsva.exec(e))return{h:r[1],s:r[2],v:r[3],a:r[4]};if(r=K.hex8.exec(e))return{r:W(r[1]),g:W(r[2]),b:W(r[3]),a:$(r[4]),format:t?"name":"hex8"};if(r=K.hex6.exec(e))return{r:W(r[1]),g:W(r[2]),b:W(r[3]),format:t?"name":"hex"};if(r=K.hex4.exec(e))return{r:W(r[1]+""+r[1]),g:W(r[2]+""+r[2]),b:W(r[3]+""+r[3]),a:$(r[4]+""+r[4]),format:t?"name":"hex8"};if(r=K.hex3.exec(e))return{r:W(r[1]+""+r[1]),g:W(r[2]+""+r[2]),b:W(r[3]+""+r[3]),format:t?"name":"hex"};return false}function X(e){var t,r;e=e||{level:"AA",size:"small"};t=(e.level||"AA").toUpperCase();r=(e.size||"small").toLowerCase();"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==r&&"large"!==r&&(r="small");return{level:t,size:r}}if(true,e.exports)e.exports=f;else{true;!(n=function(){return f}.call(t,r,t,e),void 0!==n&&(e.exports=n))}})(Math)},77229:(e,t,r)=>{"use strict";var n=r(79440);function i(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}var a="function"===typeof Object.is?Object.is:i,o=n.useState,s=n.useEffect,l=n.useLayoutEffect,u=n.useDebugValue;function c(e,t){var r=t(),n=o({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];l((function(){i.value=r;i.getSnapshot=t;d(i)&&a({inst:i})}),[e,r,t]);s((function(){d(i)&&a({inst:i});return e((function(){d(i)&&a({inst:i})}))}),[e]);u(r);return r}function d(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}function f(e,t){return t()}var p="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?f:c;t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:p},28864:(e,t,r)=>{"use strict";var n=r(79440),i=r(12556);function a(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}var o="function"===typeof Object.is?Object.is:a,s=i.useSyncExternalStore,l=n.useRef,u=n.useEffect,c=n.useMemo,d=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=l(null);if(null===a.current){var f={hasValue:!1,value:null};a.current=f}else f=a.current;a=c((function(){function e(e){if(!a){a=!0;s=e;e=n(e);if(void 0!==i&&f.hasValue){var t=f.value;if(i(t,e))return l=t}return l=e}t=l;if(o(s,e))return t;var r=n(e);if(void 0!==i&&i(t,r))return t;s=e;return l=r}var a=!1,s,l,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,r,n,i]);var p=s(e,a[0],a[1]);u((function(){f.hasValue=!0;f.value=p}),[p]);d(p);return p}},12556:(e,t,r)=>{"use strict";true;e.exports=r(77229)},5034:(e,t,r)=>{"use strict";true;e.exports=r(28864)},61586:e=>{"use strict";var t=Object.defineProperty;var r=Object.getOwnPropertyDescriptor;var n=Object.getOwnPropertyNames;var i=Object.prototype.hasOwnProperty;var a=(e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:true})};var o=(e,a,o,s)=>{if(a&&"object"===typeof a||"function"===typeof a)for(let l of n(a))i.call(e,l)||l===o||t(e,l,{get:()=>a[l],enumerable:!(s=r(a,l))||s.enumerable});return e};var s=e=>o(t({},"__esModule",{value:true}),e);var l={};a(l,{thunk:()=>c,withExtraArgument:()=>d});e.exports=s(l);function u(e){const t=({dispatch:t,getState:r})=>n=>i=>{if("function"===typeof i)return i(t,r,e);return n(i)};return t}var c=u();var d=u;0},7768:e=>{"use strict";var t=Object.defineProperty;var r=Object.getOwnPropertyDescriptor;var n=Object.getOwnPropertyNames;var i=Object.prototype.hasOwnProperty;var a=(e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:true})};var o=(e,a,o,s)=>{if(a&&"object"===typeof a||"function"===typeof a)for(let l of n(a))i.call(e,l)||l===o||t(e,l,{get:()=>a[l],enumerable:!(s=r(a,l))||s.enumerable});return e};var s=e=>o(t({},"__esModule",{value:true}),e);var l={};a(l,{__DO_NOT_USE__ActionTypes:()=>g,applyMiddleware:()=>j,bindActionCreators:()=>A,combineReducers:()=>C,compose:()=>T,createStore:()=>_,isAction:()=>D,isPlainObject:()=>h,legacy_createStore:()=>S});e.exports=s(l);function u(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var c=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")();var d=c;var f=()=>Math.random().toString(36).substring(7).split("").join(".");var p={INIT:`@@redux/INIT${f()}`,REPLACE:`@@redux/REPLACE${f()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${f()}`};var g=p;function h(e){if("object"!==typeof e||null===e)return false;let t=e;while(null!==Object.getPrototypeOf(t))t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function v(e){if(void 0===e)return"undefined";if(null===e)return"null";const t=typeof e;switch(t){case"boolean":case"string":case"number":case"symbol":case"function":return t}if(Array.isArray(e))return"array";if(b(e))return"date";if(y(e))return"error";const r=m(e);switch(r){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return r}return Object.prototype.toString.call(e).slice(8,-1).toLowerCase().replace(/\s/g,"")}function m(e){return"function"===typeof e.constructor?e.constructor.name:null}function y(e){return e instanceof Error||"string"===typeof e.message&&e.constructor&&"number"===typeof e.constructor.stackTraceLimit}function b(e){if(e instanceof Date)return true;return"function"===typeof e.toDateString&&"function"===typeof e.getDate&&"function"===typeof e.setDate}function w(e){let t=typeof e;false;return t}function _(e,t,r){if("function"!==typeof e)throw new Error(u(2));if("function"===typeof t&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error(u(0));if("function"===typeof t&&"undefined"===typeof r){r=t;t=void 0}if("undefined"!==typeof r){if("function"!==typeof r)throw new Error(u(1));return r(_)(e,t)}let n=e;let i=t;let a=new Map;let o=a;let s=0;let l=false;function c(){if(o===a){o=new Map;a.forEach(((e,t)=>{o.set(t,e)}))}}function f(){if(l)throw new Error(u(3));return i}function p(e){if("function"!==typeof e)throw new Error(u(4));if(l)throw new Error(u(5));let t=true;c();const r=s++;o.set(r,e);return function e(){if(!t)return;if(l)throw new Error(u(6));t=false;c();o.delete(r);a=null}}function v(e){if(!h(e))throw new Error(u(7));if("undefined"===typeof e.type)throw new Error(u(8));if("string"!==typeof e.type)throw new Error(u(17));if(l)throw new Error(u(9));try{l=true;i=n(i,e)}finally{l=false}const t=a=o;t.forEach((e=>{e()}));return e}function m(e){if("function"!==typeof e)throw new Error(u(10));n=e;v({type:g.REPLACE})}function y(){const e=p;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(u(11));function r(){const e=t;e.next&&e.next(f())}r();const n=e(r);return{unsubscribe:n}},[d](){return this}}}v({type:g.INIT});const b={dispatch:v,subscribe:p,getState:f,replaceReducer:m,[d]:y};return b}function S(e,t,r){return _(e,t,r)}function P(e){"undefined"!==typeof console&&"function"===typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}function E(e,t,r,n){const i=Object.keys(t);const a=r&&r.type===g.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(0===i.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!h(e))return`The ${a} has unexpected type of "${w(e)}". Expected argument to be an object with the following keys: "${i.join('", "')}"`;const o=Object.keys(e).filter((e=>!t.hasOwnProperty(e)&&!n[e]));o.forEach((e=>{n[e]=true}));if(r&&r.type===g.REPLACE)return;if(o.length>0)return`Unexpected ${o.length>1?"keys":"key"} "${o.join('", "')}" found in ${a}. Expected to find one of the known reducer keys instead: "${i.join('", "')}". Unexpected keys will be ignored.`}function k(e){Object.keys(e).forEach((t=>{const r=e[t];const n=r(void 0,{type:g.INIT});if("undefined"===typeof n)throw new Error(u(12));if("undefined"===typeof r(void 0,{type:g.PROBE_UNKNOWN_ACTION()}))throw new Error(u(13))}))}function C(e){const t=Object.keys(e);const r={};for(let n=0;n<t.length;n++){const i=t[n];false;"function"===typeof e[i]&&(r[i]=e[i])}const n=Object.keys(r);let i;false;let a;try{k(r)}catch(e){a=e}return function e(t={},i){if(a)throw a;false;let o=false;const s={};for(let e=0;e<n.length;e++){const a=n[e];const l=r[a];const c=t[a];const d=l(c,i);if("undefined"===typeof d){const e=i&&i.type;throw new Error(u(14))}s[a]=d;o=o||d!==c}o=o||n.length!==Object.keys(t).length;return o?s:t}}function O(e,t){return function(...r){return t(e.apply(this,r))}}function A(e,t){if("function"===typeof e)return O(e,t);if("object"!==typeof e||null===e)throw new Error(u(16));const r={};for(const n in e){const i=e[n];"function"===typeof i&&(r[n]=O(i,t))}return r}function T(...e){if(0===e.length)return e=>e;if(1===e.length)return e[0];return e.reduce(((e,t)=>(...r)=>e(t(...r))))}function j(...e){return t=>(r,n)=>{const i=t(r,n);let a=()=>{throw new Error(u(15))};const o={getState:i.getState,dispatch:(e,...t)=>a(e,...t)};const s=e.map((e=>e(o)));a=T(...s)(i.dispatch);return{...i,dispatch:a}}}function D(e){return h(e)&&"type"in e&&"string"===typeof e.type}0}};var t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={id:n,loaded:false,exports:{}};e[n].call(a.exports,a,a.exports,r);a.loaded=true;return a.exports}(()=>{r.amdO={}})();(()=>{r.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;r.d(t,{a:t});return t}})();(()=>{r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:true,get:t[n]})}})();(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})();(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();(()=>{r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:true})}})();(()=>{r.nmd=e=>{e.paths=[];e.children||(e.children=[]);return e}})();var n={};(()=>{"use strict";r(93676);var e=t(r(48306));function t(e){return e&&e.__esModule?e:{default:e}}e["default"]._babelPolyfill&&"undefined"!==typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning.");e["default"]._babelPolyfill=true})();(()=>{"use strict";var e=i(r(3351));var t=i(r(65407));var n=i(r(7874));function i(e){return e&&e.__esModule?e:{default:e}}window.Site={load:function e(){this._initialiseWidgets();this._initialiseLanguageSelector();Server.ecwidStoreId&&this._initialiseEcwid()},_initialiseWidgets:function r(){var n=(0,t.default)();n.forEach((function(t){e.default.WidgetFactory.build(t)}))},_initialiseLanguageSelector:function t(){if(Server.isFullVersionTenSite)return;var r=e.default.languageMenuRendererFactory.build(document.body);r.display()},_initialiseEcwid:function e(){n.default.addEcwidScript()}}})()})();